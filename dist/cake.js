(()=>{var A=(a,n)=>()=>(n||a((n={exports:{}}).exports,n),n.exports);var I=A(()=>{(function(a){a.env={destructure:!0};let n=a.env;try{let{a:e}={a:!0}}catch{n.destructure=!1}Promise.prototype.ObjectType="Promise"})(window)});var N=A(()=>{Object.keys||(Object.keys=function(a){var n=[];for(var e in a)a.hasOwnProperty(e)&&n.push(e);return n})});var M=A(()=>{(function(a){let n={typeof:function(t){switch(!0){case typeof t=="string":return"string";case typeof t=="number":return"number";case t instanceof Array:return"array";case t instanceof Function:return"function";case t instanceof HTMLCollection:return"htmlcollection";case t instanceof NodeList:return"htmlnodelist";case t instanceof Element:return"domlement";case t instanceof Object:return"object"}},isArray:function(t){return this.typeof(t)=="array"},isObject:function(t){return this.typeof(t)=="object"},isNumber:function(t){return this.typeof(t)=="number"},isString:function(t){return this.typeof(t)=="string"},isHTMLCollection:function(t){return this.typeof(t)=="htmlcollection"},isNodeList:function(t){return this.typeof(t)=="htmlnodelist"},isElement:function(t){return this.typeof(t)=="domlement"},isFunction:function(t){return this.typeof(t)=="function"}},e={each:function(t,r,s){if(s=="object"){let c=0;for(let u in t)t.hasOwnProperty(u)&&(r({key:u,value:t[u]},c),c=c+1)}else for(let c=0;c<t.length;c++)r(t[c],c)},map:function(t,r){let s=n.isArray(t)||t.length?"array":"object",c=t.length&&s=="array"?[]:{};return this.each(t,function(u,f){let p=r(u,f);s=="object"?c[p.key]=p.value:c.push(p)},s),c},reduce:function(t,r,s){let c=n.typeof(t);return this.each(t,function(u,f){r=s(u,r,f)},c),r},filter:function(t,r){let s=n.isArray(t)||t.length?"array":"object",c=t.length&&s=="array"?[]:{};return this.each(t,function(u,f){r(u,f)&&(s=="object"?c[u.key]=u.value:c.push(u.value))},s),c}},i={perf:function(t){console.time("test"),t(),console.timeEnd("test")}};try{a.UTILS={...e,...n,...i}}catch{a.UTILS={};let r=e.each;r(e,function(s,c){a.UTILS[s]=c}),r(n,function(s,c){a.UTILS[s]=c}),r(i,function(s,c){a.UTILS[s]=c})}})(window)});var H=A(()=>{function C(){this.uiid=0,this.notify=[],this.st={},this.cacheStatic=[],this.store=new StorageKit({child:"object",storage:"session",name:"_cake_component_cf"})}C.prototype._getConfig=function(a,n,e,i,t){if(e==null)return[];if(e==i&&a!="bind")return[];let r=`${a}-${n}-${t}`,s=Object.cache._getConfig;if(s||(s=Object.cache._getConfig={}),!s[r]){var c=t?this.st[t]&&this.st[t][a]||[]:(()=>{let u=[];for(let f in this.st)if(this.st.hasOwnProperty(f)){let p=this.st[f];if(p[a])for(let m=0;m<p[a].length;m++){let g=p[a][m];g.bind==n&&u.push({...g,component:f})}}return u})();s[r]=c}return s[r]};C.prototype._notifyToggle=function(a,n,e,i,t){t=t||document;let r=this._getConfig("toggle",a,n,e);if(!!r){t=t||document;for(let s=0;s<r.length;s++){let c=r[s];if(!c)continue;let{sel:u,bind:f,value:p,ops:m}=c,g=t.querySelector(`[data-toggle=${u}]`);p==e&&g&&g.classList.remove("is-active"),p==n&&g&&(g.classList.contains("is-active")&&g.classList.remove("is-active"),g&&g.classList.add("is-active"))}}};C.prototype._notifySwitch=function(a,n,e,i,t){t=t||document;let r=this._getConfig("switch",a,n,e,i);if(!r.length)return;let s={};for(let c=0;c<r.length;c++){let u=r[c],{bind:f,sel:p,map:m,cases:g}=u,b=t.querySelectorAll(`[data-switch-slot=${p}]`);for(let h=0;h<n.length;h++){let d=n[h],y=b[h],w=d[m];if(w!=null){let v=null;for(let S=0;S<g.length;S++)if(g[S].bind.includes(w)){v=g[S];break}if(v){let{_id:S,bind:O}=v,k=document.querySelector(`[data-case=${p}-${S}]`);if(k&&k.toString().includes("Element")){k=k.cloneNode(!0);let P=k.querySelectorAll("[data-for-auto=true]");for(let $=0;$<P.length;$++){let j=P[$];j.dataset.for=`${j.dataset.for}-active`}k.removeAttribute("data-case");let E=Cake.prototype.$templating(d,k,!1);if(k.dataset.if){let $=k.dataset.if,j=E.dataset.ifBind,q=u.component,{bind:L}=this.getWatchItemsBySel(q,"if",$);$&&(s[L]||(s[L]={}),s[L][j]=d)}E.classList.remove("cake-template"),y.replaceWith(E)}}}}}for(let c in s)s.hasOwnProperty(c)&&this._notifyIf(c,s[c])};C.prototype._notifyBind=function(a,n,e,i,t){t=t||document;let r=this._getConfig("bind",a,n,e,i);if(!!r.length)for(let s=0;s<r.length;s++){let c=r[s],{attr:u,bind:f,sel:p}=c,m=u.toHyphen();if(a==f){let g=t.querySelectorAll(`[data-bind=${p}]`);for(let b=0;b<g.length;b++){let h=g[b];u=="className"?e?n?h.classList.replace(e,n):h.classList.remove(e):h.classList.add(n):(h.setAttribute(m,n),h[u]=n)}}}};C.prototype._notifyFor=function(a,n,e,i,t){let r=this._getConfig("for",a,n,e,i);if(!r.length)return;let s=[];for(let c=0;c<r.length;c++){let{bind:u,sel:f,iter:p,ins:m,component:g}=r[c];t=t||document,g&&(t=Cake.Components[g].html);let b=t.querySelectorIncluded(`[data-for-template=${f}]`),h=b.cloneNode(!0);(()=>{let d=h&&h.querySelectorAll("[data-switch]");if(d&&d.length){let y=d.length,w=-1;for(;++w<y;){let v=d[w],S=v.parentElement,O=document.createElement("div");O.dataset.switchSlot=v.dataset.switch,S.replaceChild(O,v)}d=null}})(),(()=>{let d=h,y=-1;l=n.length,n=n.map(w=>{for(let v in w)w.hasOwnProperty(v)&&(w[`${p}.${v}`]=w[v]);return w}),n.forEach(w=>{let v=Cake.prototype.$templating(w,d,!1);v.style.removeProperty("display"),v.classList.remove("cake-template"),v.removeAttribute("data-for-template"),b.insertAdjacentElement("beforebegin",v);let S=v.querySelectorAll("[data-src]");if(S)for(let O=0;O<S.length;O++){let k=S[O];k.src=k.dataset.src,k.removeAttribute("data-src")}})})()}this._notifyForAuto({configs:r,newValue:n})};C.prototype._notifyForAuto=function(a){let{vItems:n,configs:e,newValue:i}=a;for(let t=0;t<e.length;t++){let r=e[t],s=r.children;if(!s)continue;let c=[];for(let u=0;u<s.length;u++){let f=s[u];if(!this.st[r.component])continue;let p=this.st[r.component].for.find(m=>m.sel==f);p&&c.push(new Promise(m=>{let{bind:g,sel:b,iter:h,ins:d}=p;setTimeout(()=>{let y=document.querySelectorAll(`[data-for=${b}-active]`);for(let w=0;w<y.length;w++){let v=y[w],S=v.dataset.forBindKey,O=v.dataset.forBindVal,k=i.find($=>$[S]==O),P=g.split(".")[g.split(".").length-1],E=k[P].length&&k[P].map($=>$ instanceof Object?$:{[h]:$});if(E)for(let $=0;$<E.length;$++){let j=E[$],q=v.cloneNode(!0),L=Cake.prototype.$templating(j,q,!1);L.style.removeProperty("display"),L.classList.remove("cake-template"),L.removeAttribute("data-for-template"),v.insertAdjacentElement("beforebegin",L)}v.parentElement.tagName=="SELECT"&&(v.parentElement.selectedIndex=0)}})}))}}};C.prototype._notifyForUpdate=function(a,n,e,i,t){t=t||document;let r=this._getConfig("forUpdate",a,n,e,i);if(!!r.length)for(let s=0;s<r.length;s++){let{bind:c,sel:u,iter:f,ins:p}=r[s];for(let m in n)if(n.hasOwnProperty(m)){let g=document.querySelectorAll(`[data-for-bind-val=${m}]`);for(let b=0;b<g.length;b++){let h=g[b],d=h.dataset.forBindVal;if(!h.dataset.forTemplate)h.remove();else{let y=h.cloneNode(!0);y.style.removeProperty("display"),y.classList.remove("cake-template");let w=n[d],v=-1;for(l=w.length;++v<l;){let S=w[v],O=Cake.prototype.$templating(S,y,!1);O.classList.remove("cake-template"),O.removeAttribute("data-for-template"),h.insertAdjacentElement("beforebegin",O),h.parentElement.tagName=="SELECT"&&(h.parentElement.selectedIndex=0)}}}}}};C.prototype._notifyClass=function(a,n,e,i,t){t=t||document;let r=this._getConfig("class",a,n,e,i);if(!r.length)return;let s=function(f,p,m){switch(!0){case p==">":return f>m;case p=="<":return f<m;case p=="===":return f===m;case p=="!==":return f!==m;case p=="==":return f==m;case p=="!=":return f!=m}return!1},c=function(f){return f.split(" ").join("")},u={};for(let f=0;f<r.length;f++){let p=r[f],{hasNegate:m,bind:g,testVal:b,className:h,ops:d,sel:y}=p;if(g=c(g),h=c(h),a==g){u[y]||(u[y]=t.querySelectorAll(`[data-class=${y}]:not(.cake-template)`));let w=u[y];for(let v=0;v<w.length;v++){let S=w[v],O=!1;d?(O=s(n,d,b),m&&(O=!O)):m&&(O=!n),O?S.classList.contains(h)||S.classList.add(h):S.classList.contains(h)&&S.classList.remove(h)}}}};C.prototype._notifyIf=function(a,n,e,i,t){t=t||document;let r=this._getConfig("if",a,n,e,i);if(!r.length)return;let s={};for(let c=0;c<r.length;c++){let u=r[c],{attr:f,bind:p,sel:m,testval:g,_true:b,_false:h}=u,d=f.toHyphen();if(a==p){s[m]||(s[m]=t.querySelectorAll(`[data-if=${m}]:not(.cake-template)`));let y=s[m];for(let w=0;w<y.length;w++){let v=y[w],S=v.dataset.ifBind,O=S?n[S]:n,k=O instanceof Object?O[p]:O,P=g==null?!!k:g==k;k==null?v.removeAttribute(d,k):P?b=="null"||(v.setAttribute(d,k),v[f]=k):h=="null"||(v.setAttribute(d,k),v[f]=k)}}}};C.prototype.notifier=function(a,n,e){let i=JSON.parse(JSON.stringify(n));return new Promise(t=>{this._notifyFor(a,i,e),t()}).then(()=>this._notifyForUpdate(a,i,e)).then(()=>this._notifySwitch(a,i,e)).then(()=>this._notifyToggle(a,i,e)).then(()=>this._notifyBind(a,i,e)).then(()=>this._notifyIf(a,i,e)).then(()=>this._notifyClass(a,i,e))};C.prototype.registerNotifier=function(a){this.notify.push(a)};C.prototype.getEventTarget=function(a){let n=`${a}`,e=Object.cache.getEventTarget;if(e||(e=Object.cache.getEventTarget={}),!e[n]){let i=this.st[a];e[n]=i&&(i?.evt??[])||[]}return e[n]};C.prototype.getWatchItems=function(a){let n=`${a}`,e=Object.cache.getWatchItems;if(e||(e=Object.cache.getWatchItems={}),!e[n]){let i=this.st[a]||{},t=new Set;for(let r in i)if(i.hasOwnProperty(r)){let s=i[r];for(let c=0;c<s.length;c++){let u=s[c],{bind:f}=u;if(f)t.add(f);else continue}}e[n]=[...t]}return e[n]};C.prototype.getWatchItemsByType=function(a,n){let e=`${a}-${n}`,i=Object.cache.getWatchItemsByType;if(i||(i=Object.cache.getWatchItemsByType={}),!i[e]){let r=(this.st[a]||{})[n]||[],s=new Set;for(let c=0;c<r.length;c++){let u=r[c],{bind:f}=u;switch(!!f){case!0:s.add(f);break;default:switch(!0){case(n=="animate"||n=="toggle"):(s.constructor.name="Set")&&(s=[]),s.push(u)}}}i[e]=[...s]}return i[e]};C.prototype.getWatchItemsBySel=function(a,n,e){let i=`${a}-${n}-${e}`,t=Object.cache.watchItemsBySel;if(t||(t=Object.cache.watchItemsBySel={}),!t[i]){let s=this.st[a][n].find(c=>c.sel==e);t[i]=s||!1}return t[i]};C.prototype._register=function(a,n,e,i){switch(!0){case!a[n]:a[n]={};case!a[n][e]:a[n][e]=[];default:a[n][e].push(i);break}};C.prototype._static=function(a){return function(n,e){let i=[];for(let t=0;t<n.length;t++){let r=n[t];switch(e){case!1:i.push(r);break;case!0:{let s=r.closest("[data-component]");switch(s=s&&s.dataset.component,s==a){case!0:i.push(r);break}}break;default:continue}}return i}};C.prototype._compileEvents=function(a,n,e){return new Promise(i=>{if(!a.length){i();return}let t=this._static(n)(a,e);if(!t.length){i();return}for(let r=0;r<t.length;r++){let s=`cke${this.uiid}`,c=t[r],u=c.dataset.event.split(" ").join("").split(",");for(let f=0;f<u.length;f++){let[p,m]=u[f].split(":");m=m||p,this._register(this.st,n,"evt",{event:p,sel:s,cb:m}),c.dataset.event=s,this.uiid++}}i()})};C.prototype._compileToggle=function(a,n,e){return new Promise(i=>{if(!a.length){i();return}if(!this._static(n)(a,e).length){i();return}let r={};for(let s=0;s<a.length;s++){let c=`ckt${this.uiid}`,u=a[s],f=u.dataset.toggle;r[f]&&(c=r[f]),this._register(this.st,n,"toggle",{sel:c,name:"ns-"+f}),u.dataset.toggle=c,this.uiid++,r[f]=c}r={},i()})};C.prototype._compileFor=function(a,n,e,i){return new Promise(t=>{let r=i;if(!a.length){t();return}let s=this._static(n)(a,e);if(!s.length){t();return}let c={};for(let u=0;u<s.length;u++){let f=`ckf${this.uiid}`,p=s[u],m=p.dataset.for,[g,b,h]=m.split(" ");if(p.style.display="none",p.classList.add("cake-template"),p.dataset.for=f,p.dataset.forTemplate=f,c[f]={bind:h,sel:f,iter:g,ins:b},++this.uiid,u!=0){let d=p.parentElement&&p.parentElement.closest("[data-for]");if(!d)continue;let y=!!d.dataset.for;if(r.contains(d)&&y){let w=d.dataset.for,v=c[w];v&&!v.children?v.children=[f]:v&&v.children.push(f)}}}for(let u in c)c.hasOwnProperty(u)&&this._register(this.st,n,"for",c[u]);t()})};C.prototype._compileForUpdate=function(a,n,e){return new Promise(i=>{if(!a.length){i();return}let t=this._static(n)(a,e);if(!t.length){i();return}for(let r=0;r<t.length;r++){let s=`ckfu${this.uiid}`,c=t[r],u=c.dataset.forUpdate;c.style.display="none",c.classList.add("cake-template"),c.dataset.forUpdate=s,c.dataset.for||(c.dataset.forTemplate=s);let[f,p,m]=u.split(" ");this._register(this.st,n,"forUpdate",{bind:m,sel:s,iter:f,ins:p}),this.uiid++}i()})};C.prototype._compileSwitch=function(a,n,e){return new Promise(i=>{if(!a.length){i();return}let t=this._static(n)(a,e);if(!t.length){i();return}for(let c=0;c<t.length;c++){let u=`cks${this.uiid}`,f=t[c],p=f.dataset.switch,m="def";if(p.includes(".")){var[r,...s]=f.dataset.switch.split(".");p=r,m=s[0]}f.dataset.switch=u;let g=f.querySelectorAll("[data-case]"),b=[];for(let h=0;h<g.length;h++){let d=g[h],y=d.closest(`[data-switch=${u}]`);if(d.classList.add("cake-template"),y){let w=d.dataset.case,v=`cksc${this.uiid}`;d.dataset.case=`${u}-${v}`,b.push({_id:v,bind:w}),this.uiid++}}this._register(this.st,n,"switch",{bind:p,sel:u,map:m,cases:b}),this.uiid++}i()})};C.prototype._compileBind=function(a,n,e){return new Promise(i=>{if(!a.length){i();return}let t=this._static(n)(a,e);if(!t.length){i();return}for(let c=0;c<t.length;c++){let u=`ckm${this.uiid}`,f=t[c],m=f.dataset.bind.split(",");for(let g=0;g<m.length;g++){let b=m[g].split(" ").join("");if(b.includes(":"))var[r,s]=b.split(":");else var s=b,r="value";this._register(this.st,n,"bind",{attr:r,bind:s,sel:u})}this.uiid++,f.dataset.bind=u}i()})};C.prototype._compileAnimate=function(a,n,e){return new Promise(i=>{if(!a.length){i();return}let t=this._static(n)(a,e);if(!t.length){i();return}for(let r=0;r<t.length;r++){let s=`cka${this.uiid}`,c=t[r],u=c.dataset.animate;u=u.split(" ").join("");let f={},p=u.split(",");for(let m=0;m<p.length;m++){let g=p[m],[b,h]=g.split(":");if(b=="ns"){f.ns=h;break}else f[b]={keyframes:h.split("-")}}f.selector={attr:"data-animate",val:s},this._register(this.st,n,"animate",f),this.uiid++,c.dataset.animate=s}i()})};C.prototype._compileIf=function(a,n,e){return new Promise(i=>{if(!a.length){i();return}let t=this._static(n)(a,e);if(!t.length){i();return}for(let r=0;r<t.length;r++){let s=`ci${this.uiid}`,c=t[r],f=c.dataset.if.split(",");for(let p=0;p<f.length;p++){let m=f[p].split(" ").join(""),[g,b]=m.split("=");b=b.split(new RegExp("[()]")).join("");let[h,d]=b.split("?"),[y,w]=h.split(new RegExp("<|>|===|==|!==|!=")),[v,S]=d.split(":");this._register(this.st,n,"if",{attr:g,bind:y,testval:w||null,_true:v,_false:S,sel:s})}this.uiid++,c.dataset.if=s}i()})};C.prototype._compileClass=function(a,n,e){return new Promise(i=>{if(!a.length){i();return}let t=this._static(n)(a,e);if(!t.length){i();return}for(let r=0;r<t.length;r++){let s=`cc${this.uiid}`,c=t[r],u=c.dataset.class,[f,p]=u.split("&&");f=f.trim();let[m,g,b]=f.split(" "),h=m.substring(0,1);h&&(m=m.slice(1)),this._register(this.st,n,"class",{hasNegate:h,bind:m,testVal:b,className:p,ops:g,sel:s}),this.uiid++,c.dataset.class=s}i()})};C.prototype.inject=function(a,n,e=!1){return new Promise(i=>{let t=a.getElementsByDataset("bind","for","for-update","switch","toggle","event","animate","if","class");i(t)}).then(i=>{let t=[],r={bind:this._compileBind,for:this._compileFor,"for-update":this._compileForUpdate,switch:this._compileSwitch,toggle:this._compileToggle,event:this._compileEvents,animate:this._compileAnimate,if:this._compileIf,class:this._compileClass};for(let s in i)i.hasOwnProperty(s)&&i[s].length&&t.push(r[s].apply(this,[i[s],n,e,a]));return console.timeEnd(n),t.length?Promise.all(t):Promise.resolve()}).then(()=>this.store.createOrUpdate(n,this.st[n]))}});var R=A(()=>{});var U=A(()=>{(function(a){function n(e,i){this.pKey=i.pKey||"$scope",this.temp={},this.trap=i.trap,this.notify=[],this.parent=e,this._clone={},this.whitelist=["extend","set","get"],this.install()}n.prototype.registerNotifier=function(e){this.notify.push(e)},n.prototype.notifier=function(e){Cake.$scope[e.bind]=e.value},n.prototype.method=function(){let e=this.temp,i=this.trap,t=this.notify,r=this.parent,s=this.whitelist;return{update(c,u){if(!!c.length)for(let f=0;f<c.length;f++){let p=c[f];u(p)}},defineProperty(c,u){Object.defineProperty(e,c,{configurable:!0,get(){let f=i.bind(r)(c)||!1;return f||u[c]},set(f){if(!s.includes(c)){let p=this[c];for(let m=0;m<t.length;m++)t[m](c,f,p);u[c]=f}}})}}},n.prototype.install=function(){let{update:e,defineProperty:i}=this.method(),t=this.temp,r=this._clone;Object.defineProperty(this.parent,this.pKey,{configurable:!0,get(){r=Object.assign(r,t);let s=Object.keys(t);return e(s,function(c){i(c,r)}),t}})},n.prototype.watch=function(e){if(!e)return;let{update:i,defineProperty:t}=this.method(),r=this._clone;return i(e,function(s){t(s,r)}),!0},n.prototype.set=function(e,i){if(this.whitelist.includes(e))return;let t=this._clone,r=this.notify||[],s=t[e];return t[e]=i,Promise.all(r.map(c=>c(e,i,s)))},a.Scope=n})(window)});var B=A(()=>{(function(a){function n(e,i,t){this.subscribe=e,this.handlers=i,this.logger=t||!1,this.stat={handlers:{},subscribe:{}},this.results={},this.wm=new WeakMap}n.prototype.notify=function(e,i,t,r,s,c){function u(){return{_component:e,_event:i,_e:t}}function f(d){return d}let{_component:p,_event:m,_e:g}=u(),b=this.handlers[p]&&this.handlers[p][m];if(b==null&&s){let d={[m]:function(){return g}};d[m].binded=p,d[m].listenTo=c,b=d[m]}if(p=b.binded,b=b,!b){console.error(`no setup handler for the event ${m} in ${p} component`);return}let h=new Promise((d,y)=>{let w=b(g);d(w)});return this.stat.handlers[b.original]+=1,h.then(d=>{let y=[];if(this.results[p]||(this.results[p]={}),this.subscribe[p]&&this.subscribe[p][m]){let w=this.subscribe[p][m];r=r?(()=>{w=w.filter(v=>{let S=v.binded;return r.includes(S)})})():!0;for(let v=0;v<w.length;v++){let S=w[v];this.stat.subscribe[S.original]+=1,y.push(new Promise((O,k)=>{try{let P=(()=>S(d))();P&&P.ObjectType=="Promise"?P.then(E=>{this.results[p]||(this.results[p]={}),this.results[p][m]=P,O()}).catch(E=>{k(E)}):(this.results[p][m]=P,O())}catch(P){console.log(P),k(P)}}))}}else this.logger&&console.info(`no subscriber for (${m}) event of (${p}) component`),this.results[p][m]=d;return Promise.all(y).then(()=>{d=null})})},n.prototype.registerSubscribe=function(e){new Promise((i,t)=>{for(component in e)if(e.hasOwnProperty(component))if(!this.subscribe[component])this.subscribe[component]={};else continue;i()}).then(()=>{let i={};for(component in e)if(e.hasOwnProperty(component)){let t=e[component];for(let r in t)if(t.hasOwnProperty(r)){let s=t[r];for(let c=0;c<s.length;c++){let u=s[c];i[component]||(i[component]={}),i[component][u.original]||(i[component][u.original]=[]),i[component][u.original].push(u),this.stat.subscribe[u.original]=0}}}return i}).then(i=>{for(let t in i)if(i.hasOwnProperty(t)){this.subscribe[t]||(this.subscribe[t]={});for(let r in i[t])if(i[t].hasOwnProperty(r))for(let s of i[t][r])this.subscribe[t][s.original]||(this.subscribe[t][s.original]=[]),this.subscribe[t][s.original].push(s)}i={},Object.assign(Cake.Subscribe,this.subscribe)})},n.prototype.registerHandlers=function(e,i){this.handlers[i]||(this.handlers[i]={});for(let t in e)if(e.hasOwnProperty(t)){let r=e[t];this.handlers[i][t]=r,this.stat.handlers[r.original]=0}},a.Observer=n})(window)});var F=A(()=>{});var D=A(()=>{});var W=A(()=>{(function(a){function n(e){this.el=n.toArray(e)}n.toArray=function(e){let i=[];switch(!0){case e instanceof Array:i=e;break;case(e.length&&e.tagName&&e.tagName!="FORM"&&!(e instanceof Array)):for(let t=0;t<e.length;t++)i.push(e[t]);break;case!(e instanceof Array):i=[e];break}return i},n.prototype.getElements=function(){return this.el},n.prototype.getElement=function(){return this.el[0]},n.prototype.remove=function(e){let i=-1,t=this.el.length,r=document.createDocumentFragment();for(;++i<t;){let s=this.el[i];s&&r.appendChild(s)}fr=null},n.prototype.replaceDataSrc=function(){let i=this.el[0].querySelectorAll("[data-src]");for(let t=0;t<i.length;t++)el=i[t],el.setAttribute("src",el.dataset.src),el.removeAttribute("data-src")},n.cloneNode=function(e){e=e instanceof Array?e:this.toArray(e);let i=[];for(let t=0;t<e.length;t++)i.push(e[t].cloneNode(!0));return new n(i)},n.prototype.dataset=function(e,i){let t=this.el.length,r=-1;for(;++r<t&&!(this.el[r].dataset[e]&&i(this.el[r])=="break"););return!0},n.prototype.getContainers=function(){return this.getElementsByDataset("container").container},n.prototype.cloneNode=function(e){return e=this.el,n.cloneNode(e)},n.prototype.getAllElements=function(){let e=this.el.length,i=[];switch(!0){case e==1:i=this.el[0].getElementsByTagName("*").toArray();break;case e>1:{let t=-1;for(;++t<e;){let s=this.el[t].getElementsByTagName("*");if(s)for(let c=0;c<s.length;c++)i.push(s[c])}}break}return i},n.prototype.appendTo=function(e,i){if(!e&&!e.attributes)throw new TypeError(`the ${e} is not an instance of Element`);i&&(e.innerHTML="");for(let t=0;t<this.el.length;t++){let r=this.el[t];e.appendChild(r)}},n.prototype.getElementsByTagName=function(e){let i=this.el.length,t=[];switch(!0){case i==1:t=this.el[0].getElementsByTagName(id).toArray();break;case i>1:{let r=-1;for(;++r<i;){let c=this.el[r].getElementsByTagName(selector);if(c)for(let u=0;u<c.length;u++)t.push(c[u])}}break}return t},n.prototype.getElementById=function(e){let i=this.el.length,t=[];switch(!0){case i==1:t=this.el[0].getElementById(id);break;case i>1:{let r=-1;for(;++r<i;){let c=this.el[r].querySelector(selector);c&&t.push(c)}}break}return t},n.prototype.querySelectorAll=function(e){let i=this.el.length,t=[];switch(!0){case i==1:t=this.el[0].querySelectorAll(e);break;case i>1:{let r=[],s=-1;for(;++s<i;){let u=this.el[s].querySelectorAll(e);u&&(t=t.concat(u.toArra()))}}break;default:t=[]}return t},n.prototype.querySelector=function(e){let i=this.el.length,t=[];switch(!0){case i==1:t=this.el[0].querySelector(e);break;case i>1:{let r=-1;for(;++r<i;){let c=this.el[r].querySelector(e);c&&t.push(c)}}break}return t},n.prototype.querySelectorIncluded=function(e,i,t){let r=this.el.length,s=[];switch(!0){case r==1:s=this.el[0].querySelectorIncluded(e,i,t);break;case r>1:{let c=-1;for(;++c<r;){let f=this.el[c].querySelectorIncluded(e,i,t);f&&s.push(f)}}break}return s},n.prototype.querySelectorAllIncluded=function(e,i,t){let r=this.el.length,s=[];switch(!0){case r==1:s=this.el[0].querySelectorAllIncluded(e,i,t);break;case r>1:{let c=-1;for(;++c<r;){let f=this.el[c].querySelectorAllIncluded(e,i,t);f&&(s=s.concat(f.toArra()))}}break}return s},n.prototype.contains=function(e){let i=this.el.length,t=!1;switch(i==1){case!0:t=this.el[0].contains(e);break;case!1:{let r=-1;for(;++r<i;)if(this.el[r].contains(e)){t=!0;break}}break}return t},n.prototype.getElementsByDataset=function(){let e,i,t,r,s,c;for(e=arguments,o={},length=e.length,t=-1,r=-1;++t<this.el.length;)for(s=this.el[t];++r<length;)i=e[r],s.getAttribute(`data-${i}`)?o[i]=[s]:o[i]=[],c=s.querySelectorAll(`[data-${i}]`),c.length&&(o[i]=o[i].concat([...c]));return o},a.Piece=n})(window)});var x=A(()=>{(function(a){HTMLCollection.prototype.toArray=function(){let n=[];for(let e=0;e<this.length;e++)n[e]=this[e];return n},NodeList.prototype.toArray=function(){let n=[],e=-1,i=this.length;for(;++e<i;)n[e]=this[e];return n},Object.cache=Object.create(null),String.prototype.toHyphen=function(){let n=Object.cache,e=null,i=this;if(n.toHyphen||(n.toHyphen={}),n[i]&&(e=n[i]),e!=null)return e;let t=i.split(""),r="",s=-1;for(;++s<t.length;){let c=t[s];switch(s){case 0:r+=c.toLowerCase();break;default:c.charCodeAt()<91&&(r+="-"),r+=c.toLowerCase()}}return n[i]=r,e=r,e},String.prototype.toCamelCase=function(){let n=this.toLowerCase(),e=Object.cache,i=null;switch(!0){case!e.toCamel:e.toCamel={};case!0:e=e.toCamel;case e[n]:i=e[n];break;default:{let t=n.split("-");if(t.length==1)return n;let r="",s=-1,c=t.length;for(;++s<c;){let u=t[s];switch(s){case 0:r+=u;default:{let f=u.substring(0,1).toUpperCase(),p=u.substring(1);r+=f+p}break}}e[n]=r,i=r}break}return i},HTMLElement.prototype.querySelectorIncluded=function(n,e,i){let t=this.querySelector(n);return t||(()=>{switch(!0){case(!e&&!i):{let r=this.closest(n);r==this&&(t=r)}break;case(!!e&&!!i):t=this.getAttribute(e)==i?this:null;break;case(!!e&&!i):t=this.getAttribute(e)?this:null;break}return t})()},HTMLElement.prototype.querySelectorAllIncluded=function(n,e,i){let t=this.querySelectorAll(n).toArray();switch(!0){case(!e&&!i):{let r=this.closest(n);r==this&&t.push(r)}break;case(e&&i):this.getAttribute(e)==i&&t.push(this);break;case(e&&!i):this.getAttribute(e)&&t.push(this);break}return t},HTMLDocument.prototype.querySelectorIncluded=function(n){return this.querySelector(n)},HTMLDocument.prototype.querySelectorAllIncluded=function(n){return this.querySelectorAll(n)},Array.prototype.toggler=function(n,e){for(let i=0;i<this.length;i++){let t=this[i];(t.dataset.name==n||t.classList.contains(e))&&t.classList.toggle(e)}},HTMLElement.prototype.Ref=function(){let n="_cakes_storage";!this[n]&&(this._cakes_storage={});let e=this[n];return{set(i,t){e[i]=t},get(i){return e[i]},getAll(i){return e},remove(i){delete e[i]}}}})(window)});var J=A(()=>{(function(a){function n(h){return h.constructor.name.toLowerCase()}function e(h,d){for(let y in h)h.hasOwnProperty(y)&&d(h[y],y)}function i(h,d,y){h=Object.assign(h,{[y]:d})}function t(h){return h===null}function r(h){return h===void 0}function s(h){return n(h)=="array"}function c(h){return n(h)=="object"}var u=function(h,d){for(var y=null,w=0;w<h.length;w++){var v=h[w];if(n(d)=="object"){var S=d,O=Object.keys(d)[0],k=S[O];if(n(v)=="object"){var P=v[O]==k;if(P){y=w;break}}}else if(n(d)!="array"){var P=d==v;if(P){y=w;break}}}return y},f=function(h,d){var y=null,w=n(d);if(w=="object"){var v=Object.keys(d)[0];h[y]!=null&&h[y]==d[v]&&(y=v)}else w=="string"&&(y=d);return y},p=function(h,d){var y=null;return n(h)=="array"?y=u(h,d):n(h)=="object"&&(y=f(h,d)),y},m={create:function(h,d){if(s(h)){let y=new Set(h);n(d)=="array"?d.forEach(w=>{y.add(w)}):y.add(d),h=Array.from(y)}else c(h)&&(c(d)?e(d,function(y,w){h[w]=y}):h[d]=d);return h},createOrUpdate:function(h,d){var y=p(h,d);return n(h)=="array"?t(y)?h.includes(d):h[y]=d:n(h)=="object"&&(t(y)?c(d)?e(d,function(w,v){i(h,w,v)}):h[d]=d:h[y]=d),h},remove:function(h,d){if(n(d)=="string"){var y=p(h,d);if(n(h)=="object")delete h[y];else if(n(h)=="array"){for(var w=[],v=0;v<h.length;v++)if(v!=y)w.push(h[v]);else continue;h=w}return h}else{if(n(d)=="object")return Object.filter(h,function(S,O){var k=d[O]!=null&&d[O]==S;return!k});if(n(d)=="array")return Object.filter(h,function(S,O){var k=d.contains(O);return!k})}if(t(y))return!1},get:function(h,d){var y=n(d);if(y=="string"){var w=p(h,d);if(w==0||w)return h[w]}else{if(y=="object")return Object.filter(h,function(v,S){var O=!r(d[S])&&d[S]==v;return O});if(y=="array")return Object.filter(h,function(v,S){var O=d.contains(S);return O})}return null},getNot:function(h,d){var y=n(d);return y=="string"?Object.filter(h,function(w,v){var S=v!=d;return S}):y=="object"?Object.filter(h,function(w,v){return Object.some(d,function(S,O){var k=O==v&&S==w;return!k})}):y=="array"?Object.filter(h,function(w,v){var S=!d.contains(v);return S}):null},getAll:function(h){return h}},g=class{constructor(h,d,y){this.type=h,this.name=d,this.child=y,this.cache={},n(this.child)=="string"&&(this.child=y=="array"?[]:y=="object"?{}:!1)}init(h){return this[this.type]?(this[this.type](h),!0):!1}open(){if(this.type=="session"){var h=JSON.parse(sessionStorage[this.name]);return h[this.name]}else if(this.type=="local"){var h=JSON.parse(localStorage[this.name]);return h[this.name]}else return this.cache[this.name]}close(h){return this.child=h,this.create(),this.init(!0)}create(){this.cache[this.name]=this.child}array(){this.create()}object(){this.create()}session(h){this.create();try{sessionStorage[this.name]?h&&sessionStorage.setItem(this.name,JSON.stringify(this.cache)):sessionStorage.setItem(this.name,JSON.stringify(this.cache))}catch{this.create()}}local(){this.create();try{localStorage.setItem(this.name,JSON.stringify(this.cache))}catch{this.create()}}},b=class{constructor(h){if(this.name=h.name,this.storageType=h.storage,this.child=h.child||"object",n(this.child)=="string"&&(this.child=this.child=="array"?[]:this.child=="object"?{}:null),!["array","object"].includes(n(this.child)))throw new Error("the child must be an object or array type.");this.storage=new g(this.storageType,this.name,this.child),this.storage.init()}has(h){var d=this.storage.open(),y=p(d,h);return t(y)?!1:y}get(h){var d=this.storage.open();return Promise.resolve(m.get(d,h))}getNot(h){var d=this.storage.open();return m.getNot(d,h)}getAll(){var h=this.storage.open();return Promise.resolve(h)}update(h,d){var y=this.storage.open(),w=p(y,h);return w==0||w?(y=m.createOrUpdate(y,data),this.storage.close(y)):!1}createOrUpdate(h){if(arguments.length>1){let y=arguments[0],w=arguments[1];h={[y]:w}}var d=this.storage.open();return d=m.createOrUpdate(d,h),this.storage.close(d)}create(h){var d=this.storage.open();return d=m.create(d,h),this.storage.close(d)}remove(h){var d=this.storage.open();return d=m.remove(d,h),this.storage.close(d)}};a.StorageKit=b})(window)});var K=A(()=>{(function(a,n){a.Formy=n()})(window,function(){function a(){let n=this;this.$form={},this.$form.options=(e,i)=>{let{options:t,params:r}=e;return t||(t=[]),Promise.all(t.map(c=>{let{control:u,field:f,tbl:p,src:m,schema:g}=c;return n.fire(m,{tbl:p,field:f,params:r}).then(b=>{b=b||[],c.query=b,b=b.map(d=>g(d));let h=g({});for(let d in h)h.hasOwnProperty(d)&&(h[d]="");return b.unshift(h),c.options=b,c})})).then(c=>i?c.reduce((u,f)=>{let{type:p,control:m}=f;return p||(p="select"),u[p]||(u[p]={}),u[p][m]||(u[p][m]=f),u},{}):c.reduce((u,f)=>(u[f.control]=f.options,u),{})).catch(c=>{console.error(c)})},this.$form.plot=e=>{let{data:i,container:t}=e;if(!i&&!t)return;let r=(s,c,u)=>{if(!s){console.info("root is not provided!");return}let f=s.querySelectorAll(`${c}`),p=f.length;if(!p){u(null,i);return}for(let m=0;m<p;m++){let g=f[m],b=g.name,h=i[b],d=u(g,h,m);if(d=="break")break;d!="continue"}};return r(t,"INPUT.input",function(s,c){c!=null&&(s.type=="date"&&(c=new Date(c)=="Invalid Date"?"":new Date(c).toJSON().split("T")[0]),s.value=c)}),setTimeout(()=>{r(t,"SELECT.input:not(.cake-template)",function(s,c){r(s,"OPTION:not(.cake-template)",function(u,f,p){if(u){if(u.value==c)return s.selectedIndex=p,"break"}else console.log(u,f,"provide schema")})})},500),Promise.resolve()}}return a})});var G=A(()=>{(function(){customElements.define("sub-template",class extends HTMLElement{constructor(){super()}connectedCallback(){this.replace(this)}replace(a){let n=a.dataset.template,e=document.getElementsByName(n);if(e.length>1){console.error(`template with name ${n} has more than one reference.`);return}if(!e)throw a.remove(),new Error(`${n} is not found!`);if(e[0]){let i=e[0];if(i.constructor.name=="HTMLTemplateElement"){if(i=i.content.cloneNode(!0).firstElementChild,!i)return;let t=a.attributes;for(let r=0;r<t.length;r++){let s=t[r];s.name!="data-template"&&i.setAttribute(s.name,s.value)}a.replaceWith(i)}else throw new Error(`${n} is not referred to a Template Element!`)}}}),HTMLTemplateElement.prototype.replaceSubTemplate=function(a){let n=a.getElementsByTagName("sub-template");if(n){n=n.toArray();for(let e=0;e<n.length;e++){let i=n[e];customElements.get("sub-template").prototype.replace(i)}}},HTMLTemplateElement.prototype.collectContent=function(){let a=this,n=null,e=a.cloneNode(!0),i=document.createDocumentFragment(),t=e.content.querySelector("style");t&&i.appendChild(t);let r=[];for(let s=0;s<e.content.children.length;s++){let c=e.content.children[0];this.replaceSubTemplate(c),r.push(c)}return n={style:i.children[0],others:r},n},HTMLTemplateElement.prototype.parseStyle=function(a){if(!a)return!1;var n=a.textContent;if(n=n.replace(/\s/g,""),!n.length)return;let e=!1,i=!1,t=!1,r=n.split(""),s="";n="";var c=!1;for(let u=0;u<r.length;u++){let f=r[u];f=="{"&&(e=!0,i=!0),f=="}"&&(e=!1,i=!1),!e&&f!="	"&&f!="}"&&f!=" "&&f!=";"&&(s+=f),i&&f!="	"&&f!="{"&f!=" "&&(n+=f),f=="}"&&(c||(c={}),c[s]=n,s="",n="")}return c},HTMLTemplateElement.prototype.parseHTML=function(a){if(a){var n=document.createElement("HTML");for(let e=0;e<a.length;e++){let i=a[e];n.append(i)}}return n||!1},HTMLTemplateElement.prototype.getContent=function(a){let{style:n,others:e}=this.collectContent(),i=this.parseStyle(n),t=this.parseHTML(e);for(let r in i)if(i.hasOwnProperty(r)){let s=t.querySelectorAll(r),c=i[r];for(let u=0;u<s.length;u++)s[u].setAttribute("style",c)}return t=a?t.children.toArray():t.innerHTML,t.length==1?t[0]:t}})()});var X=A(()=>{(function(a){function n(e,i,t){this.data=e,this.template=i,this.isConvert=t}n.prototype._getTag=function(e){return e.match(new RegExp("(?<=<)|([^/s]+)(?=>)","g"))[2]},n.prototype._bindReplace=function(e,i){for(let t in e)if(e.hasOwnProperty(t)){let r=new RegExp(`{{${t}}}`,"g");r&&(i=i.replace(r,`${e[t]}`))}return i},n.prototype._toElement=function(e,i){let t=document.createElement("template");return t.innerHTML=e,t.content.children[0]},n.prototype.createElement=function(){let e=this.template,i=this.data,t=this.isConvert;if(i){if(i instanceof Array){let r=typeof e=="string",s=r?this._getTag(e):e.tagName;e=r?e:e.outerHTML;let c=[];for(let u=0;u<i.length;u++){let f=i[u],p=this._bindReplace(f,e),m=this._toElement(p,s);t&&(m=m.outerHTML),c.push(m)}return c}else if(i instanceof Object){let r=typeof e=="string",s=r?this._getTag(e):e.tagName;e=r?e:e.outerHTML;let c=this._bindReplace(i,e),u=this._toElement(c,s);return t&&(u=u.outerHTML),u}}else{let s=typeof e=="string"?this._getTag(e):e.tagName;return this._toElement(e,s)}},a.Templating=n})(window)});var Y=A(()=>{function T(a,n,e){this.name=a,this.template=n,this.handlers=e.handlers,this.subscribe=e.subscribe,this.data={},this.root=e.root,this.items=!1,this.type=e.type||"view",this.toggle=e.toggle,this.targets={},this.animateOptions=e.animate,this.role=e.role,this.isReady=!1,this.await={},this.utils={createFn(i,t){return{[i]:function(){return t}}[i]}},e.data&&e.data.bind(this.data)(this),(a=="app"||e.role=="app")&&(this.staticComponent=e.static||[]),e.trigger&&e.trigger.bind(this)(),e.utils&&e.utils.bind(this.utils)(this),this.container={},this.compile=new Promise(i=>{this._bindHandlers(),i()}).then(()=>{this._bindSubscribe()}).then(()=>{switch(this.type=="view"&&!!this.template){case!0:this.createElementAsync();break;default:this.isStatic=!1;break}})}T.prototype.isStatic=!1;T.prototype.hasEvent=!1;T.prototype.isConnected=!1;T.prototype.destroyed=!1;T.prototype.isCreated=!1;T.prototype.Subscribe=function(a){this.$observer.registerSubscribe({[a.listenTo]:{[a.original]:[a]}})};T.prototype.Node=function(a){return new Piece(a)};T.prototype._bindHandlers=function(){for(let a in this.handlers)if(this.handlers.hasOwnProperty(a)){let n=this.handlers[a],e=n.name;n=n.bind(this),n.original=e,n.binded=this.name,this.handlers[e]=n,this.initAwaitHandlers(a)}this.await.destroy||(this.await.destroy=Promise.resolve()),this.await.animateRemove||(this.await.animateRemove=Promise.resolve())};T.prototype.initAwaitHandlers=function(a){this.await[a]=Promise.resolve()};T.prototype._bindSubscribe=function(){let a={};for(let n in this.subscribe)if(this.subscribe.hasOwnProperty(n))if(subscribe=this.subscribe[n],!!subscribe.components&&!!subscribe.handler){let i=n,{components:t,handler:r}=subscribe;r=r.bind(this),r.binded=this.name,r.original=i;for(let s=0;s<t.length;s++){let c=t[s];a[c]||(a[c]={}),a[c][i]||(a[c][i]=[]),r.listenTo=c,a[c][i].push(r)}}else{a[n]||(a[n]={});let i=subscribe;for(let t in i)if(i.hasOwnProperty(t)){let r=i[t],s=r.name;r=r.bind(this),r.original=s,r.binded=this.name,r.listenTo=n,a[n][s]||(a[n][s]=[]),a[n][s].push(r)}}this.subscribe=a};T.prototype.notifyStaticComponent=function(a,n,e){Cake.Observer.notify(a,n,e,this.staticComponent[a],!0,this.name)};T.prototype.doFor=function(a,n){let e=()=>this.html;n!=null&&this.$attrib._notifyFor(a,n,null,this.name,e())};T.prototype.doToggle=function(a,n){this.$attrib._notifyToggle(a,n,null,this.name,this.html)};T.prototype.doSwitch=function(a,n){this.$attrib._notifySwitch(a,n,null,this.name,this.html)};T.prototype.doIf=function(a,n){this.$attrib._notifyIf(a,n,null,this.name,this.html)};T.prototype.$animate=function(a){let n=this.$attrib.getWatchItemsByType(this.name,"animate"),e=this.animateOptions,i=[];return(()=>{if(!(!n.length&&!(n instanceof Array)||!e))for(let t=0;t<n.length;t++){let r=n[t],{ns:s,selector:c}=r;if(r.ns){if(e[s]){let u=e[s];Object.assign(r,e[s]),delete e[s]}}else i.push(n)}})(),n.length?((()=>{let t={},r={};for(let s in e)e.hasOwnProperty(s)&&(r.val=s,t.selector=r,Object.assign(t,e[s]),n.push(t),t={},r={})})(),new Mo(n,this.html).animate(a)):!1};T.prototype.$templating=function(a,n,e){let i=n||this.template;return new Templating(a,i,e).createElement()};T.prototype.createElement=function(){if(!(this.template.substring(0,1)=="#"))return;let n=this.template.substr(1),e=document.getElementById(n);switch(this.isTemplate=e&&e.toString().includes("Template")){case!0:{let t=e.getContent(!0);t.cake_component=this.name,this.html=this.Node(t),this._parseHTML(this.isStatic).then(()=>{this._watchBindedItems()})}break;case null:break;default:{let t=e;t.cake_component=this.name,this.html=this.Node(t),this.isStatic=!0,this._parseHTML(this.isStatic).then(()=>{})}}};T.prototype.createElementAsync=function(){new Promise(a=>{this.createElement(),a()}).then(()=>{this.isReady=!0})};T.prototype._isParsed=!1;T.prototype._parseHTML=function(a=!1){return this.$attrib.inject(this.html,this.name,a).then(()=>{this.original=this.html.cloneNode(),this._isParsed=!0})};T.prototype.render=function(a){let n=null,e=p=>this.data[p]||this.$scope[p]||null;!this.isReady&&this.createElement();let{root:i,multiple:t,cleaned:r,emit:s,static:c,hashed:u,data:f}=a||{};return u===!0&&this.$hash.add(this.name),!this.template&&this.fire.isConnected&&this.fire.isConnected({emit:s},!0),!!i&&(this.root=i),t&&this._smoothReset(),new Promise((p,m)=>{this.await.destroy.then(()=>this.await.animateRemove).then(()=>{new Promise((g,b)=>{g()}).then(()=>{let g=this.$attrib.getWatchItemsByType(this.name,"for");for(let b=0;b<g.length;b++){let h=e(g[b]);this.doFor(g[b],h)}return this.html}).then(g=>(n={element:g,emit:s},this.fire.beforeConnected&&this.fire.beforeConnected(n,!0),g)).then(g=>{if(!this.isStatic)return(f?(()=>new Promise(h=>{let d=g.getElement();d=this.$templating(f,d),this.html=g=this.Node(d),this.html.replaceDataSrc(),f=null,h()}))():Promise.resolve()).then(()=>{g.appendTo(this.root,r),this.isConnected=!0})}).then(()=>this.findTarget()).then(()=>this.findContainer()).then(()=>{let g=this.$attrib.getWatchItemsByType(this.name,"switch");for(let b=0;b<g.length;b++)this.doSwitch(g[b],e(g[b]))}).then(()=>this.addEvent(c,t)).then(()=>this.fire.isConnected&&this.fire.isConnected(n,!0)).then(()=>this.$animate("render")).then(()=>{p()})})})};T.prototype.renderAsync=function(a){this.render(a).then(()=>{this.$persist.append(this.name)})};T.prototype._smoothReset=function(){this.isConnected=!1,this.html=this.original.cloneNode()};T.prototype._hardReset=function(a){this.isConnected=!1,this.$persist.remove(a),this.html=this.original.cloneNode()};T.prototype.reset=function(){let a=this.$animate("remove");a instanceof Promise?this.await.animateRemove=new Promise(n=>{a.then(()=>this.html.remove()).then(()=>this._hardReset(this.name)).then(()=>{n()})}):(this.html.remove(this.name),this._hardReset(this.name))};T.prototype.addEvent=function(a,n){if(!!n&&!!a)return!1;let t=this.name;function r(s,c,u){return function(f){u&&f.preventDefault(),Cake.Observer.notify(c,s,f)}}if(!!this.targets){for(let s in this.targets)if(this.targets.hasOwnProperty(s)){let c=this.targets[s];for(let u of c){let{sel:f,el:p,cb:m}=u;m=m||s,p.Ref().get("__cake__events")||p.Ref().set("__cake__events",{});let g=p.Ref().get("__cake__events");if(!g[m]){let b=s.substring(0,1)!="~";p.addEventListener(s,r(m,t,b),!0),g[m]=!0,p.Ref().set("__cake__events",g)}}}}};T.prototype.findTarget=function(){let a=this.$attrib.getEventTarget(this.name),n=JSON.parse(JSON.stringify(a));for(let e of n)e.el=document.querySelector(`[data-event=${e.sel}]`),this.targets[e.event]||(this.targets[e.event]=[]),this.targets[e.event].push(e)};T.prototype.toggler=function(a){let n=this.$attrib.getWatchItemsByType(this.name,"toggle"),e=class{constructor(t,r,s,c){this.toggle=c.toggle,this.bind=t,this.bases=r,this.cache=c.$cache,this.html=s}check(t){let r=this.toggle[t];if(!r)console.error(`${t} is not found in toggle! choose from ${JSON.stringify(Object.keys(this.toggle))}`);else{if(n.length){let{ns:s}=r,c=n.find(u=>u.name==`ns-${s}`);c&&(r.sel=`[data-toggle=${c.sel}]`)}return r}}_toggle(){let t=this.check(this.bind);if(!t)return;let{basis:r="data-name",cls:s="is-active",mode:c="radio",sel:u,persist:f=!0}=t,p=this.html.querySelectorAll(u);if(!p.length)return;let m,g;if(p.length==1){let b=typeof this.bases=="boolean",h=!!this.bases,d=p[0];if(f){let y=function(w,v,S){S?w.classList.contains(v)&&w.classList.remove(v):w.classList.contains(v)||w.classList.add(v)};b?(h?(this.cache.createOrUpdate(this.bind,!0),y(d,s,!0)):(this.cache.createOrUpdate(this.bind,!1),y(d,s,!1)),d.classList.toggle(s)):(this.cache.createOrUpdate(this.bind,!d.classList.contains(s)),d.classList.toggle(s))}}else for(let b=0;b<p.length;b++){let h=p[b],d=h.classList.contains(s),y=h.getAttribute(r);y==this.bases?(c=="switch"?h.classList.toggle(s):d||h.classList.add(s),f&&this.cache.createOrUpdate(this.bind,y),g=y):d&&(h.classList.remove(s),m=h.getAttribute(r))}return{prev:m,next:g}}_recall(){let t=this.check(this.bind);if(!t)return;let{basis:r="data-name",cls:s="is-active",sel:c}=t;return this.cache.get(this.bind).then(u=>{if(!u)return u;let f=u,p=this.html.querySelectorAll(c);if(!!p.length){if(p.length==1){let m=p[0];f&&m.classList.add(s)}else for(let m=0;m<p.length;m++){let g=p[m],b=g.classList.contains(s);g.getAttribute(r)==f&&(b||g.classList.add(s))}return f}})}},i=(t,r)=>new e(t,r,this.html,this)._toggle();return i.recall=t=>new e(t,!1,this.html,this)._recall(),i};T.prototype.findContainer=function(){let a=this.html.getContainers();for(let n=0;n<a.length;n++){let e=a[n],i=e.dataset.container;i&&(this.container[i]=e)}};T.prototype._watchBindedItems=function(){this.items.length||(this.items=this.$attrib.getWatchItems(this.name),Cake.Scope.watch(this.items))};T.prototype.observer=function(a){function n(e){return this.handler[e]}this.observer=new Observer(this,a,n.bind(this))};T.prototype.variable=function(a){let n=Object.keys(a),e={},i=[];function t(r,s,c){s||(e[r]=`value is not '${c}'`)}for(let r in a)if(a.hasOwnProperty(r)){let s=a[r],{type:c,value:u}=s,f;["string","number"].includes(c)?f=typeof u==c:u instanceof Array?f=c=="array":f=c=="object",i.push(u),t(r,f,c)}if(Object.keys(e).length)throw new Error(JSON.stringify(e));return i}});var z=A(()=>{function _(a){this.name=a,this.components={}}_.Components=function(a){return{subscribe(n,e){function i(){let t=_.Components[a];if(t&&n instanceof Function){let r=n.name;e&&(n=n.bind(e)),n.binded="external",n.original=r,n.listenTo=t.name,t.Subscribe(n)}}return new Promise((t,r)=>{let s=setInterval(()=>{_.Components[a]&&(i(),clearInterval(s),t())})})}}};_.Models={};_.Subscribe={};_.Handlers={};_.Attributes=new Attrib;_.Models.$loaded=function(a){return new Promise((n,e)=>{let i=setInterval(()=>{_.Models[a]&&(clearInterval(i),n(_.Models[a]))});setTimeout(()=>{_.Models[a]||(clearInterval(i),e(a))},1e4)})};_.MainMessageChannel=function(){let a=new MessageChannel;return{send(n){a.port2.postMessage(n)},receive(n){a.port1.onmessage=function(e){let{isTrusted:i,data:t}=e||{isTrusted:!1};n(i?{status:1,data:t}:{status:0,err:"not trusted!"})}}}}();_.Utils={scopeTrap(a){return!1},scopeNotifier(a){return a}};_.create=function(a,n,e){new _(a,n,e).create(a,n,e)};_.plugin=function(){};_.init=function(a){return new _(a)};_.Scope=new Scope(_,{trap(a){return _.Utils.scopeTrap(a)}});_.Hasher=new Hasher(_.Components);_.Hasher.listen();_.Scope.registerNotifier(function(a,n,e){return _.Attributes.notifier(a,n,e)});_.Attributes.registerNotifier(function(a){_.Scope.notifier(a)});_.Persistent=new Persistent;_.Persistent.listen(_.Components);_.Cache=new StorageKit({name:"cache",storage:"session",child:"object"});_.getSubscriber=function(a,n){let e=_.Subscribe,i={};for(let t in e)if(e.hasOwnProperty(t)){let r=e[t];for(let s in r)if(r.hasOwnProperty(s)){let c=r[s];for(let u of c){let f=u,p=f.original,m=f.binded;if(f.listenTo==a){if(p==n)if(!i[m])i[m]=n;else{let b=i[m]instanceof Array?i[m]:[i[m]];i[m]=b.concat(n)}else if(!n)if(!i[m])i[m]=p;else{let b=i[m]instanceof Array?i[m]:[i[m]];i[m]=b.concat(p)}}}}}return i};_.Cache.getAll().then(a=>{if(a instanceof Array)for(let n=0;n<a.length;n++){let e=a[n];_.Scope.watch(e)}else typeof a=="string"&&_.Scope.watch(a)});_.Observer=new Observer(_.Subscribe,_.Handlers);_.prototype._defineProperty=function(a,n,e,i){Object.defineProperty(a,n,{configurable:!0,get(){return e()},set(t){i&&i(t)}})};_.worker=function(){}();_.prototype._defineProperty(Component.prototype,"$worker",function(){let a=new Worker("worker.js");return function(n,e){return a.postMessage({route:n,data:e}),new Promise((i,t)=>{a.onmessage=function(r){i(r.data)}})}});_.prototype._defineProperty(Component.prototype,"$observer",function(){return _.Observer});_.prototype._defineProperty(Component.prototype,"$scope",function(){_.Scope.install();let a=_.$scope;return Object.defineProperty(a,"extend",{configurable:!0,get(){return function(n,e){n=_.Scope.temp[n],n.toString().includes("Object")?Object.assign(n,e):console.error(`${n} is not an intance of Object`)}}}),a});_.prototype._defineProperty(Component.prototype,"$attrib",function(){return _.Attributes});_.prototype._defineProperty(Component.prototype,"$persist",function(){return _.Persistent});_.prototype._defineProperty(Component.prototype,"$cache",function(){return _.Cache});_.prototype._defineProperty(Component.prototype,"$hash",function(){return _.Hasher});_.prototype.create=function(a,n,e){console.time(a);let i=new Component(a,n,e);i.compile.then(()=>{let{subscribe:t,root:r,html:s,handlers:c,role:u}=i;u=="form"&&function(){Formy.bind(i)()}(),_.Observer.registerSubscribe(t),_.Observer.registerHandlers(c,i.name),this._defineProperty(i,"root",function(){if(i._root)return i._root;{let f=r||"#app",p=document.querySelector(f);if(p)return p}throw new Error(`the selector '${selector}' as container of component '${i.name}' is not found!`)},function(f){Object.assign(i,{_root:f})})}).then(()=>{i.fire=function(){function t(s,c){c=c?typeof c=="function"?c.bind(i)():function(){return c}.bind(i)():null;let u={[s]:()=>c};if(fn=u[s].bind(i),typeof fn=="function"){fn.name=s,fn.original=s,fn.binded=i.name,_.Observer.registerHandlers({[s]:fn},i.name);let f=c;c&&(c.element||c.root)&&(f={status:0,message:"element cant be cloned"}),_.MainMessageChannel.send({component:i.name,event:s,payload:f});let p=_.Observer.notify(i.name,s,{}).then(()=>_.Observer.results[i.name][s]);return i.await[s]=p,i.await[s]}console.error("the param in fire is not an instance of function")}function r(s,c){for(let u in c)if(c.hasOwnProperty(u)){let f=c[u],p=f.original;Object.defineProperty(s,p,{get(){let m={[p]:function(g,b){if(b!=null&&(b=b),b==null&&p=="destroy"&&(b=!0),b==null&&(b=!1),b){let h=new Promise((d,y)=>{setTimeout(()=>{let w=g;g&&g.element&&(w={status:0,message:"element cant be cloned"}),_.MainMessageChannel.send({component:i.name,event:a,payload:w}),_.Observer.notify(i.name,p,g).then(()=>_.Observer.results[i.name][p]).then(v=>{d(v)}).catch(v=>{console.error(v)})})});return i.await[p]=h,i.await[p]}else return f(g)}};return m[p]=m[p].bind(i),m[p].originalName=p,m[p].binded=i.name,m[p]}})}}return r(t,i.handlers),t}()}).then(()=>{i.type=="view"&&(i.toggler=i.toggler(i),_.Components[a]=i)}).then(()=>{i.type=="model"&&(_.Models[a]=i),i.isStatic&&i.type=="view"&&i.render()})}});var je=I(),qe=N(),Ie=M(),Ne=H(),Me=R(),He=U(),Re=B(),Ue=F(),Be=D(),Fe=W(),De=x(),We=J(),xe=K(),Je=G(),Ke=X(),Ge=Y(),Xe=z();})();
