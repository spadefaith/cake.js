(()=>{var $=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var Oe=$(()=>{(function(e){e.env={destructure:!0};let t=e.env;try{let{a:n}={a:!0}}catch{t.destructure=!1}Promise.prototype.ObjectType="Promise"})(window)});var _e=$(()=>{(function(e){HTMLCollection.prototype.toArray=function(){let t=[];for(let n=0;n<this.length;n++)t[n]=this[n];return t},NodeList.prototype.toArray=function(){let t=[],n=-1,i=this.length;for(;++n<i;)t[n]=this[n];return t},Object.cache=Object.create(null),Object.caching=t=>{let n=Object.cache;return n[t]||(n[t]={}),{set(i,r){return n[t][i]=r,!0},get(i){return n[t][i]}}},String.prototype.toHyphen=function(){let t=Object.cache,n=null,i=this;if(t.toHyphen||(t.toHyphen={}),t[i]&&(n=t[i]),n!=null)return n;let r=i.split(""),s="",a=-1;for(;++a<r.length;){let c=r[a];switch(a){case 0:s+=c.toLowerCase();break;default:c.charCodeAt()<91&&(s+="-"),s+=c.toLowerCase()}}return t[i]=s,n=s,n},String.prototype.toProper=function(){let t=this,n=Object.caching("toProper").get(t);if(n)return n;{let i=t.substring(0,1),r=t.slice(1),s=`${i.toUpperCase()}${r}`;return Object.caching("toProper").set(t,s),s}},String.prototype.removeSpace=function(){return this.split(" ").join("")},String.prototype.toCamelCase=function(){let t=this.toLowerCase(),n=Object.cache,i=null;if(n.toCamel||(n.toCamel={}),n=n.toCamel,n[t])return n[t];{let r=t.split("-");if(r.length==1)return t;let s="",a=-1,c=r.length;for(;++a<c;){let h=r[a];switch(a){case 0:s+=h;break;default:{let f=h.substring(0,1).toUpperCase(),p=h.substring(1);s+=f+p}break}}return n[t]=s,s}},HTMLElement.prototype.querySelectorIncluded=function(t,n,i){let r=this.querySelector(t);return r||(()=>{switch(!0){case(!n&&!i):{let s=this.closest(t);s==this&&(r=s)}break;case(!!n&&!!i):r=this.getAttribute(n)==i?this:null;break;case(!!n&&!i):r=this.getAttribute(n)?this:null;break}return r})()},HTMLElement.prototype.querySelectorAllIncluded=function(t,n,i){let r=this.querySelectorAll(t).toArray();switch(!0){case(!n&&!i):{let s=this.closest(t);s==this&&r.push(s)}break;case(n&&i):this.getAttribute(n)==i&&r.push(this);break;case(n&&!i):this.getAttribute(n)&&r.push(this);break}return r},HTMLDocument.prototype.querySelectorIncluded=function(t){return this.querySelector(t)},HTMLDocument.prototype.querySelectorAllIncluded=function(t){return this.querySelectorAll(t)},Array.prototype.toggler=function(t,n){for(let i=0;i<this.length;i++){let r=this[i];(r.dataset.name==t||r.classList.contains(n))&&r.classList.toggle(n)}},HTMLElement.prototype.Ref=function(){let t="_cakes_storage";!this[t]&&(this._cakes_storage={});let n=this[t];return{set(i,r){n[i]=r},get(i){return n[i]},getAll(i){return n},remove(i){delete n[i]}}}})(window)});var ke=$(()=>{Object.keys||(Object.keys=function(e){var t=[];for(var n in e)e.hasOwnProperty(n)&&t.push(n);return t})});var R=$((Ii,$e)=>{var z={},Q={typeof:function(e){switch(!0){case typeof e=="string":return"string";case typeof e=="number":return"number";case e instanceof Array:return"array";case e instanceof Function:return"function";case e instanceof HTMLCollection:return"htmlcollection";case e instanceof NodeList:return"htmlnodelist";case e instanceof Element:return"domlement";case e instanceof Object:return"object"}},isArray:function(e){return this.typeof(e)=="array"},isObject:function(e){return this.typeof(e)=="object"},isNumber:function(e){return this.typeof(e)=="number"},isString:function(e){return this.typeof(e)=="string"},isHTMLCollection:function(e){return this.typeof(e)=="htmlcollection"},isNodeList:function(e){return this.typeof(e)=="htmlnodelist"},isElement:function(e){return this.typeof(e)=="domlement"},isFunction:function(e){return this.typeof(e)=="function"}},pe={each:function(e,t,n){if(n=="object"){var i=0;for(var r in e)e.hasOwnProperty(r)&&(t({key:r,value:e[r]},i),i=i+1)}else for(var s=0;s<e.length;s++)t(e[s],s)},map:function(e,t){var n=Q.isArray(e)||e.length?"array":"object",i=e.length&&n=="array"?[]:{};return this.each(e,function(r,s){var a=t(r,s);n=="object"?i[a.key]=a.value:i.push(a)},n),i},reduce:function(e,t,n){var i=Q.typeof(e);return this.each(e,function(r,s){t=n(r,t,s)},i),t},filter:function(e,t){var n=Q.isArray(e)||e.length?"array":"object",i=e.length&&n=="array"?[]:{};return this.each(e,function(r,s){var a=t(r,s);a&&(n=="object"?i[r.key]=r.value:i.push(r.value))},n),i}},Pe={removeWhiteSpace(e){return String(e).split(" ").join("")}},Te={perf:function(e){console.time("test"),e(),console.timeEnd("test")},logTest:function(e,t,n){try{e=JSON.parse(e)}catch{}try{n=JSON.parse(n)}catch{}switch(t){case"==":return e==n;case"!=":return e!=n;case"<":return e<n;case">":return e>n;case">=":return e>=n;case"<=":return e<=n}},toUrlSearchParams:function(e,t=!0){let n="";for(let i in e)if(e.hasOwnProperty(i)){let r=e[i];r.toString().includes("Object")&&(r=JSON.stringify(r)),t&&r?n+=`${encodeURI(i)}=${encodeURI(r)}&`:n+=`${encodeURI(i)}=${encodeURI(r)}&`}return n.slice(0,n.length-1)},sanitize:function(e,t=[]){if(typeof e!="string")return e;let n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};n=Object.keys(n).reduce((r,s)=>(t.includes(s)||(r[s]=n[s]),r),{});let i=/[&<>"'/]/ig;return e.replace(i,r=>n[r]||r)},toFormData:function(e,t={}){let n=[],i=e.querySelectorAll("TEXTAREA"),r=e.querySelectorAll("INPUT"),s=e.querySelectorAll("SELECT");function a(h,f){for(let p=0;p<h.length;p++)f.push(h[p])}a(i,n),a(r,n),a(s,n);let c={};for(let h=0;h<n.length;h++){let f=n[h],p=f.name||f.id;if(!(p&&["{{","((","[[","<<","%%","&&"].includes(p))){let g,m=e[p];m&&m.closest&&!m.closest(".cake-template")&&(m.tagName=="INPUT"&&m.getAttribute("type")=="checkbox"?value=m.checked:value=this.sanitize(m.value,t.sanitize),t.json?t.trim?value!=""&&(c[p]=value):c[p]=value:fd.append(p,value))}}if(t.json)return c;{let h=new FormData;for(let f in c)c.hasOwnProperty(f)&&h.append(f,c[f]);return h}},splitBySpace:function(e,t){if(e&&(e=e.split(" "),Q.isArray(e)))for(let n=0;n<e.length;n++)t(e[n])},toArray(e){let t=[];if(!e.length)return t;for(let n=0;n<e.length;n++)t.push(e[n]);return t},timeOut(e,t=1){setTimeout(()=>{e()},t)},instanceID(){return location.origin},recurse(e,t){return new Promise((n,i)=>{try{let r=e.length,s=0,a=()=>{r>s?(t(e[s]),s+=1,a()):n()};a()}catch(r){i(r.message)}})},browser(){if(window._browser)return window._browser;var e=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,t=typeof InstallTrigger!="undefined",n=/constructor/i.test(window.HTMLElement)||function(c){return c.toString()==="[object SafariRemoteNotification]"}(!window.safari||safari.pushNotification),i=!!document.documentMode,r=!i&&!!window.StyleMedia,s=!!window.chrome&&!!window.chrome.webstore,a=(s||e)&&!!window.CSS;return window._browser=e?"Opera":t?"Firefox":n?"Safari":s?"Chrome":i?"IE":r?"Edge":a?"Blink":"Don't know"},isOpera(){return this.browser=="Opera"},isFirefox(){return this.browser()=="Firefox"},isSafari(){return this.browser=="Safari"},isChrome(){return this.browser=="Chrome"},isIE(){return this.browser=="IE"},isEdge(){return this.browser=="Edge"},isBlink(){return this.browser=="Blink"},device(){return navigator.userAgent.includes("Android")?"android":/iPhone|iPad|iPod/i.test(navigator.userAgent)?"IOS":"desktop"},isAndroid(){return this.device()=="android"},isIOS(){return this.device()=="ios"},isDesktop(){return this.device()=="desktop"},escapeRegExp(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}};try{z.UTILS={...pe,...Q,...Te,...Pe}}catch{z.UTILS={},ne=pe.each,ne(pe,function(t,n){z.UTILS[t]=n}),ne(Q,function(t,n){z.UTILS[t]=n}),ne(Te,function(t,n){z.UTILS[t]=n}),ne(Pe,function(t,n){z.UTILS[t]=n})}var ne;$e.exports=z.UTILS});var Ee=$(()=>{(function(){customElements.define("sub-template",class extends HTMLElement{constructor(){super()}connectedCallback(){this.replace(this)}replace(e){let t=e.dataset.template,n=document.getElementsByName(t);if(n.length>1){console.error(`template with name ${t} has more than one reference.`);return}if(!n)throw e.remove(),new Error(`${t} is not found!`);if(n[0]){let i=n[0];if(i.constructor.name=="HTMLTemplateElement"){if(i=i.content.cloneNode(!0).firstElementChild,!i)return;let r=e.attributes;for(let s=0;s<r.length;s++){let a=r[s];a.name!="data-template"&&i.setAttribute(a.name,a.value)}e.replaceWith(i)}else throw new Error(`${t} is not referred to a Template Element!`)}}}),HTMLTemplateElement.prototype.replaceSubTemplate=function(e){let t=e.getElementsByTagName("sub-template");if(t){t=t.toArray();for(let n=0;n<t.length;n++){let i=t[n];customElements.get("sub-template").prototype.replace(i)}}},HTMLTemplateElement.prototype.collectContent=function(){let e=this,t=null,n=e.cloneNode(!0),i=document.createDocumentFragment(),r=n.content.querySelector("style");r&&i.appendChild(r);let s=[];for(let a=0;a<n.content.children.length;a++){let c=n.content.children[0];this.replaceSubTemplate(c),s.push(c)}return t={style:i.children[0],others:s},t},HTMLTemplateElement.prototype.parseStyle=function(e){if(!e)return!1;var t=e.textContent.trim();if(!t.length)return;let n={},i="",r=t.split("}");for(let s=0;s<r.length;s++){let a=r[s],[c,h]=a.split("{");c&&(n[c.trim()]=(()=>{let f=!1,p="",g=h.split("");for(let m=0;m<g.length;m++){let u=g[m];u==`
`?f=!0:u==" "?f||(p+=u):(f=!1,p+=u)}return p})())}return n},HTMLTemplateElement.prototype.parseHTML=function(e){if(e){var t=document.createElement("HTML");for(let n=0;n<e.length;n++){let i=e[n];t.append(i)}}return t||!1},HTMLTemplateElement.prototype.getContent=function(e){let{style:t,others:n}=this.collectContent(),i=this.parseStyle(t),r=this.parseHTML(n);for(let s in i)if(i.hasOwnProperty(s)){let a=r.querySelectorAll(s),c=i[s];for(let h=0;h<a.length;h++)a[h].setAttribute("style",c)}return r=e?r.children.toArray():r.innerHTML,r.length==1?r[0]:r}})()});var Z=$((Ri,qe)=>{var de=R();qe.exports=function(){return Object.caching("plugins").set("plugin",{}),function(e,t){if(de.isObject(e)&&!t){let n=Object.caching("plugins").get("plugin");Object.caching("plugins").set("plugin",Object.assign(n,e))}else if(de.isString(e)&&t!=null){let n=Object.caching("plugins").get("plugin");n[e]=t,Object.caching("plugins").set("plugin",n)}else if(de.isString(e)&&t==null)return Object.caching("plugins").get("plugin")[e]||{}}}()});var ee=$((Ui,Ce)=>{var Ae=R();function V(e){this.options=e,this.tag=(this.options&&this.options.tag||"{{ }}").split(" "),this.lefttag=Ae.escapeRegExp(this.tag[0]),this.righttag=Ae.escapeRegExp(this.tag[1])}V.prototype._getTag=function(e){return e.match(new RegExp("(?<=<)|([^/s]+)(?=>)","g"))[2]};V.prototype._bindReplace=function(e,t){for(let n in e)if(e.hasOwnProperty(n)){let i=new RegExp(`${this.lefttag}${n}${this.righttag}`,"g");i&&(t=t.replace(i,`${e[n]}`))}return t};V.prototype.replaceString=function(e,t){return this._bindReplace(e,t)};V.prototype._toElement=function(e,t){let n=document.createElement("template");return n.innerHTML=e,n.content.children[0]};V.prototype.createElement=function(e,t,n){if(e){if(e instanceof Array){let i=typeof t=="string",r=i?this._getTag(t):t.tagName;t=i?t:t.outerHTML;let s=[];for(let a=0;a<e.length;a++){let c=e[a],h=this._bindReplace(c,t),f=this._toElement(h,r);n&&(f=f.outerHTML),s.push(f)}return s}else if(e instanceof Object){let i=typeof t=="string",r=i?this._getTag(t):t.tagName;t=i?t:t.outerHTML;let s=this._bindReplace(e,t),a=this._toElement(s,r);return n&&(a=a.outerHTML),a}}else{let r=typeof t=="string"?this._getTag(t):t.tagName;return this._toElement(t,r)}};Ce.exports=V});var B=$(ce=>{ce.getConfig=function(e,t,n,i,r){return n==null?[]:n==i&&type!="bind"?[]:(()=>{let s=[],a=e;if(a&&a.length)for(let c=0;c<a.length;c++){let h=a[c];h.bind==t&&s.push({...h,component:r})}return s})()};ce.updateConfig=function(h,t,n,i,r,s,a,c){if(i!=null&&!(i==r&&t!="bind")){var h=(()=>{let f=h[s]&&h[s][t];if(f&&f.length){let p=[];for(let g=0;g<f.length;g++){let m=f[g];m.bind==n&&(c?m.sel==c:!0)&&Object.assign(m,a)}return p}else return[]})();return h}};ce.extendConfig=function(e){let t=[];for(let n=0;n<e.length;n++){let i={},r=e[n];for(let s in r)i[s]=r[s];t.push(i)}return t.reduce((n,i)=>{let{incrementedSels:r}=i;return r&&r.length?r.forEach(s=>{let a={...i};a.incrementedSel=s,n.push(a)}):n.push(i),n},[])}});var je=$((Hi,Le)=>{var ge=R(),{getConfig:Tt,updateConfig:Bi,extendConfig:$t}=B();Le.exports=async function(e,t,n,i,r){r=r||document;let s=this.storage.get(i,"attr"),a=Tt(s,e,t,n,i);if(!!a.length)return a=$t(a),Promise.all(a.map(c=>{let h,{hasNegate:f,bind:p,testVal:g,attr:m,ops:u,sel:d,attrkey:y,attrvalue:b,incrementedSel:v,incrementId:S}=c;if(p=ge.removeWhiteSpace(p),m=ge.removeWhiteSpace(m),v=t.incrementedSel||v,t.incrementedSel?h=t[p]:h=t,e==p){let w=r.querySelectorAll(`[data-attr=${v||d}]:not(.cake-template)`);return Promise.all([...w].map(_=>{let q=!1;u?(q=ge.logTest(h,u,g),f&&(q=!q)):f?q=!h:q=!!h,q?b?_.setAttribute(y,b):_.setAttribute(y):_.removeAttribute(y)}))}t=null}))}});var Ne=$((Fi,Ie)=>{var me=R(),{getConfig:Et,updateConfig:Di,extendConfig:qt}=B();Ie.exports=async function(e,t,n,i,r){r=r||document;let s=this.storage.get(i,"bind"),a=Et(s,e,t,n,i);if(!!a.length){a=qt(a);for(let c=0;c<a.length;c++){let h=a[c],f,{attr:p,bind:g,sel:m,incrementedSel:u,incrementId:d,incrementedSels:y}=h;u=t.incrementedSel||u,t.incrementedSel?f=t[g]:f=t;let b=p.toHyphen();if(e==g){let v=r.querySelectorAll(`[data-bind=${u||m}]`);for(let S=0;S<v.length;S++){let w=v[S];p=="class"||p=="className"?w.classList.length?(me.splitBySpace(n,function(_){w.classList.remove(_)}),me.splitBySpace(f,function(_){w.classList.add(_)})):me.splitBySpace(f,function(_){w.classList.add(_)}):(f!=null||f!=null)&&(w.setAttribute(b,f),w[p]=f)}}}t=null}}});var Re=$((Wi,xe)=>{var te=R(),{getConfig:At,updateConfig:Ji,extendConfig:Ct}=B();xe.exports=async function(e,t,n,i,r){let s=this.storage.get(i,"class");r=r||document;let a=At(s,e,t,n,i);if(!a.length)return;let c={};a=Ct(a);for(let h=0;h<a.length;h++){let f=a[h],p,{hasNegate:g,bind:m,testVal:u,className:d,ops:y,sel:b,incrementedSel:v,incrementId:S}=f;if(m=te.removeWhiteSpace(m),v=t.incrementedSel||v,t.incrementedSel?p=t[m]:p=t,e==m){c[v||b]||(c[v||b]=r.querySelectorAll(`[data-class=${v||b}]:not(.cake-template)`));let w=c[v||b];for(let _=0;_<w.length;_++){let q=w[_],T=!1;y?(T=te.logTest(p,y,u),g&&(T=!T)):g?T=p==u:T=!!p,T?te.splitBySpace(d,function(P){te.toArray(q.classList).includes(P)||setTimeout(()=>{q.classList.add(P)})}):te.splitBySpace(d,function(P){te.toArray(q.classList).includes(P)&&setTimeout(()=>{q.classList.remove(P)})})}}}t=null}});var ye=$((Ki,Ue)=>{function j(e){this.el=j.toArray(e)}j.toArray=function(e){let t=[];switch(!0){case e instanceof Array:t=e;break;case(e.length&&e.tagName&&e.tagName!="FORM"&&!(e instanceof Array)):for(let n=0;n<e.length;n++)t.push(e[n]);break;case!(e instanceof Array):t=[e];break}return t};j.prototype.getElements=function(){return this.el};j.prototype.getElement=function(){return this.el[0]};j.prototype.remove=function(e){let t=-1,n=this.el.length,i=document.createDocumentFragment();for(;++t<n;){let r=this.el[t];r&&i.appendChild(r)}fr=null};j.prototype.replaceDataSrc=function(){let t=this.el[0].querySelectorAll("[data-src]");for(let n=0;n<t.length;n++)el=t[n],el.setAttribute("src",el.dataset.src),el.removeAttribute("data-src")};j.cloneNode=function(e){e=e instanceof Array?e:this.toArray(e);let t=[];for(let n=0;n<e.length;n++)t.push(e[n].cloneNode(!0));return new j(t)};j.prototype.dataset=function(e,t){let n=this.el.length,i=-1;for(;++i<n&&!(this.el[i].dataset[e]&&t(this.el[i])=="break"););return!0};j.prototype.getContainers=function(){return this.getElementsByDataset("container").container};j.prototype.cloneNode=function(e){return e=this.el,j.cloneNode(e)};j.prototype.getAllElements=function(){let e=this.el.length,t=[];switch(!0){case e==1:t=this.el[0].getElementsByTagName("*").toArray();break;case e>1:{let n=-1;for(;++n<e;){let r=this.el[n].getElementsByTagName("*");if(r)for(let s=0;s<r.length;s++)t.push(r[s])}}break}return t};j.prototype.appendTo=function(e,t){if(!e&&!e.attributes)throw new TypeError(`the ${e} is not an instance of Element`);t&&(e.innerHTML="");for(let n=0;n<this.el.length;n++){let i=this.el[n];e.appendChild(i)}};j.prototype.getElementsByTagName=function(e){let t=this.el.length,n=[];switch(!0){case t==1:n=this.el[0].getElementsByTagName(id).toArray();break;case t>1:{let i=-1;for(;++i<t;){let s=this.el[i].getElementsByTagName(selector);if(s)for(let a=0;a<s.length;a++)n.push(s[a])}}break}return n};j.prototype.getElementById=function(e){let t=this.el.length,n=[];switch(!0){case t==1:n=this.el[0].getElementById(id);break;case t>1:{let i=-1;for(;++i<t;){let s=this.el[i].querySelector(selector);s&&n.push(s)}}break}return n};j.prototype.querySelectorAll=function(e){let t=this.el.length,n=[];switch(!0){case t==1:n=this.el[0].querySelectorAll(e);break;case t>1:{let i=[],r=-1;for(;++r<t;){let a=this.el[r].querySelectorAll(e);a&&(n=n.concat(a.toArra()))}}break;default:n=[]}return n};j.prototype.querySelector=function(e){let t=this.el.length,n=[];switch(!0){case t==1:n=this.el[0].querySelector(e);break;case t>1:{let i=-1;for(;++i<t;){let s=this.el[i].querySelector(e);s&&n.push(s)}}break}return n};j.prototype.querySelectorIncluded=function(e,t,n){let i=this.el.length,r=[];switch(!0){case i==1:r=this.el[0].querySelectorIncluded(e,t,n);break;case i>1:{let s=-1;for(;++s<i;){let c=this.el[s].querySelectorIncluded(e,t,n);c&&r.push(c)}}break}return r};j.prototype.querySelectorAllIncluded=function(e,t,n){let i=this.el.length,r=[];switch(!0){case i==1:r=this.el[0].querySelectorAllIncluded(e,t,n);break;case i>1:{let s=-1;for(;++s<i;){let c=this.el[s].querySelectorAllIncluded(e,t,n);c&&(r=r.concat(c.toArra()))}}break}return r};j.prototype.contains=function(e){let t=this.el.length,n=!1;switch(t==1){case!0:n=this.el[0].contains(e);break;case!1:{let i=-1;for(;++i<t;)if(this.el[i].contains(e)){n=!0;break}}break}return n};j.prototype.getElementsByDataset=function(){let e,t,n,i,r,s;for(e=arguments,o={},length=e.length,n=-1,i=-1;++n<this.el.length;)for(r=this.el[n];++i<length;)t=e[i],r.getAttribute(`data-${t}`)?o[t]=[r]:o[t]=[],s=r.querySelectorAll(`[data-${t}]`),s.length&&(o[t]=o[t].concat([...s]));return o};Ue.exports=j});var Be=$((Gi,Me)=>{var Xi=R(),Lt=ye(),jt=ee(),It=Z(),{getConfig:Nt,updateConfig:xt,extendConfig:zi}=B();Me.exports=async function(e,t,n,i,r){r=r||document;let s=this.storage.get(i,"forUpdate"),a=Nt(s,e,t,n,i);if(!a.length)return;let c=new jt(It("templating")),h=[];for(let f=0;f<a.length;f++){let{bind:p,sel:g,iter:m,ins:u,targets:d}=a[f];for(let y in t)if(t.hasOwnProperty(y)){let b=document.querySelectorAll(`[data-for-update-bind=${y}]`);for(let v=0;v<b.length;v++){let S=b[v],w=S.dataset.forUpdateBind;if(!S.dataset.forTemplate)S.remove();else{let _=S.cloneNode(!0);_.style.removeProperty("display"),_.classList.remove("cake-template");let q=t[w],T=-1;for(l=q.length;++T<l;){let P=q[T],x=T;for(let N=0;N<this.logicalType.length;N++){let U=this.logicalType[N],I=new Lt(S).querySelectorAllIncluded(`[data-${U}]`);for(let C=0;C<I.length;C++){let A=I[C];if(A.dataset[U]){let M=A.dataset[U],D=`${M}-${x}`;_.dataset[U]=D;let{bind:K}=this.getWatchItemsBySel(i,U,M);if(K.includes(".")){w=K.split(".")[0];for(let F in P){let X=P[F],ae=`${w}.${F}`;P[ae]=X}}M&&h.push({_type:U,...P,incrementedSel:D,sel:M,bind:K,incrementId:x,component:i})}}}let L=c.createElement(P,_,!1);L.classList.remove("cake-template"),L.removeAttribute("data-for-template"),S.insertAdjacentElement("beforebegin",L),S.parentElement.tagName=="SELECT"&&(S.parentElement.selectedIndex=0)}}}}}return t=null,Promise.all(h.map(f=>{let{bind:p,_type:g,component:m,incrementedSel:u,sel:d}=f,y=`notify${g.toProper()}`;return xt(g,p,f,null,m,{incrementedSel:u},d),this[y](p,f,null,m)})).then(()=>{})}});var le=$((Yi,He)=>{var se={};function Rt(){let e=se[name];if(e&&cb instanceof Function){let t=cb.name;ctx&&(cb=cb.bind(ctx)),cb.binded="external",cb.original=t,cb.listenTo=e.name,e.Subscribe(cb)}}window.ComponentStorage=se;He.exports={subscribe(e,t){return new Promise((n,i)=>{let r=setInterval(()=>{se[name]&&(Rt(),clearInterval(r),n())})})},set(e,t){return se[e]=t,!0},get(e){return se[e]}}});var Je=$((er,Fe)=>{var Qi=R(),Ut=ee(),Mt=Z(),Bt=le(),{getConfig:De,updateConfig:Zi,extendConfig:Vi}=B();Fe.exports=async function(e,t,n,i,r){let s=this.storage.get(i),a=new Ut(Mt("templating"));return new Promise((c,h)=>{try{let f=De(this.storage.get(i,"for"),e,t,n,i),p=De(this.storage.get(i,"switch"),e,t,n,i);if(!f.length)return;let g=t.reduce((m,u)=>(m.push(u),m),[]);t=null;for(let m=0;m<f.length;m++){let{bind:u,sel:d,iter:y,ins:b,component:v,cleaned:S}=f[m];r=Bt.get(v).html;let w=r.querySelectorIncluded(`[data-for-template=${d}]`),_=w.cloneNode(!0);g=g.map(T=>{for(let P in T)T.hasOwnProperty(P)&&(T[`${y}.${P}`]=T[P]);return T});let q=[];(()=>{let T=0;Object.keys(s).forEach(P=>{if(!["for","evt","animate","switch"].includes(P)){let x=s[P],L=x[0],{bind:N}=L||{};N&&N.match(new RegExp(a.lefttag),"g")&&(g.forEach((U,I)=>{let C={};C.bind=a.replaceString(U,N),C.sel=`${L.sel}-${T}`,C.rawsel=L.sel,T+=1,g[I].__sel=C.sel;for(let A in L)L.hasOwnProperty(A)&&(C[A]||(C[A]=L[A]));x.push(C)}),q.push(P))}})})(),(()=>{if(S){let P=w.parentElement;P.innerHTML="",P.appendChild(w)}let T=-1;l=g.length,g.forEach((P,x)=>{let L=w.cloneNode(!0);(()=>{if(p&&!p.length)return;let[{bind:I,map:C,sel:A,cases:M}]=p,D=P[C],K=L.querySelector(`[data-switch=${A}]`),Y=M.find(X=>{let{_id:ae,bind:re}=X;return re.includes("|")?re.split("|").map(J=>J.trim()).some(J=>J==D):re==D}),F=_.querySelector(`[data-case=${A}-${Y._id}]`);F.classList.remove("cake-template"),K.innerHTML=F.outerHTML})();let N=a.createElement(P,L,!1);Object.keys(s).forEach(I=>{if(q.includes(I)){let A=s[I].find(M=>M.sel==P.__sel);if(A){let M=A.rawsel;if(M){let D=N.querySelector(`[data-${I}=${M}]`);D.dataset[I]=A.sel}}}}),N.style.removeProperty("display"),N.classList.remove("cake-template"),N.removeAttribute("data-for-template"),w.insertAdjacentElement("beforebegin",N),(()=>{let[{children:I}]=f;!I||I.forEach(C=>{let A=N.querySelector(`[data-for=${C}]`);if(A){let M=A.dataset.forAutoBindKey,D=A.dataset.forAutoBindValue,K=A.dataset.forIter,Y=P[K];if(Y)for(let X=0;X<Y.length;X++){let ae=Y[X],re=A.cloneNode(!0),J=a.createElement(ae,re,!1);J.style.removeProperty("display"),J.classList.remove("cake-template"),J.removeAttribute("data-for-template"),A.insertAdjacentElement("beforebegin",J)}let F=A.closest("SELECT");F&&(F.selectedIndex=0)}})})();let U=N.querySelectorAll("[data-src]");if(U)for(let I=0;I<U.length;I++){let C=U[I];C.src=C.dataset.src,C.removeAttribute("data-src")}}),c()})()}g=null}catch(f){h(f)}})}});var Ke=$((ir,We)=>{var Ht=R(),{getConfig:Dt,updateConfig:tr,extendConfig:Ft}=B();We.exports=async function(e,t,n,i,r){r=r||document;let s=this.storage.get(i,"if"),a=Dt(s,e,t,n,i);if(!a.length)return;a=Ft(a);let c={};for(let h=0;h<a.length;h++){let f=a[h],{attr:p,bind:g,sel:m,testval:u,_true:d,_false:y,ops:b,hasNegate:v,incrementedSel:S,incrementId:w}=f,_=p.toHyphen(),q=d!="null",T=y!="null";if(e==g){c[m]||(c[m]=r.querySelectorAll(`[data-if=${S||m}]:not(.cake-template)`));let P=c[m];for(let x=0;x<P.length;x++){let L=P[x],N=t,U;if(u?U=Ht.logTest(u,b,N):U=v?!N:!!N,U){if(q)if(p=="class"){let I=d.split(" ");T?(y.split(" ").forEach(A=>{L.classList.remove(A)}),I.forEach(A=>{L.classList.add(A)})):I.forEach(C=>{L.classList.contains(C)||L.classList.add(C)})}else N[d]&&L.setAttribute(p,N[d])}else if(T)if(p=="class"){let I=y.split(" ");q?(d.split(" ").forEach(A=>{L.classList.remove(A)}),I.forEach(A=>{L.classList.add(A)})):trueClasses.forEach(C=>{L.classList.contains(C)||L.classList.add(C)})}else L.setAttribute(p,y)}}}t=null}});var ze=$((lr,Xe)=>{var rr=R(),{getConfig:Jt,updateConfig:nr,extendConfig:sr}=B();Xe.exports=async function(e,t,n,i,r){r=r||document;let s=this.storage.get(i,"model"),a=Jt(s,e,t,n,i);if(!!a.length){for(let c=0;c<a.length;c++){let h=a[c],{attr:f,bind:p,sel:g}=h,m=f.toHyphen();if(e==p){let u=r.querySelectorAll(`[data-model=${g}]`);for(let d=0;d<u.length;d++){let y=u[d];f=="className"?n?t?y.classList.replace(n,t):y.classList.remove(n):y.classList.add(t):(y.setAttribute(m,t),y[f]=t)}}}t=null}}});var Ye=$((cr,Ge)=>{var or=R(),{getConfig:Wt,updateConfig:ar,extendConfig:Kt}=B();Ge.exports=async function(e,t,n,i,r){r=r||document;let s=this.storage.get(i,"toggle"),a=Wt(s,e,t,n);if(!!a){a=Kt(a),r=r||document;for(let c=0;c<a.length;c++){let h=a[c];if(!h)continue;let{sel:f,bind:p,value:g,ops:m}=h,u=r.querySelector(`[data-toggle=${f}]`);g==n&&u&&u.classList.remove("is-active"),g==t&&u&&(u.classList.contains("is-active")&&u.classList.remove("is-active"),u&&u.classList.add("is-active"))}t=null}}});var Ze=$((ur,Qe)=>{function be(){this.store={}}be.prototype.set=function(e,t,n){let i=this.store;switch(!0){case!i[e]:i[e]={};case!i[e][t]:i[e][t]=[];default:i[e][t].push(n);break}};be.prototype.get=function(e,t){let n=this.store;if(e&&t)return n[e]&&n[e][t]||[];if(e&&!t)return n[e]||{}};Qe.exports=be});var et=$((pr,Ve)=>{var Xt=R(),hr=ee(),zt=je(),Gt=Ne(),Yt=Re(),Qt=Be(),Zt=Je(),Vt=Ke(),ei=ze(),ti=Ye(),ii=Ze();function E(){this.uiid=0,this.notify={},this.sts={},this.storage=new ii,this.logicalType=["if","bind","switch","toggle","class","attr"]}E.prototype.notifyFor=Zt;E.prototype.notifyForUpdate=Qt;E.prototype.notifyClass=Yt;E.prototype.notifyBind=Gt;E.prototype.notifyAttr=zt;E.prototype.notifyIf=Vt;E.prototype.notifyModel=ei;E.prototype.notifyToggle=ti;E.prototype.notifier=function(e,t,n,i){let r=JSON.parse(JSON.stringify(t));Xt.isObject(r)&&(r=JSON.parse(JSON.stringify(t)));let s={for:"For",forUpdate:"ForUpdate",toggle:"Toggle",bind:"Bind",if:"If",class:"Class",attr:"Attr"},a=Object.caching("AttribProp").get(e)||(()=>{let c={},h=Object.keys(s),f=this.storage.get(i);if(!f)return[];for(let p=0;p<h.length;p++){let g=h[p],m=f[g];if(m)for(let u=0;u<m.length;u++){let d=m[u],{bind:y}=d;y==e&&(c[g]=!0)}}return c=Object.keys(c),Object.caching("AttribProp").set(e,c),c})();return new Promise((c,h)=>{try{let f=a.length,p=0,g=()=>{if(f>p){let m=a[p],u=s[m];p+=1,this[`notify${u}`](e,r,n,i).then(()=>{g()})}else c()};g()}catch(f){h(f.message)}})};E.prototype.registerNotifier=function(e,t){this.notify[e]||(this.notify[e]=[]),this.notify[e].push(t)};E.prototype.getEventTarget=function(e){let t=`${e}`,n=Object.caching("getEventTarget").get(t);if(!n){let i=this.storage.get(e);n=i&&i.evt?i.evt:[],Object.caching("getEventTarget").set(t,n)}return n};E.prototype.getRouterTarget=function(e){let t=`${e}`,n=Object.caching("getRouterTarget").get(t);if(!n){let i=this.storage.get(e);n=i&&i.router?i.router:[],Object.caching("getRouterTarget").set(t,n)}return n};E.prototype.getWatchItems=function(e){let t=`${e}`,n=Object.caching("getWatchItems").get(t);if(!n){let i=this.storage.get(e),r=new Set;for(let s in i)if(i.hasOwnProperty(s)){let a=i[s];for(let c=0;c<a.length;c++){let h=a[c],{bind:f}=h;if(f)r.add(f);else continue}}n=[...r],Object.caching("getWatchItems").set(t,n)}return n};E.prototype.getConfig=function(e){return this.storage.get(e)};E.prototype.getWatchItemsByType=function(e,t){let n=`${e}-${t}`,i=Object.caching("getWatchItemsByType").get(n);if(!i){let s=this.storage.get(e)[t]||[],a=new Set;for(let c=0;c<s.length;c++){let h=s[c],{bind:f}=h;switch(!!f){case!0:a.add(f);break;default:switch(!0){case(t=="animate"||t=="toggle"):(a.constructor.name="Set")&&(a=[]),a.push(h)}}}i=[...a],Object.caching("getWatchItemsByType").set(n,i)}return i};E.prototype.getWatchItemsBySel=function(e,t,n){let i=`${e}-${t}-${n}`,r=Object.caching("watchItemsBySel").get(i);if(!r){let a=this.storage.get(e,t).find(c=>c.sel==n);r=a||!1,Object.caching("watchItemsBySel").set(i,r)}return r};E.prototype._activateReactive=e=>{};E.prototype._register=function(e,t,n){return this.storage.set(e,t,n)};E.prototype._static=function(e){return function(t,n){let i=[];for(let r=0;r<t.length;r++){let s=t[r];switch(n){case!1:i.push(s);break;case!0:{let a=s.closest("[data-component]");switch(a=a&&a.dataset.component,a==e){case!0:i.push(s);break}}break;default:continue}}return i}};E.prototype._compileEvents=function(e,t,n){return new Promise(i=>{if(!e.length){i();return}let r=this._static(t)(e,n);if(!r.length){i();return}for(let s=0;s<r.length;s++){let a=`cke${this.uiid}`,c=r[s],h=c.dataset.event.removeSpace().split(",");for(let f=0;f<h.length;f++){let[p,g]=h[f].split(":");this._register(t,"evt",{event:p,sel:a,cb:g}),c.dataset.event=a,this.uiid++}}i()})};E.prototype._compileToggle=function(e,t,n){return new Promise(i=>{if(!e.length){i();return}if(!this._static(t)(e,n).length){i();return}let s={};for(let a=0;a<e.length;a++){let c=`ckt${this.uiid}`,h=e[a],f=h.dataset.toggle;s[f]&&(c=s[f]),this._register(t,"toggle",{sel:c,name:"ns-"+f}),h.dataset.toggle=c,this.uiid++,s[f]=c}s={},i()})};E.prototype._compileFor=function(e,t,n,i){return new Promise(r=>{let s=i;if(!e.length){r();return}let a=this._static(t)(e,n);if(!a.length){r();return}let c={};for(let h=0;h<a.length;h++){let f=`ckf${this.uiid}`;c[f]={};let p=a[h],g=p.dataset.for,m=p.dataset.forAutoBind,u=p.dataset.forCleaned=="true",[d,y,b]=g.split(" ");if(m){let v=p.dataset.forIter,S=m.split(":"),w=S[0]&&S[0].trim(),_=S[1]&&S[1].trim();c[f]={iteration:v},p.dataset.forAutoBindKey=w,p.dataset.forAutoBindValue=_,p.removeAttribute("data-for-auto-bind")}if(p.style.display="none",p.classList.add("cake-template"),p.dataset.for=f,p.dataset.forTemplate=f,c[f]=Object.assign(c[f],{bind:b,sel:f,iter:d,ins:y,cleaned:u}),++this.uiid,h!=0){let v=p.parentElement&&p.parentElement.closest("[data-for]");if(!v)continue;let S=!!v.dataset.for;if(s.contains(v)&&S){let w=v.dataset.for,_=c[w];_&&!_.children?_.children=[f]:_&&_.children.push(f)}}}for(let h in c)c.hasOwnProperty(h)&&this._register(t,"for",c[h]);r()})};E.prototype._compileForUpdate=function(e,t,n){return new Promise(i=>{if(!e.length){i();return}let r=this._static(t)(e,n);if(!r.length){i();return}for(let s=0;s<r.length;s++){let a=`ckfu${this.uiid}`,c=r[s],h=c.dataset.forUpdate;c.style.display="none",c.classList.add("cake-template"),c.dataset.forUpdate=a,c.dataset.for||(c.dataset.forTemplate=a);let[f,p,g]=h.split(" ");this._register(t,"forUpdate",{bind:g,sel:a,iter:f,ins:p}),this.uiid++}i()})};E.prototype._compileSwitch=function(e,t,n){return new Promise(i=>{if(!e.length){i();return}let r=this._static(t)(e,n);if(!r.length){i();return}for(let c=0;c<r.length;c++){let h=`cks${this.uiid}`,f=r[c],p=f.dataset.switch,g="def";if(p.includes(".")){var[s,...a]=f.dataset.switch.split(".");p=s,g=a[0]}f.dataset.switch=h;let m=f.querySelectorAll("[data-case]"),u=[];for(let d=0;d<m.length;d++){let y=m[d],b=y.closest(`[data-switch=${h}]`);if(y.classList.add("cake-template"),b){let v=y.dataset.case,S=`cksc${this.uiid}`;y.dataset.case=`${h}-${S}`,u.push({_id:S,bind:v}),this.uiid++}}this._register(t,"switch",{bind:p,sel:h,map:g,cases:u}),this.uiid++}i()})};E.prototype._compileBind=function(e,t,n){return new Promise(i=>{if(!e.length){i();return}let r=this._static(t)(e,n);if(!r.length){i();return}for(let c=0;c<r.length;c++){let h=`ckm${this.uiid}`,f=r[c],g=f.dataset.bind.split(",");for(let m=0;m<g.length;m++){let u=g[m].split(" ").join("");if(u.includes(":"))var[s,a]=u.split(":");else var a=u,s="value";this._register(t,"bind",{attr:s,bind:a,sel:h})}this.uiid++,f.dataset.bind=h}i()})};E.prototype._compileAnimate=function(e,t,n){return new Promise(i=>{if(!e.length){i();return}let r=this._static(t)(e,n);if(!r.length){i();return}for(let s=0;s<r.length;s++){let a=`cka${this.uiid}`,c=r[s],h=c.dataset.animate;h=h.split(" ").join("");let f={},p=h.split(",");for(let g=0;g<p.length;g++){let m=p[g],[u,d]=m.split(":");if(u=="ns"){f.ns=d;break}else f[u]={keyframes:d.split("-")}}f.selector={attr:"data-animate",val:a},this._register(t,"animate",f),this.uiid++,c.dataset.animate=a}i()})};E.prototype._compileIf=function(e,t,n){return new Promise(i=>{if(!e.length){i();return}let r=this._static(t)(e,n);if(!r.length){i();return}let s=new RegExp("<|>|===|==|!==|!=");for(let a=0;a<r.length;a++){let c=`ci${this.uiid}`,h=r[a],f=h.dataset.if,p=h.dataset.ifBind,g=f.split(",");for(let m=0;m<g.length;m++){let u=g[m],d=u.substring(0,u.indexOf("=")),y=u.substring(u.indexOf("=")+1,u.length);y=y.split(new RegExp("[()]")).join("");let[b,v]=y.split("?"),S=b[0]=="!";hasRegularLog=b.match(s);let w,_,q;if(hasRegularLog){let x=b.split(s);w=x[0].trim(),_=x[1].trim(),q=hasRegularLog[0]}else w=b;S&&(w=w.slice(1));let[T,P]=v.split(":");this._register(t,"if",{hasNegate:S,attr:d,ops:q,bind:w,testval:_||null,_true:T,_false:P,sel:c,ifBind:p})}this.uiid++,h.dataset.if=c}i()})};E.prototype._compileClass=function(e,t,n){return new Promise(i=>{if(!e.length){i();return}let r=this._static(t)(e,n);if(!r.length){i();return}let s=new RegExp("<|>|===|==|!==|!=");for(let a=0;a<r.length;a++){let c,h,f,p,g,m,u,d,y;c=`cc${this.uiid}`,h=r[a],f=h.dataset.class;let b=f.split(",");for(let v=0;v<b.length;v++){let S=b[v],[w,_]=S.split("&&");if(w=w.trim(),_=_.trim(),p=w.match(s),w.substring(0,2).includes("!")?(g=!0,y=w.substring(0,2)=="!!"?2:w.substring(0,1)=="!"?1:0):(g=!1,y=0),p){let q=w.split(s);m=q[0].trim(),d=q[1].trim(),u=p[0].trim()}else!g&&(m=w),g&&(m=w.substring(y),d=y==2);this._register(t,"class",{hasNegate:g,bind:m,testVal:d,className:_,ops:u,sel:c})}this.uiid++,h.dataset.class=c}i()})};E.prototype._compileAttr=function(e,t,n){return new Promise(i=>{if(!e.length){i();return}let r=this._static(t)(e,n);if(!r.length){i();return}let s=new RegExp("<|>|===|==|!==|!=");for(let a=0;a<r.length;a++){let c,h,f,p,g,m,u,d;c=`cre${this.uiid}`,h=r[a],f=h.dataset.attr;let[y,b]=f.split("&&");b=b.trim();let[v,S]=b.split("=");if(y=y.trim(),p=y.match(s),g=y[0]=="!",p){let w=y.split(s);bind=w[0],d=w[1],u=p[0]}else bind=y;g&&g&&(bind=bind.slice(1)),this._register(t,"attr",{hasNegate:g,bind,testVal:d,attrkey:v,attrvalue:S,ops:u,sel:c}),this.uiid++,h.dataset.attr=c}i()})};E.prototype._compileModel=function(e,t,n){return new Promise(i=>{if(!e.length){i();return}let r=this._static(t)(e,n);if(!r.length){i();return}for(let c=0;c<r.length;c++){let h=`cknt${this.uiid}`,f=r[c],p=f.tagName,m=f.dataset.model.split(",");for(let u=0;u<m.length;u++){let d=m[u].split(" ").join("");if(d.includes(":"))var[s,a]=d.split(":");else var a=d,s="value";this._register(t,"model",{attr:s,bind:a,sel:h,nodeType:p})}this.uiid++,f.dataset.model=h}i()})};E.prototype.inject=function(e,t,n=!1){return new Promise(i=>{let r=e.getElementsByDataset("bind","for","for-update","switch","toggle","event","animate","if","class","attr");i(r)}).then(i=>{let r=[],s={bind:this._compileBind,switch:this._compileSwitch,toggle:this._compileToggle,if:this._compileIf,class:this._compileClass,attr:this._compileAttr,for:this._compileFor,"for-update":this._compileForUpdate,event:this._compileEvents,animate:this._compileAnimate};for(let a in i)i.hasOwnProperty(a)&&i[a].length&&r.push(s[a].apply(this,[i[a],t,n,e]));return console.timeEnd(t),Promise.all(r.length?r:[r])}).then(()=>Promise.resolve())};Ve.exports=E});var oe=$((dr,tt)=>{var ri=R();tt.exports=function(){function e(u){return u?u.constructor.name.toLowerCase():null}function t(u,d){for(let y in u)u.hasOwnProperty(y)&&d(u[y],y)}function n(u,d,y){u=Object.assign(u,{[y]:d})}function i(u){return u===null}function r(u){return u===void 0}function s(u){return e(u)=="array"}function a(u){return e(u)=="object"}var c=function(u,d){for(var y=null,b=0;b<u.length;b++){var v=u[b];if(e(d)=="object"){var S=d,w=Object.keys(d)[0],_=S[w];if(e(v)=="object"){var q=v[w]==_;if(q){y=b;break}}}else if(e(d)!="array"){var q=d==v;if(q){y=b;break}}}return y},h=function(u,d){var y=null,b=e(d);if(b=="object"){var v=Object.keys(d)[0];u[y]!=null&&u[y]==d[v]&&(y=v)}else b=="string"&&(y=d);return y},f=function(u,d){var y=null;return e(u)=="array"?y=c(u,d):e(u)=="object"&&(y=h(u,d)),y},p=class{constructor(u,d,y){this.type=u,this.name=`${ri.instanceID()}-${d}`,this.child=y,this.cache={},e(this.child)=="string"&&(this.child=y=="array"?[]:y=="object"?{}:!1)}init(u){return this[this.type]?(this[this.type](u),!0):!1}open(){if(this.type=="session"){var u=JSON.parse(sessionStorage[this.name]);return u[this.name]}else if(this.type=="local"){var u=JSON.parse(localStorage[this.name]);return u[this.name]}else return this.cache[this.name]}close(u){return this.child=u,this.recache(),this.init(!0)}recache(){this.cache[this.name]=this.child}create(){this.cache[this.name]=this.child}array(){this.create()}object(u){this.create()}session(u){u||this.recache();try{!sessionStorage[this.name]&&!u?sessionStorage.setItem(this.name,JSON.stringify(this.cache)):u&&sessionStorage.setItem(this.name,JSON.stringify(this.cache))}catch{this.recache()}}local(u){u||this.recache();try{!localStorage[this.name]&&!u?localStorage.setItem(this.name,JSON.stringify(this.cache)):u&&localStorage.setItem(this.name,JSON.stringify(this.cache))}catch{this.recache()}}},g={create:function(u,d){if(s(u)){let y=new Set(u);e(d)=="array"?d.forEach(b=>{y.add(b)}):y.add(d),u=Array.from(y)}else a(u)&&(a(d)?t(d,function(y,b){u[b]=y}):u[d]=d);return u},createOrUpdate:function(u,d){var y=f(u,d);return e(u)=="array"?i(y)?u.includes(d):u[y]=d:e(u)=="object"&&(i(y)?a(d)?t(d,function(b,v){n(u,b,v)}):u[d]=d:u[y]=d),u},remove:function(u,d){if(e(d)=="string"){var y=f(u,d);if(e(u)=="object")delete u[y];else if(e(u)=="array"){for(var b=[],v=0;v<u.length;v++)if(v!=y)b.push(u[v]);else continue;u=b}return u}else{if(e(d)=="object")return Object.filter(u,function(S,w){var _=d[w]!=null&&d[w]==S;return!_});if(e(d)=="array")return Object.filter(u,function(S,w){var _=d.contains(w);return!_})}if(i(y))return!1},get:function(u,d){var y=e(d);if(y=="string"){var b=f(u,d);if(b==0||b)return u[b]}else{if(y=="object")return Object.filter(u,function(v,S){var w=!r(d[S])&&d[S]==v;return w});if(y=="array")return Object.filter(u,function(v,S){var w=d.contains(S);return w})}return null},getNot:function(u,d){var y=e(d);return y=="string"?Object.filter(u,function(b,v){var S=v!=d;return S}):y=="object"?Object.filter(u,function(b,v){return Object.some(d,function(S,w){var _=w==v&&S==b;return!_})}):y=="array"?Object.filter(u,function(b,v){var S=!d.contains(v);return S}):null},getAll:function(u){return u}},m=class{constructor(u){this.name=u.name,this.storageType=u.storage,this.child=u.child||"object";try{e(this.child)=="string"&&(this.child=this.child=="array"?[]:this.child=="object"?{}:null)}catch{this.storageType=="session"?sessionStorage.clear():this.storageType=="local"&&localStorage.clear(),e(this.child)=="string"&&(this.child=this.child=="array"?[]:this.child=="object"?{}:null)}if(!["array","object"].includes(e(this.child)))throw new Error("the child must be an object or array type.");this.storage=new p(this.storageType,this.name,this.child),this.storage.init()}has(u){var d=this.storage.open(),y=f(d,u);return i(y)?!1:y}get(u,d){if(d){var y=this.storage.open();return g.get(y,u)}else return new Promise((b,v)=>{setTimeout(()=>{var S=this.storage.open();b(S)})}).then(b=>g.get(b,u))}getNot(u){var d=this.storage.open();return g.getNot(d,u)}getAll(){var u=this.storage.open();return Promise.resolve(u)}update(u,d){var y=this.storage.open(),b=f(y,u);return b==0||b?(y=g.createOrUpdate(y,data),this.storage.close(y)):!1}createOrUpdate(u){if(arguments.length>1){let b=arguments[0],v=arguments[1];u={[b]:v}}var d=this.storage.open();return d=g.createOrUpdate(d,u),this.storage.close(d)}create(u){var d=this.storage.open();return d=g.create(d,u),this.storage.close(d)}remove(u){var d=this.storage.open();return d=g.remove(d,u),this.storage.close(d)}};return m}});var rt=$((gr,it)=>{var ni=oe()();it.exports=function(e){let t={};class n{constructor(r){this.name=r,this.reactiveData={},this.notify=[],this.install(this.name),this.pKeys={},this.sanitize=function(s){let a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},c=/[&<>"'/]/ig;return typeof s=="string"?s.replace(c,h=>a[h]||""):s}}registerNotifier(r){this.notify.push(r)}install(){this.session=new ni({child:"object",storage:"session",name:`_cake_${this.name}_cf`})}notifier(r,s){let{value:a,bind:c}=s;return this.reactiveData[r]||(this.reactiveData[r]={}),this.reactiveData[r][c]=a,this.set(c,a)}getInputData(r="json",s){let a=s||this.name,c=JSON.parse(JSON.stringify(this.reactiveData[a]));for(let h in c){let f=c[h];c[h]=this.sanitize(f)}if(r=="json")return c;if(r=="formdata"){let h=new FormData;for(let f in c){let p=c[f];h.append(f,p)}return h}}hook(r,s,a){t[r]||(t[r]={}),t[r][s]||(t[r][s]=[]),t[r][s].push(a)}get(r,s=!1){let a=this.pKeys[r];return s?this.session.get(r,!0):this.session.get(r)}set(r,s){let a=`${this.name}-${r}`,c=this.notify,h=this.name,f=null;return this.pKeys[r]=a,new Promise(async(p,g)=>{r!="password"&&this.session.createOrUpdate(r,s),p()}).then(async()=>Promise.all(c.map(p=>p(r,s,f,h).then(()=>{let g=t[this.name];if(g){let m=g[r];m&&m.forEach(u=>{u(s)})}}))))}}return n}});var st=$((mr,nt)=>{nt.exports=class{constructor(e=[],t){this.html=t||document,this.cf=e,this.duration=300}animate(e){return this.config=this.parse(this.cf),new Promise(t=>{for(let n=0;n<this.config.length;n++){let i=this.config[n],{element:r}=i;if(!i[e]){t();break}let s=i[e];if(!s.options&&!(s.options&&s.options.duration)&&(s.options={duration:this.duration}),!s.keyframes&&!r)continue;let a=s.keyframes,c=0,h=[];for(let p=0;p<a.length;p++){let g=a[p];switch(!0){case typeof g=="string":h.push(this.dic(g));break;case g instanceof Object:{let{name:m,offset:u}=g;if(m&&u){let d=this.dic(m);d[d.length-1].offset=u,h.push(d)}else h.push(g)}}}a=h,h=null;let f=()=>{let p=a[c],g=r.animate(p,s.options||this.duration);g.finished?g.finished.then(()=>{c<a.length-1?(c+=1,f()):(a=[],t())}):g.onfinish=()=>{c<a.length-1?(c+=1,f()):(a=[],t())}};f()}})}parse(e){let t=[],n=e.length,i=-1;for(;++i<n;){let r=e[i],s=r.selector,a;switch(!0){case!!(s.val&&s.attr):a=this.html.querySelectorIncluded(`[${s.attr}=${s.val}]`,s.attr,s.val);break;case!!(s.val&&!s.attr):{let c=s.val.match(new RegExp("^[.]"))?"class":s.val.match(new RegExp("^[#]"))?"id":null,h=c?s.val.slice(1):null;a=this.html.querySelectorIncluded(s.val,c,h)}break}r.element=a,t.push(r)}return t}dic(e){return{slideOutUp:[{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1",easing:"ease-out"},{transform:"translate3d(0,100%,0)",visibility:"hidden",opacity:"0",easing:"ease-out"}],slideOutRight:[{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"},{transform:"translate3d(100%,0,0)",visibility:"hidden",opacity:"0"}],slideOutLeft:[{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"},{transform:"translate3d(-100%,0,0)",visibility:"hidden",opacity:"0"}],slideOutDown:[{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1",easing:"ease-out"},{transform:"translate3d(0,-100%,0)",visibility:"hidden",opacity:"0",easing:"ease-out"}],slideInUp:[{transform:"translate3d(0,100%,0)",visibility:"hidden",opacity:"0",easing:"ease-out"},{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1",easing:"ease"}],slideInRight:[{transform:"translate3d(100%,0,0)",visibility:"hidden",opacity:"0"},{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"}],slideInLeft:[{transform:"translate3d(-100%,0,0)",visibility:"hidden",opacity:"0",easing:"ease-out"},{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"}],slideInDown:[{transform:"translate3d(0,-100%,0)",visibility:"hidden",opacity:"0",easing:"ease-out"},{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1",easing:"ease-out"}],disappear:[{opacity:"1"},{opacity:"0"}],appear:[{opacity:"0"},{opacity:"1"}],flipInX:[,{offset:0,backfaceVisibility:"visible"},{transform:"perspective(400px) rotate3d(1,0,0,90deg)",opacity:"0",offset:0},{transform:"perspective(400px) rotate3d(1,0,0,-20deg)",offset:.4,easing:"ease-in"},{offset:.6,opacity:"1",transform:"perspective(400px) rotate3d(1,0,0,10deg)"},{transform:"perspective(400px) rotate3d(1,0,0,-5deg)",offset:.8},{offset:1,backfaceVisibility:"visible",transform:"perspective(400px) rotate3d(1,0,0,0)"}]}[e.trim()]||[]}}});var ot=$((yr,lt)=>{var si=st(),li=ye(),oi=R(),ai=ee(),ci=Z();function k(e,t,n){this.name=e,this.template=t,this.options=n,this.handlers=n.handlers,this.subscribe=n.subscribe,this.data={},this.root=n.root,this.items=!1,this.type=n.type||"view",this.toggle=n.toggle,this.targets={},this.animateOptions=n.animate,this.role=n.role,this.isReady=!1,this.scope=n.scope,this.formSelector=n.form,this.await={},this.state=n.state,this.originalState={},this.utils=oi,(e=="app"||n.role=="app")&&(this.staticComponent=n.static||[]),this.container={},this.compile=new Promise(i=>{this._bindHandlers(),i()}).then(()=>this._bindSubscribe()).then(()=>this.cloneState()).then(()=>{switch(this.type=="view"&&!!this.template){case!0:return this.createElementAsync();default:this.isStatic=!1;break}})}k.prototype.isStatic=!1;k.prototype.hasEvent=!1;k.prototype.isConnected=!1;k.prototype.destroyed=!1;k.prototype.isCreated=!1;k.prototype.cloneState=function(){if(!!this.state){for(let e in this.state)this.state.hasOwnProperty(e)&&(this.originalState[e]=this.state[e]);this.$state=(()=>this.state)()}};k.prototype.clearState=function(){!this.state||(this.state=JSON.parse(JSON.stringify(this.originalState)),this.$state=(()=>this.state)())};k.prototype.Subscribe=function(e){this.$observer.registerSubscribe({[e.listenTo]:{[e.original]:[e]}})};k.prototype.Node=function(e){return new li(e)};k.prototype._bindHandlers=function(){for(let e in this.handlers)if(this.handlers.hasOwnProperty(e)){let t=this.handlers[e],n=t.name;t=t.bind(this),t.original=n,t.binded=this.name,this.handlers[n]=t,this.initAwaitHandlers(e)}this.await.destroy||(this.await.destroy=Promise.resolve()),this.await.animateRemove||(this.await.animateRemove=Promise.resolve())};k.prototype.initAwaitHandlers=function(e){this.await[e]=Promise.resolve()};k.prototype._bindSubscribe=function(){let e={};for(let t in this.subscribe)if(this.subscribe.hasOwnProperty(t)){if(subscribe=this.subscribe[t],!!subscribe.components&&!subscribe.handler)throw new Error(`there is no handler in format many of subscribe in event ${t}`);if(!subscribe.components&&!!subscribe.handler)throw new Error(`there is no components in format many of subscribe in event ${t}`);if(!!subscribe.components&&!!subscribe.handler){let i=t,{components:r,handler:s}=subscribe;s=s.bind(this),s.binded=this.name,s.original=i;for(let a=0;a<r.length;a++){let c=r[a];e[c]||(e[c]={}),e[c][i]||(e[c][i]={}),s.listenTo=c,e[c][i]=s}}else{e[t]||(e[t]={});let i=subscribe;for(let r in i)if(i.hasOwnProperty(r)){let s=i[r],a=s.name;try{s=s.bind(this)}catch{}s.original=a,s.binded=this.name,s.listenTo=t,e[t][a]||(e[t][a]={}),e[t][a]=s}}}this.subscribe=e};k.prototype.doFor=function(e,t){let n=()=>this.html;if(t!=null)return this.$attrib.notifyFor(e,t,null,this.name,n())};k.prototype.doToggle=function(e,t){this.$attrib.notifyToggle(e,t,null,this.name,this.html)};k.prototype.doSwitch=function(e,t){this.$attrib.notifySwitch(e,t,null,this.name,this.html)};k.prototype.doIf=function(e,t){this.$attrib.notifyIf(e,t,null,this.name,this.html)};k.prototype.$animate=function(e){let t=this.$attrib.getWatchItemsByType(this.name,"animate"),n=this.animateOptions,i=[];return(()=>{if(!(!t.length&&!(t instanceof Array)||!n))for(let r=0;r<t.length;r++){let s=t[r],{ns:a,selector:c}=s;if(s.ns){if(n[a]){let h=n[a];Object.assign(s,n[a]),delete n[a]}}else i.push(t)}})(),t.length?((()=>{let r={},s={};for(let a in n)n.hasOwnProperty(a)&&(s.val=a,r.selector=s,Object.assign(r,n[a]),t.push(r),r={},s={})})(),new si(t,this.html).animate(e)):!1};k.prototype.$templating=function(e,t,n){let i=t||this.template;return new ai(ci("templating")).createElement(e,i,n)};k.prototype.createElement=function(){if(!(this.template.substring(0,1)=="#"))return;let t=this.template.substr(1),n=document.getElementById(t),i=this.isTemplate=n&&n.toString().includes("Template");if(!n)throw new Error(`the template for ${this.name} is not found with.`);return new Promise(r=>{switch(i){case!0:{let s=n.getContent(!0);if(!s)throw new Error(`it might be theres no template in component - ${this.name}`);s.cake_component=this.name,this.html=this.Node(s),this._parseHTML(this.isStatic).then(()=>{this._watchBindedItems(),r()})}break;case null:r();break;default:{let s=n;if(!s)throw new Error(`it might be theres no template in component - ${this.name}`);s.cake_component=this.name,this.html=this.Node(s),this.isStatic=!0,this._parseHTML(this.isStatic).then(()=>{r()})}}})};k.prototype.createElementAsync=function(){return new Promise(e=>{this.createElement().then(()=>{e()})}).then(()=>{this.isReady=!0})};k.prototype._isParsed=!1;k.prototype._parseHTML=function(e=!1){return this.$attrib.inject(this.html,this.name,e).then(()=>{this.original=this.html.cloneNode(),this._isParsed=!0})};k.prototype.render=function(e){if(this.isConnected)return console.error(`${this.name} is already rendered and connected to the DOM`),Promise.resolve();let{root:t,cleaned:n,emit:i={},data:r={}}=e||{},s=this.options.multiple,a=this.state||{},c={emit:i},h=f=>({...a,...r})[f]||null;return new Promise((f,p)=>{!!t&&(this.root=t),this.isReady?f():this.createElement().then(()=>!this.template&&this.fire.isConnected&&this.fire.isConnected(c,!0)).then(()=>{this.isReady=!0,f()})}).then(()=>this.await.destroy.then(()=>this.await.animateRemove).then(()=>new Promise((f,p)=>{let g=this.$attrib.getWatchItemsByType(this.name,"for");Promise.all(g.map(m=>this.doFor(m,h(m)))).then(()=>{f(this.html)})}).then(f=>(c={element:f,emit:i},new Promise((p,g)=>{try{this.fire.beforeConnected&&this.fire.beforeConnected(c,!0),p(f)}catch(m){g(m)}}))).then(f=>{if(!this.isStatic)return(r?(()=>new Promise(g=>{let m=f.getElement();m=this.$templating(r,m),this.html=f=this.Node(m),this.html.replaceDataSrc(),r=null,g()}))():Promise.resolve()).then(()=>{f.appendTo(this.root,n),this.isConnected=!0})}).then(()=>{}).then(()=>this.findContainer()).then(()=>{try{return this.fire.isConnected&&this.fire.isConnected(c,!0)}catch(f){console.log(440,f)}}).then(()=>this.findTarget()).then(()=>this.addEvent()).then(()=>this.$animate("render")).then(()=>(s&&this._smoothReset(),new Promise((f,p)=>{setTimeout(()=>{this._watchReactive(),f()},100)})))))};k.prototype.renderAsync=function(e){this.render(e).then(()=>{this.$persist.append(this.name)})};k.prototype._smoothReset=function(){this.isConnected=!1,this.html=this.original.cloneNode()};k.prototype._hardReset=function(e){return this.isConnected=!1,this.$persist.remove(e),this.html=this.original.cloneNode(),!0};k.prototype.reset=function(){let e=this.$animate("remove");return e instanceof Promise?this.await.animateRemove=new Promise(t=>{e.then(()=>this.html.remove()).then(()=>{this.container={}}).then(()=>this.clearState()).then(()=>this._hardReset(this.name)).then(()=>{t()})}):new Promise(t=>{this.html.remove(this.name),this.clearState(),this.container={},this._hardReset(this.name),t()})};k.prototype.addEvent=function(e,t){let n=this.name;function i(r,s,a,c){return function(h){a||h.preventDefault(),c&&h.stopPropagation(),Cake.Observer.notify(s,r,h)}}if(!!this.targets){for(let r in this.targets)if(this.targets.hasOwnProperty(r)){let s=this.targets[r];for(let a of s){let{sel:c,el:h,cb:f}=a,p=r,g=r.substring(0,2),m=g.includes("~"),u=g.includes("^");m||u?(p=r.slice(1),f=f||p):f||(f=r),h.Ref().get("__cake__events")||h.Ref().set("__cake__events",{});let d=h.Ref().get("__cake__events");if(!d[f])h.addEventListener(p,i(f,n,m,u),!0),d[f]=!0,h.Ref().set("__cake__events",d);else continue}}}};k.prototype.findTarget=function(){let e=this.$attrib.getEventTarget(this.name);return new Promise(t=>{for(let n of e){let i=this.html.querySelectorAllIncluded(`[data-event=${n.sel}]`);for(let r=0;r<i.length;r++)this.targets[n.event]||(this.targets[n.event]=[]),this.targets[n.event].push({el:i[r],...n})}t()})};k.prototype.toggler=function(e){let t=this.$attrib.getWatchItemsByType(this.name,"toggle"),n=class{constructor(r,s,a,c){this.toggle=c.toggle,this.bind=r,this.bases=s,this.cache=c.$cache,this.html=a}check(r){let s=this.toggle[r];if(!s)console.error(`${r} is not found in toggle! choose from ${JSON.stringify(Object.keys(this.toggle))}`);else{if(t.length){let{ns:a}=s,c=t.find(h=>h.name==`ns-${a}`);c&&(s.sel=`[data-toggle=${c.sel}]`)}return s}}_toggle(){let r=this.check(this.bind);if(!r)return;let{basis:s="data-name",cls:a="is-active",mode:c="radio",sel:h,persist:f=!0}=r,p=this.html.querySelectorAll(h);if(!p.length)return;let g,m;if(p.length==1){let u=typeof this.bases=="boolean",d=!!this.bases,y=p[0];if(f){let b=function(v,S,w){w?v.classList.contains(S)&&v.classList.remove(S):v.classList.contains(S)||v.classList.add(S)};u?(d?(this.cache.createOrUpdate(this.bind,!0),b(y,a,!0)):(this.cache.createOrUpdate(this.bind,!1),b(y,a,!1)),y.classList.toggle(a)):(this.cache.createOrUpdate(this.bind,!y.classList.contains(a)),y.classList.toggle(a))}}else for(let u=0;u<p.length;u++){let d=p[u],y=d.classList.contains(a),b=d.getAttribute(s);b==this.bases?(c=="switch"?d.classList.toggle(a):y||d.classList.add(a),f&&this.cache.createOrUpdate(this.bind,b),m=b):y&&(d.classList.remove(a),g=d.getAttribute(s))}return{prev:g,next:m}}_recall(){let r=this.check(this.bind);if(!r)return;let{basis:s="data-name",cls:a="is-active",sel:c}=r;return this.cache.get(this.bind).then(h=>{if(!h)return h;let f=h,p=this.html.querySelectorAll(c);if(!!p.length){if(p.length==1){let g=p[0];f&&g.classList.add(a)}else for(let g=0;g<p.length;g++){let m=p[g],u=m.classList.contains(a);m.getAttribute(s)==f&&(u||m.classList.add(a))}return f}})}},i=(r,s)=>new n(r,s,this.html,this)._toggle();return i.recall=r=>new n(r,!1,this.html,this)._recall(),i};k.prototype.findContainer=function(){return new Promise(e=>{let t=this.html.getContainers();for(let n=0;n<t.length;n++){let i=t[n],r=i.dataset.container;r&&(this.container[r]=i)}e()})};k.prototype._watchBindedItems=function(){};k.prototype._validator=function(e,t){if(this.options.validate){this.validate=this.options.validate;let n=this.validate[e]}};k.prototype._watchReactive=function(){if(this.role=="form"&&this.options.watch===!0){let e=this.options.validate,t=this.$form();if(t._reactive)return;this.state&&!this.state.formData&&(this.state.formData={});let n=this,i=r=>{let s=r.target,a=s.name||s.id,c=s.value,h=e[a];h?(h=h.bind(n),h&&h(r)&&(this.state&&(this.state.formData[a]=c),this.$scope.set(a,c))):(this.state&&(this.state.formData[a]=c),this.$scope.set(a,c))};t.addEventListener("change",r=>{r.target.tagName=="INPUT"||r.target.tagName=="TEXTAREA"||i(r)}),t.addEventListener("input",r=>{(r.target.tagName=="INPUT"||r.target.tagName=="TEXTAREA")&&i(r)}),t._reactive=!0}};k.prototype.observer=function(e){function t(n){return this.handler[n]}this.observer=new Observer(this,e,t.bind(this))};k.prototype.variable=function(e){let t=Object.keys(e),n={},i=[];function r(s,a,c){a||(n[s]=`value is not '${c}'`)}for(let s in e)if(e.hasOwnProperty(s)){let a=e[s],{type:c,value:h}=a,f;["string","number"].includes(c)?f=typeof h==c:h instanceof Array?f=c=="array":f=c=="object",i.push(h),r(s,f,c)}if(Object.keys(n).length)throw new Error(JSON.stringify(n));return i};lt.exports=k});var ct=$((br,at)=>{var ue=R(),ui=oe()(),hi=le(),he=new ui({child:"object",storage:"local",name:"_cake_router_cf"});at.exports=function(e,t){let n=[];return class{constructor(i,r){this.unauthRoute=r&&r["401"]||null,this.authRoute={},this.route=this.compile(i),this.prev=null,this.components=hi,this.watch(),this.persist(),Object.defineProperty(t.prototype,"$router",{configurable:!0,get:()=>({goTo:this.goTo.bind(this),goBack:this.goBack.bind(this),auth:this.auth.bind(this),logout:this.logout.bind(this),...this.prev}),set(s){}})}authenticate(i){if(this.unauthRoute)try{let r=he.get("role",!0);if(r){if(i){let{role:s,data:a}=r,c=this.authRoute[s];if(c){let{name:h}=c;this.goTo(h)}}}else i||this.logout()}catch{i||this.logout()}}auth(i){if(i){let{role:r,token:s,data:a}=i;he.createOrUpdate("role",{role:r,token:s,data:a})}else{let r=he.get("role",!0);if(r){let s={};return r&&(s=r),s.data&&(s=s.data),s.user&&(s=s.user),s.token=r.token,s}else return"token"}}logout(){try{he.remove("role")}catch{}this.goTo(this.unauthRoute,{replace:!0})}goTo(i,r){try{let a=this.route,{params:c={},replace:h}=r||{},f=null,p=Object.entries(a);for(let m=0;m<p.length;m++){let[u,d]=p[m],{name:y}=d;if(y==i){f=u;break}}if(!f)throw new Error(`${i} is not found in routes`);if(f=="/"){h?location.replace(`${location.origin}${location.pathname}`):window.location=`${location.origin}${location.pathname}`;return}let g;if(f=f.slice(1),c.toString().includes("Object")){let m="";for(let u in c)m+=`${u}=${c[u]}&`;c=m,g=`!/${f}?${c}`}else g=`!/${f}`;if(f=="/"&&(g=""),h){let m=`${location.origin}${location.pathname}#${g}`;ue.isChrome()&&!ue.isFirefox()&&history.replaceState(void 0,void 0,m),location.replace(m)}else{var s=document.createElement("a");s.href=`#${g}`,ue.isChrome()&&!ue.isFirefox()&&history.pushState(void 0,void 0,s.href),s.click()}}catch(a){console.log(a)}}goBack(){return new Promise((i,r)=>{window.history.back(),i()})}persist(){if(!document.hasRouterPersist){let i="DOMContentLoaded";"deviceready"in document&&(i="deviceready"),document.addEventListener(i,r=>{this.parse(),this.notify().then(()=>this.navigate(!0))}),document.hasRouterPersist=!0}}watch(){window.hasRouterPop?this.parse():(window.addEventListener("popstate",i=>{this.parse(),this.notify().then(()=>(console.log("notified"),this.clear().then(()=>(console.log("cleared"),this.navigate().then(()=>{console.log("navigated")})))))}),window.hasRouterPop=!0)}compile(i){let r={};for(let s in i){let a=i[s];s=String(s);let c=s.length,h=s;if(["404"].includes(s)){let p=i[s];i[s]={callback:p,name:s}}else h=h.slice(1);h=h.split("/"),h=h.map((p,g)=>{let m=p.includes(":"),u="";if(g==0?u+="^/":u+="/",m?u+="(([^/#?]+?))":u+=p,g==c-1?u+="/?$":u+="",m){let d=p.replace(":","");r[s]||(r[s]={}),r[s].params={[d]:g}}return u}),r[s]&&r[s].params?r[s]={params:r[s].params,regex:new RegExp(h.join("")),...a}:r[s]={regex:new RegExp(h.join("")),...a};let{auth:f}=a;if(f){if(this.authRoute[f])throw new Error(`auth ${f} is found in other route`);this.authRoute[f]=a}}return r.length=Object.keys(i).length,r.keys=Object.keys(i),r}parse(){let i=window.location.hash,r,s;if(i?(r=i.includes("#!/")?2:i.includes("#/")?1:null,i=i.slice(r)):(i="/",r=!0),!r)return;let a=new URL(`http://localhost${i}`),{search:c,pathname:h}=a,f=this.route.keys,p={};c&&new URLSearchParams(c).forEach((m,u)=>{p[u]=m});let g=!1;for(let m=0;m<f.length;m++){let u=this.route[f[m]],{regex:d,components:y,params:b,name:v,overlay:S,display:w,onrender:_}=u;if(b){let T=String(h);T=T.slice(1),T=T.split("/"),Object.entries(b).forEach(P=>{let[x,L]=P;T[L]&&(p[x]=T[L])})}if(d.test(h)){s=v,this.unauthRoute!=v?this.authenticate():this.authenticate(!0),this.prev={components:y,state:p,path:h,name:v,prev:this.prev,overlay:S,display:w,onrender:_},g=!0;break}}if(!g&&this.route["404"]){let m=this.route["404"].callback(),{origin:u,pathname:d}=location;this.route[m]?(m=="/"?m=`${u}${d}`:d.slice(-1)=="/"?m=`${u}${d}#!${m}`:m=`${u}${d}/#!${m}`,location.replace(m)):!!m&&!this.route[m]&&(u.slice(-1)=="/"&&m[0]=="/"&&(m=m.slice(1)),m=`${u}${m}`,location.replace(m))}}navigate(i){if(this.prev){let{components:r,state:s,path:a,name:c,overlay:h,onrender:f={}}=this.prev;try{if(r.length)return new Promise((p,g)=>{let m=r.length,u=0;if(m){let d=()=>{let y=r[u];if(r.length>u){let b=y;y=this.components.get(y),y.render({emit:{route:this.prev},...f[b]||{}}).then(()=>{y.await.isConnected?y.await.isConnected&&y.await.isConnected.then(()=>{d()}):d()}).catch(v=>{throw v}),u+=1}else p()};d()}else p()})}catch(p){throw console.log(p),new Error(`some of the component in ${JSON.stringify(r)} in path ${a} of router is not found, make sure the it is created`)}}}static pushState(i,r,s){window.history.pushState(i,r,s);let a=Promise.resolve();if(this.prev){let{components:c,state:h,path:f,name:p}=this.prev;a=new Promise((g,m)=>{let u=e.length,d=0;if(u){let y=()=>{let b=e[d];e.length>d?(b=this.components.get(b),b.fire.destroy(),b.await.destroy.then(()=>{y()})):g(),d+=1};y()}else g()})}return a.then(()=>this.navigate())}clear(){let i=Promise.resolve(),{overlay:r}=this.prev||{};if(r)return i;let s=function(a,c,h,f){let p=c[a],g=p,m=s;try{if(c.length>a){if(p=h.get(p),!p.fire.destroy)throw new Error(`${g} has no destroy handler!`);p.fire.destroy(),p.await.destroy.then(()=>{m(a,c,h,f)})}else f();a+=1}catch(u){throw u}};if(this.prev&&this.prev.prev){let{components:a,state:c,path:h,name:f,overlay:p}=this.prev.prev,g=Promise.resolve();return p&&(g=new Promise((m,u)=>{let d=this.prev.components;d.length?s(0,d,this.components,m):m()})),i=new Promise((m,u)=>{a.length?s(0,a,this.components,m):m()}),g.then(()=>i)}return i}pushState(i,r,s){window.history.pushState(i,r,s);let a=Promise.resolve();return this.clear(),a.then(()=>this.navigate())}static subscribe(i){i&&i.constructor.name=="Function"&&n.push(i)}notify(){return Promise.all(n.map(i=>i()))}}}});var ht=$((vr,ut)=>{var fi=oe()(),pi=le();ut.exports=class{constructor(){this.storage=new fi({child:"array",storage:"session",name:"_cake_persistent"})}listen(e){e=pi;let t="DOMContentLoaded";"deviceready"in document&&(t="deviceready"),window.addEventListener(t,n=>{setTimeout(()=>{this.storage.getAll().then(i=>{if(!!(i&&!i.length))for(let r=0;r<i.length;r++){let s=i[r],a=e.get(s);a.isConnected=!1,a?!a.isConnected&&a.render.bind(a)():console.error(`component ${a} is not found!`)}})})})}append(e){this.storage.create(e)}remove(e){this.storage.remove(e)}}});var fe=$((wr,pt)=>{var G={handlers:{},subscribe:{}};window.Stat=G;function ft(e,t,n){return e[t]==null&&(e[t]={}),e[t][n]==null?e[t][n]=0:e[t][n]+=1,!0}pt.exports={handlers:{set:function(e,t){return ft(G.handlers,e,t)},get:function(e){G.handlers[e]!=null?console.table(G.handlers[e]):console.log(null)}},subscribe:{set:function(e,t){return ft(G.subscribe,e,t)},get:function(e){G.subscribe[e]!=null?console.table(G.subscribe[e]):console.log(null)}}}});var ve=$((Sr,dt)=>{var di=fe(),W={};window.Subscribe=W;dt.exports={set:function(e){return new Promise((t,n)=>{for(component in e)if(e.hasOwnProperty(component)){let i=e[component];for(let r in i)if(i.hasOwnProperty(r)){let s=i[r];W[component]||(W[component]={}),W[component][r]||(W[component][r]=[]),W[component][r].push(s),di.subscribe.set(component,s.original)}}t()})},get:function(e,t){return W[e]&&W[e][t]}}});var we=$((Or,gt)=>{var gi=fe(),ie={};window.Handler=ie;gt.exports={set:function(e,t){return new Promise(n=>{for(let i in e)if(e.hasOwnProperty(i)){let r=e[i];ie[t]||(ie[t]={}),ie[t][r.original]=r,gi.handlers.set(t,r.original)}n()})},get:function(e,t){return ie[e]&&ie[e][t]}}});var vt=$((_r,bt)=>{var mi=ve(),yi=we(),mt=fe();function yt(e){this.logger=e||!1,this.results={}}yt.prototype.notify=function(e,t,n){let i=e,r=t,s=n,a=yi.get(i,r);if(!a){console.error(`no setup handler for the event ${r} in ${i} component`);return}i=a.binded;let c=new Promise((h,f)=>{let p=a(s);h(p)});return mt.handlers.set(i,a.original),c.then(h=>{let f=[];this.results[i]||(this.results[i]={});let p=mi.get(i,r);if(p)for(let g=0;g<p.length;g++){let m=p[g];mt.subscribe.set(i,m.original),f.push(new Promise((u,d)=>{try{let y=(()=>m(h))();y&&y.ObjectType=="Promise"?y.then(b=>{this.results[i]||(this.results[i]={}),this.results[i][r]=b,u(b)}).catch(b=>{d(b)}):(this.results[i][r]=y,u(y))}catch(y){console.log(y),d(y)}}))}else this.logger&&console.info(`no subscriber for (${r}) event of (${i}) component`),this.results[i][r]=h;return Promise.all(f).then(()=>(h=null,f=[],!0))})};bt.exports=yt});var St=$((kr,wt)=>{wt.exports=function(e){class t{constructor(r){this.type=r,this.storage={}}store(r,s){this.storage[r]=s}get options(){if(this.type=="select"||this.type=="virtual"){let r={};for(let s in this.storage){let a=this.storage[s];r[s]=a.options}return r}return!1}get value(){if(this.type=="input"){let r="";for(let s in this.storage)r=this.storage[s].options[0];return r}return!1}get query(){let r={};for(let s in this.storage)r=this.storage[s].query[0]||null;return r}get has(){let r="";for(let s in this.storage)r=this.storage[s].query[0]||null;return r}}let n={};return n.options=i=>{let{options:r,params:s}=i;r||(r=[]);let a=r.length>1;return Promise.all(r.map(h=>{let{control:f,field:p,tbl:g,src:m,schema:u,type:d}=h;return e.fire(m,{tbl:g,field:p,params:s}).then(y=>{if(y=y||[],h.query=y,y=y.map(b=>u(b)),d!="input"){let b=u({});for(let v in b)b.hasOwnProperty(v)&&(b[v]="");y.unshift(b)}return h.options=y,h}).then(y=>{let{type:b,control:v}=y;b||(b="others");let S=new t(b);if(a){let w={};return w[v]||(w[v]=S,w[v].store(v,y)),w}else return S.store(v,y),S})})).then(h=>a?h.reduce((f,p)=>(Object.assign(f,p),f),{}):h[0]).catch(h=>{console.error(h)})},n.plot=i=>{let{data:r,container:s}=i;if(!r&&!s)return;let a=(c,h,f)=>{if(!c){console.info("root is not provided!");return}let p=c.querySelectorAll(`${h}`),g=p.length;if(!g){f(null,r);return}for(let m=0;m<g;m++){let u=p[m],d=u.name,y=r[d],b=f(u,y,m);if(b=="break")break;b!="continue"}};return a(s,"INPUT.input",function(c,h){h!=null&&(c.type=="date"&&(h=new Date(h)=="Invalid Date"?"":new Date(h).toJSON().split("T")[0]),c.value=h)}),setTimeout(()=>{a(s,"SELECT.input:not(.cake-template)",function(c,h){a(c,"OPTION:not(.cake-template)",function(f,p,g){if(f){if(f.value==h)return c.selectedIndex=g,"break"}else console.log(f,p,"provide schema")})})},500),Promise.resolve()},n}});var Pt=$(($r,kt)=>{var bi=et(),Se=rt()(),H=ot(),vi=ct(),wi=ht(),Si=oe()(),Oi=vt(),_i=St(),Pr=R(),Tr=ee(),ki=Z(),Ot=ve(),_t=we(),Pi=le();function O(e){this.componentName=e,this.components={}}O.app=function(e){this.name=e.name||""};O.Components=function(e){return{subscribe(t,n){function i(){let r=O.Components[e];if(r&&t instanceof Function){let s=t.name;n&&(t=t.bind(n)),t.binded="external",t.original=s,t.listenTo=r.name,r.Subscribe(t)}}return new Promise((r,s)=>{let a=setInterval(()=>{O.Components[e]&&(i(),clearInterval(a),r())})})}}};O.Models={};O.plugin=ki;O.Attributes=new bi;O.Models.$loaded=function(e){return new Promise((t,n)=>{let i=setInterval(()=>{O.Models[e]&&(clearInterval(i),t(O.Models[e]))});setTimeout(()=>{O.Models[e]||(clearInterval(i),n(e))},1e4)})};O.MainMessageChannel=function(){let e=new MessageChannel;return{send(t){e.port2.postMessage(t)},receive(t){e.port1.onmessage=function(n){let{isTrusted:i,data:r}=n||{isTrusted:!1};t(i?{status:1,data:r}:{status:0,err:"not trusted!"})}}}}();O.Utils={scopeTrap(e){return!1},scopeNotifier(e){return e}};O.create=function(e,t,n){new O(e,t,n).create(e,t,n)};O.init=function(e){return new H(e)};O.Router=vi(O.Components,H);O.Persistent=new wi;O.Persistent.listen(O.Components);O.Cache=new Si({name:"cache",storage:"session",child:"object"});O.getSubscriber=function(e,t){let n=Ot,i={};for(let r in n)if(n.hasOwnProperty(r)){let s=n[r];for(let a in s)if(s.hasOwnProperty(a)){let c=s[a];for(let h of c){let f=h,p=f.original,g=f.binded;if(f.listenTo==e){if(p==t)if(!i[g])i[g]=t;else{let u=i[g]instanceof Array?i[g]:[i[g]];i[g]=u.concat(t)}else if(!t)if(!i[g])i[g]=p;else{let u=i[g]instanceof Array?i[g]:[i[g]];i[g]=u.concat(p)}}}}}return i};O.Observer=new Oi;O.prototype._defineProperty=function(e,t,n,i){Object.defineProperty(e,t,{configurable:!0,get(){return n()},set(r){i&&i(r)}})};O.prototype._defineProperty(H.prototype,"$observer",function(){return O.Observer});O._globalScope=new Se("globalScope");O.prototype._defineProperty(H.prototype,"$globalScope",function(){return O._globalScope});O._universalScope=new Se("universalScope");O.$universalScope=function(){return O._universalScope};O.prototype._defineProperty(H.prototype,"$attrib",function(){return O.Attributes});O.prototype._defineProperty(H.prototype,"$persist",function(){return O.Persistent});O.prototype._defineProperty(H.prototype,"$cache",function(){return O.Cache});O.prototype._defineProperty(H.prototype,"$hash",function(){return O.Hasher});O.prototype.create=function(e,t,n){console.time(e);let i=new H(e,t,n),r=new Se(e);i.scope&&(()=>{for(let s in i.scope)if(i.scope.hasOwnProperty(s)){let a=i.scope[s];for(let c in a)if(a.hasOwnProperty(c)){let h=a[c],f=h.name;h=h.bind(i),r.hook(s,f,h)}}})(),r.registerNotifier(function(s,a,c,h){return O.Attributes.notifier(s,a,c,h)}),O.Attributes.registerNotifier(e,function(s,a){return r.notifier(s,a)}),i.compile.then(()=>{let{subscribe:s,root:a,html:c,handlers:h,role:f,state:p}=i;return Ot.set(s).then(()=>({root:a,handlers:h}))}).then(({handlers:s,root:a})=>{_t.set(s,i.name),this._defineProperty(i,"root",function(){if(i._root)return i._root;{let c=a||"#app",h=document.querySelector(c);if(h)return h}throw new Error(`the selector '${a}' as container of component '${i.name}' is not found!`)},function(c){Object.assign(i,{_root:c})}),this._defineProperty(i,"$scope",function(){return r}),i.role=="form"&&(()=>{let c=_i(i),h=()=>i.root.querySelector(i.formSelector||"FORM");for(let f in c)c.hasOwnProperty(f)&&Object.defineProperty(h,f,{get(){return c[f]}});this._defineProperty(i,"$form",function(){return h})})()}).then(()=>{i.fire=function(){function s(c,h){h=h?typeof h=="function"?h.bind(i)():function(){return h}.bind(i)():null;let f={[c]:()=>h};if(fn=f[c].bind(i),typeof fn=="function"){let m=function(d){let y={};if(!d)return y;let b=d.attributes;if(b)for(let v=0;v<b.length;v++){let S=b[v],w=S.name,_=S.value;y[w]=_}return y};var p=m;fn.name=c,fn.original=c,fn.binded=i.name,_t.set({[c]:fn},i.name);let g=h;if(h&&(h.element||h.root||h.container)){let d=m(h.element),y=m(h.root),b=m(h.container);g={status:0,attributes:{element:d,root:y,container:b}}}let u=O.Observer.notify(i.name,c,{}).then(()=>O.Observer.results[i.name][c]);return i.await[c]=u,i.await[c]}console.error("the param in fire is not an instance of function")}function a(c,h){for(let f in h)if(h.hasOwnProperty(f)){let p=h[f],g=p.original,m={[g]:function(u,d){return d!=null&&(d=d),d==null&&(d=!1),d==null&&g=="destroy"&&(d=!0),d?(i.await[g]=new Promise(y=>{setTimeout(()=>{let b=u||{};O.Observer.notify(i.name,g,b).then(()=>O.Observer.results[i.name][g]).then(v=>{y(v)}).catch(v=>{console.log(448,i.name,g,b),console.trace(),console.error(v)})})}),i.await[g]):p(u)}};m[g]=m[g].bind(i),m[g].originalName=g,m[g].binded=i.name,c[g]=m[g],c.component=i.name}}return a(s,i.handlers),s}()}).then(()=>{i.type=="view"&&(i.toggler=i.toggler(i),Pi.set(e,i))}).then(()=>{i.options.router&&O.Router.subscribe(i.options.router.bind(i)),i.options.data&&i.options.data.bind(i.data)(i),i.options.init&&i.options.init.bind(i)(),i.options.utils&&i.options.utils.bind(i.utils)(i)}).then(()=>{i.type=="model"&&(O.Models[e]=i),i.isStatic&&i.type=="view"&&i.render()})};kt.exports=O});var Er=Oe(),qr=_e(),Ar=ke(),Cr=R(),Lr=Ee(),jr=Z(),Ti=Pt();window.Cake=Ti;})();
