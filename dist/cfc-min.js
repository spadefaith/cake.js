(()=>{var I=(g,p)=>()=>(p||g((p={exports:{}}).exports,p),p.exports);var D=I(()=>{(function(g){g.env={destructure:!0};let p=g.env;try{let{a:h}={a:!0}}catch{p.destructure=!1}Promise.prototype.ObjectType="Promise"})(window)});var F=I(()=>{(function(g){HTMLCollection.prototype.toArray=function(){let p=[];for(let h=0;h<this.length;h++)p[h]=this[h];return p},NodeList.prototype.toArray=function(){let p=[],h=-1,c=this.length;for(;++h<c;)p[h]=this[h];return p},Object.cache=Object.create(null),String.prototype.toHyphen=function(){let p=Object.cache,h=null,c=this;if(p.toHyphen||(p.toHyphen={}),p[c]&&(h=p[c]),h!=null)return h;let m=c.split(""),e="",t=-1;for(;++t<m.length;){let n=m[t];switch(t){case 0:e+=n.toLowerCase();break;default:n.charCodeAt()<91&&(e+="-"),e+=n.toLowerCase()}}return p[c]=e,h=e,h},String.prototype.toCamelCase=function(){let p=this.toLowerCase(),h=Object.cache,c=null;switch(!0){case!h.toCamel:h.toCamel={};case!0:h=h.toCamel;case h[p]:c=h[p];break;default:{let m=p.split("-");if(m.length==1)return p;let e="",t=-1,n=m.length;for(;++t<n;){let a=m[t];switch(t){case 0:e+=a;default:{let s=a.substring(0,1).toUpperCase(),u=a.substring(1);e+=s+u}break}}h[p]=e,c=e}break}return c},HTMLElement.prototype.querySelectorIncluded=function(p,h,c){let m=this.querySelector(p);return m||(()=>{switch(!0){case(!h&&!c):{let e=this.closest(p);e==this&&(m=e)}break;case(!!h&&!!c):m=this.getAttribute(h)==c?this:null;break;case(!!h&&!c):m=this.getAttribute(h)?this:null;break}return m})()},HTMLElement.prototype.querySelectorAllIncluded=function(p,h,c){let m=this.querySelectorAll(p).toArray();switch(!0){case(!h&&!c):{let e=this.closest(p);e==this&&m.push(e)}break;case(h&&c):this.getAttribute(h)==c&&m.push(this);break;case(h&&!c):this.getAttribute(h)&&m.push(this);break}return m},HTMLDocument.prototype.querySelectorIncluded=function(p){return this.querySelector(p)},HTMLDocument.prototype.querySelectorAllIncluded=function(p){return this.querySelectorAll(p)},Array.prototype.toggler=function(p,h){for(let c=0;c<this.length;c++){let m=this[c];(m.dataset.name==p||m.classList.contains(h))&&m.classList.toggle(h)}},HTMLElement.prototype.Ref=function(){let p="_cakes_storage";!this[p]&&(this._cakes_storage={});let h=this[p];return{set(c,m){h[c]=m},get(c){return h[c]},getAll(c){return h},remove(c){delete h[c]}}}})(window)});var B=I(()=>{Object.keys||(Object.keys=function(g){var p=[];for(var h in g)g.hasOwnProperty(h)&&p.push(h);return p})});var K=I((xt,W)=>{var R={},H={typeof:function(g){switch(!0){case typeof g=="string":return"string";case typeof g=="number":return"number";case g instanceof Array:return"array";case g instanceof Function:return"function";case g instanceof HTMLCollection:return"htmlcollection";case g instanceof NodeList:return"htmlnodelist";case g instanceof Element:return"domlement";case g instanceof Object:return"object"}},isArray:function(g){return this.typeof(g)=="array"},isObject:function(g){return this.typeof(g)=="object"},isNumber:function(g){return this.typeof(g)=="number"},isString:function(g){return this.typeof(g)=="string"},isHTMLCollection:function(g){return this.typeof(g)=="htmlcollection"},isNodeList:function(g){return this.typeof(g)=="htmlnodelist"},isElement:function(g){return this.typeof(g)=="domlement"},isFunction:function(g){return this.typeof(g)=="function"}},x={each:function(g,p,h){if(h=="object"){var c=0;for(var m in g)g.hasOwnProperty(m)&&(p({key:m,value:g[m]},c),c=c+1)}else for(var e=0;e<g.length;e++)p(g[e],e)},map:function(g,p){var h=H.isArray(g)||g.length?"array":"object",c=g.length&&h=="array"?[]:{};return this.each(g,function(m,e){var t=p(m,e);h=="object"?c[t.key]=t.value:c.push(t)},h),c},reduce:function(g,p,h){var c=H.typeof(g);return this.each(g,function(m,e){p=h(m,p,e)},c),p},filter:function(g,p){var h=H.isArray(g)||g.length?"array":"object",c=g.length&&h=="array"?[]:{};return this.each(g,function(m,e){var t=p(m,e);t&&(h=="object"?c[m.key]=m.value:c.push(m.value))},h),c}},J={perf:function(g){console.time("test"),g(),console.timeEnd("test")},logTest:function(g,p,h){switch(p){case"==":return g==h;case"!=":return g!=h;case"<":return g<h;case">":return g>h;case">=":return g>=h;case"<=":return g<=h}},toUrlSearchParams:function(g,p=!0){let h="";for(let c in g)if(g.hasOwnProperty(c)){let m=g[c];p&&m?h+=`${encodeURI(c)}=${encodeURI(m)}&`:h+=`${encodeURI(c)}=${encodeURI(m)}&`}return h},sanitize:function(g){if(typeof g!="string")return g;let p={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},h=/[&<>"'/]/ig;return g.replace(h,c=>p[c])},toFormData:function(g,p={}){let h=new FormData(g),c={},m=new FormData;for(let[e,t]of h.entries())t&&(t=this.sanitize(t)),p.json?p.trim?t&&(c[e]=t):c[e]=t:m.append(e,t);return p.json?c:m},loopStringSplitSpace:function(g,p){if(g&&(g=g.split(" "),H.isArray(g)))for(let h=0;h<g.length;h++)p(g[h])}};try{R.UTILS={...x,...H,...J}}catch{R.UTILS={},M=x.each,M(x,function(p,h){R.UTILS[p]=h}),M(H,function(p,h){R.UTILS[p]=h}),M(J,function(p,h){R.UTILS[p]=h})}var M;W.exports=R.UTILS});var z=I(()=>{(function(){customElements.define("sub-template",class extends HTMLElement{constructor(){super()}connectedCallback(){this.replace(this)}replace(g){let p=g.dataset.template,h=document.getElementsByName(p);if(h.length>1){console.error(`template with name ${p} has more than one reference.`);return}if(!h)throw g.remove(),new Error(`${p} is not found!`);if(h[0]){let c=h[0];if(c.constructor.name=="HTMLTemplateElement"){if(c=c.content.cloneNode(!0).firstElementChild,!c)return;let m=g.attributes;for(let e=0;e<m.length;e++){let t=m[e];t.name!="data-template"&&c.setAttribute(t.name,t.value)}g.replaceWith(c)}else throw new Error(`${p} is not referred to a Template Element!`)}}}),HTMLTemplateElement.prototype.replaceSubTemplate=function(g){let p=g.getElementsByTagName("sub-template");if(p){p=p.toArray();for(let h=0;h<p.length;h++){let c=p[h];customElements.get("sub-template").prototype.replace(c)}}},HTMLTemplateElement.prototype.collectContent=function(){let g=this,p=null,h=g.cloneNode(!0),c=document.createDocumentFragment(),m=h.content.querySelector("style");m&&c.appendChild(m);let e=[];for(let t=0;t<h.content.children.length;t++){let n=h.content.children[0];this.replaceSubTemplate(n),e.push(n)}return p={style:c.children[0],others:e},p},HTMLTemplateElement.prototype.parseStyle=function(g){if(!g)return!1;var p=g.textContent;if(p=p.replace(/\s/g,""),!p.length)return;let h=!1,c=!1,m=!1,e=p.split(""),t="";p="";var n=!1;for(let a=0;a<e.length;a++){let s=e[a];s=="{"&&(h=!0,c=!0),s=="}"&&(h=!1,c=!1),!h&&s!="	"&&s!="}"&&s!=" "&&s!=";"&&(t+=s),c&&s!="	"&&s!="{"&s!=" "&&(p+=s),s=="}"&&(n||(n={}),n[t]=p,t="",p="")}return n},HTMLTemplateElement.prototype.parseHTML=function(g){if(g){var p=document.createElement("HTML");for(let h=0;h<g.length;h++){let c=g[h];p.append(c)}}return p||!1},HTMLTemplateElement.prototype.getContent=function(g){let{style:p,others:h}=this.collectContent(),c=this.parseStyle(p),m=this.parseHTML(h);for(let e in c)if(c.hasOwnProperty(e)){let t=m.querySelectorAll(e),n=c[e];for(let a=0;a<t.length;a++)t[a].setAttribute("style",n)}return m=g?m.children.toArray():m.innerHTML,m.length==1?m[0]:m}})()});var G=I((Bt,X)=>{X.exports=function(){function g(r){return r.constructor.name.toLowerCase()}function p(r,i){for(let y in r)r.hasOwnProperty(y)&&i(r[y],y)}function h(r,i,y){r=Object.assign(r,{[y]:i})}function c(r){return r===null}function m(r){return r===void 0}function e(r){return g(r)=="array"}function t(r){return g(r)=="object"}var n=function(r,i){for(var y=null,v=0;v<r.length;v++){var b=r[v];if(g(i)=="object"){var S=i,w=Object.keys(i)[0],_=S[w];if(g(b)=="object"){var O=b[w]==_;if(O){y=v;break}}}else if(g(i)!="array"){var O=i==b;if(O){y=v;break}}}return y},a=function(r,i){var y=null,v=g(i);if(v=="object"){var b=Object.keys(i)[0];r[y]!=null&&r[y]==i[b]&&(y=b)}else v=="string"&&(y=i);return y},s=function(r,i){var y=null;return g(r)=="array"?y=n(r,i):g(r)=="object"&&(y=a(r,i)),y},u=class{constructor(r,i,y){this.type=r,this.name=i,this.child=y,this.cache={},g(this.child)=="string"&&(this.child=y=="array"?[]:y=="object"?{}:!1)}init(r){return this[this.type]?(this[this.type](r),!0):!1}open(){if(this.type=="session"){var r=JSON.parse(sessionStorage[this.name]);return r[this.name]}else if(this.type=="local"){var r=JSON.parse(localStorage[this.name]);return r[this.name]}else return this.cache[this.name]}close(r){return this.child=r,this.create(),this.init(!0)}create(){this.cache[this.name]=this.child}array(){this.create()}object(r){this.create()}session(r){this.create();try{sessionStorage[this.name]?r?sessionStorage.setItem(this.name,JSON.stringify(this.cache)):(sessionStorage.removeItem(this.name),sessionStorage.setItem(this.name,JSON.stringify(this.cache))):sessionStorage.setItem(this.name,JSON.stringify(this.cache))}catch{this.create()}}local(r){this.create();try{localStorage[this.name]?r?localStorage.setItem(this.name,JSON.stringify(this.cache)):(localStorage.removeItem(this.name),localStorage.setItem(this.name,JSON.stringify(this.cache))):localStorage.setItem(this.name,JSON.stringify(this.cache))}catch{this.create()}}},f={create:function(r,i){if(e(r)){let y=new Set(r);g(i)=="array"?i.forEach(v=>{y.add(v)}):y.add(i),r=Array.from(y)}else t(r)&&(t(i)?p(i,function(y,v){r[v]=y}):r[i]=i);return r},createOrUpdate:function(r,i){var y=s(r,i);return g(r)=="array"?c(y)?r.includes(i):r[y]=i:g(r)=="object"&&(c(y)?t(i)?p(i,function(v,b){h(r,v,b)}):r[i]=i:r[y]=i),r},remove:function(r,i){if(g(i)=="string"){var y=s(r,i);if(g(r)=="object")delete r[y];else if(g(r)=="array"){for(var v=[],b=0;b<r.length;b++)if(b!=y)v.push(r[b]);else continue;r=v}return r}else{if(g(i)=="object")return Object.filter(r,function(S,w){var _=i[w]!=null&&i[w]==S;return!_});if(g(i)=="array")return Object.filter(r,function(S,w){var _=i.contains(w);return!_})}if(c(y))return!1},get:function(r,i){var y=g(i);if(y=="string"){var v=s(r,i);if(v==0||v)return r[v]}else{if(y=="object")return Object.filter(r,function(b,S){var w=!m(i[S])&&i[S]==b;return w});if(y=="array")return Object.filter(r,function(b,S){var w=i.contains(S);return w})}return null},getNot:function(r,i){var y=g(i);return y=="string"?Object.filter(r,function(v,b){var S=b!=i;return S}):y=="object"?Object.filter(r,function(v,b){return Object.some(i,function(S,w){var _=w==b&&S==v;return!_})}):y=="array"?Object.filter(r,function(v,b){var S=!i.contains(b);return S}):null},getAll:function(r){return r}},d=class{constructor(r){this.name=r.name,this.storageType=r.storage,this.child=r.child||"object";try{g(this.child)=="string"&&(this.child=this.child=="array"?[]:this.child=="object"?{}:null)}catch{this.storageType=="session"?sessionStorage.clear():this.storageType=="local"&&localStorage.clear(),g(this.child)=="string"&&(this.child=this.child=="array"?[]:this.child=="object"?{}:null)}if(!["array","object"].includes(g(this.child)))throw new Error("the child must be an object or array type.");this.storage=new u(this.storageType,this.name,this.child),this.storage.init()}has(r){var i=this.storage.open(),y=s(i,r);return c(y)?!1:y}get(r,i){if(i){var y=this.storage.open();return f.get(y,r)}else return new Promise((v,b)=>{setTimeout(()=>{var S=this.storage.open();v(S)})}).then(v=>f.get(v,r))}getNot(r){var i=this.storage.open();return f.getNot(i,r)}getAll(){var r=this.storage.open();return Promise.resolve(r)}update(r,i){var y=this.storage.open(),v=s(y,r);return v==0||v?(y=f.createOrUpdate(y,data),this.storage.close(y)):!1}createOrUpdate(r){if(arguments.length>1){let v=arguments[0],b=arguments[1];r={[v]:b}}var i=this.storage.open();return i=f.createOrUpdate(i,r),this.storage.close(i)}create(r){var i=this.storage.open();return i=f.create(i,r),this.storage.close(i)}remove(r){var i=this.storage.open();return i=f.remove(i,r),this.storage.close(i)}};return d}});var Q=I((Jt,Y)=>{Y.exports=function(){function g(p){this.el=g.toArray(p)}return g.toArray=function(p){let h=[];switch(!0){case p instanceof Array:h=p;break;case(p.length&&p.tagName&&p.tagName!="FORM"&&!(p instanceof Array)):for(let c=0;c<p.length;c++)h.push(p[c]);break;case!(p instanceof Array):h=[p];break}return h},g.prototype.getElements=function(){return this.el},g.prototype.getElement=function(){return this.el[0]},g.prototype.remove=function(p){let h=-1,c=this.el.length,m=document.createDocumentFragment();for(;++h<c;){let e=this.el[h];e&&m.appendChild(e)}fr=null},g.prototype.replaceDataSrc=function(){let h=this.el[0].querySelectorAll("[data-src]");for(let c=0;c<h.length;c++)el=h[c],el.setAttribute("src",el.dataset.src),el.removeAttribute("data-src")},g.cloneNode=function(p){p=p instanceof Array?p:this.toArray(p);let h=[];for(let c=0;c<p.length;c++)h.push(p[c].cloneNode(!0));return new g(h)},g.prototype.dataset=function(p,h){let c=this.el.length,m=-1;for(;++m<c&&!(this.el[m].dataset[p]&&h(this.el[m])=="break"););return!0},g.prototype.getContainers=function(){return this.getElementsByDataset("container").container},g.prototype.cloneNode=function(p){return p=this.el,g.cloneNode(p)},g.prototype.getAllElements=function(){let p=this.el.length,h=[];switch(!0){case p==1:h=this.el[0].getElementsByTagName("*").toArray();break;case p>1:{let c=-1;for(;++c<p;){let e=this.el[c].getElementsByTagName("*");if(e)for(let t=0;t<e.length;t++)h.push(e[t])}}break}return h},g.prototype.appendTo=function(p,h){if(!p&&!p.attributes)throw new TypeError(`the ${p} is not an instance of Element`);h&&(p.innerHTML="");for(let c=0;c<this.el.length;c++){let m=this.el[c];p.appendChild(m)}},g.prototype.getElementsByTagName=function(p){let h=this.el.length,c=[];switch(!0){case h==1:c=this.el[0].getElementsByTagName(id).toArray();break;case h>1:{let m=-1;for(;++m<h;){let t=this.el[m].getElementsByTagName(selector);if(t)for(let n=0;n<t.length;n++)c.push(t[n])}}break}return c},g.prototype.getElementById=function(p){let h=this.el.length,c=[];switch(!0){case h==1:c=this.el[0].getElementById(id);break;case h>1:{let m=-1;for(;++m<h;){let t=this.el[m].querySelector(selector);t&&c.push(t)}}break}return c},g.prototype.querySelectorAll=function(p){let h=this.el.length,c=[];switch(!0){case h==1:c=this.el[0].querySelectorAll(p);break;case h>1:{let m=[],e=-1;for(;++e<h;){let n=this.el[e].querySelectorAll(p);n&&(c=c.concat(n.toArra()))}}break;default:c=[]}return c},g.prototype.querySelector=function(p){let h=this.el.length,c=[];switch(!0){case h==1:c=this.el[0].querySelector(p);break;case h>1:{let m=-1;for(;++m<h;){let t=this.el[m].querySelector(p);t&&c.push(t)}}break}return c},g.prototype.querySelectorIncluded=function(p,h,c){let m=this.el.length,e=[];switch(!0){case m==1:e=this.el[0].querySelectorIncluded(p,h,c);break;case m>1:{let t=-1;for(;++t<m;){let a=this.el[t].querySelectorIncluded(p,h,c);a&&e.push(a)}}break}return e},g.prototype.querySelectorAllIncluded=function(p,h,c){let m=this.el.length,e=[];switch(!0){case m==1:e=this.el[0].querySelectorAllIncluded(p,h,c);break;case m>1:{let t=-1;for(;++t<m;){let a=this.el[t].querySelectorAllIncluded(p,h,c);a&&(e=e.concat(a.toArra()))}}break}return e},g.prototype.contains=function(p){let h=this.el.length,c=!1;switch(h==1){case!0:c=this.el[0].contains(p);break;case!1:{let m=-1;for(;++m<h;)if(this.el[m].contains(p)){c=!0;break}}break}return c},g.prototype.getElementsByDataset=function(){let p,h,c,m,e,t;for(p=arguments,o={},length=p.length,c=-1,m=-1;++c<this.el.length;)for(e=this.el[c];++m<length;)h=p[m],e.getAttribute(`data-${h}`)?o[h]=[e]:o[h]=[],t=e.querySelectorAll(`[data-${h}]`),t.length&&(o[h]=o[h].concat([...t]));return o},g}});var V=I((Wt,Z)=>{Z.exports=function(){function g(p,h,c){this.subscribe=p,this.handlers=h,this.logger=c||!1,this.stat={handlers:{},subscribe:{}},this.results={},this.wm=new WeakMap}return g.prototype.notify=function(p,h,c,m,e,t){function n(){return{_component:p,_event:h,_e:c}}function a(i){return i}let{_component:s,_event:u,_e:f}=n(),d=this.handlers[s]&&this.handlers[s][u];if(d==null&&e){let i={[u]:function(){return f}};i[u].binded=s,i[u].listenTo=t,d=i[u]}if(s=d.binded,d=d,!d){console.error(`no setup handler for the event ${u} in ${s} component`);return}let r=new Promise((i,y)=>{let v=d(f);i(v)});return this.stat.handlers[d.original]+=1,r.then(i=>{let y=[];if(this.results[s]||(this.results[s]={}),this.subscribe[s]&&this.subscribe[s][u]){let v=this.subscribe[s][u];m=m?(()=>{v=v.filter(b=>{let S=b.binded;return m.includes(S)})})():!0;for(let b=0;b<v.length;b++){let S=v[b];this.stat.subscribe[S.original]+=1,y.push(new Promise((w,_)=>{try{let O=(()=>S(i))();O&&O.ObjectType=="Promise"?O.then(k=>{this.results[s]||(this.results[s]={}),this.results[s][u]=O,w()}).catch(k=>{_(k)}):(this.results[s][u]=O,w())}catch(O){console.log(O),_(O)}}))}}else this.logger&&console.info(`no subscriber for (${u}) event of (${s}) component`),this.results[s][u]=i;return Promise.all(y).then(()=>{i=null})})},g.prototype.registerSubscribe=function(p){return new Promise((h,c)=>{for(component in p)if(p.hasOwnProperty(component))if(!this.subscribe[component])this.subscribe[component]={};else continue;h()}).then(()=>{let h={};for(component in p)if(p.hasOwnProperty(component)){let c=p[component];for(let m in c)if(c.hasOwnProperty(m)){let e=c[m];for(let t=0;t<e.length;t++){let n=e[t];h[component]||(h[component]={}),h[component][n.original]||(h[component][n.original]=[]),h[component][n.original].push(n),this.stat.subscribe[n.original]=0}}}return h}).then(h=>{for(let c in h)if(h.hasOwnProperty(c)){this.subscribe[c]||(this.subscribe[c]={});for(let m in h[c])if(h[c].hasOwnProperty(m))for(let e of h[c][m])this.subscribe[c][e.original]||(this.subscribe[c][e.original]=[]),this.subscribe[c][e.original].push(e)}h={}})},g.prototype.registerHandlers=function(p,h){this.handlers[h]||(this.handlers[h]={});for(let c in p)if(p.hasOwnProperty(c)){let m=p[c];this.handlers[h][c]=m,this.stat.handlers[m.original]=0}},g}});var et=I((Kt,tt)=>{tt.exports=function(){function g(p,h,c){this.data=p,this.template=h,this.isConvert=c}return g.prototype._getTag=function(p){return p.match(new RegExp("(?<=<)|([^/s]+)(?=>)","g"))[2]},g.prototype._bindReplace=function(p,h){for(let c in p)if(p.hasOwnProperty(c)){let m=new RegExp(`{{${c}}}`,"g");m&&(h=h.replace(m,`${p[c]}`))}return h},g.prototype._toElement=function(p,h){let c=document.createElement("template");return c.innerHTML=p,c.content.children[0]},g.prototype.createElement=function(){let p=this.template,h=this.data,c=this.isConvert;if(h){if(h instanceof Array){let m=typeof p=="string",e=m?this._getTag(p):p.tagName;p=m?p:p.outerHTML;let t=[];for(let n=0;n<h.length;n++){let a=h[n],s=this._bindReplace(a,p),u=this._toElement(s,e);c&&(u=u.outerHTML),t.push(u)}return t}else if(h instanceof Object){let m=typeof p=="string",e=m?this._getTag(p):p.tagName;p=m?p:p.outerHTML;let t=this._bindReplace(h,p),n=this._toElement(t,e);return c&&(n=n.outerHTML),n}}else{let e=typeof p=="string"?this._getTag(p):p.tagName;return this._toElement(p,e)}},g}});var rt=I((zt,it)=>{it.exports=class{constructor(g=[],p){this.html=p||document,this.cf=g,this.duration=300}animate(g){return this.config=this.parse(this.cf),new Promise(p=>{for(let h=0;h<this.config.length;h++){let c=this.config[h],{element:m}=c;if(!c[g]){p();break}let e=c[g];if(!e.options&&!(e.options&&e.options.duration)&&(e.options={duration:this.duration}),!e.keyframes&&!m)continue;let t=e.keyframes,n=0,a=[];for(let u=0;u<t.length;u++){let f=t[u];switch(!0){case typeof f=="string":a.push(this.dic(f));break;case f instanceof Object:{let{name:d,offset:r}=f;if(d&&r){let i=this.dic(d);i[i.length-1].offset=r,a.push(i)}else a.push(f)}}}t=a,a=null;let s=()=>{let u=t[n];m.animate(u,e.options||this.duration).finished.then(()=>{n<t.length-1?(n+=1,s()):(t=[],p())})};s()}})}parse(g){let p=[],h=g.length,c=-1;for(;++c<h;){let m=g[c],e=m.selector,t;switch(!0){case!!(e.val&&e.attr):t=this.html.querySelectorIncluded(`[${e.attr}=${e.val}]`,e.attr,e.val);break;case!!(e.val&&!e.attr):{let n=e.val.match(new RegExp("^[.]"))?"class":e.val.match(new RegExp("^[#]"))?"id":null,a=n?e.val.slice(1):null;t=this.html.querySelectorIncluded(e.val,n,a)}break}m.element=t,p.push(m)}return p}dic(g){return{slideOutUp:[{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"},{transform:"translate3d(0,100%,0)",visibility:"hidden",opacity:"0"}],slideOutRight:[{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"},{transform:"translate3d(100%,0,0)",visibility:"hidden",opacity:"0"}],slideOutLeft:[{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"},{transform:"translate3d(-100%,0,0)",visibility:"hidden",opacity:"0"}],slideOutDown:[{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"},{transform:"translate3d(0,-100%,0)",visibility:"hidden",opacity:"0"}],slideInUp:[{transform:"translate3d(0,100%,0)",visibility:"hidden",opacity:"0"},{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"}],slideInRight:[{transform:"translate3d(100%,0,0)",visibility:"hidden",opacity:"0"},{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"}],slideInLeft:[{transform:"translate3d(-100%,0,0)",visibility:"hidden",opacity:"0",easing:"ease-out"},{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"}],slideInDown:[{transform:"translate3d(0,-100%,0)",visibility:"hidden",opacity:"0"},{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"}],disappear:[{opacity:"1"},{opacity:"0"}],appear:[{opacity:"0"},{opacity:"1"}],flipInX:[,{offset:0,backfaceVisibility:"visible"},{transform:"perspective(400px) rotate3d(1,0,0,90deg)",opacity:"0",offset:0},{transform:"perspective(400px) rotate3d(1,0,0,-20deg)",offset:.4,easing:"ease-in"},{offset:.6,opacity:"1",transform:"perspective(400px) rotate3d(1,0,0,10deg)"},{transform:"perspective(400px) rotate3d(1,0,0,-5deg)",offset:.8},{offset:1,backfaceVisibility:"visible",transform:"perspective(400px) rotate3d(1,0,0,0)"}]}[g.trim()]||[]}}});var st=I((Xt,nt)=>{nt.exports=function(g){let p=g.StorageKit;return class{constructor(){this.storage=new p({child:"array",storage:"session",name:"_cake_persistent"})}listen(h){window.addEventListener("DOMContentLoaded",c=>{setTimeout(()=>{this.storage.getAll().then(m=>{if(!(m&&!m.length))for(let e=0;e<m.length;e++){let t=m[e],n=h[t];n.isConnected=!1,n?!n.isConnected&&n.render.bind(n)():console.error(`component ${n} is not found!`)}})})})}append(h){this.storage.create(h)}remove(h){this.storage.remove(h)}}}});var ot=I((Gt,lt)=>{lt.exports=class{constructor(g){this.Components=g}listen(){window.addEventListener("hashchange",g=>{let p=this.compare(g);this.find(p,this.notify)})}compare(g){let{oldURL:p,newURL:h}=g,c=null;if(p.length>h.length){let m=new URL(p).hash.substring(1).split("/"),e=new URL(h).hash.substring(1).split("/");for(let t=0;t<m.length;t++)if(!e.includes(m[t])){c=m[t];break}}return c}find(g,p){if(!!g)if(this.Components[g])this.Components[g].isConnected&&p(this.Components[g]);else{let h=setInterval(()=>{this.Components[g]&&(this.Components[g].isConnected&&p(this.Components[g]),clearTimeout(h))},50);setTimeout(()=>{clearTimeout(h)},5e3)}}notify(g){g.fire.destroy()}add(g){let p=location.hash;p.includes(g)||(location.hash=p+"/"+g)}remove(g){let h=location.hash.replace(g,"");location.replace(h)}}});var ct=I((Yt,at)=>{at.exports=function(g,p){let h=[];return class{constructor(c){this.route=this.compile(c),this.prev=null,this.components=g,this.watch(),this.persist(),Object.defineProperty(p.prototype,"$router",{configurable:!0,get:()=>({goTo:this.goTo,...this.prev}),set(m){}})}goTo(c,m){if(m){let e="";for(let t in m)e+=`${t}=${m[t]}&`;m=e,window.location.hash=`!/${c}?${m}`}else window.location.hash=`!/${c}`}persist(){document.hasRouterPersist||(document.addEventListener("DOMContentLoaded",c=>{this.parse(),this.notify().then(()=>this.navigate(!0))}),document.hasRouterPersist=!0)}watch(){window.hasRouterPop||(window.onpopstate=c=>{this.parse(),this.notify().then(()=>this.clear().then(()=>{this.navigate()}))},window.hasRouterPop=!0)}compile(c){let m={};for(let e in c){e=String(e);let t=e.length,n=e;if(["404"].includes(e)){let a=c[e];c[e]={callback:a,name:e}}else n=n.slice(1);n=n.split("/"),n=n.map((a,s)=>{let u=a.includes(":"),f="";if(s==0?f+="^/":f+="/",u?f+="(([^/#?]+?))":f+=a,s==t-1?f+="/?$":f+="",u){let d=a.replace(":","");m[e]||(m[e]={}),m[e].params={[d]:s}}return f}),m[e]&&m[e].params?m[e]={params:m[e].params,regex:new RegExp(n.join("")),...c[e]}:m[e]={regex:new RegExp(n.join("")),...c[e]}}return m.length=Object.keys(c).length,m.keys=Object.keys(c),m}parse(){let c=window.location.hash,m;if(c?(m=c.includes("#!/")?2:c.includes("#/")?1:null,c=c.slice(m)):(c="/",m=!0),!m)return;let e=new URL(`http://localhost${c}`),{search:t,pathname:n}=e,a=this.route.keys,s={};t&&new URLSearchParams(t).forEach((f,d)=>{s[d]=f});let u=!1;for(let f=0;f<a.length;f++){let d=this.route[a[f]],{regex:r,components:i,params:y,name:v}=d;if(y){let S=String(n);S=S.slice(1),S=S.split("/"),Object.entries(y).forEach(w=>{let[_,O]=w;S[O]&&(s[_]=S[O])})}if(r.test(n)){this.prev={components:i,state:s,path:n,name:v,prev:this.prev},u=!0;break}}if(!u&&this.route["404"]){let f=this.route["404"].callback(),{origin:d,pathname:r}=location;this.route[f]?(console.log(1),f=="/"?f=`${d}${r}`:r.slice(-1)=="/"?f=`${d}${r}#!${f}`:f=`${d}${r}/#!${f}`,location.replace(f)):!!f&&!this.route[f]&&(d.slice(-1)=="/"&&f[0]=="/"&&(f=f.slice(1)),f=`${d}${f}`,location.replace(f))}}navigate(c){if(this.prev){let{components:m,state:e,path:t,name:n}=this.prev;try{if(m.length)return Promise.all(m.map(a=>this.components[a].render({emit:{route:this.prev}})))}catch(a){throw console.log(a),new Error(`some of the component in ${JSON.stringify(m)} in path ${t} of router is not found, make sure the it is created`)}}}static pushState(c,m,e){window.history.pushState(c,m,e);let t=Promise.resolve();if(this.prev){let{components:n,state:a,path:s,name:u}=this.prev;t=Promise.all(n.map(f=>g[f].fire.destroy()))}return t.then(()=>this.navigate())}clear(){let c=Promise.resolve();if(this.prev&&this.prev.prev){let{components:m,state:e,path:t,name:n}=this.prev.prev;c=Promise.all(m.map(a=>g[a].fire.destroy?g[a].fire.destroy():(console.error(`there is no destroy handler in "${a}" component`),Promise.resolve())))}return c}pushState(c,m,e){window.history.pushState(c,m,e);let t=Promise.resolve();return this.clear(),t.then(()=>this.navigate())}static subscribe(c){c&&c.constructor.name=="Function"&&h.push(c)}notify(){return Promise.all(h.map(c=>c()))}}}});var ft=I((Qt,ht)=>{ht.exports=function(){let g=this;this.$form={},this.$form.options=(p,h)=>{let{options:c,params:m}=p;return c||(c=[]),Promise.all(c.map(t=>{let{control:n,field:a,tbl:s,src:u,schema:f}=t;return g.fire(u,{tbl:s,field:a,params:m}).then(d=>{d=d||[],t.query=d,d=d.map(i=>f(i));let r=f({});for(let i in r)r.hasOwnProperty(i)&&(r[i]="");return d.unshift(r),t.options=d,t})})).then(t=>h?t.reduce((n,a)=>{let{type:s,control:u}=a;return s||(s="select"),n[s]||(n[s]={}),n[s][u]||(n[s][u]=a),n},{}):t.reduce((n,a)=>(n[a.control]=a.options,n),{})).catch(t=>{console.error(t)})},this.$form.plot=p=>{let{data:h,container:c}=p;if(!h&&!c)return;let m=(e,t,n)=>{if(!e){console.info("root is not provided!");return}let a=e.querySelectorAll(`${t}`),s=a.length;if(!s){n(null,h);return}for(let u=0;u<s;u++){let f=a[u],d=f.name,r=h[d],i=n(f,r,u);if(i=="break")break;i!="continue"}};return m(c,"INPUT.input",function(e,t){t!=null&&(e.type=="date"&&(t=new Date(t)=="Invalid Date"?"":new Date(t).toJSON().split("T")[0]),e.value=t)}),setTimeout(()=>{m(c,"SELECT.input:not(.cake-template)",function(e,t){m(e,"OPTION:not(.cake-template)",function(n,a,s){if(n){if(n.value==t)return e.selectedIndex=s,"break"}else console.log(n,a,"provide schema")})})},500),Promise.resolve()}}});var pt=I((Zt,ut)=>{ut.exports=function(g){let p=g.StorageKit,h={};class c{constructor(e){this.name=e,this.reactiveData={},this.notify=[],this.install(this.name),this.pKeys={},this.sanitize=function(t){let n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},a=/[&<>"'/]/ig;return typeof t=="string"?t.replace(a,s=>n[s]||""):t}}registerNotifier(e){this.notify.push(e)}install(e){this.session=new p({child:"object",storage:"session",name:`_cake_${this.name}_cf`}),this.memory=new p({child:"object",storage:"object",name:`_cake_${this.name}_cf`})}notifier(e,t){let{value:n,bind:a}=t;return this.reactiveData[e]||(this.reactiveData[e]={}),this.reactiveData[e][a]=n,this.set(a,n)}getInputData(e="json",t){let n=t||this.name,a=JSON.parse(JSON.stringify(this.reactiveData[n]));for(let s in a){let u=a[s];a[s]=this.sanitize(u)}if(e=="json")return a;if(e=="formdata"){let s=new FormData;for(let u in a){let f=a[u];s.append(u,f)}return s}}hook(e,t,n){h[e]||(h[e]={}),h[e][t]||(h[e][t]=[]),h[e][t].push(n)}get(e,t=!1){let n=this.pKeys[e];return t?this.memory.get(e,!0):this.session.get(e)}set(e,t){let n=`${this.name}-${e}`,a=this.notify,s=this.name,u=null;return this.pKeys[e]=n,new Promise(async(f,d)=>{e!="password"&&this.session.createOrUpdate(e,t),f()}).then(async()=>{await this.memory.createOrUpdate(e,t);let f=h[this.name];if(f){let d=f[e];d&&d.forEach(r=>{r(t)})}return Promise.all(a.map(d=>d(e,t,u,s)))})}}return c}});var gt=I((Vt,dt)=>{dt.exports=function(g){let p=g.StorageKit,h=g.Templating,c=g.Utils;function m(){this.uiid=0,this.notify={},this.st={},this.cacheStatic=[],this.store=new p({child:"object",storage:"session",name:"_cake_component_cf"})}return m.prototype._getConfig=function(e,t,n,a,s){if(n==null)return[];if(n==a&&e!="bind")return[];let u=`${e}-${t}-${s}`,f=Object.cache._getConfig;if(f||(f=Object.cache._getConfig={}),!f[u]){var d=s?(()=>{let r=this.st[s]&&this.st[s][e];return r&&r.length?r.filter(i=>{let{bind:y}=i||{bind:!1};return y==t||!1}):[]})():(()=>{let r=[];for(let i in this.st)if(this.st.hasOwnProperty(i)){let y=this.st[i];if(y[e])for(let v=0;v<y[e].length;v++){let b=y[e][v];b.bind==t&&r.push({...b,component:i})}}return r})();f[u]=d}return f[u]},m.prototype._notifyToggle=function(e,t,n,a,s){s=s||document;let u=this._getConfig("toggle",e,t,n);if(!!u){s=s||document;for(let f=0;f<u.length;f++){let d=u[f];if(!d)continue;let{sel:r,bind:i,value:y,ops:v}=d,b=s.querySelector(`[data-toggle=${r}]`);y==n&&b&&b.classList.remove("is-active"),y==t&&b&&(b.classList.contains("is-active")&&b.classList.remove("is-active"),b&&b.classList.add("is-active"))}}},m.prototype._notifySwitch=function(e,t,n,a,s){s=s||document;let u=this._getConfig("switch",e,t,n,a);if(!u.length)return;let f={};for(let d=0;d<u.length;d++){let r=u[d],{bind:i,sel:y,map:v,cases:b}=r,S=s.querySelectorAll(`[data-switch-slot=${y}]`);for(let w=0;w<t.length;w++){let _=t[w],O=S[w],k=_[v];if(k!=null){let T=null;for(let E=0;E<b.length;E++)if(b[E].bind.includes(k)){T=b[E];break}if(T){let{_id:E,bind:$}=T,P=document.querySelector(`[data-case=${y}-${E}]`);if(P&&P.toString().includes("Element")){P=P.cloneNode(!0);let L=P.querySelectorAll("[data-for-auto=true]");for(let C=0;C<L.length;C++){let j=L[C];j.dataset.for=`${j.dataset.for}-active`}P.removeAttribute("data-case");let A=new h(_,P,!1).createElement();if(P.dataset.if){let C=P.dataset.if,j=A.dataset.ifBind,N=r.component,{bind:q}=this.getWatchItemsBySel(N,"if",C);C&&(f[q]||(f[q]={}),f[q][j]=_)}A.classList.remove("cake-template"),O.replaceWith(A)}}}}}for(let d in f)f.hasOwnProperty(d)&&this._notifyIf(d,f[d])},m.prototype._notifyBind=function(e,t,n,a,s){s=s||document;let u=this._getConfig("bind",e,t,n,a);if(!!u.length)for(let f=0;f<u.length;f++){let d=u[f],{attr:r,bind:i,sel:y}=d,v=r.toHyphen();if(e==i){let b=s.querySelectorAll(`[data-bind=${y}]`);for(let S=0;S<b.length;S++){let w=b[S];r=="class"||r=="className"?w.classList.length?(console.log(n),c.loopStringSplitSpace(n,function(_){w.classList.remove(_)}),c.loopStringSplitSpace(t,function(_){w.classList.add(_)})):c.loopStringSplitSpace(t,function(_){w.classList.add(_)}):(w.setAttribute(v,t),w[r]=t)}}}},m.prototype._notifyInput=function(e,t,n,a,s){s=s||document;let u=this._getConfig("input",e,t,n,a);if(!!u.length)for(let f=0;f<u.length;f++){let d=u[f],{attr:r,bind:i,sel:y}=d,v=r.toHyphen();if(e==i){let b=s.querySelectorAll(`[data-input=${y}]`);for(let S=0;S<b.length;S++){let w=b[S];r=="className"?n?t?w.classList.replace(n,t):w.classList.remove(n):w.classList.add(t):(w.setAttribute(v,t),w[r]=t)}}}},m.prototype._notifyFor=function(e,t,n,a,s){let u=this._getConfig("for",e,t,n,a);if(!u.length)return;let f=[];for(let d=0;d<u.length;d++){let{bind:r,sel:i,iter:y,ins:v,component:b,cleaned:S}=u[d];s=s||document,b&&(s=Cake.Components[b].html);let w=s.querySelectorIncluded(`[data-for-template=${i}]`),_=w.cloneNode(!0);(()=>{let O=_&&_.querySelectorAll("[data-switch]");if(O&&O.length){let k=O.length,T=-1;for(;++T<k;){let E=O[T],$=E.parentElement,P=document.createElement("div");P.dataset.switchSlot=E.dataset.switch,$.replaceChild(P,E)}O=null}})(),(()=>{let O=_,k=-1;l=t.length,t=t.map(T=>{for(let E in T)T.hasOwnProperty(E)&&(T[`${y}.${E}`]=T[E]);return T}),t.forEach(T=>{let E=new h(T,O,!1).createElement();E.style.removeProperty("display"),E.classList.remove("cake-template"),E.removeAttribute("data-for-template"),w.insertAdjacentElement("beforebegin",E);let $=E.querySelectorAll("[data-src]");if($)for(let P=0;P<$.length;P++){let L=$[P];L.src=L.dataset.src,L.removeAttribute("data-src")}}),S&&w.remove()})()}this._notifyForAuto({configs:u,newValue:t})},m.prototype._notifyForAuto=function(e){let{vItems:t,configs:n,newValue:a}=e;for(let s=0;s<n.length;s++){let u=n[s],f=u.children;if(!f)continue;let d=[];for(let r=0;r<f.length;r++){let i=f[r];if(!this.st[u.component])continue;let y=this.st[u.component].for.find(v=>v.sel==i);y&&d.push(new Promise(v=>{let{bind:b,sel:S,iter:w,ins:_}=y;setTimeout(()=>{let O=document.querySelectorAll(`[data-for=${S}-active]`);for(let k=0;k<O.length;k++){let T=O[k],E=T.dataset.forBindKey,$=T.dataset.forBindVal,P=a.find(C=>C[E]==$),L=b.split(".")[b.split(".").length-1],A=P[L].length&&P[L].map(C=>C instanceof Object?C:{[w]:C});if(A)for(let C=0;C<A.length;C++){let j=A[C],N=T.cloneNode(!0),q=new h(j,N,!1).createElement();q.style.removeProperty("display"),q.classList.remove("cake-template"),q.removeAttribute("data-for-template"),fragment.append(q),T.insertAdjacentElement("beforebegin",q)}T.parentElement.tagName=="SELECT"&&(T.parentElement.selectedIndex=0)}})}))}}},m.prototype._notifyForUpdate=function(e,t,n,a,s){s=s||document;let u=this._getConfig("forUpdate",e,t,n,a);if(!!u.length)for(let f=0;f<u.length;f++){let{bind:d,sel:r,iter:i,ins:y}=u[f];for(let v in t)if(t.hasOwnProperty(v)){let b=document.querySelectorAll(`[data-for-bind-val=${v}]`);for(let S=0;S<b.length;S++){let w=b[S],_=w.dataset.forBindVal;if(!w.dataset.forTemplate)w.remove();else{let O=w.cloneNode(!0);O.style.removeProperty("display"),O.classList.remove("cake-template");let k=t[_],T=-1;for(l=k.length;++T<l;){let E=k[T],$=new h(E,O,!1).createElement();$.classList.remove("cake-template"),$.removeAttribute("data-for-template"),w.insertAdjacentElement("beforebegin",$),w.parentElement.tagName=="SELECT"&&(w.parentElement.selectedIndex=0)}}}}}},m.prototype._notifyClass=function(e,t,n,a,s){s=s||document;let u=this._getConfig("class",e,t,n,a);if(!u.length)return;let f=function(r){return r.split(" ").join("")},d={};for(let r=0;r<u.length;r++){let i=u[r],{hasNegate:y,bind:v,testVal:b,className:S,ops:w,sel:_}=i;if(v=f(v),e==v){d[_]||(d[_]=s.querySelectorAll(`[data-class=${_}]:not(.cake-template)`));let O=d[_];for(let k=0;k<O.length;k++){let T=O[k],E=!1;w?(E=c.logTest(t,w,b),y&&(E=!E)):y?E=!t:E=!!t,E?c.loopStringSplitSpace(S,function($){T.classList.contains($)||T.classList.add($)}):c.loopStringSplitSpace(S,function($){T.classList.contains($)&&T.classList.remove($)})}}}},m.prototype._notifyAttr=function(e,t,n,a,s){s=s||document;let u=this._getConfig("attr",e,t,n,a);if(!u.length)return;let f=function(r){return r&&r.split(" ").join("")},d={};for(let r=0;r<u.length;r++){let i=u[r],{hasNegate:y,bind:v,testVal:b,attr:S,ops:w,sel:_,attrkey:O,attrvalue:k}=i;if(v=f(v),S=f(S),e==v){d[_]||(d[_]=s.querySelectorAll(`[data-attr=${_}]:not(.cake-template)`));let T=d[_];for(let E=0;E<T.length;E++){let $=T[E],P=!1;w?(P=c.logTest(t,w,b),y&&(P=!P)):y?P=!t:P=!!t,P?$.removeAttribute(O):k&&$.setAttribute(O,k)}}}},m.prototype._notifyIf=function(e,t,n,a,s){s=s||document;let u=this._getConfig("if",e,t,n,a);if(!u.length)return;let f={};for(let d=0;d<u.length;d++){let r=u[d],{attr:i,bind:y,sel:v,testval:b,_true:S,_false:w,ops:_,hasNegate:O}=r,k=i.toHyphen(),T=S!="null",E=w!="null";if(e==y){f[v]||(f[v]=s.querySelectorAll(`[data-if=${v}]:not(.cake-template)`));let $=f[v];for(let P=0;P<$.length;P++){let L=$[P],A=t,C;if(b?C=c.logTest(b,_,A):C=O?!A:!!A,C){if(T)if(i=="class"){let j=S.split(" ");E?(w.split(" ").forEach(q=>{L.classList.remove(q)}),j.forEach(q=>{L.classList.add(q)})):j.forEach(N=>{L.classList.contains(N)||L.classList.add(N)})}else L.setAttribute(i,S)}else if(E)if(i=="class"){let j=w.split(" ");T?(S.split(" ").forEach(q=>{L.classList.remove(q)}),j.forEach(q=>{L.classList.add(q)})):trueClasses.forEach(N=>{L.classList.contains(N)||L.classList.add(N)})}else L.setAttribute(i,w)}}}},m.prototype.notifier=function(e,t,n,a){let s=t;return c.isObject(s)&&(s=JSON.parse(JSON.stringify(t))),new Promise(u=>{this._notifyFor(e,s,n,a),u()}).then(()=>this._notifyForUpdate(e,s,n,a)).then(()=>this._notifySwitch(e,s,n,a)).then(()=>this._notifyToggle(e,s,n,a)).then(()=>this._notifyBind(e,s,n,a)).then(()=>this._notifyInput(e,s,n,a)).then(()=>this._notifyIf(e,s,n,a)).then(()=>this._notifyClass(e,s,n,a)).then(()=>this._notifyAttr(e,s,n,a))},m.prototype.registerNotifier=function(e,t){this.notify[e]||(this.notify[e]=[]),this.notify[e].push(t)},m.prototype.getEventTarget=function(e){let t=`${e}`,n=Object.cache.getEventTarget;if(n||(n=Object.cache.getEventTarget={}),!n[t]){let a=this.st[e];n[t]=a&&(a?.evt??[])||[]}return n[t]},m.prototype.getRouterTarget=function(e){let t=`${e}`,n=Object.cache.getRouterTarget;if(n||(n=Object.cache.getRouterTarget={}),!n[t]){let a=this.st[e];n[t]=a&&(a?.router??[])||[]}return n[t]},m.prototype.getWatchItems=function(e){let t=`${e}`,n=Object.cache.getWatchItems;if(n||(n=Object.cache.getWatchItems={}),!n[t]){let a=this.st[e]||{},s=new Set;for(let u in a)if(a.hasOwnProperty(u)){let f=a[u];for(let d=0;d<f.length;d++){let r=f[d],{bind:i}=r;if(i)s.add(i);else continue}}n[t]=[...s]}return n[t]},m.prototype.getWatchItemsByType=function(e,t){let n=`${e}-${t}`,a=Object.cache.getWatchItemsByType;if(a||(a=Object.cache.getWatchItemsByType={}),!a[n]){let u=(this.st[e]||{})[t]||[],f=new Set;for(let d=0;d<u.length;d++){let r=u[d],{bind:i}=r;switch(!!i){case!0:f.add(i);break;default:switch(!0){case(t=="animate"||t=="toggle"):(f.constructor.name="Set")&&(f=[]),f.push(r)}}}a[n]=[...f]}return a[n]},m.prototype.getWatchItemsBySel=function(e,t,n){let a=`${e}-${t}-${n}`,s=Object.cache.watchItemsBySel;if(s||(s=Object.cache.watchItemsBySel={}),!s[a]){let f=this.st[e][t].find(d=>d.sel==n);s[a]=f||!1}return s[a]},m.prototype._activateReactive=e=>{},m.prototype._register=function(e,t,n,a){switch(!0){case!e[t]:e[t]={};case!e[t][n]:e[t][n]=[];default:e[t][n].push(a);break}},m.prototype._static=function(e){return function(t,n){let a=[];for(let s=0;s<t.length;s++){let u=t[s];switch(n){case!1:a.push(u);break;case!0:{let f=u.closest("[data-component]");switch(f=f&&f.dataset.component,f==e){case!0:a.push(u);break}}break;default:continue}}return a}},m.prototype._compileEvents=function(e,t,n){return new Promise(a=>{if(!e.length){a();return}let s=this._static(t)(e,n);if(!s.length){a();return}for(let u=0;u<s.length;u++){let f=`cke${this.uiid}`,d=s[u],r=d.dataset.event.split(" ").join("").split(",");for(let i=0;i<r.length;i++){let[y,v]=r[i].split(":");v=v||y,this._register(this.st,t,"evt",{event:y,sel:f,cb:v}),d.dataset.event=f,this.uiid++}}a()})},m.prototype._compileToggle=function(e,t,n){return new Promise(a=>{if(!e.length){a();return}if(!this._static(t)(e,n).length){a();return}let u={};for(let f=0;f<e.length;f++){let d=`ckt${this.uiid}`,r=e[f],i=r.dataset.toggle;u[i]&&(d=u[i]),this._register(this.st,t,"toggle",{sel:d,name:"ns-"+i}),r.dataset.toggle=d,this.uiid++,u[i]=d}u={},a()})},m.prototype._compileFor=function(e,t,n,a){return new Promise(s=>{let u=a;if(!e.length){s();return}let f=this._static(t)(e,n);if(!f.length){s();return}let d={};for(let r=0;r<f.length;r++){let i=`ckf${this.uiid}`,y=f[r],v=y.dataset.for,b=y.dataset.forCleaned=="true",[S,w,_]=v.split(" ");if(y.style.display="none",y.classList.add("cake-template"),y.dataset.for=i,y.dataset.forTemplate=i,d[i]={bind:_,sel:i,iter:S,ins:w,cleaned:b},++this.uiid,r!=0){let O=y.parentElement&&y.parentElement.closest("[data-for]");if(!O)continue;let k=!!O.dataset.for;if(u.contains(O)&&k){let T=O.dataset.for,E=d[T];E&&!E.children?E.children=[i]:E&&E.children.push(i)}}}for(let r in d)d.hasOwnProperty(r)&&this._register(this.st,t,"for",d[r]);s()})},m.prototype._compileForUpdate=function(e,t,n){return new Promise(a=>{if(!e.length){a();return}let s=this._static(t)(e,n);if(!s.length){a();return}for(let u=0;u<s.length;u++){let f=`ckfu${this.uiid}`,d=s[u],r=d.dataset.forUpdate;d.style.display="none",d.classList.add("cake-template"),d.dataset.forUpdate=f,d.dataset.for||(d.dataset.forTemplate=f);let[i,y,v]=r.split(" ");this._register(this.st,t,"forUpdate",{bind:v,sel:f,iter:i,ins:y}),this.uiid++}a()})},m.prototype._compileSwitch=function(e,t,n){return new Promise(a=>{if(!e.length){a();return}let s=this._static(t)(e,n);if(!s.length){a();return}for(let d=0;d<s.length;d++){let r=`cks${this.uiid}`,i=s[d],y=i.dataset.switch,v="def";if(y.includes(".")){var[u,...f]=i.dataset.switch.split(".");y=u,v=f[0]}i.dataset.switch=r;let b=i.querySelectorAll("[data-case]"),S=[];for(let w=0;w<b.length;w++){let _=b[w],O=_.closest(`[data-switch=${r}]`);if(_.classList.add("cake-template"),O){let k=_.dataset.case,T=`cksc${this.uiid}`;_.dataset.case=`${r}-${T}`,S.push({_id:T,bind:k}),this.uiid++}}this._register(this.st,t,"switch",{bind:y,sel:r,map:v,cases:S}),this.uiid++}a()})},m.prototype._compileBind=function(e,t,n){return new Promise(a=>{if(!e.length){a();return}let s=this._static(t)(e,n);if(!s.length){a();return}for(let d=0;d<s.length;d++){let r=`ckm${this.uiid}`,i=s[d],v=i.dataset.bind.split(",");for(let b=0;b<v.length;b++){let S=v[b].split(" ").join("");if(S.includes(":"))var[u,f]=S.split(":");else var f=S,u="value";this._register(this.st,t,"bind",{attr:u,bind:f,sel:r})}this.uiid++,i.dataset.bind=r}a()})},m.prototype._compileAnimate=function(e,t,n){return new Promise(a=>{if(!e.length){a();return}let s=this._static(t)(e,n);if(!s.length){a();return}for(let u=0;u<s.length;u++){let f=`cka${this.uiid}`,d=s[u],r=d.dataset.animate;r=r.split(" ").join("");let i={},y=r.split(",");for(let v=0;v<y.length;v++){let b=y[v],[S,w]=b.split(":");if(S=="ns"){i.ns=w;break}else i[S]={keyframes:w.split("-")}}i.selector={attr:"data-animate",val:f},this._register(this.st,t,"animate",i),this.uiid++,d.dataset.animate=f}a()})},m.prototype._compileIf=function(e,t,n){return new Promise(a=>{if(!e.length){a();return}let s=this._static(t)(e,n);if(!s.length){a();return}let u=new RegExp("<|>|===|==|!==|!=");for(let f=0;f<s.length;f++){let d=`ci${this.uiid}`,r=s[f],y=r.dataset.if.split(",");for(let v=0;v<y.length;v++){let b=y[v],S=b.substring(0,b.indexOf("=")),w=b.substring(b.indexOf("=")+1,b.length);w=w.split(new RegExp("[()]")).join("");let[_,O]=w.split("?"),k=_[0]=="!";hasRegularLog=_.match(u);let T,E,$;if(hasRegularLog){let A=_.split(u);T=A[0].trim(),E=A[1].trim(),$=hasRegularLog[0]}else T=_;k&&(T=T.slice(1));let[P,L]=O.split(":");this._register(this.st,t,"if",{hasNegate:k,attr:S,ops:$,bind:T,testval:E||null,_true:P,_false:L,sel:d})}this.uiid++,r.dataset.if=d}a()})},m.prototype._compileClass=function(e,t,n){return new Promise(a=>{if(!e.length){a();return}let s=this._static(t)(e,n);if(!s.length){a();return}let u=new RegExp("<|>|===|==|!==|!=");for(let f=0;f<s.length;f++){let d,r,i,y,v,b,S,w;d=`cc${this.uiid}`,r=s[f],i=r.dataset.class;let[_,O]=i.split("&&");if(_=_.trim(),O=O.trim(),y=_.match(u),v=_[0]=="!",y){let k=_.split(u);bind=k[0],w=k[1],S=y[0]}else bind=_;v&&v&&(bind=bind.slice(1)),this._register(this.st,t,"class",{hasNegate:v,bind,testVal:w,className:O,ops:S,sel:d}),this.uiid++,r.dataset.class=d}a()})},m.prototype._compileAttr=function(e,t,n){return new Promise(a=>{if(!e.length){a();return}let s=this._static(t)(e,n);if(!s.length){a();return}let u=new RegExp("<|>|===|==|!==|!=");for(let f=0;f<s.length;f++){let d,r,i,y,v,b,S,w;d=`cre${this.uiid}`,r=s[f],i=r.dataset.attr;let[_,O]=i.split("&&");O=O.trim();let[k,T]=O.split("=");if(_=_.trim(),y=_.match(u),v=_[0]=="!",y){let E=_.split(u);bind=E[0],w=E[1],S=y[0]}else bind=_;v&&v&&(bind=bind.slice(1)),this._register(this.st,t,"attr",{hasNegate:v,bind,testVal:w,attrkey:k,attrvalue:T,ops:S,sel:d}),this.uiid++,r.dataset.attr=d}a()})},m.prototype._compileRouter=function(e,t,n){return new Promise(a=>{if(!e.length){a();return}let s=this._static(t)(e,n);if(!s.length){a();return}for(let u=0;u<s.length;u++){let f=`rt${this.uiid}`,d=s[u],r=d.dataset.routerLink;this._register(this.st,t,"router",{value:r,sel:f}),this.uiid++,d.dataset.routerLink=f}a()})},m.prototype._compileInput=function(e,t,n){return new Promise(a=>{if(!e.length){a();return}let s=this._static(t)(e,n);if(!s.length){a();return}for(let d=0;d<s.length;d++){let r=`cknt${this.uiid}`,i=s[d],y=i.tagName,b=i.dataset.input.split(",");for(let S=0;S<b.length;S++){let w=b[S].split(" ").join("");if(w.includes(":"))var[u,f]=w.split(":");else var f=w,u="value";this._register(this.st,t,"input",{attr:u,bind:f,sel:r,nodeType:y})}this.uiid++,i.dataset.input=r}a()})},m.prototype.inject=function(e,t,n=!1){return new Promise(a=>{let s=e.getElementsByDataset("bind","for","for-update","switch","toggle","event","animate","if","class","input","attr");a(s)}).then(a=>{let s=[],u={bind:this._compileBind,for:this._compileFor,"for-update":this._compileForUpdate,switch:this._compileSwitch,toggle:this._compileToggle,event:this._compileEvents,animate:this._compileAnimate,if:this._compileIf,class:this._compileClass,input:this._compileInput,attr:this._compileAttr};for(let f in a)a.hasOwnProperty(f)&&a[f].length&&s.push(u[f].apply(this,[a[f],t,n,e]));return console.timeEnd(t),s.length?Promise.all(s):Promise.resolve()}).then(()=>Promise.resolve())},m}});var yt=I((te,mt)=>{mt.exports=function(g){let p=g.Mo,h=g.Templating,c=g.Piece,m=g.Utils,e=g.pushState;function t(n,a,s){this.name=n,this.template=a,this.options=s,this.handlers=s.handlers,this.subscribe=s.subscribe,this.data={},this.root=s.root,this.items=!1,this.type=s.type||"view",this.toggle=s.toggle,this.targets={},this.animateOptions=s.animate,this.role=s.role,this.isReady=!1,this.await={},this.utils=m,(n=="app"||s.role=="app")&&(this.staticComponent=s.static||[]),this.container={},this.compile=new Promise(u=>{this._bindHandlers(),u()}).then(()=>{this._bindSubscribe()}).then(()=>{switch(this.type=="view"&&!!this.template){case!0:return this.createElementAsync();default:this.isStatic=!1;break}})}return t.prototype.isStatic=!1,t.prototype.hasEvent=!1,t.prototype.isConnected=!1,t.prototype.destroyed=!1,t.prototype.isCreated=!1,t.prototype.Subscribe=function(n){this.$observer.registerSubscribe({[n.listenTo]:{[n.original]:[n]}})},t.prototype.Node=function(n){return new c(n)},t.prototype._bindHandlers=function(){for(let n in this.handlers)if(this.handlers.hasOwnProperty(n)){let a=this.handlers[n],s=a.name;a=a.bind(this),a.original=s,a.binded=this.name,this.handlers[s]=a,this.initAwaitHandlers(n)}this.await.destroy||(this.await.destroy=Promise.resolve()),this.await.animateRemove||(this.await.animateRemove=Promise.resolve())},t.prototype.initAwaitHandlers=function(n){this.await[n]=Promise.resolve()},t.prototype._bindSubscribe=function(){let n={};for(let a in this.subscribe)if(this.subscribe.hasOwnProperty(a))if(subscribe=this.subscribe[a],a=="alert"&&console.log(subscribe),!!subscribe.components&&!!subscribe.handler){let u=a,{components:f,handler:d}=subscribe;d=d.bind(this),d.binded=this.name,d.original=u;for(let r=0;r<f.length;r++){let i=f[r];n[i]||(n[i]={}),n[i][u]||(n[i][u]=[]),d.listenTo=i,n[i][u].push(d)}}else{n[a]||(n[a]={});let u=subscribe;for(let f in u)if(u.hasOwnProperty(f)){let d=u[f],r=d.name;try{d=d.bind(this)}catch{}d.original=r,d.binded=this.name,d.listenTo=a,n[a][r]||(n[a][r]=[]),n[a][r].push(d)}}this.subscribe=n},t.prototype.notifyStaticComponent=function(n,a,s){Cake.Observer.notify(n,a,s,this.staticComponent[n],!0,this.name)},t.prototype.doFor=function(n,a){let s=()=>this.html;a!=null&&this.$attrib._notifyFor(n,a,null,this.name,s())},t.prototype.doToggle=function(n,a){this.$attrib._notifyToggle(n,a,null,this.name,this.html)},t.prototype.doSwitch=function(n,a){this.$attrib._notifySwitch(n,a,null,this.name,this.html)},t.prototype.doIf=function(n,a){this.$attrib._notifyIf(n,a,null,this.name,this.html)},t.prototype.$animate=function(n){let a=this.$attrib.getWatchItemsByType(this.name,"animate"),s=this.animateOptions,u=[];return(()=>{if(!(!a.length&&!(a instanceof Array)||!s))for(let f=0;f<a.length;f++){let d=a[f],{ns:r,selector:i}=d;if(d.ns){if(s[r]){let y=s[r];Object.assign(d,s[r]),delete s[r]}}else u.push(a)}})(),a.length?((()=>{let f={},d={};for(let r in s)s.hasOwnProperty(r)&&(d.val=r,f.selector=d,Object.assign(f,s[r]),a.push(f),f={},d={})})(),new p(a,this.html).animate(n)):!1},t.prototype.$templating=function(n,a,s){let u=a||this.template;return new h(n,u,s).createElement()},t.prototype.createElement=function(){if(!(this.template.substring(0,1)=="#"))return;let a=this.template.substr(1),s=document.getElementById(a),u=this.isTemplate=s&&s.toString().includes("Template");if(!s)throw new Error(`the template for ${this.name} is not found with.`);return new Promise(f=>{switch(u){case!0:{let d=s.getContent(!0);if(!d)throw new Error(`it might be theres no template in component - ${this.name}`);d.cake_component=this.name,this.html=this.Node(d),this._parseHTML(this.isStatic).then(()=>{this._watchBindedItems(),f()})}break;case null:f();break;default:{let d=s;if(!d)throw new Error(`it might be theres no template in component - ${this.name}`);d.cake_component=this.name,this.html=this.Node(d),this.isStatic=!0,this._parseHTML(this.isStatic).then(()=>{f()})}}})},t.prototype.createElementAsync=function(){return new Promise(n=>{this.createElement().then(()=>{n()})}).then(()=>{this.isReady=!0})},t.prototype._isParsed=!1,t.prototype._parseHTML=function(n=!1){return this.$attrib.inject(this.html,this.name,n).then(()=>{this.original=this.html.cloneNode(),this._isParsed=!0})},t.prototype.render=function(n){let a=null,{root:s,multiple:u,cleaned:f,emit:d,static:r,hashed:i,data:y}=n||{},v=b=>this.data[b]||this.$scope[b]||null;return new Promise((b,S)=>{!!s&&(this.root=s),u&&this._smoothReset(),this.isReady?b():this.createElement().then(()=>{i===!0&&this.$hash.add(this.name),!this.template&&this.fire.isConnected&&this.fire.isConnected({emit:d},!0)}).then(()=>{this.isReady=!0,b()})}).then(()=>this.await.destroy.then(()=>this.await.animateRemove).then(()=>new Promise((b,S)=>{let w=this.$attrib.getWatchItemsByType(this.name,"for");for(let _=0;_<w.length;_++){let O=v(w[_]);this.doFor(w[_],O)}b(this.html)}).then(b=>(a={element:b,emit:d},this.fire.beforeConnected&&this.fire.beforeConnected(a,!0),b)).then(b=>{if(!this.isStatic)return(y?(()=>new Promise(w=>{let _=b.getElement();_=this.$templating(y,_),this.html=b=this.Node(_),this.html.replaceDataSrc(),y=null,w()}))():Promise.resolve()).then(()=>{b.appendTo(this.root,f),this.isConnected=!0})}).then(()=>this.findTarget()).then(()=>this.findContainer()).then(()=>{let b=this.$attrib.getWatchItemsByType(this.name,"switch");for(let S=0;S<b.length;S++)this.doSwitch(b[S],v(b[S]))}).then(()=>this.addEvent(r,u)).then(()=>this.fire.isConnected&&this.fire.isConnected(a,!0)).then(()=>this.$animate("render")).then(()=>new Promise((b,S)=>{setTimeout(()=>{this._watchReactive(),b()},100)}))))},t.prototype.renderAsync=function(n){this.render(n).then(()=>{this.$persist.append(this.name)})},t.prototype._smoothReset=function(){this.isConnected=!1,this.html=this.original.cloneNode()},t.prototype._hardReset=function(n){return this.isConnected=!1,this.$persist.remove(n),this.html=this.original.cloneNode(),!0},t.prototype.reset=function(){let n=this.$animate("remove");return n instanceof Promise?this.await.animateRemove=new Promise(a=>{n.then(()=>this.html.remove()).then(()=>this._hardReset(this.name)).then(()=>{a()})}):new Promise(a=>{this.html.remove(this.name),this._hardReset(this.name),a()})},t.prototype.addEvent=function(n,a){if(!!a&&!!n)return!1;let f=this.name;function d(r,i,y,v){return function(b){y&&b.preventDefault(),v&&b.stopPropagation(),Cake.Observer.notify(i,r,b)}}if(!!this.targets){for(let r in this.targets)if(this.targets.hasOwnProperty(r)){let i=this.targets[r];for(let y of i){let{sel:v,el:b,cb:S}=y;S=S||r,b.Ref().get("__cake__events")||b.Ref().set("__cake__events",{});let w=b.Ref().get("__cake__events");if(!w[S]){let _=r.substring(0,2),O=!_.includes("~"),k=_.includes("^");(!O||k)&&(r=r.slice(1)),b.addEventListener(r,d(S,f,O,k),!0),w[S]=!0,b.Ref().set("__cake__events",w)}}}}},t.prototype.findTarget=function(){let n=this.$attrib.getEventTarget(this.name),a=JSON.parse(JSON.stringify(n));for(let s of a)s.el=document.querySelector(`[data-event=${s.sel}]`),this.targets[s.event]||(this.targets[s.event]=[]),this.targets[s.event].push(s)},t.prototype.toggler=function(n){let a=this.$attrib.getWatchItemsByType(this.name,"toggle"),s=class{constructor(f,d,r,i){this.toggle=i.toggle,this.bind=f,this.bases=d,this.cache=i.$cache,this.html=r}check(f){let d=this.toggle[f];if(!d)console.error(`${f} is not found in toggle! choose from ${JSON.stringify(Object.keys(this.toggle))}`);else{if(a.length){let{ns:r}=d,i=a.find(y=>y.name==`ns-${r}`);i&&(d.sel=`[data-toggle=${i.sel}]`)}return d}}_toggle(){let f=this.check(this.bind);if(!f)return;let{basis:d="data-name",cls:r="is-active",mode:i="radio",sel:y,persist:v=!0}=f,b=this.html.querySelectorAll(y);if(!b.length)return;let S,w;if(b.length==1){let _=typeof this.bases=="boolean",O=!!this.bases,k=b[0];if(v){let T=function(E,$,P){P?E.classList.contains($)&&E.classList.remove($):E.classList.contains($)||E.classList.add($)};_?(O?(this.cache.createOrUpdate(this.bind,!0),T(k,r,!0)):(this.cache.createOrUpdate(this.bind,!1),T(k,r,!1)),k.classList.toggle(r)):(this.cache.createOrUpdate(this.bind,!k.classList.contains(r)),k.classList.toggle(r))}}else for(let _=0;_<b.length;_++){let O=b[_],k=O.classList.contains(r),T=O.getAttribute(d);T==this.bases?(i=="switch"?O.classList.toggle(r):k||O.classList.add(r),v&&this.cache.createOrUpdate(this.bind,T),w=T):k&&(O.classList.remove(r),S=O.getAttribute(d))}return{prev:S,next:w}}_recall(){let f=this.check(this.bind);if(!f)return;let{basis:d="data-name",cls:r="is-active",sel:i}=f;return this.cache.get(this.bind).then(y=>{if(!y)return y;let v=y,b=this.html.querySelectorAll(i);if(!!b.length){if(b.length==1){let S=b[0];v&&S.classList.add(r)}else for(let S=0;S<b.length;S++){let w=b[S],_=w.classList.contains(r);w.getAttribute(d)==v&&(_||w.classList.add(r))}return v}})}},u=(f,d)=>new s(f,d,this.html,this)._toggle();return u.recall=f=>new s(f,!1,this.html,this)._recall(),u},t.prototype.findContainer=function(){return new Promise(n=>{let a=this.html.getContainers();for(let s=0;s<a.length;s++){let u=a[s],f=u.dataset.container;f&&(this.container[f]=u)}n()})},t.prototype._watchBindedItems=function(){},t.prototype._watchReactive=function(){if(!this.items.length){this.items=this.$attrib.getWatchItems(this.name);let n=this.name,{input:a}=this.$attrib.st[n]||{input:!1},s=this.$attrib.notify[n];a&&a.forEach(u=>{let{attr:f,bind:d,sel:r,nodeType:i}=u,y=document.querySelector(`[data-input=${r}]`);y&&!y._reactive&&(i=="INPUT"||i=="TEXTAREA"?(s.forEach(v=>{v(n,{value:y.value,bind:d})}),y.addEventListener("input",v=>{s&&s.length&&s.forEach(b=>{b(n,{value:v.target.value,bind:d})})}),y.addEventListener("change",v=>{s&&s.length&&s.forEach(b=>{b(n,{value:v.target.value,bind:d})})})):i=="SELECT"&&((()=>{let{selectedOptions:v}=a,b=[];for(let S=0;S<v.length;S++){let w=v[S],_=w.text,O=w.value;b.push({text:_,value:O})}s&&s.length&&s.forEach(S=>{S(n,{value:b,bind:d})})})(),y.addEventListener("change",v=>{let{selectedOptions:b}=v.target,S=[];for(let w=0;w<b.length;w++){let _=b[w],O=_.text,k=_.value;S.push({text:O,value:k})}s&&s.length&&s.forEach(w=>{w(n,{value:S,bind:d})})})),y._reactive=!0)})}},t.prototype.observer=function(n){function a(s){return this.handler[s]}this.observer=new Observer(this,n,a.bind(this))},t.prototype.variable=function(n){let a=Object.keys(n),s={},u=[];function f(d,r,i){r||(s[d]=`value is not '${i}'`)}for(let d in n)if(n.hasOwnProperty(d)){let r=n[d],{type:i,value:y}=r,v;["string","number"].includes(i)?v=typeof y==i:y instanceof Array?v=i=="array":v=i=="object",u.push(y),f(d,v,i)}if(Object.keys(s).length)throw new Error(JSON.stringify(s));return u},t}});var vt=I((ee,bt)=>{bt.exports=function(g){let p=g.Attrib,h=g.Scope,c=g.Component,m=g.Hasher,e=g.Router,t=g.Persistent,n=g.StorageKit,a=g.Observer,s=g.Formy;function u(f){this.name=f,this.components={}}return u.Components=function(f){return{subscribe(d,r){function i(){let y=u.Components[f];if(y&&d instanceof Function){let v=d.name;r&&(d=d.bind(r)),d.binded="external",d.original=v,d.listenTo=y.name,y.Subscribe(d)}}return new Promise((y,v)=>{let b=setInterval(()=>{u.Components[f]&&(i(),clearInterval(b),y())})})}}},u.Models={},u.Subscribe={},u.Handlers={},u.Attributes=new p,u.Models.$loaded=function(f){return new Promise((d,r)=>{let i=setInterval(()=>{u.Models[f]&&(clearInterval(i),d(u.Models[f]))});setTimeout(()=>{u.Models[f]||(clearInterval(i),r(f))},1e4)})},u.MainMessageChannel=function(){let f=new MessageChannel;return{send(d){f.port2.postMessage(d)},receive(d){f.port1.onmessage=function(r){let{isTrusted:i,data:y}=r||{isTrusted:!1};d(i?{status:1,data:y}:{status:0,err:"not trusted!"})}}}}(),u.Utils={scopeTrap(f){return!1},scopeNotifier(f){return f}},u.create=function(f,d,r){new u(f,d,r).create(f,d,r)},u.plugin=function(){},u.init=function(f){return new c(f)},u.Hasher=new m(u.Components),u.Hasher.listen(),u.Router=e(u.Components,c),u.Persistent=new t,u.Persistent.listen(u.Components),u.Cache=new n({name:"cache",storage:"session",child:"object"}),u.getSubscriber=function(f,d){let r=u.Subscribe,i={};for(let y in r)if(r.hasOwnProperty(y)){let v=r[y];for(let b in v)if(v.hasOwnProperty(b)){let S=v[b];for(let w of S){let _=w,O=_.original,k=_.binded;if(_.listenTo==f){if(O==d)if(!i[k])i[k]=d;else{let E=i[k]instanceof Array?i[k]:[i[k]];i[k]=E.concat(d)}else if(!d)if(!i[k])i[k]=O;else{let E=i[k]instanceof Array?i[k]:[i[k]];i[k]=E.concat(O)}}}}}return i},u.Observer=new a(u.Subscribe,u.Handlers),u.prototype._defineProperty=function(f,d,r,i){Object.defineProperty(f,d,{configurable:!0,get(){return r()},set(y){i&&i(y)}})},u.prototype._defineProperty(c.prototype,"$observer",function(){return u.Observer}),u._globalScope=new h("globalScope"),u.prototype._defineProperty(c.prototype,"$globalScope",function(){return u._globalScope}),u._universalScope=new h("universalScope"),u.$universalScope=function(){return u._universalScope},u.prototype._defineProperty(c.prototype,"$attrib",function(){return u.Attributes}),u.prototype._defineProperty(c.prototype,"$persist",function(){return u.Persistent}),u.prototype._defineProperty(c.prototype,"$cache",function(){return u.Cache}),u.prototype._defineProperty(c.prototype,"$hash",function(){return u.Hasher}),u.prototype.create=function(f,d,r){console.time(f);let i=new c(f,d,r),y=new h(f);y.registerNotifier(function(v,b,S,w){return u.Attributes.notifier(v,b,S,w)}),u.Attributes.registerNotifier(f,function(v,b){y.notifier(v,b)}),i.compile.then(()=>{let{subscribe:v,root:b,html:S,handlers:w,role:_}=i;return _=="form"&&function(){s.bind(i)()}(),u.Observer.registerSubscribe(v).then(()=>({root:b,handlers:w}))}).then(({handlers:v,root:b})=>{u.Observer.registerHandlers(v,i.name),this._defineProperty(i,"root",function(){if(i._root)return i._root;{let S=b||"#app",w=document.querySelector(S);if(w)return w}throw new Error(`the selector '${b}' as container of component '${i.name}' is not found!`)},function(S){Object.assign(i,{_root:S})}),this._defineProperty(i,"$scope",function(){return y})}).then(()=>{i.fire=function(){function v(S,w){w=w?typeof w=="function"?w.bind(i)():function(){return w}.bind(i)():null;let _={[S]:()=>w};if(fn=_[S].bind(i),typeof fn=="function"){let T=function($){let P={};if(!$)return P;let L=$.attributes;if(L)for(let A=0;A<L.length;A++){let C=L[A],j=C.name,N=C.value;P[j]=N}return P};var O=T;fn.name=S,fn.original=S,fn.binded=i.name,u.Observer.registerHandlers({[S]:fn},i.name);let k=w;if(w&&(w.element||w.root||w.container)){let $=T(w.element),P=T(w.root),L=T(w.container);k={status:0,attributes:{element:$,root:P,container:L}}}u.MainMessageChannel.send({component:i.name,event:S,payload:k});let E=u.Observer.notify(i.name,S,{}).then(()=>u.Observer.results[i.name][S]);return i.await[S]=E,i.await[S]}console.error("the param in fire is not an instance of function")}function b(S,w){for(let _ in w)if(w.hasOwnProperty(_)){let O=w[_],k=O.original;Object.defineProperty(S,k,{get(){let T={[k]:function(E,$){if($!=null&&($=$),$==null&&k=="destroy"&&($=!0),$==null&&($=!1),$){let P=new Promise((L,A)=>{setTimeout(()=>{let C=E;u.Observer.notify(i.name,k,C).then(()=>u.Observer.results[i.name][k]).then(j=>{L(j)}).catch(j=>{console.log(448,i.name,k,C),console.error(j)})})});return i.await[k]=P,i.await[k]}else return O(E)}};return T[k]=T[k].bind(i),T[k].originalName=k,T[k].binded=i.name,T[k]}})}}return b(v,i.handlers),v}()}).then(()=>{i.type=="view"&&(i.toggler=i.toggler(i),u.Components[f]=i)}).then(()=>{i.options.router&&u.Router.subscribe(i.options.router.bind(i)),i.options.data&&i.options.data.bind(i.data)(i),i.options.init&&i.options.init.bind(i)(),i.options.utils&&i.options.utils.bind(i.utils)(i)}).then(()=>{i.type=="model"&&(u.Models[f]=i),i.isStatic&&i.type=="view"&&i.render()})},u}});var ie=D(),re=F(),ne=B(),wt=K(),se=z(),U=G(),Ot=Q(),kt=V(),St=et(),Tt=rt(),Et=st(),$t=ot(),_t=ct(),Pt=ft(),Lt=pt()({StorageKit:U()}),Ct=gt()({StorageKit:U(),Templating:St(),Utils:wt}),At=yt()({Utils:wt,Mo:Tt,Templating:St(),Piece:Ot(),pushState:_t.pushState}),It=vt()({Attrib:Ct,Scope:Lt,Component:At,Hasher:$t,Router:_t,Persistent:Et({StorageKit:U()}),StorageKit:U(),Observer:kt(),Formy:Pt});window.Cake=It;})();
