(()=>{var Mt=Object.defineProperty,Ht=Object.defineProperties;var Bt=Object.getOwnPropertyDescriptors;var Le=Object.getOwnPropertySymbols;var Dt=Object.prototype.hasOwnProperty,Ft=Object.prototype.propertyIsEnumerable;var Ie=(e,t,r)=>t in e?Mt(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,N=(e,t)=>{for(var r in t||(t={}))Dt.call(t,r)&&Ie(e,r,t[r]);if(Le)for(var r of Le(t))Ft.call(t,r)&&Ie(e,r,t[r]);return e},he=(e,t)=>Ht(e,Bt(t));var k=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var je=k(()=>{(function(e){e.env={destructure:!0};let t=e.env;Promise.prototype.ObjectType="Promise"})(window)});var Re=k(()=>{(function(e){HTMLCollection.prototype.toArray=function(){let t=[];for(let r=0;r<this.length;r++)t[r]=this[r];return t},NodeList.prototype.toArray=function(){let t=[],r=-1,i=this.length;for(;++r<i;)t[r]=this[r];return t},Object.cache=Object.create(null),Object.caching=t=>{let r=Object.cache;return r[t]||(r[t]={}),{set(i,n){return r[t][i]=n,!0},get(i){return r[t][i]}}},String.prototype.toHyphen=function(){let t=Object.cache,r=null,i=this;if(t.toHyphen||(t.toHyphen={}),t[i]&&(r=t[i]),r!=null)return r;let n=i.split(""),s="",a=-1;for(;++a<n.length;){let u=n[a];switch(a){case 0:s+=u.toLowerCase();break;default:u.charCodeAt()<91&&(s+="-"),s+=u.toLowerCase()}}return t[i]=s,r=s,r},String.prototype.toProper=function(){let t=this,r=Object.caching("toProper").get(t);if(r)return r;{let i=t.substring(0,1),n=t.slice(1),s=`${i.toUpperCase()}${n}`;return Object.caching("toProper").set(t,s),s}},String.prototype.removeSpace=function(){return this.split(" ").join("")},String.prototype.toCamelCase=function(){let t=this.toLowerCase(),r=Object.cache,i=null;if(r.toCamel||(r.toCamel={}),r=r.toCamel,r[t])return r[t];{let n=t.split("-");if(n.length==1)return t;let s="",a=-1,u=n.length;for(;++a<u;){let c=n[a];switch(a){case 0:s+=c;break;default:{let h=c.substring(0,1).toUpperCase(),p=c.substring(1);s+=h+p}break}}return r[t]=s,s}},HTMLElement.prototype.querySelectorIncluded=function(t,r,i){let n=this.querySelector(t);return n||(()=>{switch(!0){case(!r&&!i):{let s=this.closest(t);s==this&&(n=s)}break;case(!!r&&!!i):n=this.getAttribute(r)==i?this:null;break;case(!!r&&!i):n=this.getAttribute(r)?this:null;break}return n})()},HTMLElement.prototype.querySelectorAllIncluded=function(t,r,i){let n;try{n=this.querySelectorAll(t),n&&(n=n.toArray())}catch(s){n=[]}switch(t?n=this.querySelectorAll(t).toArray():r&&i?(n=this.querySelectorAll(`[${r}=${i}]`).toArray(),this.dataset[r]==i&&n.push(this)):r&&!i&&(n=this.querySelectorAll(`[${r}]`).toArray(),this.dataset[r]&&n.push(this)),!0){case(!r&&!i):{let s=this.closest(t);s==this&&n.push(s)}break;case(r&&i):break;case(r&&!i):break}return n},HTMLDocument.prototype.querySelectorIncluded=function(t){return this.querySelector(t)},HTMLDocument.prototype.querySelectorAllIncluded=function(t){return this.querySelectorAll(t)},Array.prototype.toggler=function(t,r){for(let i=0;i<this.length;i++){let n=this[i];(n.dataset.name==t||n.classList.contains(r))&&n.classList.toggle(r)}},HTMLElement.prototype.Ref=function(){let t="_cakes_storage";!this[t]&&(this._cakes_storage={});let r=this[t];return{set(i,n){r[i]=n},get(i){return r[i]},getAll(i){return r},remove(i){delete r[i]}}},HTMLElement.prototype.replaceDataSrc=function(){let t=this.querySelectorAllIncluded(null,"data-src",null);for(let r=0;r<t.length;r++){let i=t[r];i.setAttribute("src",i.dataset.src),i.removeAttribute("data-src")}},HTMLElement.prototype.unRequired=function(){let t=this.querySelectorAll(".cake-template [required]");for(let r=0;r<t.length;r++){let i=t[r];i&&i.removeAttribute("required")}},Object.keep=function(t,r){let i=t.split("."),n=i.slice(1),s=r.constructor.name=="Array",a=s?[]:{},u=function(h,p,m){return h[p]||(h[p]=m==null?{}:m),h[p]};i[0]&&u(Object.cache,i[0],n.length?{}:r);let c=Object.cache[i[0]];for(let h=0;h<n.length;h++){let p=n[h];n.length-1==h?(c=u(c,p,a),s?c=c.concat(r):c=Object.assign(c,r)):c=u(c,p,{})}return Object.cache[i[0]]}})(window)});var U=k((Vi,Ue)=>{var X={},F={typeof:function(e){switch(!0){case typeof e=="string":return"string";case typeof e=="number":return"number";case e instanceof Array:return"array";case e instanceof Function:return"function";case e instanceof HTMLCollection:return"htmlcollection";case e instanceof NodeList:return"htmlnodelist";case e instanceof Element:return"domlement";case e instanceof Object:return"object"}},isArray:function(e){return this.typeof(e)=="array"},isObject:function(e){return this.typeof(e)=="object"},isNumber:function(e){return this.typeof(e)=="number"},isString:function(e){return this.typeof(e)=="string"},isHTMLCollection:function(e){return this.typeof(e)=="htmlcollection"},isNodeList:function(e){return this.typeof(e)=="htmlnodelist"},isElement:function(e){return this.typeof(e)=="domlement"},isFunction:function(e){return this.typeof(e)=="function"}},fe={_each:function(e,t,r){if(r=="object"){var i=0;for(var n in e)e.hasOwnProperty(n)&&(t({key:n,value:e[n]},i),i=i+1)}else for(var s=0;s<e.length;s++)t(e[s],s)},each:function(e,t){var r=F.isArray(e)||e.length?"array":"object";this._each(e,function(i,n){t(i,n)},r)},map:function(e,t){var r=F.isArray(e)||e.length?"array":"object",i=e.length&&r=="array"?[]:{};return this._each(e,function(n,s){var a=t(n,s);r=="object"?i[a.key]=a.value:i.push(a)},r),i},reduce:function(e,t,r){var i=F.typeof(e);return this._each(e,function(n,s){t=r(n,t,s)},i),t},filter:function(e,t){var r=F.isArray(e)||e.length?"array":"object",i=e.length&&r=="array"?[]:{};return this._each(e,function(n,s){var a=t(n,s);a&&(r=="object"?i[n.key]=n.value:i.push(n.value))},r),i}},Jt={dictionary:function(e,t){t&&(t=t.split("."));for(let r=0;r<t.length;r++){let i=t[r];if(e[i])e=e[i];else{e=null;break}}return e}},xe={removeWhiteSpace(e){return String(e).split(" ").join("")}},Ne={perf:function(e){console.time("test"),e(),console.timeEnd("test")},logTest:function(e,t,r){try{e=JSON.parse(e)}catch(i){}try{r=JSON.parse(r)}catch(i){}switch(t){case"==":return e==r;case"!=":return e!=r;case"<":return e<r;case">":return e>r;case">=":return e>=r;case"<=":return e<=r}},toUrlSearchParams:function(e,t=!0){let r="";for(let i in e)if(e.hasOwnProperty(i)){let n=e[i];n.toString().includes("Object")&&(n=JSON.stringify(n)),t&&n?r+=`${encodeURI(i)}=${encodeURI(n)}&`:r+=`${encodeURI(i)}=${encodeURI(n)}&`}return r.slice(0,r.length-1)},sanitize:function(e,t=[]){return typeof e!="string"?e:decodeURIComponent(e.replace(/<.*>/,""))},toFormData:function(e,t={}){let r=[],i=e.querySelectorAll("TEXTAREA"),n=e.querySelectorAll("INPUT"),s=e.querySelectorAll("SELECT");function a(c,h,p){let m=[];for(let d=0;d<c.length;d++){let f=!0;try{f=c[d].closest(".cake-template")}catch(g){}try{f||(f=c[d].classList.includes("cake-template"))}catch(g){}f||(c[d].getAttribute("type")=="file"?m.push(c[d]):h.push(c[d]))}m.length&&(m.forEach(d=>{h.push(d)}),m=[])}a(i,r),a(s,r),a(n,r,!0);let u={};for(let c=0;c<r.length;c++){let h=r[c],p=h.name||h.id;if(!(p&&["{{","((","[[","<<","%%","&&"].includes(p))){let m,d=e[p];if(d){if(!d.nodeType){if(d.length)for(let g=0;g<d.length;g++){let y=d[g];if(y.nodeType==1&&!y.closest(".cake-template")){d=y;break}}}let f=d.tagName;f=="SELECT"?value=d.value:f=="INPUT"&&d.getAttribute("type")=="checkbox"?value=d.checked:f=="INPUT"&&d.getAttribute("type")=="file"?value=d.files:t.sanitize==!1?value=d.value:value=this.sanitize(d.value,t.skipsanitize),t.json&&t.trim?value!=""&&(u[p]=value):u[p]=value}}}if(t.json)return u;{let c=new FormData;for(let h in u)if(u.hasOwnProperty(h)){let p=u[h];p.constructor.name=="FileList"?fe.each(p,function(m,d){c.append(h,m,m.name)}):c.append(h,p)}return c}},splitBySpace:function(e,t){if(e&&(e=e.split(" "),F.isArray(e)))for(let r=0;r<e.length;r++)t(e[r])},toArray(e){let t=[];if(!e.length)return t;for(let r=0;r<e.length;r++)t.push(e[r]);return t},timeOut(e,t=1){setTimeout(()=>{e()},t)},instanceID(){return location.origin},recurse(e,t){return new Promise((r,i)=>{try{let n=e.length,s=0,a=()=>{n>s?(t(e[s]),s+=1,a()):r()};a()}catch(n){i(n.message)}})},browser(){if(window._browser)return window._browser;var e=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,t=typeof InstallTrigger!="undefined",r=/constructor/i.test(window.HTMLElement)||function(u){return u.toString()==="[object SafariRemoteNotification]"}(!window.safari||safari.pushNotification),i=!!document.documentMode,n=!i&&!!window.StyleMedia,s=!!window.chrome&&!!window.chrome.webstore||!!window.cordova,a=(s||e)&&!!window.CSS;return window._browser=e?"Opera":t?"Firefox":r?"Safari":s?"Chrome":i?"IE":n?"Edge":a?"Blink":"Don't know"},isOpera(){return this.browser=="Opera"},isFirefox(){return this.browser()=="Firefox"},isSafari(){return this.browser=="Safari"},isChrome(){return this.browser=="Chrome"},isIE(){return this.browser=="IE"},isEdge(){return this.browser=="Edge"},isBlink(){return this.browser=="Blink"},device(){return navigator.userAgent.includes("Android")?"android":/iPhone|iPad|iPod/i.test(navigator.userAgent)?"IOS":"desktop"},isAndroid(){return this.device()=="android"},isIOS(){return this.device()=="ios"},isDesktop(){return this.device()=="desktop"},escapeRegExp(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")}},Wt={unique:function(e,t){if(Set&&F.isArray(e))return[...new Set(e)];{let r={};return Loop.each(e,function(i,n){if(t&&F.isObject(i)){let s=Jt.dictionary(i,t);s&&(r[s]=!0)}else r[i]=!0}),Object.keys(r)}}};try{X.UTILS=N(N(N(N(N({},fe),F),Ne),xe),Wt)}catch(e){X.UTILS={},se=fe.each,se(fe,function(t,r){X.UTILS[t]=r}),se(F,function(t,r){X.UTILS[t]=r}),se(Ne,function(t,r){X.UTILS[t]=r}),se(xe,function(t,r){X.UTILS[t]=r})}var se;Ue.exports=X.UTILS});var He=k((er,Me)=>{var Kt=U(),Qt=window||{};Me.exports={Set:function(e){return Qt.Set?new Set(e):Kt.unique(e)}}});var Be=k(()=>{(function(){customElements.define("sub-template",class extends HTMLElement{constructor(){super()}connectedCallback(){this.replace(this)}replace(e){let t=e.dataset.template,r=document.getElementsByName(t);if(r.length>1){console.error(`template with name ${t} has more than one reference.`);return}if(!r)throw e.remove(),new Error(`${t} is not found!`);if(r[0]){let i=r[0];if(i.constructor.name=="HTMLTemplateElement"){if(i=i.content.cloneNode(!0).firstElementChild,!i)return;let n=e.attributes;for(let s=0;s<n.length;s++){let a=n[s];a.name!="data-template"&&i.setAttribute(a.name,a.value)}e.replaceWith(i)}else throw new Error(`${t} is not referred to a Template Element!`)}}}),HTMLTemplateElement.prototype.replaceSubTemplate=function(e){let t=e.getElementsByTagName("sub-template");if(t){t=t.toArray();for(let r=0;r<t.length;r++){let i=t[r];customElements.get("sub-template").prototype.replace(i)}}},HTMLTemplateElement.prototype.collectContent=function(){let e=this,t=null,r=e.cloneNode(!0),i=document.createDocumentFragment(),n=r.content.querySelector("style");n&&i.appendChild(n);let s=[];for(let a=0;a<r.content.children.length;a++){let u=r.content.children[0];this.replaceSubTemplate(u),s.push(u)}return t={style:i.children[0],others:s},t},HTMLTemplateElement.prototype.parseStyle=function(e){if(!e)return!1;var t=e.textContent.trim();if(!t.length)return;let r={},i="",n=t.split("}");for(let s=0;s<n.length;s++){let u=n[s].split("{"),c=u[0],h=u[1];c&&(r[c.trim()]=(()=>{let p=!1,m="",d=h.split("");for(let f=0;f<d.length;f++){let g=d[f];g==`
`?p=!0:g==" "?p||(m+=g):(p=!1,m+=g)}return m})())}return r},HTMLTemplateElement.prototype.parseHTML=function(e){if(e){var t=document.createElement("HTML");for(let r=0;r<e.length;r++){let i=e[r];t.append(i)}}return t||!1},HTMLTemplateElement.prototype.getContent=function(e){let t=this.collectContent(),r=t.style,i=t.others,n=this.parseStyle(r),s=this.parseHTML(i);for(let a in n)if(n.hasOwnProperty(a)){let u=s.querySelectorAll(a),c=n[a];for(let h=0;h<u.length;h++)u[h].setAttribute("style",c)}return s=e?s.children.toArray():s.innerHTML,s.length==1?s[0]:s}})()});var ee=k((rr,De)=>{var me=U();De.exports=function(){return Object.caching("plugins").set("plugin",{}),function(e,t){if(me.isObject(e)&&!t){let r=Object.caching("plugins").get("plugin");Object.caching("plugins").set("plugin",Object.assign(r,e))}else if(me.isString(e)&&t!=null){let r=Object.caching("plugins").get("plugin");r[e]=t,Object.caching("plugins").set("plugin",r)}else if(me.isString(e)&&t==null)return Object.caching("plugins").get("plugin")[e]||{}}}()});var ie=k((nr,Je)=>{var Fe=U();function te(e){this.options=e,this.tag=(this.options&&this.options.tag||"{{ }}").split(" "),this.lefttag=Fe.escapeRegExp(this.tag[0]),this.righttag=Fe.escapeRegExp(this.tag[1])}te.prototype._getTag=function(e){try{return e.match(new RegExp("(?<=<)|([^/s]+)(?=>)","g"))[2]}catch(t){throw new Error(`template of ${e} is empty.`)}};te.prototype._bindReplace=function(e,t){for(let r in e)if(e.hasOwnProperty(r)){let i=new RegExp(`${this.lefttag}${r}${this.righttag}`,"g");i&&(t=t.replace(i,`${e[r]}`))}return t};te.prototype.replaceString=function(e,t){return this._bindReplace(e,t)};te.prototype._toElement=function(e,t){let r=document.createElement("template");return r.innerHTML=e,r.content.children[0]};te.prototype.createElement=function(e,t,r){if(e){if(e instanceof Array){let i=typeof t=="string",n=i?this._getTag(t):t.tagName;t=i?t:t.outerHTML;let s=[];for(let a=0;a<e.length;a++){let u=e[a],c=this._bindReplace(u,t),h=this._toElement(c,n);r&&(h=h.outerHTML),s.push(h)}return s}else if(e instanceof Object){let i=typeof t=="string",n=i?this._getTag(t):t.tagName;t=i?t:t.outerHTML;let s=this._bindReplace(e,t),a=this._toElement(s,n);return r&&(a=a.outerHTML),a}}else{let n=typeof t=="string"?this._getTag(t):t.tagName;return this._toElement(t,n)}};Je.exports=te});var J=k(pe=>{pe.getConfig=function(e,t,r,i,n){return r==null?[]:r==i&&type!="bind"?[]:(()=>{let s=[],a=e;if(a&&a.length)for(let u=0;u<a.length;u++){let c=a[u];c.bind==t&&s.push(he(N({},c),{component:n}))}return s})()};pe.updateConfig=function(c,t,r,i,n,s,a,u){if(i!=null&&!(i==n&&t!="bind")){var c=(()=>{let h=c[s]&&c[s][t];if(h&&h.length){let p=[];for(let m=0;m<h.length;m++){let d=h[m];d.bind==r&&(u?d.sel==u:!0)&&Object.assign(d,a)}return p}else return[]})();return c}};pe.extendConfig=function(e){let t=[];for(let r=0;r<e.length;r++){let i={},n=e[r];for(let s in n)i[s]=n[s];t.push(i)}return t.reduce((r,i)=>{let n=i.incrementedSels;return n&&n.length?n.forEach(s=>{let a=N({},i);a.incrementedSel=s,r.push(a)}):r.push(i),r},[])}});var Ke=k((lr,We)=>{var ye=U(),be=J(),zt=be.getConfig,or=be.updateConfig,Xt=be.extendConfig;We.exports=async function(e,t,r,i,n){n=n||document;let s=this.storage.get(i,"attr"),a=zt(s,e,t,r,i);if(!!a.length)return a=Xt(a),Promise.all(a.map(u=>{let c,h=u.hasNegate,p=u.bind,m=u.testVal,d=u.attr,f=u.ops,g=u.sel,y=u.attrkey,b=u.attrvalue,v=u.incrementedSel,w=u.incrementId;if(p=ye.removeWhiteSpace(p),d=ye.removeWhiteSpace(d),v=t.incrementedSel||v,t.incrementedSel?c=t[p]:c=t,e==p){let S=n.querySelectorAll(`[data-attr=${v||g}]:not(.cake-template)`);return Promise.all([...S].map(_=>{let O=!1;f?(O=ye.logTest(c,f,m),h&&(O=!O)):h?O=!c:O=!!c,O?b?_.setAttribute(y,b):_.setAttribute(y):_.removeAttribute(y)}))}t=null}))}});var ze=k((cr,Qe)=>{var ve=U(),we=J(),Gt=we.getConfig,ar=we.updateConfig,Yt=we.extendConfig;Qe.exports=async function(e,t,r,i,n){n=n||document;let s=this.storage.get(i,"bind"),a=Gt(s,e,t,r,i);if(!!a.length){a=Yt(a);for(let u=0;u<a.length;u++){let c=a[u],h,p=c.attr,m=c.bind,d=c.sel,f=c.incrementedSel,g=c.incrementId,y=c.incrementedSels;f=t.incrementedSel||f,t.incrementedSel?h=t[m]:h=t;let b=p.toHyphen();if(e==m){let v=n.querySelectorAll(`[data-bind=${f||d}]`);for(let w=0;w<v.length;w++){let S=v[w];p=="class"||p=="className"?S.classList.length?(ve.splitBySpace(r,function(_){S.classList.remove(_)}),ve.splitBySpace(h,function(_){S.classList.add(_)})):ve.splitBySpace(h,function(_){S.classList.add(_)}):(h!=null||h!=null)&&(S.setAttribute(b,h),S[p]=h)}}}t=null}}});var Ge=k((hr,Xe)=>{var re=U(),Se=J(),Zt=Se.getConfig,ur=Se.updateConfig,Vt=Se.extendConfig;Xe.exports=async function(e,t,r,i,n){let s=this.storage.get(i,"class");n=n||document;let a=Zt(s,e,t,r,i);if(!a.length)return;let u={};a=Vt(a);for(let c=0;c<a.length;c++){let h=a[c],p,m=h.hasNegate,d=h.bind,f=h.testVal,g=h.className,y=h.ops,b=h.sel,v=h.incrementedSel,w=h.incrementId;if(d=re.removeWhiteSpace(d),v=t.incrementedSel||v,t.incrementedSel?p=t[d]:p=t,e==d){u[v||b]||(u[v||b]=n.querySelectorAll(`[data-class=${v||b}]:not(.cake-template)`));let S=u[v||b];for(let _=0;_<S.length;_++){let O=S[_],$=!1;y?($=re.logTest(p,y,f),m&&($=!$)):m?$=p==f:$=!!p,$?re.splitBySpace(g,function(T){re.toArray(O.classList).includes(T)||setTimeout(()=>{O.classList.add(T)})}):re.splitBySpace(g,function(T){re.toArray(O.classList).includes(T)&&setTimeout(()=>{O.classList.remove(T)})})}}}t=null}});var _e=k((fr,Ye)=>{function R(e){this.el=R.toArray(e)}R.toArray=function(e){let t=[];switch(!0){case e instanceof Array:t=e;break;case(e.length&&e.tagName&&e.tagName!="FORM"&&!(e instanceof Array)):for(let r=0;r<e.length;r++)t.push(e[r]);break;case!(e instanceof Array):t=[e];break}return t};R.prototype.loop=function(e){try{let t=-1,r=this.el.length;for(;++t<r;){let i=this.el[t];e(t,i)}return!0}catch(t){return console.error(t),!1}};R.prototype.getElements=function(){return this.el};R.prototype.getElement=function(e=0){return this.el[e]};R.prototype.remove=function(){let e=-1,t=this.el.length,r=document.createDocumentFragment();for(;++e<t;){let i=this.el[e];i&&r.appendChild(i)}return r=null,!0};R.prototype.unRequired=function(){return this.loop(function(e,t){t.unRequired()})};R.prototype.replaceDataSrc=function(){return this.loop(function(e,t){t.replaceDataSrc()})};R.cloneNode=function(e){e=e instanceof Array?e:this.toArray(e);let t=[];for(let r=0;r<e.length;r++)t.push(e[r].cloneNode(!0));return new R(t)};R.prototype.dataset=function(e,t){let r=this.el.length,i=-1;for(;++i<r&&!(this.el[i].dataset[e]&&t(this.el[i])=="break"););return!0};R.prototype.getContainers=function(){return this.getElementsByDataset("container").container};R.prototype.cloneNode=function(e){return e=this.el,R.cloneNode(e)};R.prototype.getAllElements=function(){let e=this.el.length,t=[];switch(!0){case e==1:t=this.el[0].getElementsByTagName("*").toArray();break;case e>1:{let r=-1;for(;++r<e;){let n=this.el[r].getElementsByTagName("*");if(n)for(let s=0;s<n.length;s++)t.push(n[s])}}break}return t};R.prototype.appendTo=function(e,t){e.nodeType==1&&(e=[e]);for(let r=0;r<e.length;r++){let i=e[r];if(!i&&!i.attributes)throw new TypeError(`the ${i} is not an instance of Element`);t&&(i.innerHTML="");for(let n=0;n<this.el.length;n++){let s=this.el[n];i.appendChild(s)}}};R.prototype.getElementsByTagName=function(e){let t=this.el.length,r=[];switch(!0){case t==1:r=this.el[0].getElementsByTagName(id).toArray();break;case t>1:{let i=-1;for(;++i<t;){let s=this.el[i].getElementsByTagName(selector);if(s)for(let a=0;a<s.length;a++)r.push(s[a])}}break}return r};R.prototype.getElementById=function(e){let t=this.el.length,r=[];switch(!0){case t==1:r=this.el[0].getElementById(id);break;case t>1:{let i=-1;for(;++i<t;){let s=this.el[i].querySelector(selector);s&&r.push(s)}}break}return r};R.prototype.querySelectorAll=function(e){let t=this.el.length,r=[];switch(!0){case t==1:r=this.el[0].querySelectorAll(e);break;case t>1:{let i=[],n=-1;for(;++n<t;){let a=this.el[n].querySelectorAll(e);a&&(r=r.concat(a.toArra()))}}break;default:r=[]}return r};R.prototype.querySelector=function(e){let t=this.el.length,r=[];switch(!0){case t==1:r=this.el[0].querySelector(e);break;case t>1:{let i=-1;for(;++i<t;){let s=this.el[i].querySelector(e);s&&r.push(s)}}break}return r};R.prototype.querySelectorIncluded=function(e,t,r){let i=this.el.length,n=[];switch(!0){case i==1:n=this.el[0].querySelectorIncluded(e,t,r);break;case i>1:{let s=-1;for(;++s<i;){let u=this.el[s].querySelectorIncluded(e,t,r);u&&n.push(u)}}break}return n};R.prototype.querySelectorAllIncluded=function(e,t,r){let i=this.el.length,n=[];switch(!0){case i==1:n=this.el[0].querySelectorAllIncluded(e,t,r);break;case i>1:{let s=-1;for(;++s<i;){let u=this.el[s].querySelectorAllIncluded(e,t,r);u&&(n=n.concat(u.toArra()))}}break}return n};R.prototype.contains=function(e){let t=this.el.length,r=!1;switch(t==1){case!0:r=this.el[0].contains(e);break;case!1:{let i=-1;for(;++i<t;)if(this.el[i].contains(e)){r=!0;break}}break}return r};R.prototype.getElementsByDataset=function(){let e,t,r,i,n,s;for(e=arguments,o={},length=e.length,r=-1,i=-1;++r<this.el.length;)for(n=this.el[r];++i<length;){t=e[i],n.getAttribute(`data-${t}`)?o[t]=[n]:o[t]=[];let a=n.querySelectorAll(`[data-${t}]`);if(a.length)for(let u=0;u<a.length;u++){let c=a[u];c.closest(".cake-template")||o[t].push(c)}}return o};Ye.exports=R});var Ve=k((gr,Ze)=>{var pr=U(),ei=_e(),ti=ie(),ii=ee(),Ee=J(),ri=Ee.getConfig,ni=Ee.updateConfig,dr=Ee.extendConfig;Ze.exports=async function(e,t,r,i,n){n=n||document;let s=this.storage.get(i,"forUpdate"),a=ri(s,e,t,r,i);if(!a.length)return;let u=new ti(ii("templating")),c=[];for(let h=0;h<a.length;h++){let p=a[h].bind,m=a[h].sel,d=a[h].iter,f=a[h].ins,g=a[h].targets;for(let y in t)if(t.hasOwnProperty(y)){let b=document.querySelectorAll(`[data-for-update-bind=${y}]`);for(let v=0;v<b.length;v++){let w=b[v],S=w.dataset.forUpdateBind;if(!w.dataset.forTemplate)w.remove();else{let _=w.cloneNode(!0);_.style.removeProperty("display"),_.classList.remove("cake-template");let O=t[S],$=-1;for(l=O.length;++$<l;){let T=O[$],I=$;for(let j=0;j<this.logicalType.length;j++){let L=this.logicalType[j],M=new ei(w).querySelectorAllIncluded(`[data-${L}]`);for(let C=0;C<M.length;C++){let x=M[C];if(x.dataset[L]){let H=x.dataset[L],Z=`${H}-${y}-${I}`;_.dataset[L]=Z;let B=this.getWatchItemsBySel(i,L,H).bind;if(B.includes(".")){S=B.split(".")[0];for(let D in T){let ue=T[D],z=`${S}.${D}`;T[z]=ue}}H&&c.push(he(N({_type:L},T),{incrementedSel:Z,sel:H,bind:B,incrementId:I,component:i}))}}}let A=u.createElement(T,_,!1);A.classList.remove("cake-template"),A.removeAttribute("data-for-template"),w.insertAdjacentElement("beforebegin",A),w.parentElement.tagName=="SELECT"&&(w.parentElement.selectedIndex=0)}}}}}return t=null,Promise.all(c.map(h=>{let p=h.bind,m=h._type,d=h.component,f=h.incrementedSel,g=h.sel,y=`notify${m.toProper()}`;return ni(m,p,h,null,d,{incrementedSel:f},g),this[y](p,h,null,d)})).then(()=>{})}});var le=k((mr,et)=>{var oe={};function si(){let e=oe[name];if(e&&cb instanceof Function){let t=cb.name;ctx&&(cb=cb.bind(ctx)),cb.binded="external",cb.original=t,cb.listenTo=e.name,e.Subscribe(cb)}}window.ComponentStorage=oe;et.exports={subscribe(e,t){return new Promise((r,i)=>{let n=setInterval(()=>{oe[name]&&(si(),clearInterval(n),r())})})},set(e,t){return oe[e]=t,!0},get(e){return oe[e]}}});var rt=k((wr,it)=>{var yr=U(),oi=ie(),li=ee(),ai=le(),Oe=J(),tt=Oe.getConfig,br=Oe.updateConfig,vr=Oe.extendConfig;it.exports=async function(e,t,r,i,n){let s=this.storage.get(i),a=new oi(li("templating"));return new Promise((u,c)=>{try{let h=tt(this.storage.get(i,"for"),e,t,r,i),p=tt(this.storage.get(i,"switch"),e,t,r,i);if(!h.length)return;let m=t.reduce((d,f)=>(d.push(f),d),[]);t=null;for(let d=0;d<h.length;d++){let f=h[d].bind,g=h[d].sel,y=h[d].iter,b=h[d].ins,v=h[d].component,w=h[d].cleaned;n=ai.get(v).html;let S=n.querySelectorIncluded(`[data-for-template=${g}]`),_=S.cloneNode(!0);m=m.map($=>{for(let T in $)$.hasOwnProperty(T)&&($[`${y}.${T}`]=$[T]);return $});let O=[];(()=>{let $=0;Object.keys(s).forEach(T=>{if(!["for","evt","animate","switch"].includes(T)){let I=s[T],A=I[0],j=A&&A.bind||void 0;j&&j.match(new RegExp(a.lefttag),"g")&&(m.forEach((L,M)=>{let C={};C.bind=a.replaceString(L,j),C.sel=`${A.sel}-${$}`,C.rawsel=A.sel,$+=1,m[M].__sel=C.sel;for(let x in A)A.hasOwnProperty(x)&&(C[x]||(C[x]=A[x]));I.push(C)}),O.push(T))}})})(),(()=>{w&&S.parentElement.children.toArray().forEach(I=>{I.dataset.for&&!I.classList.contains("cake-template")&&I.remove()});let $=-1;l=m.length,m.forEach((T,I)=>{let A=S.cloneNode(!0);(()=>{if(p&&!p.length)return;let L=p[0].bind,M=p[0].map,C=p[0].sel,x=p[0].cases,H=T[M],Z=A.querySelector(`[data-switch=${C}]`),B=x.find(D=>{let ue=D._id,z=D.bind;return z.includes("|")?z.split("|").map(K=>K.trim()).some(K=>K==H):z==H}),V=_.querySelector(`[data-case=${C}-${B._id}]`);V.classList.remove("cake-template"),Z.innerHTML=V.outerHTML})();let j=a.createElement(T,A,!1);Object.keys(s).forEach(L=>{if(O.includes(L)){let C=s[L].find(x=>x.sel==T.__sel);if(C){let x=C.rawsel;if(x){let H=j.querySelector(`[data-${L}=${x}]`);H.dataset[L]=C.sel}}}}),j.style.removeProperty("display"),j.classList.remove("cake-template"),j.removeAttribute("data-for-template"),S.insertAdjacentElement("beforebegin",j),(()=>{let L=h[0]&&h[0].children;!L||L.forEach(M=>{let C=j.querySelector(`[data-for=${M}]`);if(C){let x=C.dataset.forAutoBindKey,H=C.dataset.forAutoBindValue,Z=C.dataset.forIter,B=T[Z];if(B)for(let D=0;D<B.length;D++){let ue=B[D],z=C.cloneNode(!0),K=a.createElement(ue,z,!1);K.style.removeProperty("display"),K.classList.remove("cake-template"),K.removeAttribute("data-for-template"),C.insertAdjacentElement("beforebegin",K)}let V=C.closest("SELECT");V&&(V.selectedIndex=0)}})})(),j.replaceDataSrc()}),u()})()}n.unRequired(),m=null}catch(h){c(h)}})}});var st=k((_r,nt)=>{var ci=U(),qe=J(),ui=qe.getConfig,Sr=qe.updateConfig,hi=qe.extendConfig;nt.exports=async function(e,t,r,i,n){n=n||document;let s=this.storage.get(i,"if"),a=ui(s,e,t,r,i);if(!a.length)return;a=hi(a);let u={};for(let c=0;c<a.length;c++){let h=a[c],p=h.attr,m=h.bind,d=h.sel,f=h.testval,g=h._true,y=h._false,b=h.ops,v=h.hasNegate,w=h.incrementedSel,S=h.incrementId,_=p.toHyphen(),O=g!="null",$=y!="null";if(e==m){u[d]||(u[d]=n.querySelectorAll(`[data-if=${w||d}]:not(.cake-template)`));let T=u[d];for(let I=0;I<T.length;I++){let A=T[I],j=t,L;if(f?L=ci.logTest(f,b,j):L=v?!j:!!j,L){if(O)if(p=="class"){let M=g.split(" ");$?(y.split(" ").forEach(x=>{A.classList.remove(x)}),M.forEach(x=>{A.classList.add(x)})):M.forEach(C=>{A.classList.contains(C)||A.classList.add(C)})}else j[g]&&A.setAttribute(p,j[g])}else if($)if(p=="class"){let M=y.split(" ");O?(g.split(" ").forEach(x=>{A.classList.remove(x)}),M.forEach(x=>{A.classList.add(x)})):trueClasses.forEach(C=>{A.classList.contains(C)||A.classList.add(C)})}else A.setAttribute(p,y)}}}t=null}});var lt=k((Cr,ot)=>{var Er=U(),Ce=J(),fi=Ce.getConfig,Or=Ce.updateConfig,qr=Ce.extendConfig;ot.exports=async function(e,t,r,i,n){n=n||document;let s=this.storage.get(i,"model"),a=fi(s,e,t,r,i);if(!!a.length){for(let u=0;u<a.length;u++){let c=a[u],h=c.attr,p=c.bind,m=c.sel,d=h.toHyphen();if(e==p){let f=n.querySelectorAll(`[data-model=${m}]`);for(let g=0;g<f.length;g++){let y=f[g];h=="className"?r?t?y.classList.replace(r,t):y.classList.remove(r):y.classList.add(t):(y.setAttribute(d,t),y[h]=t)}}}t=null}}});var ct=k((kr,at)=>{var Pr=U(),Pe=J(),pi=Pe.getConfig,Tr=Pe.updateConfig,di=Pe.extendConfig;at.exports=async function(e,t,r,i,n){n=n||document;let s=this.storage.get(i,"toggle"),a=pi(s,e,t,r);if(!!a){a=di(a),n=n||document;for(let u=0;u<a.length;u++){let c=a[u];if(!c)continue;let h=c.sel,p=c.bind,m=c.value,d=c.ops,f=n.querySelector(`[data-toggle=${h}]`);m==r&&f&&f.classList.remove("is-active"),m==t&&f&&(f.classList.contains("is-active")&&f.classList.remove("is-active"),f&&f.classList.add("is-active"))}t=null}}});var ht=k(($r,ut)=>{function Te(){this.store={}}Te.prototype.set=function(e,t,r){let i=this.store;switch(!0){case!i[e]:i[e]={};case!i[e][t]:i[e][t]=[];default:i[e][t].push(r);break}return!0};Te.prototype.get=function(e,t){let r=this.store;if(e&&t)return r[e]&&r[e][t]||[];if(e&&!t)return r[e]||{}};ut.exports=Te});var pt=k((Lr,ft)=>{var Ar=ie(),gi=Ke(),mi=ze(),yi=Ge(),bi=Ve(),vi=rt(),wi=st(),Si=lt(),_i=ct(),Ei=ht(),de=U();function P(){this.uiid=0,this.notify={},this.sts={},this.storage=new Ei,this.logicalType=["if","bind","switch","toggle","class","attr"]}P.prototype.notifyFor=vi;P.prototype.notifyForUpdate=bi;P.prototype.notifyClass=yi;P.prototype.notifyBind=mi;P.prototype.notifyAttr=gi;P.prototype.notifyIf=wi;P.prototype.notifyModel=Si;P.prototype.notifyToggle=_i;P.prototype.notifier=function(e,t,r,i){if(t==null)return Promise.resolve();let n=JSON.parse(JSON.stringify(t)),s={for:"For",forUpdate:"ForUpdate",bind:"Bind",if:"If",class:"Class",attr:"Attr"},a=Object.caching("AttribProp").get(e)||(()=>{let u={},c=Object.keys(s),h=this.storage.get(i);if(!h)return[];for(let p=0;p<c.length;p++){let m=c[p],d=h[m];if(d)for(let f=0;f<d.length;f++)d[f].bind==e&&(u[m]=!0)}return u=Object.keys(u),Object.caching("AttribProp").set(e,u),u})();return new Promise((u,c)=>{try{let h=a.length,p=0,m=()=>{if(h>p){let d=a[p],f=s[d];p+=1,this[`notify${f}`](e,n,r,i).then(()=>{m()})}else u()};m()}catch(h){c(h.message)}})};P.prototype.registerNotifier=function(e,t){this.notify[e]||(this.notify[e]=[]),this.notify[e].push(t)};P.prototype.getEventTarget=function(e){let t=`${e}`,r=Object.caching("getEventTarget").get(t);if(!r){let i=this.storage.get(e);r=i&&i.evt?i.evt:[],Object.caching("getEventTarget").set(t,r)}return r};P.prototype.getRouterTarget=function(e){let t=`${e}`,r=Object.caching("getRouterTarget").get(t);if(!r){let i=this.storage.get(e);r=i&&i.router?i.router:[],Object.caching("getRouterTarget").set(t,r)}return r};P.prototype.getWatchItems=function(e){let t=`${e}`,r=Object.caching("getWatchItems").get(t);if(!r){let i=this.storage.get(e),n=de.reduce(i,{wt:[],forWt:[]},function(u,c,h){let p=u.key,m=u.value;return de.each(m,function(d,f){let g=d.bind;g&&(p=="for"?c.forWt.push(g):c.wt.push(g))}),c}),s=de.unique(n.wt);r=de.unique(n.forWt).concat(s),Object.caching("getWatchItems").set(t,r)}return r};P.prototype.getWatchItemsByType=function(e,t){let r=`${e}-${t}`,i=Object.caching("getWatchItemsByType").get(r);if(!i){let s=this.storage.get(e)[t]||[],a=new Set;(t=="animate"||t=="toggle")&&(a=[]);for(let u=0;u<s.length;u++){let c=s[u],h=c.bind;t=="animate"||t=="toggle"?a.push(c):!!h&&a.add(h)}i=[...a],Object.caching("getWatchItemsByType").set(r,i)}return i};P.prototype.getWatchItemsBySel=function(e,t,r){let i=`${e}-${t}-${r}`,n=Object.caching("watchItemsBySel").get(i);if(!n){let a=this.storage.get(e,t).find(u=>u.sel==r);n=a||!1,Object.caching("watchItemsBySel").set(i,n)}return n};P.prototype.getConfig=function(e){return this.storage.get(e)};P.prototype._activateReactive=e=>{};P.prototype._register=function(e,t,r){return this.storage.set(e,t,r)};P.prototype._static=function(e){return function(t,r){let i=[];for(let n=0;n<t.length;n++){let s=t[n];switch(r){case!1:i.push(s);break;case!0:{let a=s.closest("[data-component]");switch(a=a&&a.dataset.component,a==e){case!0:i.push(s);break}}break;default:continue}}return i}};P.prototype._loopElements=function(e,t,r,i,n){if(!t.length||(t=this._static(r)(t,i),!t.length))return!1;for(let s=0;s<t.length;s++){let a=t[s],u=`ckm${this.uiid}`,c,h;if(e.includes(",")){let p=e.split(",");c={},h={};for(let m=0;m<p.length;m++){let d=p[m];c[d]=a.dataset[d],h[d]=c.split(",")}}else c=a.dataset[e],h=c.split(",");n(a,u,c,h,s)}return!0};P.prototype._compileEvents=function(e,t,r){return new Promise(i=>{this._loopElements("event",e,t,r,function(n,s,a,u,c){let h=u;for(let p=0;p<h.length;p++){let m=h[p].split(":"),d=m[0],f=m[1];d=d.trim(),f=f&&f.trim(),this._register(t,"evt",{event:d,sel:s,cb:f}),n.dataset.event=s,this.uiid++}}.bind(this)),i()})};P.prototype._compileToggle=function(e,t,r){return new Promise(i=>{let n={};this._loopElements("toggle",e,t,r,function(s,a,u,c,h){let p=u;n[p]&&(a=n[p]),this._register(t,"toggle",{sel:a,name:"ns-"+p}),s.dataset.toggle=a,this.uiid++,n[p]=a}.bind(this)),n={},i()})};P.prototype._compileFor=function(e,t,r,i){return new Promise(n=>{let s=i;if(!e.length){n();return}let a=this._static(t)(e,r);if(!a.length){n();return}let u={};for(let c=0;c<a.length;c++){let h=`ckf${this.uiid}`;u[h]={};let p=a[c],m=p.dataset.for,d=p.dataset.forAutoBind,f=p.dataset.forCleaned==null||p.dataset.forCleaned=="true",g=m.split(" "),y=g[0],b=g[1],v=g[2];if(d){let w=p.dataset.forIter,S=d.split(":"),_=S[0]&&S[0].trim(),O=S[1]&&S[1].trim();u[h]={iteration:w},p.dataset.forAutoBindKey=_,p.dataset.forAutoBindValue=O,p.removeAttribute("data-for-auto-bind")}if(p.style.display="none",p.classList.add("cake-template"),p.dataset.for=h,p.dataset.forTemplate=h,u[h]=Object.assign(u[h],{bind:v,sel:h,iter:y,ins:b,cleaned:f}),++this.uiid,c!=0){let w=p.parentElement&&p.parentElement.closest("[data-for]");if(!w)continue;let S=!!w.dataset.for;if(s.contains(w)&&S){let _=w.dataset.for,O=u[_];O&&!O.children?O.children=[h]:O&&O.children.push(h)}}}for(let c in u)u.hasOwnProperty(c)&&this._register(t,"for",u[c]);n()})};P.prototype._compileForUpdate=function(e,t,r){return new Promise(i=>{this._loopElements("forUpdate",e,t,r,function(n,s,a,u,c){n.style.display="none",n.classList.add("cake-template"),n.dataset.forUpdate=s,n.dataset.for||(n.dataset.forTemplate=s);let h=a.split(" "),p=h[0],m=h[1],d=h[2];this._register(t,"forUpdate",{bind:d,sel:s,iter:p,ins:m}),this.uiid++}.bind(this)),i()})};P.prototype._compileSwitch=function(e,t,r){return new Promise(i=>{this._loopElements("switch",e,t,r,function(n,s,a,u,c){let h=n.dataset.switch,p="def";if(h.includes(".")){let f=n.dataset.switch.split(".");h=f[0],p=f[1]}n.dataset.switch=s;let m=n.querySelectorAll("[data-case]"),d=[];for(let f=0;f<m.length;f++){let g=m[f],y=g.closest(`[data-switch=${s}]`);if(g.classList.add("cake-template"),y){let b=g.dataset.case,v=`cksc${this.uiid}`;g.dataset.case=`${s}-${v}`,d.push({_id:v,bind:b}),this.uiid++}}this._register(t,"switch",{bind:h,sel:s,map:p,cases:d}),this.uiid++}.bind(this)),i()})};P.prototype._compileBind=function(e,t,r){return new Promise(i=>{this._loopElements("bind",e,t,r,function(n,s,a,u,c){for(let m=0;m<u.length;m++){let d=u[m].split(" ").join("");if(d.includes(":")){let f=d.split(":");var h=f[0],p=f[1]}else var p=d,h=n.value==null?"textContent":"value";this._register(t,"bind",{attr:h,bind:p,sel:s})}this.uiid++,n.dataset.bind=s}.bind(this)),i()})};P.prototype._compileAnimate=function(e,t,r){return new Promise(i=>{this._loopElements("animate",e,t,r,function(n,s,a,u,c){let h={};for(let p=0;p<u.length;p++){let d=u[p].split(":"),f=d[0],g=d[1];if(f=="ns"){h.ns=g;break}else h[f]={keyframes:g.split("-")}}h.selector={attr:"data-animate",val:s},this._register(t,"animate",h),this.uiid++,n.dataset.animate=s}.bind(this)),i()})};P.prototype._compileIf=function(e,t,r){return new Promise(i=>{let n=new RegExp("<|>|===|==|!==|!=");this._loopElements("if,ifBind",e,t,r,function(s,a,u,c,h){let p=u.if,m=u.ifBind,d=c.if;for(let f=0;f<d.length;f++){let g=c[f],y=g.substring(0,g.indexOf("=")),b=g.substring(g.indexOf("=")+1,g.length);b=b.split(new RegExp("[()]")).join("");let v=b.split("?"),w=v[0],S=v[1],_=w[0]=="!";hasRegularLog=w.match(n);let O,$,T;if(hasRegularLog){let L=w.split(n);O=L[0].trim(),$=L[1].trim(),T=hasRegularLog[0]}else O=w;_&&(O=O.slice(1));let I=S.split(":"),A=I[0],j=I[1];this._register(t,"if",{hasNegate:_,attr:y,ops:T,bind:O,testval:$||null,_true:A,_false:j,sel:a,ifBind:m})}this.uiid++,s.dataset.if=a}.bind(this)),i()})};P.prototype._compileClass=function(e,t,r){return new Promise(i=>{let n=new RegExp("<|>|===|==|!==|!=");this._loopElements("class",e,t,r,function(s,a,u,c,h){let p,m,d,f,g,y,b=c;for(let v=0;v<b.length;v++){let S=b[v].split("&&"),_=S[0],O=S[1];if(_=_.trim(),O=O.trim(),p=_.match(n),_.substring(0,2).includes("!")?(m=!0,y=_.substring(0,2)=="!!"?2:_.substring(0,1)=="!"?1:0):(m=!1,y=0),p){let $=_.split(n);d=$[0].trim(),g=$[1].trim(),f=p[0].trim()}else!m&&(d=_),m&&(d=_.substring(y),g=y==2);this._register(t,"class",{hasNegate:m,bind:d,testVal:g,className:O,ops:f,sel:a})}this.uiid++,s.dataset.class=a}.bind(this)),i()})};P.prototype._compileAttr=function(e,t,r){return new Promise(i=>{let n=new RegExp("<|>|===|==|!==|!=");this._loopElements("attr",e,t,r,function(s,a,u,c,h){let p,m,d,f,g,y=u.split("&&"),b=y[0],v=y[1];v=v.trim();let w=v.split("="),S=w[0],_=w[1];if(b=b.trim(),p=b.match(n),m=b[0]=="!",p){let O=b.split(n);bind=O[0],g=O[1],f=p[0]}else bind=b;m&&m&&(bind=bind.slice(1)),this._register(t,"attr",{hasNegate:m,bind,testVal:g,attrkey:S,attrvalue:_,ops:f,sel:a}),this.uiid++,s.dataset.attr=a}.bind(this)),i()})};P.prototype._compileModel=function(e,t,r){return new Promise(i=>{this._loopElements("model",e,t,r,function(n,s,a,u,c){let h=n.tagName;for(let f=0;f<u.length;f++){let g=u[f].split(" ").join("");if(g.includes(":"))var p=g.split(":"),m=p[0],d=p[1];else var d=g,m="value";this._register(t,"model",{attr:m,bind:d,sel:s,nodeType:h})}this.uiid++,n.dataset.model=s}.bind(this)),i()})};P.prototype.inject=function(e,t,r=!1){return new Promise(i=>{let n=e.getElementsByDataset("bind","for","for-update","switch","toggle","event","animate","if","class","attr");i(n)}).then(i=>{let n=[],s={bind:this._compileBind,switch:this._compileSwitch,toggle:this._compileToggle,if:this._compileIf,class:this._compileClass,attr:this._compileAttr,for:this._compileFor,"for-update":this._compileForUpdate,event:this._compileEvents,animate:this._compileAnimate};for(let a in i)i.hasOwnProperty(a)&&i[a].length&&n.push(s[a].apply(this,[i[a],t,r,e]));return Promise.all(n.length?n:[n])}).then(()=>Promise.resolve())};ft.exports=P});var ae=k((Ir,dt)=>{var Oi=U();dt.exports=function(){function e(f){return f?f.constructor.name.toLowerCase():null}function t(f,g){for(let y in f)f.hasOwnProperty(y)&&g(f[y],y)}function r(f,g,y){f=Object.assign(f,{[y]:g})}function i(f){return f===null}function n(f){return f===void 0}function s(f){return e(f)=="array"}function a(f){return e(f)=="object"}var u=function(f,g){for(var y=null,b=0;b<f.length;b++){var v=f[b];if(e(g)=="object"){var w=g,S=Object.keys(g)[0],_=w[S];if(e(v)=="object"){var O=v[S]==_;if(O){y=b;break}}}else if(e(g)!="array"){var O=g==v;if(O){y=b;break}}}return y},c=function(f,g){var y=null,b=e(g);if(b=="object"){var v=Object.keys(g)[0];f[y]!=null&&f[y]==g[v]&&(y=v)}else b=="string"&&(y=g);return y},h=function(f,g){var y=null;return e(f)=="array"?y=u(f,g):e(f)=="object"&&(y=c(f,g)),y},p=class{constructor(f,g,y){this.type=f,this.name=`${Oi.instanceID()}-${g}`,this.child=y,this.cache={},e(this.child)=="string"&&(this.child=y=="array"?[]:y=="object"?{}:!1)}init(f){return this[this.type]?(this[this.type](f),!0):!1}open(){if(this.type=="session"){var f=JSON.parse(sessionStorage[this.name]);return f[this.name]}else if(this.type=="local"){var f=JSON.parse(localStorage[this.name]);return f[this.name]}else return this.cache[this.name]}close(f){return this.child=f,this.recache(),this.init(!0)}recache(){this.cache[this.name]=this.child}create(){this.cache[this.name]=this.child}array(){this.create()}object(f){this.create()}session(f){f||this.recache();try{!sessionStorage[this.name]&&!f?sessionStorage.setItem(this.name,JSON.stringify(this.cache)):f&&sessionStorage.setItem(this.name,JSON.stringify(this.cache))}catch(g){this.recache()}}local(f){f||this.recache();try{!localStorage[this.name]&&!f?localStorage.setItem(this.name,JSON.stringify(this.cache)):f&&localStorage.setItem(this.name,JSON.stringify(this.cache))}catch(g){this.recache()}}},m={create:function(f,g){if(s(f)){let y=new Set(f);e(g)=="array"?g.forEach(b=>{y.add(b)}):y.add(g),f=Array.from(y)}else a(f)&&(a(g)?t(g,function(y,b){f[b]=y}):f[g]=g);return f},createOrUpdate:function(f,g){var y=h(f,g);return e(f)=="array"?i(y)?f.includes(g):f[y]=g:e(f)=="object"&&(i(y)?a(g)?t(g,function(b,v){r(f,b,v)}):f[g]=g:f[y]=g),f},remove:function(f,g){if(e(g)=="string"){var y=h(f,g);if(e(f)=="object")delete f[y];else if(e(f)=="array"){for(var b=[],v=0;v<f.length;v++)if(v!=y)b.push(f[v]);else continue;f=b}return f}else{if(e(g)=="object")return Object.filter(f,function(w,S){var _=g[S]!=null&&g[S]==w;return!_});if(e(g)=="array")return Object.filter(f,function(w,S){var _=g.contains(S);return!_})}if(i(y))return!1},get:function(f,g){var y=e(g);if(y=="string"){var b=h(f,g);if(b==0||b)return f[b]}else{if(y=="object")return Object.filter(f,function(v,w){var S=!n(g[w])&&g[w]==v;return S});if(y=="array")return Object.filter(f,function(v,w){var S=g.contains(w);return S})}return null},getNot:function(f,g){var y=e(g);return y=="string"?Object.filter(f,function(b,v){var w=v!=g;return w}):y=="object"?Object.filter(f,function(b,v){return Object.some(g,function(w,S){var _=S==v&&w==b;return!_})}):y=="array"?Object.filter(f,function(b,v){var w=!g.contains(v);return w}):null},getAll:function(f){return f}},d=class{constructor(f){this.name=f.name,this.storageType=f.storage,this.child=f.child||"object";try{e(this.child)=="string"&&(this.child=this.child=="array"?[]:this.child=="object"?{}:null)}catch(g){this.storageType=="session"?sessionStorage.clear():this.storageType=="local"&&localStorage.clear(),e(this.child)=="string"&&(this.child=this.child=="array"?[]:this.child=="object"?{}:null)}if(!["array","object"].includes(e(this.child)))throw new Error("the child must be an object or array type.");this.storage=new p(this.storageType,this.name,this.child),this.storage.init()}has(f){var g=this.storage.open(),y=h(g,f);return i(y)?!1:y}get(f,g){if(g){var y=this.storage.open();return m.get(y,f)}else return new Promise((b,v)=>{setTimeout(()=>{var w=this.storage.open();b(w)})}).then(b=>m.get(b,f))}getNot(f){var g=this.storage.open();return m.getNot(g,f)}getAll(){var f=this.storage.open();return Promise.resolve(f)}update(f,g){var y=this.storage.open(),b=h(y,f);return b==0||b?(y=m.createOrUpdate(y,data),this.storage.close(y)):!1}createOrUpdate(f){if(arguments.length>1){let b=arguments[0],v=arguments[1];f={[b]:v}}var g=this.storage.open();return g=m.createOrUpdate(g,f),this.storage.close(g)}create(f){var g=this.storage.open();return g=m.create(g,f),this.storage.close(g)}remove(f){var g=this.storage.open();return g=m.remove(g,f),this.storage.close(g)}};return d}});var mt=k((jr,gt)=>{var qi=ae()();gt.exports=function(e){let t={};class r{constructor(n){this.name=n,this.reactiveData={},this.notify=[],this.install(this.name),this.pKeys={},this.sanitize=function(s){let a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},u=/[&<>"'/]/ig;return typeof s=="string"?s.replace(u,c=>a[c]||""):s}}registerNotifier(n){this.notify.push(n)}install(){this.session=new qi({child:"object",storage:"session",name:`_cake_${this.name}_cf`})}notifier(n,s){let a=s.value,u=s.bind;return this.reactiveData[n]||(this.reactiveData[n]={}),this.reactiveData[n][u]=a,this.set(u,a)}getInputData(n="json",s){let a=s||this.name,u=JSON.parse(JSON.stringify(this.reactiveData[a]));for(let c in u){let h=u[c];u[c]=this.sanitize(h)}if(n=="json")return u;if(n=="formdata"){let c=new FormData;for(let h in u){let p=u[h];c.append(h,p)}return c}}hook(n,s,a){t[n]||(t[n]={}),t[n][s]||(t[n][s]=[]),t[n][s].push(a)}get(n,s=!1){let a=this.pKeys[n];return s?this.session.get(n,!0):this.session.get(n)}set(n,s){let a=`${this.name}-${n}`,u=this.notify,c=this.name,h=null;return this.pKeys[n]=a,new Promise(async(p,m)=>{n!="password"&&this.session.createOrUpdate(n,s),p()}).then(async()=>Promise.all(u.map(p=>p(n,s,h,c).then(()=>{let m=t[this.name];if(m){let d=m[n];d&&d.forEach(f=>{f(s)})}}))))}removeCache(n){return this.session.remove(n)}}return r}});var bt=k((Rr,yt)=>{yt.exports=class{constructor(e=[],t){this.html=t||document,this.cf=e,this.duration=300}animate(e){this.config=this.parse(this.cf);let t=this.config[0].element,r=this.config[0][e];return r?new Promise((i,n)=>{t.velocity(r.velocity,{complete:function(){i()}})}):Promise.resolve()}parse(e){let t=[],r=e.length,i=-1;for(;++i<r;){let n=e[i],s=n.selector,a;switch(!0){case!!(s.val&&s.attr):a=this.html.querySelectorIncluded(`[${s.attr}=${s.val}]`,s.attr,s.val);break;case!!(s.val&&!s.attr):{let u=s.val.match(new RegExp("^[.]"))?"class":s.val.match(new RegExp("^[#]"))?"id":null,c=u?s.val.slice(1):null;a=this.html.querySelectorIncluded(s.val,u,c)}break}n.element=a,t.push(n)}return t}dic(e){return{slideOutUp:[{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1",easing:"ease-out"},{transform:"translate3d(0,100%,0)",visibility:"hidden",opacity:"0",easing:"ease-out"}],slideOutRight:[{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"},{transform:"translate3d(100%,0,0)",visibility:"hidden",opacity:"0"}],slideOutLeft:[{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"},{transform:"translate3d(-100%,0,0)",visibility:"hidden",opacity:"0"}],slideOutDown:[{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1",easing:"ease-out"},{transform:"translate3d(0,-100%,0)",visibility:"hidden",opacity:"0",easing:"ease-out"}],slideInUp:[{transform:"translate3d(0,100%,0)",visibility:"hidden",opacity:"0",easing:"ease-out"},{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1",easing:"ease"}],slideInRight:[{transform:"translate3d(100%,0,0)",visibility:"hidden",opacity:"0"},{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"}],slideInLeft:[{transform:"translate3d(-100%,0,0)",visibility:"hidden",opacity:"0",easing:"ease-out"},{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"}],slideInDown:[{transform:"translate3d(0,-100%,0)",visibility:"hidden",opacity:"0",easing:"ease-out"},{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1",easing:"ease-out"}],disappear:[{opacity:"1"},{opacity:"0"}],appear:[{opacity:"0"},{opacity:"1"}],flipInX:[,{offset:0,backfaceVisibility:"visible"},{transform:"perspective(400px) rotate3d(1,0,0,90deg)",opacity:"0",offset:0},{transform:"perspective(400px) rotate3d(1,0,0,-20deg)",offset:.4,easing:"ease-in"},{offset:.6,opacity:"1",transform:"perspective(400px) rotate3d(1,0,0,10deg)"},{transform:"perspective(400px) rotate3d(1,0,0,-5deg)",offset:.8},{offset:1,backfaceVisibility:"visible",transform:"perspective(400px) rotate3d(1,0,0,0)"}]}[e.trim()]||[]}}});var wt=k((xr,vt)=>{var Ci=bt(),Pi=_e(),Ti=U(),ki=ie(),$i=ee();function q(e,t,r){this.name=e,this.template=t,this.options=r,this.handlers=r.handlers,this.subscribe=r.subscribe,this.renderqueue=r.renderqueue,this.data={},this.root=r.root?`${r.root}:not(.cake-template)`:r.root,this.items=!1,this.type=r.type||"view",this.toggle=r.toggle,this.targets={},this.animateOptions=r.animate,this.role=r.role,this.isReady=!1,this.scope=r.scope,this.animatecss=this.options.animatecss,this.formSelector=r.form,this.await={},this.state=r.state,this.originalState=[],this.utils=Ti,this.renderQueing=[],this.handlers||console.error(`${this.name} has no handlers`),this.subscribe||console.error(`${this.name} has no subscribe`),(e=="app"||r.role=="app")&&(this.staticComponent=r.static||[]),this.container={},this.compile=new Promise(i=>{this._bindHandlers(),i()}).then(()=>this._bindSubscribe()).then(()=>this.cloneState()).then(()=>{switch(this.type=="view"&&!!this.template){case!0:return this.createElementAsync();default:this.isStatic=!1;break}})}q.prototype.isStatic=!1;q.prototype.hasEvent=!1;q.prototype.isConnected=!1;q.prototype.destroyed=!1;q.prototype.isCreated=!1;q.prototype.cloneState=function(){if(!!this.state){for(let e in this.state)this.state.hasOwnProperty(e)&&(this.originalState[e]=this.state[e]);this.$state=(()=>this.state)()}};q.prototype.clearState=function(){!this.state||(this.state=JSON.parse(JSON.stringify(this.originalState)),this.$state=(()=>this.state)())};q.prototype.Subscribe=function(e){this.$observer.registerSubscribe({[e.listenTo]:{[e.original]:[e]}})};q.prototype.Node=function(e){return new Pi(e)};q.prototype._bindHandlers=function(){for(let e in this.handlers)if(this.handlers.hasOwnProperty(e)){let t=this.handlers[e],r=t.name;t=t.bind(this),t.original=r,t.binded=this.name,this.handlers[r]=t,this.initAwaitHandlers(e)}this.await.destroy||(this.await.destroy=Promise.resolve()),this.await.animateRemove||(this.await.animateRemove=Promise.resolve())};q.prototype.initAwaitHandlers=function(e){this.await[e]=Promise.resolve()};q.prototype._bindSubscribe=function(){let e={};for(let t in this.subscribe)if(this.subscribe.hasOwnProperty(t)){if(subscribe=this.subscribe[t],!!subscribe.components&&!subscribe.handler)throw new Error(`there is no handler in format many of subscribe in event ${t}`);if(!subscribe.components&&!!subscribe.handler)throw new Error(`there is no components in format many of subscribe in event ${t}`);if(!!subscribe.components&&!!subscribe.handler){let i=t,n=subscribe.components,s=subscribe.handler;s=s.bind(this),s.binded=this.name,s.original=i;for(let a=0;a<n.length;a++){let u=n[a];e[u]||(e[u]={}),e[u][i]||(e[u][i]={}),s.listenTo=u,e[u][i]=s}}else{e[t]||(e[t]={});let i=subscribe;for(let n in i)if(i.hasOwnProperty(n)){let s=i[n],a=s.name;try{s=s.bind(this)}catch(u){}s.original=a,s.binded=this.name,s.listenTo=t,e[t][a]||(e[t][a]={}),e[t][a]=s}}}this.subscribe=e};q.prototype.getHTML=function(){return this.html};q.prototype.doFor=function(e,t){if(t!=null)return this.$attrib.notifyFor(e,t,null,this.name,this.getHTML())};q.prototype.doToggle=function(e,t){this.$attrib.notifyToggle(e,t,null,this.name,this.html)};q.prototype.doSwitch=function(e,t){this.$attrib.notifySwitch(e,t,null,this.name,this.html)};q.prototype.doIf=function(e,t){this.$attrib.notifyIf(e,t,null,this.name,this.html)};q.prototype.$animate=function(e){let t=this.$attrib.getWatchItemsByType(this.name,"animate"),r=this.animateOptions,i=[];return(()=>{if(!(!t.length&&!(t instanceof Array)||!r))for(let n=0;n<t.length;n++){let s=t[n],a=s.ns,u=s.selector;if(s.ns){if(r[a]){let c=r[a];Object.assign(s,r[a]),delete r[a]}}else i.push(t)}})(),t.length?((()=>{let n={},s={};for(let a in r)r.hasOwnProperty(a)&&(s.val=a,n.selector=s,Object.assign(n,r[a]),t.push(n),n={},s={})})(),new Ci(t,this.html).animate(e)):!1};q.prototype.$templating=function(e,t,r){let i=t||this.template;return new ki($i("templating")).createElement(e,i,r)};q.prototype.createElement=function(){if(!(this.template.substring(0,1)=="#"))return;let t=this.template.substr(1),r=document.getElementById(t),i=this.isTemplate=r&&r.toString().includes("Template");if(!r)throw new Error(`the template for ${this.name} is not found with.`);return new Promise(n=>{switch(i){case!0:{let s=r.getContent(!0);if(!s)throw new Error(`it might be theres no template in component - ${this.name}`);s.cake_component=this.name,this.html=this.Node(s),this._parseHTML(this.isStatic).then(()=>{n()})}break;case null:n();break;default:{let s=r;if(!s)throw new Error(`it might be theres no template in component - ${this.name}`);s.cake_component=this.name,this.html=this.Node(s),this.isStatic=!0,this._parseHTML(this.isStatic).then(()=>{n()})}}})};q.prototype.createElementAsync=function(){return new Promise(e=>{this.createElement().then(()=>{e()})}).then(()=>{this.isReady=!0})};q.prototype._isParsed=!1;q.prototype._parseHTML=function(e=!1){return this.$attrib.inject(this.html,this.name,e).then(()=>{this.original=this.html.cloneNode(),this._isParsed=!0})};q.prototype.renderQue=function(e={}){if(e.id==null&&e.id!=null)throw new Error("renderQue method requires an id.");let r=e.id;return r&&(e.hasqued=!0,this.renderQueing.push({date:new Date().toString(),id:r,options:e})),this.render(e)};q.prototype.render=function(e={}){if(e.hasqued||this.isConnected&&console.error(`${this.name} is already rendered and connected to the DOM`),e.revokeque&&(this.await.destroy=Promise.resolve()),this.isConnected)return Promise.resolve();let t=e.root,r=e.cleaned,i=e.emit||{},n=e.data||{};if(typeof t=="string"){let c=`${t}:not(.cake-template)`;t=[document.querySelector(c)]}let s=this.options.multiple,a=this.state||{},u={emit:i};return this.isConnected=!0,new Promise((c,h)=>{!!t&&(this.root=t),this.isReady?c():this.createElement().then(()=>!this.template&&this.fire.isConnected&&this.fire.isConnected(u,!0)).then(()=>{this.isReady=!0,c()})}).then(()=>this.await.destroy.then(()=>this.await.animateRemove).then(()=>new Promise((c,h)=>{let p=this.$attrib.getWatchItems(this.name);Promise.all(p.map(m=>{if(n[m])return this.$attrib.notifier(m,n[m],null,this.name)})).then(()=>{c(this.html)})}).then(c=>(u={element:c,emit:i},new Promise((h,p)=>{try{this.fire.beforeConnected&&this.fire.beforeConnected(u,!0),h(c)}catch(m){p(m)}}))).then(c=>{if(!this.isStatic)return(n?(()=>new Promise(p=>{let m=c.getElement();m=this.$templating(n,m),this.html=c=this.Node(m),this.html.replaceDataSrc(),n=null,p()}))():Promise.resolve()).then(()=>this._animatecss("render")).then(()=>(c.appendTo(this.root,r),!0))}).then(()=>{}).then(()=>this.findContainer()).then(()=>{try{return this.fire.isConnected&&this.fire.isConnected(u,!0)}catch(c){console.log(440,c)}}).then(()=>this.findTarget()).then(()=>this.addEvent()).then(()=>this.$animate("render")).then(()=>(s&&this._smoothReset(),new Promise((c,h)=>{setTimeout(()=>{this._watchReactive(),c()},100)})))))};q.prototype._animatecss=function(e){try{if(!this.animatecss)return Promise.resolve();let t=this.animatecss[e];return t?Promise.all(Object.keys(t).map(r=>{let i="animate__animated,";i+=t[r];let n=this.html.querySelectorAllIncluded(null,"data-animatecss",r);return n?Promise.all(n.map(s=>{let a=s.classList;for(let u=0;u<a;u++){let c=a[u];c.includes("animate_")&&s.classList.remove(c)}return i.split(",").forEach(u=>{s.classList.add(u.trim())}),s.style.setProperty("--animate-duration","0.3s"),new Promise((u,c)=>{setTimeout(()=>{u()},500)})})):Promise.resolve()})):Promise.resolve()}catch(t){return console.error(t),Promise.resolve()}};q.prototype.renderAsync=function(e){this.render(e).then(()=>{this.$persist.append(this.name)})};q.prototype._smoothReset=function(){this.html=this.original.cloneNode()};q.prototype._hardReset=function(e){return this.$persist.remove(e),this.html=this.original.cloneNode(),!0};q.prototype.reset=function(e={}){if(e.id==null&&e.id!=null)throw new Error("renderQue method requires an id.");let r=e.id,i;r&&(i=this.renderQueing.filter(s=>s.id==r),this.renderQueing=JSON.parse(JSON.stringify(this.renderQueing)).filter(s=>s.id!=r));let n=this.$animate("remove");return n instanceof Promise?this.await.animateRemove=new Promise(s=>{n.then(()=>this.html.remove()).then(()=>{this.container={}}).then(()=>this.clearState()).then(()=>this._hardReset(this.name)).then(()=>{s()}).then(()=>{if(this.isConnected=!1,this.renderQueing&&this.renderQueing.length&&i){let a=i.options;return a||(a={}),a.revokeque=!0,this.render(a)}})}):new Promise(s=>{this.html.remove(this.name),this.clearState(),this.container={},this._hardReset(this.name),this.isConnected=!1,s()}).then(()=>{if(this.renderQueing&&this.renderQueing.length&&i){let s=i.options;return s||(s={}),s.revokeque=!0,this.render(s)}})};q.prototype.addEvent=function(e,t){let r=this.name;function i(n,s,a,u){return function(c){a||c.preventDefault(),u&&c.stopPropagation(),Cake.Observer.notify(s,n,c)}}if(!!this.targets){for(let n in this.targets)if(this.targets.hasOwnProperty(n)){let s=this.targets[n];for(let a of s){let u=a.sel,c=a.el,h=a.cb,p=n,m=n.substring(0,2),d=m.includes("~"),f=m.includes("^");d||f?(p=n.slice(1),h=h||p):h||(h=n),c.Ref().get("__cake__events")||c.Ref().set("__cake__events",{});let g=c.Ref().get("__cake__events");if(!g[h])c.addEventListener(p,i(h,r,d,f),!0),g[h]=!0,c.Ref().set("__cake__events",g);else continue}}}};q.prototype.findTarget=function(){let e=this.$attrib.getEventTarget(this.name);return new Promise(t=>{for(let r of e){let i=this.html.querySelectorAllIncluded(`[data-event=${r.sel}]`);for(let n=0;n<i.length;n++)this.targets[r.event]||(this.targets[r.event]=[]),this.targets[r.event].push(N({el:i[n]},r))}t()})};q.prototype.toggler=function(e){let t=this.$attrib.getWatchItemsByType(this.name,"toggle"),r=this.name,i=class{constructor(s,a,u,c){this.toggle=c.toggle,this.bind=s,this.bases=a,this.cache=c.$cache,this.html=u}check(s){let a=this.toggle[s];if(!a)console.error(`${s} is not found in toggle! choose from ${JSON.stringify(Object.keys(this.toggle))}`);else{if(t.length){let u=a.ns,c=t.find(h=>h.name==`ns-${u}`);c&&(a.sel=`[data-toggle=${c.sel}]`)}return a}}_toggle(){let s=this.check(this.bind);if(!s)return;let a=s.basis||"data-name",u=s.cls||"is-active",c=s.mode||"radio",h=s.sel,p=s.persist==null?!0:s.persist,m=this.html.querySelectorAll(h);if(!m.length)return;let d,f;if(m.length==1){let g=typeof this.bases=="boolean",y=!!this.bases,b=m[0];if(p){let v=function(w,S,_){_?w.classList.contains(S)&&w.classList.remove(S):w.classList.contains(S)||w.classList.add(S)};g?(y?(this.cache.createOrUpdate(this.bind,!0),v(b,u,!0)):(this.cache.createOrUpdate(this.bind,!1),v(b,u,!1)),b.classList.toggle(u)):(this.cache.createOrUpdate(this.bind,!b.classList.contains(u)),b.classList.toggle(u))}}else for(let g=0;g<m.length;g++){let y=m[g],b=y.classList.contains(u),v=y.getAttribute(a);v==this.bases?(c=="switch"?y.classList.toggle(u):b||y.classList.add(u),p&&this.cache.createOrUpdate(this.bind,v),f=v):b&&(y.classList.remove(u),d=y.getAttribute(a))}return{prev:d,next:f}}_recall(){let s=this.check(this.bind);if(!s)return;let a=s.basis||"data-name",u=s.cls||"is-active",c=s.sel;return this.cache.get(this.bind).then(h=>{if(!h)return h;let p=h,m=this.html.querySelectorAll(c);if(!!m.length){if(m.length==1){let d=m[0];p&&d.classList.add(u)}else for(let d=0;d<m.length;d++){let f=m[d],g=f.classList.contains(u);f.getAttribute(a)==p&&(g||f.classList.add(u))}return p}})}_get(){if(!!this.check(this.bind))return this.cache.get(this.bind).then(a=>a)}},n=(s,a)=>new i(s,a,this.html,this)._toggle();return n.recall=s=>new i(s,!1,this.html,this)._recall(),n.get=s=>new i(s,!1,this.html,this)._get(),n};q.prototype.findContainer=function(){return new Promise(e=>{try{let t=this.html.getContainers();for(let r=0;r<t.length;r++){let i=t[r],n=i.dataset.container;n&&(this.container[n]=i)}e()}catch(t){console.log(895,t)}})};q.prototype._validator=function(e,t){if(this.options.validate){this.validate=this.options.validate;let r=this.validate[e]}};q.prototype._watchReactive=function(){if(this.role=="form"&&this.options.watch===!0){let e=this.options.validate,t=this.$form();if(t&&t._reactive)return;this.state&&!this.state.formData&&(this.state.formData={});let r=this,i=n=>{let s=n.target,a=s.name||s.id,u=s.value,c=e[a];c?(c=c.bind(r),c&&c(n)&&(this.state&&(this.state.formData[a]=u),this.$scope.set(a,u))):(this.state&&(this.state.formData[a]=u),this.$scope.set(a,u))};t.addEventListener("change",n=>{n.target.tagName=="INPUT"||n.target.tagName=="TEXTAREA"||i(n)}),t.addEventListener("input",n=>{(n.target.tagName=="INPUT"||n.target.tagName=="TEXTAREA")&&i(n)}),t._reactive=!0}};q.prototype.observer=function(e){function t(r){return this.handler[r]}this.observer=new Observer(this,e,t.bind(this))};q.prototype.variable=function(e){let t=Object.keys(e),r={},i=[];function n(s,a,u){a||(r[s]=`value is not '${u}'`)}for(let s in e)if(e.hasOwnProperty(s)){let a=e[s],u=a.type,c=a.value,h;["string","number"].includes(u)?h=typeof c==u:c instanceof Array?h=u=="array":h=u=="object",i.push(c),n(s,h,u)}if(Object.keys(r).length)throw new Error(JSON.stringify(r));return i};vt.exports=q});var _t=k((Nr,St)=>{var G=U(),Ai=ae()(),Li=le(),ce=new Ai({child:"object",storage:"local",name:"_cake_router_cf"});St.exports=function(e,t){let r=[];return class{constructor(i,n){this.options=n,this.unauthRoute=null,this.componentConf=null,this.authValidRoute=null,this.authConfig=function(){if(!this.options)return;let s=this.options.auth,a=this.options.components;if(a&&(this.componentConf=a),s&&s.verify){let u=s.verify;this.verifyComponent=u[0],this.verifyComponentHandler=u[1],this.unauthRoute=s["401"]}return s&&s.valid&&(this.authValidRoute=s.valid),null}.bind(this)(),this.authRedirectRoute={},this.route=this.compile(i),this.prev=null,this.components=Li,this.watch(),this.persist(),Object.defineProperty(t.prototype,"$router",{configurable:!0,get:()=>N({goTo:this.goTo.bind(this),goBack:this.goBack.bind(this),auth:this.auth.bind(this),logout:this.logout.bind(this),login:this.login.bind(this),verify:this.verifyAuth.bind(this)},this.prev),set(s){}})}getComponent(i,n){if(this.componentConf&&this.componentConf[i]){let s=this.componentConf[i].rerender;s&&(i=s.includes(n)?i:null)}return i?this.components.get(i):null}verifyAuth(i){return e.$loaded(this.verifyComponent).then(n=>n.fire[this.verifyComponentHandler](i).then(s=>(this.isauth=s&&s.status==1,s)))}async authenticate(i){let n=this.unauthRoute==i;if(this.unauthRoute)try{let s=ce.get("role",!0)||{},a=s.token;if((await this.verifyAuth(a)).status==0&&this.logout(),s){if(n){let c=s.role,h=s.data,p=this.authRedirectRoute[c];if(p){let m=p.name;this.goTo(m)}}}else n||this.logout()}catch(s){alert(JSON.stringify(s.message)),n||this.logout()}}login(i,n){let s=i.role,a=i.token,u=i.data,c=ce.createOrUpdate("role",{role:s,token:a,data:u}),h=n&&n.path,p=n&&n.config;if(!s)throw new Error("role is not provided in router.login");if(!a)throw new Error("token is not provided in router.login");if(!u)throw new Error("data is not provided in router.login");if(!h)if(this.authValidRoute&&this.authValidRoute[s])h=this.authValidRoute[s];else throw new Error("provide route when login is successful");this.goTo(h,p)}auth(){let i=ce.get("role",!0);return i||{}}logout(){try{ce.remove("role")}catch(i){}this.goTo(this.unauthRoute,{replace:!0})}goTo(i,n={}){try{let a=this.route,u=n.params||{},c=n.replace,h=null,p=Object.entries(a);if(!i){let f=ce.get("role",!0).role,g=this.authRedirectRoute[f];g&&(i=g.name)}if(!i)throw new Error("provide routename");for(let d=0;d<p.length;d++){let f=p[d][0];if(p[d][1].name==i){h=f;break}}if(!h)throw new Error(`${i} is not found in routes`);if(h=="/"){c?location.replace(`${location.origin}${location.pathname}`):window.location=`${location.origin}${location.pathname}`;return}let m;if(h=h.slice(1),u.toString().includes("Object")){let d="";for(let f in u)d+=`${f}=${u[f]}&`;u=d,m=`!/${h}?${u}`}else m=`!/${h}`;if(h=="/"&&(m=""),c){let d=`${location.origin}${location.pathname}#${m}`;console.log(276,G.isChrome()&&!G.isFirefox(),d),G.isChrome()&&!G.isFirefox()&&history.replaceState(void 0,void 0,d),location.replace(d)}else{var s=document.createElement("a");s.href=`#${m}`,G.isChrome()&&!G.isFirefox()&&history.pushState(void 0,void 0,s.href),s.click()}}catch(a){console.log(a)}}goBack(){return new Promise((i,n)=>{window.history.back(),i()})}persist(){if(!document.hasRouterPersist){let i="DOMContentLoaded";"deviceready"in document&&(i="deviceready"),document.addEventListener(i,n=>{this.parse(),this.notify().then(()=>this.navigate(!0))}),document.hasRouterPersist=!0}}watch(){window.hasRouterPop?this.parse():(window.addEventListener("popstate",i=>{this.parse(),this.notify().then(()=>(console.log("notified"),this.clear().then(()=>(console.log("cleared"),this.navigate().then(()=>{console.log("navigated")})))))}),window.hasRouterPop=!0)}compile(i){let n={};for(let s in i){let a=i[s];s=String(s);let u=s.length,c=s;["404"].includes(s)?a={callback:i[s],name:s}:c=c.slice(1),c=c.split("/"),c=c.map((h,p)=>{let m=h.includes(":"),d="";if(p==0?d+="^/":d+="/",m?d+="(([^/#?]+?))":d+=h,p==u-1?d+="/?$":d+="",m){let f=h.replace(":","");n[s]||(n[s]={}),n[s].params={[f]:p}}return d}),n[s]&&n[s].params?n[s]=N({params:n[s].params,regex:new RegExp(c.join(""))},a):n[s]=N({regex:new RegExp(c.join(""))},a),this.authValidRoute&&G.each(this.authValidRoute,function(h,p){let m=h.key,d=h.value;d==a.name&&(this.authRedirectRoute[d]?(this.authRedirectRoute[d]=a,console.error(`auth ${d} is found in other route`)):this.authRedirectRoute[d]=a)}.bind(this))}return n.length=Object.keys(i).length,n.keys=Object.keys(i),n}parse(){let i=window.location.hash,n,s;if(i?(n=i.includes("#!/")?2:i.includes("#/")?1:null,i=i.slice(n)):(i="/",n=!0),!n)return;let a=new URL(`http://localhost${i}`),u=a.search,c=a.pathname,h=this.route.keys,p={};u&&new URLSearchParams(u).forEach((d,f)=>{p[f]=d});let m=!1;for(let d=0;d<h.length;d++){let f=this.route[h[d]],g=f.regex,y=f.components,b=f.params,v=f.name,w=f.auth,S=f.overlay,_=f.display,O=f.onrender,$=f.controller;if(b){let I=String(c);I=I.slice(1),I=I.split("/"),Object.entries(b).forEach(A=>{let j=A[0],L=A[1];I[L]&&(p[j]=I[L])})}if(g.test(c)){s=v,w==!0&&this.authenticate(s),this.prev={components:y,state:p,path:c,name:v,prev:this.prev,overlay:S,display:_,onrender:O,controller:$},m=!0;break}}if(!m&&this.route["404"]){let d=this.route["404"].callback(),f=location.origin,g=location.pathname;this.route[d]?(d=="/"?d=`${f}${g}`:g.slice(-1)=="/"?d=`${f}${g}#!${d}`:d=`${f}${g}/#!${d}`,location.replace(d)):!!d&&!this.route[d]&&(f.slice(-1)=="/"&&d[0]=="/"&&(d=d.slice(1)),d=`${f}${d}`,location.replace(d))}}navigate(i){if(this.prev){let n=this.prev.components,s=this.prev.state,a=this.prev.path,u=this.prev.name,c=this.prev.overlay,h=this.prev.onrender||{};try{if(n.length)return new Promise((p,m)=>{let d=n.length,f=0;if(d){let g=()=>{let y=n[f];if(n.length>f){f+=1;let b=y,v=this.getComponent(y,a);y=this.components.get(y),y&&(y.isConnected&&!v?y.fire.softReload?(y.fire.softReload(),y.await.softReload&&y.await.softReload.then(()=>{g()})):g():y.render(N({emit:{route:this.prev}},h[b]||{})).then(()=>{y.await.isConnected?y.await.isConnected&&y.await.isConnected.then(()=>{g()}):g()}).catch(w=>{throw w}))}else p()};g()}else p()})}catch(p){throw console.log(p),new Error(`some of the component in ${JSON.stringify(n)} in path ${a} of router is not found, make sure the it is created`)}}}static pushState(i,n,s){console.log(s),window.history.pushState(i,n,s);let a=Promise.resolve();if(this.prev){let u=this.prev.components,c=this.prev.state,h=this.prev.path,p=this.prev.name;a=new Promise((m,d)=>{let f=components.length,g=0;if(f){let y=async()=>{let b=components[g];components.length>g?(b=this.getComponent(b,h),b?(b.fire.destroy(),b.await.destroy.then(()=>y())):await y()):m(),g+=1};y()}else m()})}return a.then(()=>this.navigate())}clear(){let i=Promise.resolve();if(this.prev&&this.prev.overlay||void 0)return i;let s=async function(a,u,c,h){let p=u[a],m=p,d=s;try{if(u.length>a)if(a+=1,p=this.getComponent(p,this.prev.path),p){if(!p.fire.destroy)throw new Error(`${m} has no destroy handler!`);p.fire.destroy(),p.await.destroy.then(()=>d(a,u,c,h))}else await d(a,u,c,h);else h()}catch(f){throw f}}.bind(this);if(this.prev&&this.prev.prev){let a=this.prev.prev.components,u=this.prev.prev.state,c=this.prev.prev.path,h=this.prev.prev.name,p=this.prev.prev.overlay,m=Promise.resolve();return p&&(m=new Promise((d,f)=>{a.length?s(0,a,this.components,d):d()})),i=new Promise((d,f)=>{a.length?s(0,a,this.components,d):d()}),m.then(()=>i)}return i}pushState(i,n,s){window.history.pushState(i,n,s);let a=Promise.resolve();return this.clear(),a.then(()=>this.navigate())}static subscribe(i){i&&i.constructor.name=="Function"&&r.push(i)}notify(){return Promise.all(r.map(i=>i()))}}}});var Ot=k((Ur,Et)=>{var Ii=ae()(),ji=le();Et.exports=class{constructor(){this.storage=new Ii({child:"array",storage:"session",name:"_cake_persistent"})}listen(e){e=ji;let t="DOMContentLoaded";"deviceready"in document&&(t="deviceready"),window.addEventListener(t,r=>{setTimeout(()=>{this.storage.getAll().then(i=>{if(!!(i&&!i.length))for(let n=0;n<i.length;n++){let s=i[n],a=e.get(s);a.isConnected=!1,a?!a.isConnected&&a.render.bind(a)():console.error(`component ${a} is not found!`)}})})})}append(e){this.storage.create(e)}remove(e){this.storage.remove(e)}}});var ge=k((Mr,Ct)=>{var Y={handlers:{},subscribe:{}};window.Stat=Y;function qt(e,t,r){return e[t]==null&&(e[t]={}),e[t][r]==null?e[t][r]=0:e[t][r]+=1,!0}Ct.exports={handlers:{set:function(e,t){return qt(Y.handlers,e,t)},get:function(e){Y.handlers[e]!=null?console.table(Y.handlers[e]):console.log(null)}},subscribe:{set:function(e,t){return qt(Y.subscribe,e,t)},get:function(e){Y.subscribe[e]!=null?console.table(Y.subscribe[e]):console.log(null)}}}});var ke=k((Hr,Pt)=>{var Ri=ge(),Q={};window.Subscribe=Q;Pt.exports={set:function(e){return new Promise((t,r)=>{for(component in e)if(e.hasOwnProperty(component)){let i=e[component];for(let n in i)if(i.hasOwnProperty(n)){let s=i[n];Q[component]||(Q[component]={}),Q[component][n]||(Q[component][n]=[]),Q[component][n].push(s),Ri.subscribe.set(component,s.original)}}t()})},get:function(e,t){return Q[e]&&Q[e][t]}}});var $e=k((Br,Tt)=>{var xi=ge(),ne={};window.Handler=ne;Tt.exports={set:function(e,t){return new Promise(r=>{for(let i in e)if(e.hasOwnProperty(i)){let n=e[i];ne[t]||(ne[t]={}),ne[t][n.original]=n,xi.handlers.set(t,n.original)}r()})},get:function(e,t){return ne[e]&&ne[e][t]}}});var Lt=k((Dr,At)=>{var Ni=ke(),Ui=$e(),kt=ge();function $t(e){this.logger=e||!1,this.results={}}$t.prototype.notify=function(e,t,r){let i=e,n=t,s=r,a=Ui.get(i,n);if(!a){console.error(`no setup handler for the event ${n} in ${i} component`);return}i=a.binded;let u=new Promise((c,h)=>{let p=a(s);c(p)});return kt.handlers.set(i,a.original),u.then(c=>{let h=[];this.results[i]||(this.results[i]={});let p=Ni.get(i,n);if(p)for(let m=0;m<p.length;m++){let d=p[m];kt.subscribe.set(i,d.original),h.push(new Promise((f,g)=>{try{let y=(()=>d(c))();y&&y.ObjectType=="Promise"?y.then(b=>{this.results[i]||(this.results[i]={}),this.results[i][n]=b,f(b)}).catch(b=>{g(b)}):(this.results[i][n]=y,f(y))}catch(y){console.log(y),g(y)}}))}else this.logger&&console.info(`no subscriber for (${n}) event of (${i}) component`),this.results[i][n]=c;return Promise.all(h).then(()=>(c=null,h=[],!0))})};At.exports=$t});var jt=k((Fr,It)=>{It.exports=function(e){class t{constructor(n){this.type=n,this.storage={}}store(n,s){this.storage[n]=s}get options(){if(this.type=="select"||this.type=="virtual"){let n={};for(let s in this.storage){let a=this.storage[s];n[s]=a.options}return n}return!1}get value(){if(this.type=="input"){let n="";for(let s in this.storage)n=this.storage[s].options[0];return n}return!1}get query(){let n={};for(let s in this.storage)n=this.storage[s].query[0]||null;return n}get has(){let n="";for(let s in this.storage)n=this.storage[s].query[0]||null;return n}}let r={};return r.options=i=>{let n=i.options,s=i.params;n||(n=[]);let a=n.length>1;return Promise.all(n.map(c=>{let h=c.control,p=c.field,m=c.tbl,d=c.src,f=c.schema,g=c.type;return e.fire(d,{tbl:m,field:p,params:s}).then(y=>{if(y=y||[],c.query=y,y=y.map(b=>f(b)),g!="input"){let b=f({});for(let v in b)b.hasOwnProperty(v)&&(b[v]="");y.unshift(b)}return c.options=y,c}).then(y=>{let b=y.type,v=y.control;b||(b="others");let w=new t(b);if(a){let S={};return S[v]||(S[v]=w,S[v].store(v,y)),S}else return w.store(v,y),w})})).then(c=>a?c.reduce((h,p)=>(Object.assign(h,p),h),{}):c[0]).catch(c=>{console.error(c)})},r.plot=i=>{let n=i.data,s=i.container;if(!n&&!s)return;let a=(u,c,h)=>{if(!u){console.info("root is not provided!");return}let p=u.querySelectorAll(`${c}`),m=p.length;if(!m){h(null,n);return}for(let d=0;d<m;d++){let f=p[d],g=f.name,y=n[g],b=h(f,y,d);if(b=="break")break;b!="continue"}};return a(s,"INPUT.input",function(u,c){c!=null&&(u.type=="date"&&(c=new Date(c)=="Invalid Date"?"":new Date(c).toJSON().split("T")[0]),u.value=c)}),setTimeout(()=>{a(s,"SELECT.input:not(.cake-template)",function(u,c){a(u,"OPTION:not(.cake-template)",function(h,p,m){if(h){if(h.value==c)return u.selectedIndex=m,"break"}else console.log(h,p,"provide schema")})})},500),Promise.resolve()},r}});var Ut=k((Kr,Nt)=>{var Mi=pt(),Ae=mt()(),W=wt(),Hi=_t(),Bi=Ot(),Di=ae()(),Fi=Lt(),Ji=jt(),Jr=U(),Wr=ie(),Wi=ee(),Rt=ke(),xt=$e(),Ki=le();function E(e){this.componentName=e,this.components={}}E.app=function(e){this.name=e.name||""};E.Components=function(e){return{subscribe(t,r){function i(){let n=E.Components[e];if(n&&t instanceof Function){let s=t.name;r&&(t=t.bind(r)),t.binded="external",t.original=s,t.listenTo=n.name,n.Subscribe(t)}}return new Promise((n,s)=>{let a=setInterval(()=>{E.Components[e]&&(i(),clearInterval(a),n())})})}}};E.Models={};E.plugin=Wi;E.Attributes=new Mi;E.Models.$loaded=function(e){return new Promise((t,r)=>{let i=setInterval(()=>{E.Models[e]&&(clearInterval(i),t(E.Models[e]))});setTimeout(()=>{E.Models[e]||(clearInterval(i),r(e))},1e4)})};E.MainMessageChannel=function(){let e=new MessageChannel;return{send(t){e.port2.postMessage(t)},receive(t){e.port1.onmessage=function(r){let i=r.data,n=r.isTrusted==null?!1:r.isTrusted;t(n?{status:1,data:i}:{status:0,err:"not trusted!"})}}}}();E.Utils={scopeTrap(e){return!1},scopeNotifier(e){return e}};E.create=function(e,t,r){new E(e,t,r).create(e,t,r)};E.init=function(e){return new W(e)};E.Router=Hi(E.Models,W);E.Persistent=new Bi;E.Persistent.listen(E.Components);E.Cache=new Di({name:"cache",storage:"session",child:"object"});E.getSubscriber=function(e,t){let r=Rt,i={};for(let n in r)if(r.hasOwnProperty(n)){let s=r[n];for(let a in s)if(s.hasOwnProperty(a)){let u=s[a];for(let c of u){let h=c,p=h.original,m=h.binded;if(h.listenTo==e){if(p==t)if(!i[m])i[m]=t;else{let f=i[m]instanceof Array?i[m]:[i[m]];i[m]=f.concat(t)}else if(!t)if(!i[m])i[m]=p;else{let f=i[m]instanceof Array?i[m]:[i[m]];i[m]=f.concat(p)}}}}}return i};E.Observer=new Fi;E.prototype._defineProperty=function(e,t,r,i){Object.defineProperty(e,t,{configurable:!0,get(){return r()},set(n){i&&i(n)}})};E.prototype._defineProperty(W.prototype,"$observer",function(){return E.Observer});E._globalScope=new Ae("globalScope");E.prototype._defineProperty(W.prototype,"$globalScope",function(){return E._globalScope});E._universalScope=new Ae("universalScope");E.$universalScope=function(){return E._universalScope};E.prototype._defineProperty(W.prototype,"$attrib",function(){return E.Attributes});E.prototype._defineProperty(W.prototype,"$persist",function(){return E.Persistent});E.prototype._defineProperty(W.prototype,"$cache",function(){return E.Cache});E.prototype._defineProperty(W.prototype,"$hash",function(){return E.Hasher});E.prototype.create=function(e,t,r){let i=new W(e,t,r),n=new Ae(e);i.scope&&(()=>{for(let s in i.scope)if(i.scope.hasOwnProperty(s)){let a=i.scope[s];for(let u in a)if(a.hasOwnProperty(u)){let c=a[u],h=c.name;c=c.bind(i),n.hook(s,h,c)}}})(),n.registerNotifier(function(s,a,u,c){return E.Attributes.notifier(s,a,u,c)}),E.Attributes.registerNotifier(e,function(s,a){return n.notifier(s,a)}),i.compile.then(()=>{let s=i.subscribe,a=i.root,u=i.html,c=i.handlers,h=i.role,p=i.state;return Rt.set(s).then(()=>({root:a,handlers:c}))}).then(s=>{let a=s.handlers,u=s.root;xt.set(a,i.name),this._defineProperty(i,"root",function(){if(i._root)return i._root;{let c=u||"#app",h=document.querySelectorAll(c);if(h)return h}throw new Error(`the selector '${u}' as container of component '${i.name}' is not found!`)},function(c){Object.assign(i,{_root:c})}),this._defineProperty(i,"$scope",function(){return n}),i.role=="form"&&(()=>{let c=Ji(i),h=()=>{if(i.root.length){let p=i.root[0],m=`${i.formSelector||"FORM"}:not(.cake-template)`;return p.querySelector(m)}return null};for(let p in c)c.hasOwnProperty(p)&&Object.defineProperty(h,p,{get(){return c[p]}});this._defineProperty(i,"$form",function(){return h})})()}).then(()=>{i.fire=function(){function s(u,c){c=c?typeof c=="function"?c.bind(i)():function(){return c}.bind(i)():null;let h={[u]:()=>c};if(fn=h[u].bind(i),typeof fn=="function"){let d=function(g){let y={};if(!g)return y;let b=g.attributes;if(b)for(let v=0;v<b.length;v++){let w=b[v],S=w.name,_=w.value;y[S]=_}return y};var p=d;fn.name=u,fn.original=u,fn.binded=i.name,xt.set({[u]:fn},i.name);let m=c;if(c&&(c.element||c.root||c.container)){let g=d(c.element),y=d(c.root),b=d(c.container);m={status:0,attributes:{element:g,root:y,container:b}}}let f=E.Observer.notify(i.name,u,{}).then(()=>E.Observer.results[i.name][u]);return i.await[u]=f,i.await[u]}console.error("the param in fire is not an instance of function")}function a(u,c){for(let h in c)if(c.hasOwnProperty(h)){let p=c[h],m=p.original,d={[m]:function(f,g){return g!=null&&(g=g),g==null&&m=="destroy"&&(g=!0),g==null&&(g=!1),g?(i.await[m]=new Promise(y=>{setTimeout(()=>{let b=f||{};E.Observer.notify(i.name,m,b).then(()=>E.Observer.results[i.name][m]).then(v=>{y(v)}).catch(v=>{console.log(448,i.name,m,b),console.trace(),console.error(v)})})}),i.await[m]):p(f)}};d[m]=d[m].bind(i),d[m].originalName=m,d[m].binded=i.name,u[m]=d[m],u.component=i.name}}return a(s,i.handlers),s}()}).then(()=>{i.type=="view"&&(i.toggler=i.toggler(i),Ki.set(e,i))}).then(()=>{i.options.router&&E.Router.subscribe(i.options.router.bind(i)),i.options.data&&i.options.data.bind(i.data)(i),i.options.init&&i.options.init.bind(i)(),i.options.utils&&i.options.utils.bind(i.utils)(i)}).then(()=>{i.type=="model"&&(E.Models[e]=i),i.isStatic&&i.type=="view"&&i.render()})};Nt.exports=E});var Qr=je(),zr=Re(),Xr=He(),Gr=U(),Yr=Be(),Zr=ee(),Qi=Ut();window.Cake=Qi;})();
