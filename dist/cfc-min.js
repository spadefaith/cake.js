(()=>{var ii=Object.defineProperty,ri=Object.defineProperties;var ni=Object.getOwnPropertyDescriptors;var He=Object.getOwnPropertySymbols;var si=Object.prototype.hasOwnProperty,oi=Object.prototype.propertyIsEnumerable;var Fe=(e,t,n)=>t in e?ii(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,B=(e,t)=>{for(var n in t||(t={}))si.call(t,n)&&Fe(e,n,t[n]);if(He)for(var n of He(t))oi.call(t,n)&&Fe(e,n,t[n]);return e},me=(e,t)=>ri(e,ni(t));var $=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var De=$(()=>{(function(e){e.env={destructure:!0};let t=e.env;Promise.prototype.ObjectType="Promise"})(window)});var Be=$(()=>{(function(e){HTMLCollection.prototype.toArray=function(){let t=[];for(let n=0;n<this.length;n++)t[n]=this[n];return t},NodeList.prototype.toArray=function(){let t=[],n=-1,i=this.length;for(;++n<i;)t[n]=this[n];return t},Object.cache=Object.create(null),Object.caching=t=>{let n=Object.cache;return n[t]||(n[t]={}),{set(i,r){return n[t][i]=r,!0},get(i){return n[t][i]}}},String.prototype.toHyphen=function(){let t=Object.cache,n=null,i=this;if(t.toHyphen||(t.toHyphen={}),t[i]&&(n=t[i]),n!=null)return n;let r=i.split(""),s="",a=-1;for(;++a<r.length;){let c=r[a];switch(a){case 0:s+=c.toLowerCase();break;default:c.charCodeAt()<91&&(s+="-"),s+=c.toLowerCase()}}return t[i]=s,n=s,n},String.prototype.toProper=function(){let t=this,n=Object.caching("toProper").get(t);if(n)return n;{let i=t.substring(0,1),r=t.slice(1),s=`${i.toUpperCase()}${r}`;return Object.caching("toProper").set(t,s),s}},String.prototype.removeSpace=function(){return this.split(" ").join("")},String.prototype.toCamelCase=function(){let t=this.toLowerCase(),n=Object.cache,i=null;if(n.toCamel||(n.toCamel={}),n=n.toCamel,n[t])return n[t];{let r=t.split("-");if(r.length==1)return t;let s="",a=-1,c=r.length;for(;++a<c;){let u=r[a];switch(a){case 0:s+=u;break;default:{let h=u.substring(0,1).toUpperCase(),d=u.substring(1);s+=h+d}break}}return n[t]=s,s}},HTMLElement.prototype.querySelectorIncluded=function(t,n,i){let r=this.querySelector(t);return r||(()=>{switch(!0){case(!n&&!i):{let s=this.closest(t);s==this&&(r=s)}break;case(!!n&&!!i):r=this.getAttribute(n)==i?this:null;break;case(!!n&&!i):r=this.getAttribute(n)?this:null;break}return r})()},HTMLElement.prototype.querySelectorAllIncluded=function(t,n,i){let r;try{r=this.querySelectorAll(t),r&&(r=r.toArray())}catch(s){r=[]}switch(t?r=this.querySelectorAll(t).toArray():n&&i?(r=this.querySelectorAll(`[${n}=${i}]`).toArray(),this.dataset[n]==i&&r.push(this)):n&&!i&&(r=this.querySelectorAll(`[${n}]`).toArray(),this.dataset[n]&&r.push(this)),!0){case(!n&&!i):{let s=this.closest(t);s==this&&r.push(s)}break;case(n&&i):break;case(n&&!i):break}return r},HTMLDocument.prototype.querySelectorIncluded=function(t){return this.querySelector(t)},HTMLDocument.prototype.querySelectorAllIncluded=function(t){return this.querySelectorAll(t)},Array.prototype.toggler=function(t,n){for(let i=0;i<this.length;i++){let r=this[i];(r.dataset.name==t||r.classList.contains(n))&&r.classList.toggle(n)}},HTMLElement.prototype.Ref=function(){let t="_cakes_storage";!this[t]&&(this._cakes_storage={});let n=this[t];return{set(i,r){n[i]=r},get(i){return n[i]},getAll(i){return n},remove(i){delete n[i]}}},HTMLElement.prototype.replaceDataSrc=function(){let t=this.querySelectorAllIncluded(null,"data-src",null);for(let n=0;n<t.length;n++){let i=t[n];i.closest&&i.closest(".cake-template")||(i.setAttribute("src",i.dataset.src),i.removeAttribute("data-src"))}},HTMLElement.prototype.unRequired=function(){let t=this.querySelectorAll(".cake-template [required]");for(let n=0;n<t.length;n++){let i=t[n];i&&i.removeAttribute("required")}},Object.keep=function(t,n){let i=t.split("."),r=i.slice(1),s=n.constructor.name=="Array",a=s?[]:{},c=function(h,d,m){return h[d]||(h[d]=m==null?{}:m),h[d]};i[0]&&c(Object.cache,i[0],r.length?{}:n);let u=Object.cache[i[0]];for(let h=0;h<r.length;h++){let d=r[h];r.length-1==h?(u=c(u,d,a),s?u=u.concat(n):u=Object.assign(u,n)):u=c(u,d,{})}return Object.cache[i[0]]}})(window)});var F=$((Or,ze)=>{var te={},V={typeof:function(e){switch(!0){case typeof e=="string":return"string";case typeof e=="number":return"number";case e instanceof Array:return"array";case e instanceof Function:return"function";case e instanceof HTMLCollection:return"htmlcollection";case e instanceof NodeList:return"htmlnodelist";case e instanceof Element:return"domlement";case e instanceof Object:return"object"}},isArray:function(e){return this.typeof(e)=="array"},isObject:function(e){return this.typeof(e)=="object"},isNumber:function(e){return this.typeof(e)=="number"},isString:function(e){return this.typeof(e)=="string"},isHTMLCollection:function(e){return this.typeof(e)=="htmlcollection"},isNodeList:function(e){return this.typeof(e)=="htmlnodelist"},isElement:function(e){return this.typeof(e)=="domlement"},isFunction:function(e){return this.typeof(e)=="function"}},ye={_each:function(e,t,n){if(n=="object"){var i=0;for(var r in e)e.hasOwnProperty(r)&&(t({key:r,value:e[r]},i),i=i+1)}else for(var s=0;s<e.length;s++)t(e[s],s)},each:function(e,t){var n=V.isArray(e)||e.length?"array":"object";this._each(e,function(i,r){t(i,r)},n)},map:function(e,t){var n=V.isArray(e)||e.length?"array":"object",i=e.length&&n=="array"?[]:{};return this._each(e,function(r,s){var a=t(r,s);n=="object"?i[a.key]=a.value:i.push(a)},n),i},reduce:function(e,t,n){var i=V.typeof(e);return this._each(e,function(r,s){t=n(r,t,s)},i),t},filter:function(e,t){var n=V.isArray(e)||e.length?"array":"object",i=e.length&&n=="array"?[]:{};return this._each(e,function(r,s){var a=t(r,s);a&&(n=="object"?i[r.key]=r.value:i.push(r.value))},n),i}},li={dictionary:function(e,t){t&&(t=t.split("."));for(let n=0;n<t.length;n++){let i=t[n];if(e[i])e=e[i];else{e=null;break}}return e}},Je={removeWhiteSpace(e){return String(e).split(" ").join("")}};function We(){console.log(...arguments)}We.if=function(e){return e?function(){console.log(...arguments)}:()=>{}};var Qe={perf:function(e){console.time("test"),e(),console.timeEnd("test")},logTest:function(e,t,n){try{e=JSON.parse(e)}catch(i){}try{n=JSON.parse(n)}catch(i){}switch(t){case"==":return e==n;case"!=":return e!=n;case"<":return e<n;case">":return e>n;case">=":return e>=n;case"<=":return e<=n}},toUrlSearchParams:function(e,t=!0){let n="";for(let i in e)if(e.hasOwnProperty(i)){let r=e[i];r.toString().includes("Object")&&(r=JSON.stringify(r)),t&&r?n+=`${encodeURI(i)}=${encodeURI(r)}&`:n+=`${encodeURI(i)}=${encodeURI(r)}&`}return n.slice(0,n.length-1)},sanitize:function(e,t=[]){return typeof e!="string"?e:decodeURIComponent(e.replace(/<.*>/,""))},toFormData:function(e,t={}){let n=[],i=e.querySelectorAll("TEXTAREA"),r=e.querySelectorAll("INPUT"),s=e.querySelectorAll("SELECT");function a(u,h,d){let m=[];for(let g=0;g<u.length;g++){let f=!0;try{f=u[g].closest(".cake-template")}catch(p){}try{f||(f=u[g].classList.includes("cake-template"))}catch(p){}f||(u[g].getAttribute("type")=="file"?m.push(u[g]):h.push(u[g]))}m.length&&(m.forEach(g=>{h.push(g)}),m=[])}a(i,n),a(s,n),a(r,n,!0);let c={};for(let u=0;u<n.length;u++){let h=n[u],d=h.name||h.id;if(!(d&&["{{","((","[[","<<","%%","&&"].includes(d))){let m,g=e[d];if(g){if(!g.nodeType){if(g.length)for(let p=0;p<g.length;p++){let y=g[p];if(y.nodeType==1&&!y.closest(".cake-template")){g=y;break}}}let f=g.tagName;f=="SELECT"?value=g.value:f=="INPUT"&&g.getAttribute("type")=="checkbox"?value=g.checked:f=="INPUT"&&g.getAttribute("type")=="file"?value=g.files:t.sanitize==!1?value=g.value:value=this.sanitize(g.value,t.skipsanitize),t.json&&t.trim?value!=""&&(c[d]=value):c[d]=value}}}if(t.json)return c;{let u=new FormData;for(let h in c)if(c.hasOwnProperty(h)){let d=c[h];d.constructor.name=="FileList"?ye.each(d,function(m,g){u.append(h,m,m.name)}):u.append(h,d)}return u}},splitBySpace:function(e,t){if(e){e=e.split(" ");for(let n=0;n<e.length;n++)t(e[n])}},toArray(e){let t=[];if(!e.length)return t;for(let n=0;n<e.length;n++)t.push(e[n]);return t},timeOut(e,t=1){setTimeout(()=>{e()},t)},instanceID(){return location.origin},recurse(e,t){return new Promise((n,i)=>{try{let r=e.length,s=0,a=()=>{r>s?(t(e[s]),s+=1,a()):n()};a()}catch(r){i(r.message)}})},browser(){if(window._browser)return window._browser;var e=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,t=typeof InstallTrigger!="undefined",n=/constructor/i.test(window.HTMLElement)||function(c){return c.toString()==="[object SafariRemoteNotification]"}(!window.safari||safari.pushNotification),i=!!document.documentMode,r=!i&&!!window.StyleMedia,s=!!window.chrome||!!window.cordova,a=(s||e)&&!!window.CSS;return console.log(394,s),window._browser=e?"Opera":t?"Firefox":n?"Safari":s?"Chrome":i?"IE":r?"Edge":a?"Blink":"Don't know"},isOpera(){return this.browser()=="Opera"},isFirefox(){return this.browser()=="Firefox"},isSafari(){return this.browser()=="Safari"},isChrome(){return this.browser()=="Chrome"},isIE(){return this.browser()=="IE"},isEdge(){return this.browser()=="Edge"},isBlink(){return this.browser()=="Blink"},device(){return navigator.userAgent.includes("Android")?"android":/iPhone|iPad|iPod/i.test(navigator.userAgent)?"IOS":"desktop"},isAndroid(){return this.device()=="android"},isIOS(){return this.device()=="ios"},isDesktop(){return this.device()=="desktop"},escapeRegExp(e){return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},log:We},ai={unique:function(e,t){if(Set&&V.isArray(e))return[...new Set(e)];{let n={};return Loop.each(e,function(i,r){if(t&&V.isObject(i)){let s=li.dictionary(i,t);s&&(n[s]=!0)}else n[i]=!0}),Object.keys(n)}}};try{te.UTILS=B(B(B(B(B({},ye),V),Qe),Je),ai)}catch(e){te.UTILS={},ce=ye.each,ce(ye,function(t,n){te.UTILS[t]=n}),ce(V,function(t,n){te.UTILS[t]=n}),ce(Qe,function(t,n){te.UTILS[t]=n}),ce(Je,function(t,n){te.UTILS[t]=n})}var ce;ze.exports=te.UTILS});var Xe=$((Cr,Ke)=>{var ci=F(),ui=window||{};Ke.exports={Set:function(e){return ui.Set?new Set(e):ci.unique(e)}}});var Ge=$(()=>{(function(){customElements.define("sub-template",class extends HTMLElement{constructor(){super()}connectedCallback(){this.replace(this)}replace(e){let t=e.dataset.template,n=document.getElementsByName(t);if(n.length>1){console.error(`template with name ${t} has more than one reference.`);return}if(!n)throw e.remove(),new Error(`${t} is not found!`);if(n[0]){let i=n[0];if(i.constructor.name=="HTMLTemplateElement"){if(i=i.content.cloneNode(!0).firstElementChild,!i)return;let r=e.attributes;for(let s=0;s<r.length;s++){let a=r[s];a.name!="data-template"&&i.setAttribute(a.name,a.value)}e.replaceWith(i)}else throw new Error(`${t} is not referred to a Template Element!`)}}}),HTMLTemplateElement.prototype.replaceSubTemplate=function(e){let t=e.getElementsByTagName("sub-template");if(t){t=t.toArray();for(let n=0;n<t.length;n++){let i=t[n];customElements.get("sub-template").prototype.replace(i)}}},HTMLTemplateElement.prototype.collectContent=function(){let e=this,t=null,n=e.cloneNode(!0),i=document.createDocumentFragment(),r=n.content.querySelector("style");r&&i.appendChild(r);let s=[];for(let a=0;a<n.content.children.length;a++){let c=n.content.children[0];this.replaceSubTemplate(c),s.push(c)}return t={style:i.children[0],others:s},t},HTMLTemplateElement.prototype.parseStyle=function(e){if(!e)return!1;var t=e.textContent.trim();if(!t.length)return;let n={},i="",r=t.split("}");for(let s=0;s<r.length;s++){let c=r[s].split("{"),u=c[0],h=c[1];u&&(n[u.trim()]=(()=>{let d=!1,m="",g=h.split("");for(let f=0;f<g.length;f++){let p=g[f];p==`
`?d=!0:p==" "?d||(m+=p):(d=!1,m+=p)}return m})())}return n},HTMLTemplateElement.prototype.parseHTML=function(e){if(e){var t=document.createElement("HTML");for(let n=0;n<e.length;n++){let i=e[n];t.append(i)}}return t||!1},HTMLTemplateElement.prototype.getContent=function(e){let t=this.collectContent(),n=t.style,i=t.others,r=this.parseStyle(n),s=this.parseHTML(i);for(let a in r)if(r.hasOwnProperty(a)){let c=s.querySelectorAll(a),u=r[a];for(let h=0;h<c.length;h++)c[h].setAttribute("style",u)}return s=e?s.children.toArray():s.innerHTML,s.length==1?s[0]:s}})()});var re=$((Tr,Ye)=>{var _e=F();Ye.exports=function(){return Object.caching("plugins").set("plugin",{}),function(e,t){if(_e.isObject(e)&&!t){let n=Object.caching("plugins").get("plugin");Object.caching("plugins").set("plugin",Object.assign(n,e))}else if(_e.isString(e)&&t!=null){let n=Object.caching("plugins").get("plugin");n[e]=t,Object.caching("plugins").set("plugin",n)}else if(_e.isString(e)&&t==null)return Object.caching("plugins").get("plugin")[e]||{}}}()});var se=$(($r,Ve)=>{var Ze=F();function ne(e){this.options=e,this.tag=(this.options&&this.options.tag||"{{ }}").split(" "),this.lefttag=Ze.escapeRegExp(this.tag[0]),this.righttag=Ze.escapeRegExp(this.tag[1])}ne.prototype._getTag=function(e){try{return e.match(new RegExp("(?<=<)|([^/s]+)(?=>)","g"))[2]}catch(t){throw new Error(`template of ${e} is empty.`)}};ne.prototype._bindReplace=function(e,t){for(let n in e)if(e.hasOwnProperty(n)){let i=new RegExp(`${this.lefttag}${n}${this.righttag}`,"g");i&&(t=t.replace(i,`${e[n]}`))}return t};ne.prototype.replaceString=function(e,t){return this._bindReplace(e,t)};ne.prototype._toElement=function(e,t){let n=document.createElement("template");return n.innerHTML=e,n.content.children[0]};ne.prototype.createElement=function(e,t,n){if(e){if(e instanceof Array){let i=typeof t=="string",r=i?this._getTag(t):t.tagName;t=i?t:t.outerHTML;let s=[];for(let a=0;a<e.length;a++){let c=e[a],u=this._bindReplace(c,t),h=this._toElement(u,r);n&&(h=h.outerHTML),s.push(h)}return s}else if(e instanceof Object){let i=typeof t=="string",r=i?this._getTag(t):t.tagName;t=i?t:t.outerHTML;let s=this._bindReplace(e,t),a=this._toElement(s,r);return n&&(a=a.outerHTML),a}}else{let r=typeof t=="string"?this._getTag(t):t.tagName;return this._toElement(t,r)}};Ve.exports=ne});var ue=$((Pr,tt)=>{var et={};tt.exports={set:function(e,t){let n=t.name;return t.path=e,et[n]=t,!0},get:function(e){return et[e]}}});var G=$(be=>{be.getConfig=function(e,t,n,i,r){return n==null?[]:n==i&&type!="bind"?[]:(()=>{let s=[],a=e;if(a&&a.length)for(let c=0;c<a.length;c++){let u=a[c];u.bind==t&&s.push(me(B({},u),{component:r}))}return s})()};be.updateConfig=function(u,t,n,i,r,s,a,c){if(i!=null&&!(i==r&&t!="bind")){var u=(()=>{let h=u[s]&&u[s][t];if(h&&h.length){let d=[];for(let m=0;m<h.length;m++){let g=h[m];g.bind==n&&(c?g.sel==c:!0)&&Object.assign(g,a)}return d}else return[]})();return u}};be.extendConfig=function(e){let t=[];for(let n=0;n<e.length;n++){let i={},r=e[n];for(let s in r)i[s]=r[s];t.push(i)}return t.reduce((n,i)=>{let r=i.incrementedSels;return r&&r.length?r.forEach(s=>{let a=B({},i);a.incrementedSel=s,n.push(a)}):n.push(i),n},[])}});var rt=$((Lr,it)=>{var Oe=F(),Ce=G(),hi=Ce.getConfig,Ar=Ce.updateConfig,fi=Ce.extendConfig;it.exports=async function(e,t,n,i,r){r=r||document;let s=this.storage.get(i,"attr"),a=hi(s,e,t,n,i);if(!!a.length)return a=fi(a),Promise.all(a.map(c=>{let u,h=c.hasNegate,d=c.bind,m=c.testVal,g=c.attr,f=c.ops,p=c.sel,y=c.attrkey,b=c.attrvalue,v=c.incrementedSel,w=c.incrementId;if(d=Oe.removeWhiteSpace(d),g=Oe.removeWhiteSpace(g),v=t.incrementedSel||v,t.incrementedSel?u=t[d]:u=t,e==d){let S=r.querySelectorAll(`[data-attr=${v||p}]:not(.cake-template)`);return Promise.all([...S].map(_=>{let C=!1;f?(C=Oe.logTest(u,f,m),h&&(C=!C)):h?C=!u:C=!!u,C?b?_.setAttribute(y,b):_.setAttribute(y):_.removeAttribute(y)}))}t=null}))}});var st=$((Ir,nt)=>{var qe=F(),Ee=G(),di=Ee.getConfig,Rr=Ee.updateConfig,pi=Ee.extendConfig;nt.exports=async function(e,t,n,i,r){r=r||document;let s=this.storage.get(i,"bind"),a=di(s,e,t,n,i);if(!!a.length){a=pi(a);for(let c=0;c<a.length;c++){let u=a[c],h,d=u.attr,m=u.bind,g=u.sel,f=u.incrementedSel,p=u.incrementId,y=u.incrementedSels;f=t.incrementedSel||f,t.incrementedSel?h=t[m]:h=t;let b=d.toHyphen();if(e==m){let v=r.querySelectorAll(`[data-bind=${f||g}]`);for(let w=0;w<v.length;w++){let S=v[w];d=="class"||d=="className"?S.classList.length?(qe.splitBySpace(n,function(_){S.classList.remove(_)}),qe.splitBySpace(h,function(_){S.classList.add(_)})):qe.splitBySpace(h,function(_){S.classList.add(_)}):(h!=null||h!=null)&&(S.setAttribute(b,h),S[d]=h)}}}t=null}}});var lt=$((xr,ot)=>{var oe=F(),Te=G(),gi=Te.getConfig,jr=Te.updateConfig,mi=Te.extendConfig;ot.exports=async function(e,t,n,i,r){let s=this.storage.get(i,"class");r=r||document;let a=gi(s,e,t,n,i);if(!a.length)return;let c={};a=mi(a);for(let u=0;u<a.length;u++){let h=a[u],d,m=h.hasNegate,g=h.bind,f=h.testVal,p=h.className,y=h.ops,b=h.sel,v=h.incrementedSel,w=h.incrementId;if(g=oe.removeWhiteSpace(g),v=t.incrementedSel||v,t.incrementedSel?d=t[g]:d=t,e==g){c[v||b]||(c[v||b]=r.querySelectorAll(`[data-class=${v||b}]:not(.cake-template)`));let S=c[v||b];for(let _=0;_<S.length;_++){let C=S[_],E=!1;y?(E=oe.logTest(d,y,f),m&&(E=!E)):m?E=d==f:E=!!d,E?oe.splitBySpace(p,function(L){oe.toArray(C.classList).includes(L)||setTimeout(()=>{C.classList.add(L)})}):oe.splitBySpace(p,function(L){oe.toArray(C.classList).includes(L)&&setTimeout(()=>{C.classList.remove(L)})})}}}t=null}});var $e=$((Nr,ct)=>{var at=F();function j(e){this.el=j.toArray(e)}j.toArray=function(e){let t=[];switch(!0){case e instanceof Array:t=e;break;case(e.length&&e.tagName&&e.tagName!="FORM"&&!(e instanceof Array)):for(let n=0;n<e.length;n++)t.push(e[n]);break;case!(e instanceof Array):t=[e];break}return t};j.prototype.loop=function(e){try{let t=-1,n=this.el.length;for(;++t<n;){let i=this.el[t];e(t,i)}return!0}catch(t){return console.error(t),!1}};j.prototype.getElements=function(){return this.el};j.prototype.getElement=function(e=0){return this.el[e]};j.prototype.remove=function(){let e=-1,t=this.el.length,n=document.createDocumentFragment();for(;++e<t;){let i=this.el[e];i&&n.appendChild(i)}return n=null,!0};j.prototype.unRequired=function(){return this.loop(function(e,t){t.unRequired()})};j.prototype.replaceDataSrc=function(){return this.loop(function(e,t){t.replaceDataSrc()})};j.cloneNode=function(e){e=e instanceof Array?e:this.toArray(e);let t=[];for(let n=0;n<e.length;n++)t.push(e[n].cloneNode(!0));return new j(t)};j.prototype.dataset=function(e,t){let n=this.el.length,i=-1;for(;++i<n&&!(this.el[i].dataset[e]&&t(this.el[i])=="break"););return!0};j.prototype.getContainers=function(){return this.getElementsByDataset("container").container};j.prototype.cloneNode=function(e){return e=this.el,j.cloneNode(e)};j.prototype.getAllElements=function(){let e=this.el.length,t=[];switch(!0){case e==1:t=this.el[0].getElementsByTagName("*").toArray();break;case e>1:{let n=-1;for(;++n<e;){let r=this.el[n].getElementsByTagName("*");if(r)for(let s=0;s<r.length;s++)t.push(r[s])}}break}return t};j.prototype.css=function(e){for(let t in e)if(e.hasOwnProperty(t))if(at.isObject(e[t])){let i=t,r=e[t];for(let s in r)if(r.hasOwnProperty(s)){let a=r[s];this.el.forEach(c=>{let u=c.querySelectorIncluded(i);u.style[s]=a})}}else{let i=e[t];this.el.forEach(r=>{r.style[t]=i})}if(arguments.length==1){let t=arguments[0];at.isObject(t)&&this.el.forEach(i=>{for(let r in t)t.hasOwnProperty(r)&&(i.style[r]=t[r])})}else arguments.length==2};j.prototype.appendTo=function(e,t){e.nodeType==1&&(e=[e]);for(let n=0;n<e.length;n++){let i=e[n];if(!i&&!i.attributes)throw new TypeError(`the ${i} is not an instance of Element`);t&&(i.innerHTML="");for(let r=0;r<this.el.length;r++){let s=this.el[r];i.appendChild(s)}}};j.prototype.getElementsByTagName=function(e){let t=this.el.length,n=[];switch(!0){case t==1:n=this.el[0].getElementsByTagName(id).toArray();break;case t>1:{let i=-1;for(;++i<t;){let s=this.el[i].getElementsByTagName(selector);if(s)for(let a=0;a<s.length;a++)n.push(s[a])}}break}return n};j.prototype.getElementById=function(e){let t=this.el.length,n=[];switch(!0){case t==1:n=this.el[0].getElementById(id);break;case t>1:{let i=-1;for(;++i<t;){let s=this.el[i].querySelector(selector);s&&n.push(s)}}break}return n};j.prototype.querySelectorAll=function(e){let t=this.el.length,n=[];switch(!0){case t==1:n=this.el[0].querySelectorAll(e);break;case t>1:{let i=[],r=-1;for(;++r<t;){let a=this.el[r].querySelectorAll(e);a&&(n=n.concat(a.toArra()))}}break;default:n=[]}return n};j.prototype.querySelector=function(e){let t=this.el.length,n=[];switch(!0){case t==1:n=this.el[0].querySelector(e);break;case t>1:{let i=-1;for(;++i<t;){let s=this.el[i].querySelector(e);s&&n.push(s)}}break}return n};j.prototype.querySelectorIncluded=function(e,t,n){let i=this.el.length,r=[];switch(!0){case i==1:r=this.el[0].querySelectorIncluded(e,t,n);break;case i>1:{let s=-1;for(;++s<i;){let c=this.el[s].querySelectorIncluded(e,t,n);c&&r.push(c)}}break}return r};j.prototype.querySelectorAllIncluded=function(e,t,n){let i=this.el.length,r=[];switch(!0){case i==1:r=this.el[0].querySelectorAllIncluded(e,t,n);break;case i>1:{let s=-1;for(;++s<i;){let c=this.el[s].querySelectorAllIncluded(e,t,n);c&&(r=r.concat(c.toArra()))}}break}return r};j.prototype.contains=function(e){let t=this.el.length,n=!1;switch(t==1){case!0:n=this.el[0].contains(e);break;case!1:{let i=-1;for(;++i<t;)if(this.el[i].contains(e)){n=!0;break}}break}return n};j.prototype.getElementsByDataset=function(){let e,t,n,i,r,s;for(e=arguments,o={},length=e.length,n=-1,i=-1;++n<this.el.length;)for(r=this.el[n];++i<length;){t=e[i],r.getAttribute(`data-${t}`)?o[t]=[r]:o[t]=[];let a=r.querySelectorAll(`[data-${t}]`);if(a.length)for(let c=0;c<a.length;c++){let u=a[c];u.closest(".cake-template")||o[t].push(u)}}return o};ct.exports=j});var ht=$((Hr,ut)=>{var Ur=F(),yi=$e(),bi=se(),vi=re(),Pe=G(),wi=Pe.getConfig,Si=Pe.updateConfig,Mr=Pe.extendConfig;ut.exports=async function(e,t,n,i,r){r=r||document;let s=this.storage.get(i,"forUpdate"),a=wi(s,e,t,n,i);if(!a.length)return;let c=new bi(vi("templating")),u=[];for(let h=0;h<a.length;h++){let d=a[h].bind,m=a[h].sel,g=a[h].iter,f=a[h].ins,p=a[h].targets;for(let y in t)if(t.hasOwnProperty(y)){let b=document.querySelectorAll(`[data-for-update-bind=${y}]`);for(let v=0;v<b.length;v++){let w=b[v],S=w.dataset.forUpdateBind;if(!w.dataset.forTemplate)w.remove();else{let _=w.cloneNode(!0);_.style.removeProperty("display"),_.classList.remove("cake-template");let C=t[S],E=-1;for(l=C.length;++E<l;){let L=C[E],R=E;for(let k=0;k<this.logicalType.length;k++){let A=this.logicalType[k],Q=new yi(w).querySelectorAllIncluded(`[data-${A}]`);for(let M=0;M<Q.length;M++){let J=Q[M];if(J.dataset[A]){let H=J.dataset[A],I=`${H}-${y}-${R}`;_.dataset[A]=I;let x=this.getWatchItemsBySel(i,A,H).bind;if(x.includes(".")){S=x.split(".")[0];for(let N in L){let W=L[N],U=`${S}.${N}`;L[U]=W}}H&&u.push(me(B({_type:A},L),{incrementedSel:I,sel:H,bind:x,incrementId:R,component:i}))}}}let P=c.createElement(L,_,!1);P.classList.remove("cake-template"),P.removeAttribute("data-for-template"),w.insertAdjacentElement("beforebegin",P),w.parentElement.tagName=="SELECT"&&(w.parentElement.selectedIndex=0)}}}}}return t=null,Promise.all(u.map(h=>{let d=h.bind,m=h._type,g=h.component,f=h.incrementedSel,p=h.sel,y=`notify${m.toProper()}`;return Si(m,d,h,null,g,{incrementedSel:f},p),this[y](d,h,null,g)})).then(()=>{})}});var fe=$((Fr,ft)=>{var he={};function _i(){let e=he[name];if(e&&cb instanceof Function){let t=cb.name;ctx&&(cb=cb.bind(ctx)),cb.binded="external",cb.original=t,cb.listenTo=e.name,e.Subscribe(cb)}}window.ComponentStorage=he;ft.exports={subscribe(e,t){return new Promise((n,i)=>{let r=setInterval(()=>{he[name]&&(_i(),clearInterval(r),n())})})},set(e,t){return he[e]=t,!0},get(e){return he[e]}}});var gt=$((Wr,pt)=>{var Dr=F(),Oi=se(),Ci=re(),dt=fe(),qi=ue(),ke=G(),Ei=ke.getConfig,Br=ke.updateConfig,Jr=ke.extendConfig,de={targets:{},parents:{}};pt.exports=async function(e,t,n,i,r){let s=i=="kyc_view"&&e=="actions",a=this.storage.get(i),c=new Oi(Ci("templating"));return new Promise((u,h)=>{try{let d=Ei(this.storage.get(i,"for"),e,t,n,i),m=this.storage.get(i,"switch");if(!d.length)return;let g=t.reduce((f,p)=>(f.push(p),f),[]);t=null;for(let f=0;f<d.length;f++){let p=d.length-1==f,y=d[f].bind,b=d[f].sel,v=d[f].iter,w=d[f].ins,S=d[f].component,_=d[f].cleaned,C=d[f].children;r=dt.get(S).html;let E=r.querySelectorIncluded(`[data-for-template=${b}]`);E?de.targets[b]=E:(de.parents[b].appendChild(de.targets[b]),E=r.querySelectorIncluded(`[data-for-template=${b}]`)),g=g.map(R=>{for(let P in R)R.hasOwnProperty(P)&&(R[`${v}.${P}`]=R[P]);return R});let L=[];(()=>{let R={},P=0;Object.keys(a).forEach((k,A)=>{if(!["for","evt","animate","switch"].includes(k)){let Q=JSON.parse(JSON.stringify(a[k]));Q.forEach(M=>{let J=M&&M.bind||void 0;J&&J.match(new RegExp(c.lefttag),"g")&&(g.forEach((H,I)=>{let x={};x.bind=c.replaceString(H,J),x.sel=`${M.sel}-${P}-${I}`,x.rawsel=M.sel,P+=1,g[I].__sel||(g[I].__sel=[]),g[I].__sel.push(x.sel);for(let D in M)M.hasOwnProperty(D)&&(x[D]||(x[D]=M[D]));Q.push(x)}),L.push(k),R[`${S}-${k}`]=(R[`${S}-${k}`]||0)+1)}),a[k]=Q}})})(),(()=>{if(_){let k=E.parentElement;k?de.parents[b]=k:k=de.parents[b],k.children.toArray().forEach(A=>{A.dataset.for&&A.dataset.for==b&&!A.classList.contains("cake-template")&&A.remove()})}let R=-1;l=g.length;let P=[];for(let k=0;k<g.length;k++){let A=g[k],Q=k,M=E.cloneNode(!0),J=E.cloneNode(!0);(()=>{if(!(m&&m.length))return;let I=m.find(X=>X.parentForSel==b);if(!I)return;let x=I.bind,D=I.sel,N=I.cases,W=A[x],U=J.querySelector(`[data-switch=${D}]`),z=N.find(X=>{let ae=X._id,K=X.bind;return K.includes("|")?K.split("|").map(Se=>Se.trim()).some(Se=>Se==W):K==W});if(z){let X=M.querySelector(`[data-case=${D}-${z._id}]`);X.classList.remove("cake-template"),U.parentNode.replaceChild(X,U)}else U.remove()})();let H=c.createElement(A,J,!1);Object.keys(a).forEach(I=>{if(L.includes(I)){let x=a[I];A.__sel&&A.__sel.forEach&&A.__sel.forEach(D=>{let N=x.find(W=>D==W.sel);if(N){let W=N.rawsel;if(W){let U=H.querySelector(`[data-${I}=${W}]`);!U&&H&&H.dataset[I]==W&&(U=H),U&&(U.dataset[I]=N.sel)}}})}}),H.style.removeProperty("display"),H.classList.remove("cake-template"),H.removeAttribute("data-for-template"),E.insertAdjacentElement("beforebegin",H),!C||C.forEach(I=>{let x=(a&&a.for||[]).find(N=>N.sel==I),D=H.querySelector(`[data-for=${I}]`);if(D){let N=A[x.bind];if(N){N=N.map(U=>{for(let z in U)U.hasOwnProperty(z)&&(U[`${x.iter}.${z}`]=U[z]);return U});for(let U=0;U<N.length;U++){let z=N[U],X=N.length-1==U,ae=D.cloneNode(!0),K=c.createElement(z,ae,!1);K.style.removeProperty("display"),K.classList.remove("cake-template"),K.removeAttribute("data-for-template"),D.insertAdjacentElement("beforebegin",K),X&&D.remove()}}let W=D.closest("SELECT");W&&(W.selectedIndex=0)}}),(()=>{let I=this.storage.get(S,"route");if(!(I&&!I.length))for(let x=0;x<I.length;x++){let D=I[x],N=D.bind,W=D.sel;if(!D.for)continue;let z=H.querySelector(`[data-route=${W}]`);if(!z&&H&&H.dataset.route==W&&(z=H),z){let X=null;if(N.includes("?")){let K=N.split("?");N=K[0],X=K[1]}let ae=qi.get(N);if(ae){let K=ae.path;X?z.href=`#!${K}?${X}`:z.href=`#!${K}`}}else continue}})(),H.replaceDataSrc()}u()})(),(()=>{if(E.tagName=="OPTION"){let P=E.closest("SELECT")||E.closest("DATALIST");P&&(P.selectedIndex=0)}})(),(async()=>{let R=dt.get(S);R&&R.findContainer()})(),p&&E.remove()}r.unRequired(),g=null}catch(d){h(d)}})}});var yt=$((zr,mt)=>{var Ti=F(),Ae=G(),$i=Ae.getConfig,Qr=Ae.updateConfig,Pi=Ae.extendConfig;mt.exports=async function(e,t,n,i,r){r=r||document;let s=this.storage.get(i,"if"),a=$i(s,e,t,n,i);if(!a.length)return;a=Pi(a);let c={};for(let u=0;u<a.length;u++){let h=a[u],d=h.attr,m=h.bind,g=h.sel,f=h.testval,p=h._true,y=h._false,b=h.ops,v=h.hasNegate,w=h.incrementedSel,S=h.incrementId,_=d.toHyphen(),C=p!="null",E=y!="null";if(e==m){c[g]||(c[g]=r.querySelectorAll(`[data-if=${w||g}]:not(.cake-template)`));let L=c[g];for(let R=0;R<L.length;R++){let P=L[R],k=t,A;if(f?A=Ti.logTest(f,b,k):A=v?!k:!!k,A){if(C)if(d=="class"){let Q=p.split(" ");E?(y.split(" ").forEach(J=>{P.classList.remove(J)}),Q.forEach(J=>{P.classList.add(J)})):Q.forEach(M=>{P.classList.contains(M)||P.classList.add(M)})}else k[p]&&P.setAttribute(d,k[p])}else if(E)if(d=="class"){let Q=y.split(" ");C?(p.split(" ").forEach(J=>{P.classList.remove(J)}),Q.forEach(J=>{P.classList.add(J)})):trueClasses.forEach(M=>{P.classList.contains(M)||P.classList.add(M)})}else P.setAttribute(d,y)}}}t=null}});var vt=$((Yr,bt)=>{var Kr=F(),Le=G(),ki=Le.getConfig,Xr=Le.updateConfig,Gr=Le.extendConfig;bt.exports=async function(e,t,n,i,r){r=r||document;let s=this.storage.get(i,"model"),a=ki(s,e,t,n,i);if(!!a.length){for(let c=0;c<a.length;c++){let u=a[c],h=u.attr,d=u.bind,m=u.sel,g=h.toHyphen();if(e==d){let f=r.querySelectorAll(`[data-model=${m}]`);for(let p=0;p<f.length;p++){let y=f[p];h=="className"?n?t?y.classList.replace(n,t):y.classList.remove(n):y.classList.add(t):(y.setAttribute(g,t),y[h]=t)}}}t=null}}});var St=$((en,wt)=>{var Zr=F(),Re=G(),Ai=Re.getConfig,Vr=Re.updateConfig,Li=Re.extendConfig;wt.exports=async function(e,t,n,i,r){r=r||document;let s=this.storage.get(i,"toggle"),a=Ai(s,e,t,n);if(!!a){a=Li(a),r=r||document;for(let c=0;c<a.length;c++){let u=a[c];if(!u)continue;let h=u.sel,d=u.bind,m=u.value,g=u.ops,f=r.querySelector(`[data-toggle=${h}]`);m==n&&f&&f.classList.remove("is-active"),m==t&&f&&(f.classList.contains("is-active")&&f.classList.remove("is-active"),f&&f.classList.add("is-active"))}t=null}}});var Ot=$((nn,_t)=>{var tn=F(),Ie=G(),Ri=Ie.getConfig,rn=Ie.updateConfig,Ii=Ie.extendConfig;_t.exports=async function(e,t,n,i,r){r=r||document;let s=this.storage.get(i,"route"),a=Ri(s,e,t,n);if(!!a){a=Ii(a),r=r||document;for(let c=0;c<a.length;c++){let u=a[c];if(!u)continue;let h=u.sel,d=u.bind,m=u.value,g=u.ops,f=r.querySelector(`[data-route=${h}]`);console.log(31,f)}t=null}}});var qt=$((sn,Ct)=>{function je(){this.store={}}je.prototype.set=function(e,t,n){let i=this.store;switch(!0){case!i[e]:i[e]={};case!i[e][t]:i[e][t]=[];default:i[e][t].push(n);break}return!0};je.prototype.get=function(e,t){let n=this.store;if(e&&t)return n[e]&&n[e][t]||[];if(e&&!t)return n[e]||{}};Ct.exports=je});var Tt=$((cn,Et)=>{var on=F(),xe=G(),ji=xe.getConfig,ln=xe.updateConfig,an=xe.extendConfig;Et.exports=async function(e,t,n,i,r){r=r||document;let s=this.storage.get(i,"switch"),a=ji(s,e,t,n,i);if(!!a.length){for(let c=0;c<a.length;c++){let u=a[c],h;if(u.parentFor)return;t.incrementedSel?h=t[m]:h=t;let m=u.bind,g=u.sel,f=u.cases,p=h;if(e!=m)return;let y=r.querySelectorAll(`[data-switch=${g}]`);for(let b=0;b<y.length;b++){let v=y[b],w=f.find(_=>{let C=_._id,E=_.bind;return E.includes("|")?E.split("|").map(L=>L.trim()).some(L=>L==p):E==p});if(!w)return;let S=v.querySelector(`[data-case=${g}-${w._id}]`);S.classList.remove("cake-template"),v.style.removeProperty("display"),v.classList.remove("cake-template"),v.innerHTML=S.outerHTML}}t=null}}});var Pt=$((dn,$t)=>{var un=se(),hn=ue(),xi=rt(),Ni=st(),Ui=lt(),Mi=ht(),Hi=gt(),Fi=yt(),Di=vt(),Bi=St(),Ji=Ot(),Wi=qt(),ve=F(),Qi=Tt();function T(){this.uiid=0,this.notify={},this.sts={},this.storage=new Wi,this.logicalType=["if","bind","switch","toggle","class","attr"]}T.prototype.notifyFor=Hi;T.prototype.notifyForUpdate=Mi;T.prototype.notifySwitch=Qi;T.prototype.notifyClass=Ui;T.prototype.notifyBind=Ni;T.prototype.notifyAttr=xi;T.prototype.notifyIf=Fi;T.prototype.notifyModel=Di;T.prototype.notifyToggle=Bi;T.prototype.notifyRoute=Ji;T.prototype.notifier=function(e,t,n,i){if(t==null)return Promise.resolve();let r=JSON.parse(JSON.stringify(t)),s={for:"For",forUpdate:"ForUpdate",switch:"Switch",bind:"Bind",if:"If",class:"Class",attr:"Attr",route:"Route"},a=Object.caching("AttribProp").get(e)||(()=>{let c={},u=Object.keys(s),h=this.storage.get(i);if(!h)return[];for(let d=0;d<u.length;d++){let m=u[d],g=h[m];if(g)for(let f=0;f<g.length;f++)g[f].bind==e&&(c[m]=!0)}return c=Object.keys(c),Object.caching("AttribProp").set(e,c),c})();return new Promise((c,u)=>{try{let h=a.length,d=0,m=()=>{if(h>d){let g=a[d],f=s[g];d+=1,this[`notify${f}`](e,r,n,i).then(()=>{m()})}else c()};m()}catch(h){u(h.message)}})};T.prototype.registerNotifier=function(e,t){this.notify[e]||(this.notify[e]=[]),this.notify[e].push(t)};T.prototype.getEventTarget=function(e){let t=`${e}`,n=Object.caching("getEventTarget").get(t);if(!n){let i=this.storage.get(e);n=i&&i.evt?i.evt:[],Object.caching("getEventTarget").set(t,n)}return n};T.prototype.getRouterTarget=function(e){let t=`${e}`,n=Object.caching("getRouterTarget").get(t);if(!n){let i=this.storage.get(e);n=i&&i.route?i.route:[],Object.caching("getRouterTarget").set(t,n)}return n};T.prototype.getWatchItems=function(e){let t=`${e}`,n=Object.caching("getWatchItems").get(t);if(!n){let i=this.storage.get(e),r=ve.reduce(i,{wt:[],forWt:[]},function(c,u,h){let d=c.key,m=c.value;return ve.each(m,function(g,f){let p=g.bind;p&&(d=="for"?u.forWt.push(p):u.wt.push(p))}),u}),s=ve.unique(r.wt);n=ve.unique(r.forWt).concat(s),Object.caching("getWatchItems").set(t,n)}return n};T.prototype.getWatchItemsByType=function(e,t){let n=`${e}-${t}`,i=Object.caching("getWatchItemsByType").get(n);if(!i){let s=this.storage.get(e)[t]||[],a=new Set;(t=="animate"||t=="toggle")&&(a=[]);for(let c=0;c<s.length;c++){let u=s[c],h=u.bind;t=="animate"||t=="toggle"?a.push(u):!!h&&a.add(h)}i=[...a],Object.caching("getWatchItemsByType").set(n,i)}return i};T.prototype.getWatchItemsBySel=function(e,t,n){let i=`${e}-${t}-${n}`,r=Object.caching("watchItemsBySel").get(i);if(!r){let a=this.storage.get(e,t).find(c=>c.sel==n);r=a||!1,Object.caching("watchItemsBySel").set(i,r)}return r};T.prototype.getConfig=function(e){return this.storage.get(e)};T.prototype._activateReactive=e=>{};T.prototype._register=function(e,t,n){return this.storage.set(e,t,n)};T.prototype._static=function(e){return function(t,n){let i=[];for(let r=0;r<t.length;r++){let s=t[r];switch(n){case!1:i.push(s);break;case!0:{let a=s.closest("[data-component]");switch(a=a&&a.dataset.component,a==e){case!0:i.push(s);break}}break;default:continue}}return i}};T.prototype._loopElements=function(e,t,n,i,r){if(!t.length||(t=this._static(n)(t,i),!t.length))return!1;for(let s=0;s<t.length;s++){let a=t[s],c=`ckm${this.uiid}`,u,h;if(e.includes(",")){let d=e.split(",");u={},h={};for(let m=0;m<d.length;m++){let g=d[m];u[g]=a.dataset[g],h[g]=u.split(",")}}else u=a.dataset[e],h=u.split(",");r(a,c,u,h,s)}return!0};T.prototype._compileEvents=function(e,t,n){return new Promise(i=>{this._loopElements("event",e,t,n,function(r,s,a,c,u){let h=c;for(let d=0;d<h.length;d++){let m=h[d].split(":"),g=m[0],f=m[1];g=g.trim(),f=f&&f.trim(),this._register(t,"evt",{event:g,sel:s,bind:f,cb:f}),r.dataset.event=s,this.uiid++}}.bind(this)),i()})};T.prototype._compileToggle=function(e,t,n){return new Promise(i=>{let r={};this._loopElements("toggle",e,t,n,function(s,a,c,u,h){let d=c;r[d]&&(a=r[d]),this._register(t,"toggle",{sel:a,name:"ns-"+d}),s.dataset.toggle=a,this.uiid++,r[d]=a}.bind(this)),r={},i()})};T.prototype._compileFor=function(e,t,n,i){return new Promise(r=>{let s=i;if(!e.length){r();return}let a=this._static(t)(e,n);if(!a.length){r();return}let c={};for(let u=0;u<a.length;u++){let h=`ckf${this.uiid}`;c[h]={};let d=a[u],m=d.dataset.for,g=d.dataset.forCleaned==null||d.dataset.forCleaned=="true",f=m.split(" "),p=f[0],y=f[1],b=f[2];if(d.style.display="none",d.classList.add("cake-template"),d.dataset.for=h,d.dataset.forTemplate=h,c[h]=Object.assign(c[h],{bind:b,sel:h,iter:p,ins:y,cleaned:g}),++this.uiid,u!=0){let v=d.parentElement&&d.parentElement.closest("[data-for]");if(!v)continue;let w=!!v.dataset.for;if(s.contains(v)&&w){let S=v.dataset.for,_=c[S];_&&!_.children?_.children=[h]:_&&_.children.push(h)}}}for(let u in c)c.hasOwnProperty(u)&&this._register(t,"for",c[u]);r()})};T.prototype._compileForUpdate=function(e,t,n){return new Promise(i=>{this._loopElements("forUpdate",e,t,n,function(r,s,a,c,u){r.style.display="none",r.classList.add("cake-template"),r.dataset.forUpdate=s,r.dataset.for||(r.dataset.forTemplate=s);let h=a.split(" "),d=h[0],m=h[1],g=h[2];this._register(t,"forUpdate",{bind:g,sel:s,iter:d,ins:m}),this.uiid++}.bind(this)),i()})};T.prototype._compileSwitch=function(e,t,n){return new Promise(i=>{this._loopElements("switch",e,t,n,function(r,s,a,c,u){let h=r.closest("[data-for]");h||(r.style.display="none",r.classList.add("cake-template"),console.log("compiling switch"));let d=r.dataset.switch,m="def";if(d.includes(".")){let y=r.dataset.switch.split(".");d=y[0],m=y[1]}r.dataset.switch=s;let g=r.querySelectorAll("[data-case]"),f=[];for(let y=0;y<g.length;y++){let b=g[y],v=b.closest(`[data-switch=${s}]`);if(b.classList.add("cake-template"),v){let w=b.dataset.case,S=`cksc${this.uiid}`;b.dataset.case=`${s}-${S}`,f.push({_id:S,bind:w}),this.uiid++}}let p={bind:d,sel:s,map:m,cases:f};h&&(p.parentFor=!!h,p.parentForSel=h.dataset.for),this._register(t,"switch",p),this.uiid++}.bind(this)),i()})};T.prototype._compileBind=function(e,t,n){return new Promise(i=>{this._loopElements("bind",e,t,n,function(r,s,a,c,u){for(let m=0;m<c.length;m++){let g=c[m].split(" ").join("");if(g.includes(":")){let f=g.split(":");var h=f[0],d=f[1]}else var d=g,h=r.value!=null&&r.tagName!="BUTTON"?"value":"textContent";this._register(t,"bind",{attr:h,bind:d,sel:s})}this.uiid++,r.dataset.bind=s}.bind(this)),i()})};T.prototype._compileAnimate=function(e,t,n){return new Promise(i=>{this._loopElements("animate",e,t,n,function(r,s,a,c,u){let h={};for(let d=0;d<c.length;d++){let g=c[d].split(":"),f=g[0],p=g[1];if(f=="ns"){h.ns=p;break}else h[f]={keyframes:p.split("-")}}h.selector={attr:"data-animate",val:s},this._register(t,"animate",h),this.uiid++,r.dataset.animate=s}.bind(this)),i()})};T.prototype._compileIf=function(e,t,n){return new Promise(i=>{let r=new RegExp("<|>|===|==|!==|!=");this._loopElements("if,ifBind",e,t,n,function(s,a,c,u,h){let d=c.if,m=c.ifBind,g=u.if;for(let f=0;f<g.length;f++){let p=u[f],y=p.substring(0,p.indexOf("=")),b=p.substring(p.indexOf("=")+1,p.length);b=b.split(new RegExp("[()]")).join("");let v=b.split("?"),w=v[0],S=v[1],_=w[0]=="!";hasRegularLog=w.match(r);let C,E,L;if(hasRegularLog){let A=w.split(r);C=A[0].trim(),E=A[1].trim(),L=hasRegularLog[0]}else C=w;_&&(C=C.slice(1));let R=S.split(":"),P=R[0],k=R[1];this._register(t,"if",{hasNegate:_,attr:y,ops:L,bind:C,testval:E||null,_true:P,_false:k,sel:a,ifBind:m})}this.uiid++,s.dataset.if=a}.bind(this)),i()})};T.prototype._compileClass=function(e,t,n){return new Promise(i=>{let r=new RegExp("<|>|===|==|!==|!=");this._loopElements("class",e,t,n,function(s,a,c,u,h){let d,m,g,f,p,y,b=u;for(let v=0;v<b.length;v++){let S=b[v].split("&&"),_=S[0],C=S[1];if(_=_.trim(),C=C.trim(),d=_.match(r),_.substring(0,2).includes("!")?(m=!0,y=_.substring(0,2)=="!!"?2:_.substring(0,1)=="!"?1:0):(m=!1,y=0),d){let E=_.split(r);g=E[0].trim(),p=E[1].trim(),f=d[0].trim()}else!m&&(g=_),m&&(g=_.substring(y),p=y==2);this._register(t,"class",{hasNegate:m,bind:g,testVal:p,className:C,ops:f,sel:a})}this.uiid++,s.dataset.class=a}.bind(this)),i()})};T.prototype._compileAttr=function(e,t,n){return new Promise(i=>{let r=new RegExp("<|>|===|==|!==|!=");this._loopElements("attr",e,t,n,function(s,a,c,u,h){let d,m,g,f,p,y=c.split("&&"),b=y[0],v=y[1];v=v.trim();let w=v.split("="),S=w[0],_=w[1];if(b=b.trim(),d=b.match(r),m=b[0]=="!",d){let C=b.split(r);bind=C[0],p=C[1],f=d[0]}else bind=b;m&&m&&(bind=bind.slice(1)),this._register(t,"attr",{hasNegate:m,bind,testVal:p,attrkey:S,attrvalue:_,ops:f,sel:a}),this.uiid++,s.dataset.attr=a}.bind(this)),i()})};T.prototype._compileModel=function(e,t,n){return new Promise(i=>{this._loopElements("model",e,t,n,function(r,s,a,c,u){let h=r.tagName;for(let f=0;f<c.length;f++){let p=c[f].split(" ").join("");if(p.includes(":"))var d=p.split(":"),m=d[0],g=d[1];else var g=p,m="value";this._register(t,"model",{attr:m,bind:g,sel:s,nodeType:h})}this.uiid++,r.dataset.model=s}.bind(this)),i()})};T.prototype._compileRoute=function(e,t,n){return new Promise(i=>{this._loopElements("route",e,t,n,function(r,s,a,c,u){for(let h=0;h<c.length;h++){let d=c[h].split(" ").join(""),m=r.closest("[data-for]");this._register(t,"route",{bind:d,sel:s,for:!!m})}this.uiid++,r.dataset.route=s}.bind(this)),i()})};T.prototype.inject=function(e,t,n=!1){return new Promise(i=>{let r=e.getElementsByDataset("bind","for","for-update","switch","toggle","event","animate","if","class","attr","route");i(r)}).then(i=>{let r=[],s={bind:this._compileBind,switch:this._compileSwitch,toggle:this._compileToggle,if:this._compileIf,class:this._compileClass,attr:this._compileAttr,for:this._compileFor,"for-update":this._compileForUpdate,event:this._compileEvents,animate:this._compileAnimate,route:this._compileRoute};for(let a in i)i.hasOwnProperty(a)&&i[a].length&&r.push(s[a].apply(this,[i[a],t,n,e]));return Promise.all(r.length?r:[r])}).then(()=>Promise.resolve())};$t.exports=T});var pe=$((pn,kt)=>{var zi=F();kt.exports=function(){function e(f){return f?f.constructor.name.toLowerCase():null}function t(f,p){for(let y in f)f.hasOwnProperty(y)&&p(f[y],y)}function n(f,p,y){f=Object.assign(f,{[y]:p})}function i(f){return f===null}function r(f){return f===void 0}function s(f){return e(f)=="array"}function a(f){return e(f)=="object"}var c=function(f,p){for(var y=null,b=0;b<f.length;b++){var v=f[b];if(e(p)=="object"){var w=p,S=Object.keys(p)[0],_=w[S];if(e(v)=="object"){var C=v[S]==_;if(C){y=b;break}}}else if(e(p)!="array"){var C=p==v;if(C){y=b;break}}}return y},u=function(f,p){var y=null,b=e(p);if(b=="object"){var v=Object.keys(p)[0];f[y]!=null&&f[y]==p[v]&&(y=v)}else b=="string"&&(y=p);return y},h=function(f,p){var y=null;return e(f)=="array"?y=c(f,p):e(f)=="object"&&(y=u(f,p)),y},d=class{constructor(f,p,y){this.type=f,this.name=`${zi.instanceID()}-${p}`,this.child=y,this.cache={},e(this.child)=="string"&&(this.child=y=="array"?[]:y=="object"?{}:!1)}init(f){return this[this.type]?(this[this.type](f),!0):!1}open(){if(this.type=="session"){var f=JSON.parse(sessionStorage[this.name]);return f[this.name]}else if(this.type=="local"){var f=JSON.parse(localStorage[this.name]);return f[this.name]}else return this.cache[this.name]}close(f){return this.child=f,this.recache(),this.init(!0)}recache(){this.cache[this.name]=this.child}create(){this.cache[this.name]=this.child}array(){this.create()}object(f){this.create()}session(f){f||this.recache();try{!sessionStorage[this.name]&&!f?sessionStorage.setItem(this.name,JSON.stringify(this.cache)):f&&sessionStorage.setItem(this.name,JSON.stringify(this.cache))}catch(p){this.recache()}}local(f){f||this.recache();try{!localStorage[this.name]&&!f?localStorage.setItem(this.name,JSON.stringify(this.cache)):f&&localStorage.setItem(this.name,JSON.stringify(this.cache))}catch(p){this.recache()}}},m={create:function(f,p){if(s(f)){let y=new Set(f);e(p)=="array"?p.forEach(b=>{y.add(b)}):y.add(p),f=Array.from(y)}else a(f)&&(a(p)?t(p,function(y,b){f[b]=y}):f[p]=p);return f},createOrUpdate:function(f,p){var y=h(f,p);return e(f)=="array"?i(y)?f.includes(p):f[y]=p:e(f)=="object"&&(i(y)?a(p)?t(p,function(b,v){n(f,b,v)}):f[p]=p:f[y]=p),f},remove:function(f,p){if(e(p)=="string"){var y=h(f,p);if(e(f)=="object")delete f[y];else if(e(f)=="array"){for(var b=[],v=0;v<f.length;v++)if(v!=y)b.push(f[v]);else continue;f=b}return f}else{if(e(p)=="object")return Object.filter(f,function(w,S){var _=p[S]!=null&&p[S]==w;return!_});if(e(p)=="array")return Object.filter(f,function(w,S){var _=p.contains(S);return!_})}if(i(y))return!1},get:function(f,p){var y=e(p);if(y=="string"){var b=h(f,p);if(b==0||b)return f[b]}else{if(y=="object")return Object.filter(f,function(v,w){var S=!r(p[w])&&p[w]==v;return S});if(y=="array")return Object.filter(f,function(v,w){var S=p.contains(w);return S})}return null},getNot:function(f,p){var y=e(p);return y=="string"?Object.filter(f,function(b,v){var w=v!=p;return w}):y=="object"?Object.filter(f,function(b,v){return Object.some(p,function(w,S){var _=S==v&&w==b;return!_})}):y=="array"?Object.filter(f,function(b,v){var w=!p.contains(v);return w}):null},getAll:function(f){return f}},g=class{constructor(f){this.name=f.name,this.storageType=f.storage,this.child=f.child||"object";try{e(this.child)=="string"&&(this.child=this.child=="array"?[]:this.child=="object"?{}:null)}catch(p){this.storageType=="session"?sessionStorage.clear():this.storageType=="local"&&localStorage.clear(),e(this.child)=="string"&&(this.child=this.child=="array"?[]:this.child=="object"?{}:null)}if(!["array","object"].includes(e(this.child)))throw new Error("the child must be an object or array type.");this.storage=new d(this.storageType,this.name,this.child),this.storage.init()}has(f){var p=this.storage.open(),y=h(p,f);return i(y)?!1:y}get(f,p){if(p){var y=this.storage.open();return m.get(y,f)}else return new Promise((b,v)=>{setTimeout(()=>{var w=this.storage.open();b(w)})}).then(b=>m.get(b,f))}getNot(f){var p=this.storage.open();return m.getNot(p,f)}getAll(){var f=this.storage.open();return Promise.resolve(f)}update(f,p){var y=this.storage.open(),b=h(y,f);return b==0||b?(y=m.createOrUpdate(y,data),this.storage.close(y)):!1}createOrUpdate(f){if(arguments.length>1){let b=arguments[0],v=arguments[1];f={[b]:v}}var p=this.storage.open();return p=m.createOrUpdate(p,f),this.storage.close(p)}create(f){var p=this.storage.open();return p=m.create(p,f),this.storage.close(p)}remove(f){var p=this.storage.open();return p=m.remove(p,f),this.storage.close(p)}};return g}});var Lt=$((gn,At)=>{var Ki=pe()();At.exports=function(e){let t={};class n{constructor(r){this.name=r,this.reactiveData={},this.notify=[],this.install(this.name),this.pKeys={},this.sanitize=function(s){let a={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},c=/[&<>"'/]/ig;return typeof s=="string"?s.replace(c,u=>a[u]||""):s}}registerNotifier(r){this.notify.push(r)}install(){this.session=new Ki({child:"object",storage:"session",name:`_cake_${this.name}_cf`})}notifier(r,s){let a=s.value,c=s.bind;return this.reactiveData[r]||(this.reactiveData[r]={}),this.reactiveData[r][c]=a,this.set(c,a)}getInputData(r="json",s){let a=s||this.name,c=JSON.parse(JSON.stringify(this.reactiveData[a]));for(let u in c){let h=c[u];c[u]=this.sanitize(h)}if(r=="json")return c;if(r=="formdata"){let u=new FormData;for(let h in c){let d=c[h];u.append(h,d)}return u}}hook(r,s,a){t[r]||(t[r]={}),t[r][s]||(t[r][s]=[]),t[r][s].push(a)}get(r,s=!1){let a=this.pKeys[r];return s?this.session.get(r,!0):this.session.get(r)}set(r,s){let a=`${this.name}-${r}`,c=this.notify,u=this.name,h=null;return this.pKeys[r]=a,new Promise(async(d,m)=>{r!="password"&&this.session.createOrUpdate(r,s),d()}).then(async()=>Promise.all(c.map(d=>d(r,s,h,u).then(()=>{let m=t[this.name];if(m){let g=m[r];g&&g.forEach(f=>{f(s)})}}))))}removeCache(r){return this.session.remove(r)}}return n}});var It=$((mn,Rt)=>{Rt.exports=class{constructor(e=[],t){this.html=t||document,this.cf=e,this.duration=300}animate(e){this.config=this.parse(this.cf);let t=this.config[0].element,n=this.config[0][e];return n?new Promise((i,r)=>{t.velocity(n.velocity,{complete:function(){i()}})}):Promise.resolve()}parse(e){let t=[],n=e.length,i=-1;for(;++i<n;){let r=e[i],s=r.selector,a;switch(!0){case!!(s.val&&s.attr):a=this.html.querySelectorIncluded(`[${s.attr}=${s.val}]`,s.attr,s.val);break;case!!(s.val&&!s.attr):{let c=s.val.match(new RegExp("^[.]"))?"class":s.val.match(new RegExp("^[#]"))?"id":null,u=c?s.val.slice(1):null;a=this.html.querySelectorIncluded(s.val,c,u)}break}r.element=a,t.push(r)}return t}dic(e){return{slideOutUp:[{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1",easing:"ease-out"},{transform:"translate3d(0,100%,0)",visibility:"hidden",opacity:"0",easing:"ease-out"}],slideOutRight:[{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"},{transform:"translate3d(100%,0,0)",visibility:"hidden",opacity:"0"}],slideOutLeft:[{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"},{transform:"translate3d(-100%,0,0)",visibility:"hidden",opacity:"0"}],slideOutDown:[{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1",easing:"ease-out"},{transform:"translate3d(0,-100%,0)",visibility:"hidden",opacity:"0",easing:"ease-out"}],slideInUp:[{transform:"translate3d(0,100%,0)",visibility:"hidden",opacity:"0",easing:"ease-out"},{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1",easing:"ease"}],slideInRight:[{transform:"translate3d(100%,0,0)",visibility:"hidden",opacity:"0"},{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"}],slideInLeft:[{transform:"translate3d(-100%,0,0)",visibility:"hidden",opacity:"0",easing:"ease-out"},{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"}],slideInDown:[{transform:"translate3d(0,-100%,0)",visibility:"hidden",opacity:"0",easing:"ease-out"},{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1",easing:"ease-out"}],disappear:[{opacity:"1"},{opacity:"0"}],appear:[{opacity:"0"},{opacity:"1"}],flipInX:[,{offset:0,backfaceVisibility:"visible"},{transform:"perspective(400px) rotate3d(1,0,0,90deg)",opacity:"0",offset:0},{transform:"perspective(400px) rotate3d(1,0,0,-20deg)",offset:.4,easing:"ease-in"},{offset:.6,opacity:"1",transform:"perspective(400px) rotate3d(1,0,0,10deg)"},{transform:"perspective(400px) rotate3d(1,0,0,-5deg)",offset:.8},{offset:1,backfaceVisibility:"visible",transform:"perspective(400px) rotate3d(1,0,0,0)"}]}[e.trim()]||[]}}});var Nt=$((yn,xt)=>{var Xi=It(),Gi=$e(),jt=F(),Yi=se(),Zi=re(),Vi=ue();function q(e,t,n){this.name=e,this.template=t,this.options=n,this.handlers=n.handlers,this.subscribe=n.subscribe,this.renderqueue=n.renderqueue,this.data={},this.root=n.root?`${n.root}:not(.cake-template)`:n.root,this.items=!1,this.type=n.type||"view",this.toggle=n.toggle,this.targets={},this.animateOptions=n.animate,this.role=n.role,this.isReady=!1,this.scope=n.scope,this.animatecss=this.options.animatecss,this.formSelector=n.form,this.await={},this.state=n.state,this.originalState={},this.utils=jt,this.renderQueing=[],this.handlers||console.error(`${this.name} has no handlers`),this.subscribe||console.error(`${this.name} has no subscribe`),(e=="app"||n.role=="app")&&(this.staticComponent=n.static||[]),this.container={},this.compile=new Promise(i=>{this._bindHandlers(),i()}).then(()=>this._bindSubscribe()).then(()=>this.cloneState()).then(()=>{switch(this.type=="view"&&!!this.template){case!0:return this.createElementAsync();default:this.isStatic=!1;break}})}q.prototype.isStatic=!1;q.prototype.hasEvent=!1;q.prototype.isConnected=!1;q.prototype.destroyed=!1;q.prototype.isCreated=!1;q.prototype.cloneState=function(){if(!!this.state){for(let e in this.state)this.state.hasOwnProperty(e)&&(this.originalState[e]=this.state[e]);this.$state=(()=>this.state)()}};q.prototype.clearState=function(){!this.state||(this.state=JSON.parse(JSON.stringify(this.originalState)),this.$state=(()=>this.state)())};q.prototype.Subscribe=function(e){this.$observer.registerSubscribe({[e.listenTo]:{[e.original]:[e]}})};q.prototype.Node=function(e){return new Gi(e)};q.prototype._bindHandlers=function(){for(let e in this.handlers)if(this.handlers.hasOwnProperty(e)){let t=this.handlers[e],n=t.name;t=t.bind(this),t.original=n,t.binded=this.name,this.handlers[n]=t,this.initAwaitHandlers(e)}this.await.destroy||(this.await.destroy=Promise.resolve()),this.await.animateRemove||(this.await.animateRemove=Promise.resolve())};q.prototype.initAwaitHandlers=function(e){this.await[e]=Promise.resolve()};q.prototype._bindSubscribe=function(){let e={};for(let t in this.subscribe)if(this.subscribe.hasOwnProperty(t)){if(subscribe=this.subscribe[t],!!subscribe.components&&!subscribe.handler)throw new Error(`there is no handler in format many of subscribe in event ${t}`);if(!subscribe.components&&!!subscribe.handler)throw new Error(`there is no components in format many of subscribe in event ${t}`);if(!!subscribe.components&&!!subscribe.handler){let i=t,r=subscribe.components,s=subscribe.handler;s=s.bind(this),s.binded=this.name,s.original=i;for(let a=0;a<r.length;a++){let c=r[a];e[c]||(e[c]={}),e[c][i]||(e[c][i]={}),s.listenTo=c,e[c][i]=s}}else{e[t]||(e[t]={});let i=subscribe;for(let r in i)if(i.hasOwnProperty(r)){let s=i[r],a=s.name;try{s=s.bind(this)}catch(c){}s.original=a,s.binded=this.name,s.listenTo=t,e[t][a]||(e[t][a]={}),e[t][a]=s}}}this.subscribe=e};q.prototype.getHTML=function(){return this.html};q.prototype.doFor=function(e,t){if(t!=null)return this.$attrib.notifyFor(e,t,null,this.name,this.getHTML())};q.prototype.doToggle=function(e,t){this.$attrib.notifyToggle(e,t,null,this.name,this.html)};q.prototype.doSwitch=function(e,t){this.$attrib.notifySwitch(e,t,null,this.name,this.html)};q.prototype.doIf=function(e,t){this.$attrib.notifyIf(e,t,null,this.name,this.html)};q.prototype.$animate=function(e){let t=this.$attrib.getWatchItemsByType(this.name,"animate"),n=this.animateOptions,i=[];return(()=>{if(!(!t.length&&!(t instanceof Array)||!n))for(let r=0;r<t.length;r++){let s=t[r],a=s.ns,c=s.selector;if(s.ns){if(n[a]){let u=n[a];Object.assign(s,n[a]),delete n[a]}}else i.push(t)}})(),t.length?((()=>{let r={},s={};for(let a in n)n.hasOwnProperty(a)&&(s.val=a,r.selector=s,Object.assign(r,n[a]),t.push(r),r={},s={})})(),new Xi(t,this.html).animate(e)):!1};q.prototype.$templating=function(e,t,n){let i=t||this.template;return new Yi(Zi("templating")).createElement(e,i,n)};q.prototype.createElement=function(){if(!(this.template.substring(0,1)=="#"))return;let t=this.template.substr(1),n=document.getElementById(t),i=this.isTemplate=n&&n.toString().includes("Template");if(!n)throw new Error(`the template for ${this.name} is not found with.`);return new Promise(r=>{switch(i){case!0:{let s=n.getContent(!0);if(!s)throw new Error(`it might be theres no template in component - ${this.name}`);s.cake_component=this.name,this.html=this.Node(s),this._parseHTML(this.isStatic).then(()=>{r()})}break;case null:r();break;default:{let s=n;if(!s)throw new Error(`it might be theres no template in component - ${this.name}`);s.cake_component=this.name,this.html=this.Node(s),this.isStatic=!0,this._parseHTML(this.isStatic).then(()=>{r()})}}})};q.prototype.createElementAsync=function(){return new Promise(e=>{this.createElement().then(()=>{e()})}).then(()=>{this.isReady=!0})};q.prototype._isParsed=!1;q.prototype._parseHTML=function(e=!1){return this.$attrib.inject(this.html,this.name,e).then(()=>{this.original=this.html.cloneNode(),this._isParsed=!0})};q.prototype.renderQue=function(e={}){if(e.id==null&&e.id!=null)throw new Error("renderQue method requires an id.");let n=e.id;return n&&(e.hasqued=!0,this.renderQueing.push({date:new Date().toString(),id:n,options:e})),this.render(e)};q.prototype.initialize=function(){if(this.type=="model")return this.fire.initialize();throw new Error("initialize handler is for type model.")};q.prototype.render=function(e={}){let t=this.options.multiple;if(this.name=="letter_head"&&console.log(428,"start rendering letter head"),e.hasqued||this.isConnected&&!t&&console.error(`${this.name} is already rendered and connected to the DOM`),this.name=="letter_head"&&console.log(429,"start rendering letter head"),e.revokeque&&(this.await.destroy=Promise.resolve()),this.name=="letter_head"&&console.log(430,"start rendering letter head"),this.isConnected&&!t)return Promise.resolve();this.name=="letter_head"&&console.log(440,"start rendering letter head");let n=e.root||this.root,i=e.cleaned,r=e.emit||{},s=e.data||{},a=e.css;if(typeof n=="string"){let h=`${n}:not(.cake-template)`;n=[document.querySelector(h)]}let c=this.state||{},u={emit:r};return this.isConnected=!0,new Promise((h,d)=>{this.name=="letter_head"&&console.log(441,"start rendering letter head"),this.isReady?h():this.createElement().then(()=>!this.template&&this.fire.isConnected&&this.fire.isConnected(u,!0)).then(()=>{this.isReady=!0,h()})}).then(()=>(this.name=="letter_head"&&console.log(442,"start rendering letter head"),this.await.destroy.then(()=>this.await.animateRemove).then(()=>new Promise(async(h,d)=>{if(this.name=="letter_head"&&console.log(443,"start rendering letter head"),this.options.onRender&&this.options.onRender.constructor&&["Function","AsyncFunction"].includes(this.options.onRender.constructor.name)){this.onRenderConfig=await this.options.onRender.bind(this)(this);let g=this.onRenderConfig.data;g&&(s=Object.assign(s,g))}this.name=="letter_head"&&console.log(444,"start rendering letter head");let m=await this.$attrib.getWatchItems(this.name);await Promise.all(m.map(g=>{if(s[g])return this.$attrib.notifier(g,s[g],null,this.name)})).then(()=>{a&&this.html.css(a),h(this.html)})}).then(h=>(u={element:h,emit:r},new Promise((d,m)=>{try{this.fire.beforeConnected&&this.fire.beforeConnected(u,!0),d(h)}catch(g){m(g)}}))).then(h=>{if(!this.isStatic)return(s?(()=>new Promise(m=>{let g=h.getElement();g=this.$templating(s,g),this.html=h=this.Node(g),this.html.replaceDataSrc(),s=null,m()}))():Promise.resolve()).then(()=>this._animatecss("render")).then(()=>(this.name=="letter_head"&&console.log(614,n,h),h.appendTo(n,i),!0))}).then(()=>this.findRouterLink()).then(()=>{}).then(()=>this.findContainer()).then(()=>{try{return this.fire.isConnected&&this.fire.isConnected(u,!0)}catch(h){console.log(440,h)}}).then(()=>this.findTarget()).then(()=>this.addEvent()).then(()=>this.$animate("render")).then(()=>(t&&this._smoothReset(),new Promise((h,d)=>{setTimeout(()=>{this._watchReactive(),h()},100)}))))))};q.prototype._animatecss=function(e){try{if(!this.animatecss)return Promise.resolve();let t=this.animatecss[e];return t?Promise.all(Object.keys(t).map(n=>{let i="animate__animated,";i+=t[n];let r=this.html.querySelectorAllIncluded(null,"data-animatecss",n);return r?Promise.all(r.map(s=>{let a=s.classList;for(let c=0;c<a;c++){let u=a[c];u.includes("animate_")&&s.classList.remove(u)}return i.split(",").forEach(c=>{s.classList.add(c.trim())}),s.style.setProperty("--animate-duration","0.3s"),new Promise((c,u)=>{setTimeout(()=>{c()},500)})})):Promise.resolve()})):Promise.resolve()}catch(t){return console.error(t),Promise.resolve()}};q.prototype.renderAsync=function(e){this.render(e).then(()=>{this.$persist.append(this.name)})};q.prototype._smoothReset=function(){this.html=this.original.cloneNode()};q.prototype._hardReset=function(e){return this.$persist.remove(e),this.html=this.original.cloneNode(),!0};q.prototype.reset=function(e={}){if(e.id==null&&e.id!=null)throw new Error("renderQue method requires an id.");let n=e.id,i;n&&(i=this.renderQueing.filter(s=>s.id==n),this.renderQueing=JSON.parse(JSON.stringify(this.renderQueing)).filter(s=>s.id!=n));let r=this.$animate("remove");return r instanceof Promise?this.await.animateRemove=new Promise(s=>{r.then(()=>this.html.remove()).then(()=>{this.container={}}).then(()=>this.clearState()).then(()=>this._hardReset(this.name)).then(()=>{s()}).then(()=>{if(this.isConnected=!1,this.renderQueing&&this.renderQueing.length&&i){let a=i.options;return a||(a={}),a.revokeque=!0,this.render(a)}})}):new Promise(s=>{this.html.remove(this.name),this.clearState(),this.container={},this._hardReset(this.name),this.isConnected=!1,s()}).then(()=>{if(this.renderQueing&&this.renderQueing.length&&i){let s=i.options;return s||(s={}),s.revokeque=!0,this.render(s)}})};q.prototype.addEvent=function(e,t){let n=this.name;function i(r,s,a,c){return function(u){a||u.preventDefault(),c&&u.stopPropagation(),Cake.Observer.notify(s,r,u)}}if(!!this.targets){for(let r in this.targets)if(this.targets.hasOwnProperty(r)){let s=this.targets[r];for(let a of s){let c=a.sel,u=a.el,h=a.cb,d=r,m=r.substring(0,2),g=m.includes("~"),f=m.includes("^");g||f?(d=r.slice(1),h=h||d):h||(h=r),u.Ref().get("__cake__events")||u.Ref().set("__cake__events",{});let p=u.Ref().get("__cake__events");if(!p[h])u.addEventListener(d,i(h,n,g,f),!0),p[h]=!0,u.Ref().set("__cake__events",p);else continue}}}};q.prototype.findTarget=function(){let e=this.$attrib.getEventTarget(this.name);return new Promise(t=>{for(let n of e){let i=this.html.querySelectorAllIncluded(`[data-event=${n.sel}]`);for(let r=0;r<i.length;r++)this.targets[n.event]||(this.targets[n.event]=[]),this.targets[n.event].push(B({el:i[r]},n))}t()})};q.prototype.findRouterLink=function(){let e=this.$attrib.getRouterTarget(this.name);if(e&&e.length)for(let t=0;t<e.length;t++){let n=e[t];if(n.for==!1){let i=n.sel,r=n.bind,s=Vi.get(r);if(s){let a=this.html.querySelector(`[data-route=${i}]`);a&&(a.href=`#!${s.path}`)}continue}else continue}};q.prototype.toggler=function(e){let t=this.$attrib.getWatchItemsByType(this.name,"toggle"),n=class{constructor(r,s,a,c){this.toggle=c.toggle,this.bind=r,this.bases=s,this.cache=c.$cache,this.html=a}check(r){let s=this.toggle[r];if(!s)console.error(`${r} is not found in toggle! choose from ${JSON.stringify(Object.keys(this.toggle))}`);else{if(t.length){let a=s.ns,c=t.find(u=>u.name==`ns-${a}`);c&&(s.sel=`[data-toggle=${c.sel}]`)}return s}}_toggle(){let r=this.check(this.bind);if(!r)return;let s=r.basis||"data-name",a=r.cls||"is-active",c=r.mode||"radio",u=r.sel,h=r.persist==null?!0:r.persist,d=this.html.querySelectorAll(u);if(!d.length)return;let m,g;if(d.length==1){let f=typeof this.bases=="boolean",p=!!this.bases,y=d[0];if(h){let b=function(v,w,S){S?v.classList.contains(w)&&v.classList.remove(w):v.classList.contains(w)||v.classList.add(w)};f?(p?(this.cache.createOrUpdate(this.bind,!0),b(y,a,!0)):(this.cache.createOrUpdate(this.bind,!1),b(y,a,!1)),y.classList.toggle(a)):(this.cache.createOrUpdate(this.bind,!y.classList.contains(a)),y.classList.toggle(a))}}else for(let f=0;f<d.length;f++){let p=d[f],y=p.classList.contains(a),b=p.getAttribute(s);b==this.bases?(c=="switch"?p.classList.toggle(a):y||p.classList.add(a),h&&this.cache.createOrUpdate(this.bind,b),g=b):y&&(p.classList.remove(a),m=p.getAttribute(s))}return{prev:m,next:g}}_recall(){let r=this.check(this.bind);if(!r)return;let s=r.basis||"data-name",a=r.cls||"is-active",c=r.sel;return this.cache.get(this.bind).then(u=>{if(!u)return u;let h=u,d=this.html.querySelectorAll(c);if(!!d.length){if(d.length==1){let m=d[0];h&&m.classList.add(a)}else for(let m=0;m<d.length;m++){let g=d[m],f=g.classList.contains(a);g.getAttribute(s)==h&&(f||g.classList.add(a))}return h}})}_get(){if(!!this.check(this.bind))return this.cache.get(this.bind).then(s=>s)}},i=(r,s)=>new n(r,s,this.html,this)._toggle();return i.recall=r=>new n(r,!1,this.html,this)._recall(),i.get=r=>new n(r,!1,this.html,this)._get(),i};q.prototype.findContainer=function(){return new Promise(e=>{try{let t=this.html.getContainers();for(let n=0;n<t.length;n++){let i=t[n],r=i.dataset.container;r&&(this.container[r]?jt.isArray(this.container[r])?this.container[r].push(i):this.container[r]=[this.container[r],i]:this.container[r]=i)}e()}catch(t){console.log(895,t)}})};q.prototype._validator=function(e,t){if(this.options.validate){this.validate=this.options.validate;let n=this.validate[e]}};q.prototype._watchReactive=function(){if(this.role=="form"&&this.options.watch===!0){let e=this.options.validate,t=this.$form();if(!t||t&&t._reactive)return;this.state&&!this.state.formData&&(this.state.formData={});let n=this,i=r=>{let s=r.target,a=s.name||s.id,c=s.value,u=e[a];u?(u=u.bind(n),u&&u(r)&&(this.state&&(this.state.formData[a]=c),this.$scope.set(a,c))):(this.state&&(this.state.formData[a]=c),this.$scope.set(a,c))};t.addEventListener("change",r=>{r.target.tagName=="INPUT"||r.target.tagName=="TEXTAREA"||i(r)}),t.addEventListener("input",r=>{(r.target.tagName=="INPUT"||r.target.tagName=="TEXTAREA")&&i(r)}),t._reactive=!0}};q.prototype.observer=function(e){function t(n){return this.handler[n]}this.observer=new Observer(this,e,t.bind(this))};q.prototype.variable=function(e){let t=Object.keys(e),n={},i=[];function r(s,a,c){a||(n[s]=`value is not '${c}'`)}for(let s in e)if(e.hasOwnProperty(s)){let a=e[s],c=a.type,u=a.value,h;["string","number"].includes(c)?h=typeof u==c:u instanceof Array?h=c=="array":h=c=="object",i.push(u),r(s,h,c)}if(Object.keys(n).length)throw new Error(JSON.stringify(n));return i};xt.exports=q});var Mt=$((bn,Ut)=>{var Y=F(),er=pe()(),tr=ue(),ir=fe(),ge=new er({child:"object",storage:"local",name:"_cake_router_cf"});Ut.exports=function(e,t){let n=[];return class{constructor(i,r){this.options=r,this.unauthRoute=()=>null,this.componentConf=null,this.authValidRoute=null,this.loaderOptions=r.loader,this.authConfig=function(){if(!this.options)return;let s=this.options.auth,a=this.options.components;if(a&&(this.componentConf=a),s&&s.verify){let c=s.verify;this.verifyComponent=c[0],this.verifyComponentHandler=c[1],this.unauthRoute=s["401"]&&s["401"].constructor.name=="Function"?s["401"]:()=>s["401"]}return s&&s.valid&&(this.authValidRoute=s.valid),null}.bind(this)(),this.authRedirectRoute={},this.route=this.compile(i),this.prev=null,this.components=ir,this.watch(),this.persist(),Object.defineProperty(t.prototype,"$router",{configurable:!0,get:()=>B({goTo:this.goTo.bind(this),goBack:this.goBack.bind(this),auth:this.auth.bind(this),logout:this.logout.bind(this),login:this.login.bind(this),verify:this.verifyAuth.bind(this)},this.prev),set(s){}})}getComponent(i,r){if(this.componentConf&&this.componentConf[i]){let s=this.componentConf[i].rerender;s&&(i=s.includes(r)?i:null)}return i?this.components.get(i):null}verifyAuth(i){return e.$loaded(this.verifyComponent).then(r=>r.fire[this.verifyComponentHandler](i).then(s=>(this.isauth=s&&s.status==1,s)))}async authenticate(i,r){let s=Y.isArray(r)&&r.length&&r||null;if(!(r==!0||s))return;let a=this.unauthRoute()==i;if(this.unauthRoute())try{let c=ge.get("role",!0)||{},u=c.role,h=c.token;if(s&&!s.includes(c.role)){let m=this.goTo(this.unauthRoute(),{replace:!0});m&&m.isredirected||location.reload();return}if((await this.verifyAuth(h)).status==0&&(this.logout(),location.reload()),c){if(a){let m=c.role,g=c.data,f=this.authRedirectRoute[m];if(f){let p=f.name;this.goTo(p)}}}else a||this.logout()}catch(c){alert(JSON.stringify(c.message||c)),a||this.logout()}}login(i,r){let s=i.role,a=i.token,c=i.data,u=ge.createOrUpdate("role",{role:s,token:a,data:c}),h=r&&r.path,d=r&&r.config;if(!s)throw new Error("role is not provided in router.login");if(!a)throw new Error("token is not provided in router.login");if(!c)throw new Error("data is not provided in router.login");if(!h)if(this.authValidRoute&&this.authValidRoute[s])h=this.authValidRoute[s];else throw new Error("provide route when login is successful");this.goTo(h,d)}auth(){let i=ge.get("role",!0);return i||{}}logout(i){try{ge.remove("role")}catch(r){}i||setTimeout(()=>{this.goTo(this.unauthRoute(),{replace:!0})},200)}goTo(i,r={}){try{let a=this.route,c=r.params||{},u=r.replace,h=null,d=Object.entries(a);if(!i){let f=ge.get("role",!0).role,p=this.authValidRoute[f];p&&(i=p.name||p)}if(!i)throw new Error("provide routename");for(let g=0;g<d.length;g++){let f=d[g][0];if(d[g][1].name==i){h=f;break}}if(!h){if(i&&i.includes("://"))return location.href=i,{isredirected:!0};throw new Error(`${i} is not found in routes`)}if(h=="/"){u?location.replace(`${location.origin}${location.pathname}`):window.location=`${location.origin}${location.pathname}`;return}let m;if(h=h.slice(1),c.toString().includes("Object")){let g="";for(let f in c)g+=`${f}=${c[f]}&`;c=g,m=`!/${h}?${c}`}else m=`!/${h}`;if(h=="/"&&(m=""),u){let g=`${location.origin}${location.pathname}#${m}`;console.log(276,Y.isChrome()&&!Y.isFirefox(),g),Y.isChrome()&&!Y.isFirefox()&&history.replaceState(void 0,void 0,g),location.replace(g)}else{var s=document.createElement("a");s.href=`#${m}`,Y.isChrome()&&!Y.isFirefox()&&history.pushState(void 0,void 0,s.href),s.click()}}catch(a){console.log(a)}}goBack(){return new Promise((i,r)=>{window.history.back(),i()})}persist(){if(!document.hasRouterPersist){let i="DOMContentLoaded";"deviceready"in document&&(i="deviceready"),document.addEventListener(i,r=>{this.parse(),this.notify().then(()=>this.navigate(!0))}),document.hasRouterPersist=!0}}watch(){window.hasRouterPop?this.parse():(window.addEventListener("popstate",i=>{this.parse(),this.notify().then(()=>this.clear().then(()=>this.navigate().then(()=>{})))}),window.hasRouterPop=!0)}compile(i){let r={};for(let s in i){let a=i[s];s=String(s);let c=s.length,u=s;["404"].includes(s)?a={callback:i[s],name:s}:u=u.slice(1),u=u.split("/"),u=u.map((h,d)=>{let m=h.includes(":"),g="";if(d==0?g+="^/":g+="/",m?g+="(([^/#?]+?))":g+=h,d==c-1?g+="/?$":g+="",m){let f=h.replace(":","");r[s]||(r[s]={}),r[s].params={[f]:d}}return g}),r[s]&&r[s].params?r[s]=B({params:r[s].params,regex:new RegExp(u.join(""))},a):r[s]=B({regex:new RegExp(u.join(""))},a),this.authValidRoute&&Y.each(this.authValidRoute,function(h,d){let m=h.key,g=h.value;g==a.name&&(this.authRedirectRoute[g]?(this.authRedirectRoute[g]=a,console.error(`auth ${g} is found in other route`)):this.authRedirectRoute[g]=a)}.bind(this)),tr.set(s,r[s])}return r.length=Object.keys(i).length,r.keys=Object.keys(i),r}parse(){let i=window.location.hash,r,s;if(i){let f=i.includes("#!/"),p=i.includes("#/");if(f||p){r=!0,f?i=i.split("#!").join(""):p&&(r=!0,i=i.split("#").join(""));let y="",b="";for(let v=0;v<i.length;v++){let w=i[v];w=="/"&&b=="/"||(w=="/"&&!b&&(b="/",y+="/"),w&&w!="/"&&(y+=w,b=""))}i=y,y=""}}else i="/",r=!0;if(!r)return;let a=new URL(`http://localhost${i}`),c=a.search,u=a.pathname,h=this.route.keys,d={},m={};c&&new URLSearchParams(c).forEach((f,p)=>{d[p]=f});let g=!1;for(let f=0;f<h.length;f++){let p=this.route[h[f]],y=p.regex,b=p.components,v=p.params,w=p.name,S=p.auth,_=p.overlay,C=p.display,E=p.onrender,L=p.controller;if(v){let P=String(u);P=P.slice(1),P=P.split("/"),Object.entries(v).forEach(k=>{let A=k[0],Q=k[1];P[Q]&&(m[A]=P[Q])})}if(y.test(u)){s=w,this.authenticate(s,S),this.prev={components:b,params:m,state:d,path:u,name:w,prev:this.prev,overlay:_,display:C,onrender:E,controller:L},g=!0;break}}this.redirect404(g)}redirect404(i){if(!i&&this.route["404"]){let r=this.route["404"].callback(),s=location.origin,a=location.pathname;this.route[r]?(r=="/"?r=`${s}${a}`:a.slice(-1)=="/"?r=`${s}${a}#!${r}`:r=`${s}${a}/#!${r}`,location.replace(r)):!!r&&!this.route[r]&&(s.slice(-1)=="/"&&r[0]=="/"&&(r=r.slice(1)),r=`${s}${r}`,location.replace(r))}}async navigate(i){if(this.prev){let r=[...this.prev.components],s=this.prev.state,a=this.prev.path,c=this.prev.name,u=this.prev.overlay,h=this.prev.onrender||{};if(this.loaderOptions&&this.loaderOptions.except&&!this.loaderOptions.except.includes(c)){let d=this.loaderOptions.in,m=this.loaderOptions.out;typeof d=="string"&&typeof m=="string"&&(r.unshift(d),r.push(m))}try{if(r.length)return new Promise((d,m)=>{let g=r.length,f=0;if(g){let p=()=>{let y=r[f];if(r.length>f){f+=1;let b=y,v=this.getComponent(y,a);new Promise(w=>{let S=this.components.get(y);S&&S.isConnected!=null?w(S):setTimeout(()=>{w(this.components.get(y))},50)}).then(w=>{if(w||(w=e[b]),w)if(w.isConnected&&!v)w.fire.softReload?(w.fire.softReload(),w.await.softReload&&w.await.softReload.then(()=>{p()})):p();else if(w.type=="model")w.initialize().then(()=>{p()}).catch(S=>{throw S});else{let S=h[b]||{},_=w.onRenderConfig||{};Y.isObject(_)||(_={}),Y.isObject(S)||(S={}),w.render(B(B({emit:{route:this.prev}},S),_)).then(()=>{w.await.isConnected?w.await.isConnected&&w.await.isConnected.then(()=>{p()}):p()}).catch(C=>{throw C})}})}else d()};p()}else d()})}catch(d){throw console.log(d),new Error(`some of the component in ${JSON.stringify(r)} in path ${a} of router is not found, make sure the it is created`)}}}static pushState(i,r,s){window.history.pushState(i,r,s);let a=Promise.resolve();if(this.prev){let c=this.prev.components,u=this.prev.state,h=this.prev.path,d=this.prev.name;a=new Promise((m,g)=>{let f=components.length,p=0;if(f){let y=async()=>{let b=components[p];components.length>p?(b=this.getComponent(b,h),b?(b.fire.destroy(),b.await.destroy.then(()=>y())):await y()):m(),p+=1};y()}else m()})}return a.then(()=>this.navigate())}clear(){let i=Promise.resolve();if(this.prev&&this.prev.overlay||void 0)return i;let s=async function(a,c,u,h){let d=c[a],m=d,g=s;try{if(c.length>a)if(a+=1,d=this.getComponent(d,this.prev.path),d){if(!d.fire.destroy)throw new Error(`${m} has no destroy handler!`);d.fire.destroy(),d.await.destroy.then(()=>g(a,c,u,h))}else await g(a,c,u,h);else h()}catch(f){throw f}}.bind(this);if(this.prev&&this.prev.prev){let a=this.prev.prev.components,c=this.prev.prev.state,u=this.prev.prev.path,h=this.prev.prev.name,d=this.prev.prev.overlay,m=Promise.resolve();return d&&(m=new Promise((g,f)=>{a.length?s(0,a,this.components,g):g()})),i=new Promise((g,f)=>{a.length?s(0,a,this.components,g):g()}),m.then(()=>i)}return i}pushState(i,r,s){window.history.pushState(i,r,s);let a=Promise.resolve();return this.clear(),a.then(()=>this.navigate())}static subscribe(i){i&&i.constructor.name=="Function"&&n.push(i)}notify(){return Promise.all(n.map(i=>i()))}}}});var Ft=$((vn,Ht)=>{var rr=pe()(),nr=fe();Ht.exports=class{constructor(){this.storage=new rr({child:"array",storage:"session",name:"_cake_persistent"})}listen(e){e=nr;let t="DOMContentLoaded";"deviceready"in document&&(t="deviceready"),window.addEventListener(t,n=>{setTimeout(()=>{this.storage.getAll().then(i=>{if(!!(i&&!i.length))for(let r=0;r<i.length;r++){let s=i[r],a=e.get(s);a.isConnected=!1,a?!a.isConnected&&a.render.bind(a)():console.error(`component ${a} is not found!`)}})})})}append(e){this.storage.create(e)}remove(e){this.storage.remove(e)}}});var we=$((wn,Bt)=>{var ie={handlers:{},subscribe:{}};window.Stat=ie;function Dt(e,t,n){return e[t]==null&&(e[t]={}),e[t][n]==null?e[t][n]=0:e[t][n]+=1,!0}Bt.exports={handlers:{set:function(e,t){return Dt(ie.handlers,e,t)},get:function(e){ie.handlers[e]!=null?console.table(ie.handlers[e]):console.log(null)}},subscribe:{set:function(e,t){return Dt(ie.subscribe,e,t)},get:function(e){ie.subscribe[e]!=null?console.table(ie.subscribe[e]):console.log(null)}}}});var Ne=$((Sn,Jt)=>{var sr=we(),ee={};window.Subscribe=ee;Jt.exports={set:function(e){return new Promise((t,n)=>{for(component in e)if(e.hasOwnProperty(component)){let i=e[component];for(let r in i)if(i.hasOwnProperty(r)){let s=i[r];ee[component]||(ee[component]={}),ee[component][r]||(ee[component][r]=[]),ee[component][r].push(s),sr.subscribe.set(component,s.original)}}t()})},get:function(e,t){return ee[e]&&ee[e][t]}}});var Ue=$((_n,Wt)=>{var or=we(),le={};window.Handler=le;Wt.exports={set:function(e,t){return new Promise(n=>{for(let i in e)if(e.hasOwnProperty(i)){let r=e[i];le[t]||(le[t]={}),le[t][r.original]=r,or.handlers.set(t,r.original)}n()})},get:function(e,t){return le[e]&&le[e][t]}}});var Xt=$((On,Kt)=>{var lr=Ne(),ar=Ue(),Qt=we();function zt(e){this.logger=e||!1,this.results={}}zt.prototype.notify=function(e,t,n){let i=e,r=t,s=n,a=ar.get(i,r);if(!a){console.error(`no setup handler for the event ${r} in ${i} component`);return}i=a.binded;let c=new Promise((u,h)=>{let d=a(s);u(d)});return Qt.handlers.set(i,a.original),c.then(u=>{let h=[];this.results[i]||(this.results[i]={});let d=lr.get(i,r);if(d)for(let m=0;m<d.length;m++){let g=d[m];Qt.subscribe.set(i,g.original),h.push(new Promise((f,p)=>{try{let y=(()=>g(u))();y&&y.ObjectType=="Promise"?y.then(b=>{this.results[i]||(this.results[i]={}),this.results[i][r]=b,f(b)}).catch(b=>{p(b)}):(this.results[i][r]=y,f(y))}catch(y){console.log(y),p(y)}}))}else this.logger&&console.info(`no subscriber for (${r}) event of (${i}) component`),this.results[i][r]=u;return Promise.all(h).then(()=>(u=null,h=[],!0))})};Kt.exports=zt});var Yt=$((Cn,Gt)=>{Gt.exports=function(e){class t{constructor(r){this.type=r,this.storage={}}store(r,s){this.storage[r]=s}get options(){if(this.type=="select"||this.type=="virtual"){let r={};for(let s in this.storage){let a=this.storage[s];r[s]=a.options}return r}return!1}get value(){if(this.type=="input"){let r="";for(let s in this.storage)r=this.storage[s].options[0];return r}return!1}get query(){let r={};for(let s in this.storage)r=this.storage[s].query[0]||null;return r}get has(){let r="";for(let s in this.storage)r=this.storage[s].query[0]||null;return r}}let n={};return n.options=i=>{let r=i.options,s=i.params;r||(r=[]);let a=r.length>1;return Promise.all(r.map(u=>{let h=u.control,d=u.field,m=u.tbl,g=u.src,f=u.schema,p=u.type;return e.fire(g,{tbl:m,field:d,params:s}).then(y=>{if(y=y||[],u.query=y,y=y.map(b=>f(b)),p!="input"){let b=f({});for(let v in b)b.hasOwnProperty(v)&&(b[v]="");y.unshift(b)}return u.options=y,u}).then(y=>{let b=y.type,v=y.control;b||(b="others");let w=new t(b);if(a){let S={};return S[v]||(S[v]=w,S[v].store(v,y)),S}else return w.store(v,y),w})})).then(u=>a?u.reduce((h,d)=>(Object.assign(h,d),h),{}):u[0]).catch(u=>{console.error(u)})},n.plot=i=>{let r=i.data,s=i.container;if(!r&&!s)return;let a=(c,u,h)=>{if(!c){console.info("root is not provided!");return}let d=c.querySelectorAll(`${u}`),m=d.length;if(!m){h(null,r);return}for(let g=0;g<m;g++){let f=d[g],p=f.name,y=r[p],b=h(f,y,g);if(b=="break")break;b!="continue"}};return a(s,"INPUT.input",function(c,u){!c||u!=null&&(c.type=="date"&&(u=new Date(u)=="Invalid Date"?"":new Date(u).toJSON().split("T")[0]),c.value=u)}),a(s,"TEXTAREA.input",function(c,u){!c||u!=null&&(c.value=u)}),setTimeout(()=>{a(s,"SELECT.input:not(.cake-template)",function(c,u){!c||a(c,"OPTION:not(.cake-template)",function(h,d,m){if(h){if(h.value==u)return c.selectedIndex=m,"break"}else console.log(h,d,"provide schema")})})},500),Promise.resolve()},n}});var ti=$((Tn,ei)=>{var cr=Pt(),Me=Lt()(),Z=Nt(),ur=Mt(),hr=Ft(),fr=pe()(),dr=Xt(),pr=Yt(),qn=F(),En=se(),gr=re(),Zt=Ne(),Vt=Ue(),mr=fe();function O(e){this.componentName=e,this.components={}}O.app=function(e){this.name=e.name||""};O.Components=function(e){return{subscribe(t,n){function i(){let r=O.Components[e];if(r&&t instanceof Function){let s=t.name;n&&(t=t.bind(n)),t.binded="external",t.original=s,t.listenTo=r.name,r.Subscribe(t)}}return new Promise((r,s)=>{let a=setInterval(()=>{O.Components[e]&&(i(),clearInterval(a),r())})})}}};O.Models={};O.plugin=gr;O.Attributes=new cr;O.Models.$loaded=function(e){return new Promise((t,n)=>{let i=setInterval(()=>{O.Models[e]&&(clearInterval(i),t(O.Models[e]))});setTimeout(()=>{O.Models[e]||(clearInterval(i),n(e))},1e4)})};O.MainMessageChannel=function(){let e=new MessageChannel;return{send(t){e.port2.postMessage(t)},receive(t){e.port1.onmessage=function(n){let i=n.data,r=n.isTrusted==null?!1:n.isTrusted;t(r?{status:1,data:i}:{status:0,err:"not trusted!"})}}}}();O.Utils={scopeTrap(e){return!1},scopeNotifier(e){return e}};O.create=function(e,t,n){new O(e,t,n).create(e,t,n)};O.init=function(e){return new Z(e)};O.Router=ur(O.Models,Z);O.Persistent=new hr;O.Persistent.listen(O.Components);O.Cache=new fr({name:"cache",storage:"session",child:"object"});O.getSubscriber=function(e,t){let n=Zt,i={};for(let r in n)if(n.hasOwnProperty(r)){let s=n[r];for(let a in s)if(s.hasOwnProperty(a)){let c=s[a];for(let u of c){let h=u,d=h.original,m=h.binded;if(h.listenTo==e){if(d==t)if(!i[m])i[m]=t;else{let f=i[m]instanceof Array?i[m]:[i[m]];i[m]=f.concat(t)}else if(!t)if(!i[m])i[m]=d;else{let f=i[m]instanceof Array?i[m]:[i[m]];i[m]=f.concat(d)}}}}}return i};O.Observer=new dr;O.prototype._defineProperty=function(e,t,n,i){Object.defineProperty(e,t,{configurable:!0,get(){return n()},set(r){i&&i(r)}})};O.prototype._defineProperty(Z.prototype,"$observer",function(){return O.Observer});O._globalScope=new Me("globalScope");O.prototype._defineProperty(Z.prototype,"$globalScope",function(){return O._globalScope});O._universalScope=new Me("universalScope");O.$universalScope=function(){return O._universalScope};O.prototype._defineProperty(Z.prototype,"$attrib",function(){return O.Attributes});O.prototype._defineProperty(Z.prototype,"$persist",function(){return O.Persistent});O.prototype._defineProperty(Z.prototype,"$cache",function(){return O.Cache});O.prototype._defineProperty(Z.prototype,"$hash",function(){return O.Hasher});O.prototype.create=function(e,t,n){let i=new Z(e,t,n),r=new Me(e);i.scope&&(()=>{for(let s in i.scope)if(i.scope.hasOwnProperty(s)){let a=i.scope[s];for(let c in a)if(a.hasOwnProperty(c)){let u=a[c],h=u.name;u=u.bind(i),r.hook(s,h,u)}}})(),r.registerNotifier(function(s,a,c,u){return O.Attributes.notifier(s,a,c,u)}),O.Attributes.registerNotifier(e,function(s,a){return r.notifier(s,a)}),i.compile.then(()=>{let s=i.subscribe,a=i.root,c=i.html,u=i.handlers,h=i.role,d=i.state;return Zt.set(s).then(()=>({root:a,handlers:u}))}).then(s=>{let a=s.handlers,c=s.root;Vt.set(a,i.name),this._defineProperty(i,"root",function(){if(i._root)return i._root;{let u=c||"#app",h=document.querySelectorAll(u);if(h)return h}throw new Error(`the selector '${c}' as container of component '${i.name}' is not found!`)},function(u){Object.assign(i,{_root:u})}),this._defineProperty(i,"$scope",function(){return r}),i.role=="form"&&(()=>{let u=pr(i),h=()=>{if(i.root.length){let d=i.root[0],m=`${i.formSelector||"FORM"}:not(.cake-template)`;return d.querySelector(m)}else return i.html.querySelectorIncluded(i.formSelector||"FORM");return null};for(let d in u)u.hasOwnProperty(d)&&Object.defineProperty(h,d,{get(){return u[d]}});this._defineProperty(i,"$form",function(){return h})})()}).then(()=>{i.fire=function(){function s(c,u){u=u?typeof u=="function"?u.bind(i)():function(){return u}.bind(i)():null;let h={[c]:()=>u};if(fn=h[c].bind(i),typeof fn=="function"){let g=function(p){let y={};if(!p)return y;let b=p.attributes;if(b)for(let v=0;v<b.length;v++){let w=b[v],S=w.name,_=w.value;y[S]=_}return y};var d=g;fn.name=c,fn.original=c,fn.binded=i.name,Vt.set({[c]:fn},i.name);let m=u;if(u&&(u.element||u.root||u.container)){let p=g(u.element),y=g(u.root),b=g(u.container);m={status:0,attributes:{element:p,root:y,container:b}}}let f=O.Observer.notify(i.name,c,{}).then(()=>O.Observer.results[i.name][c]);return i.await[c]=f,i.await[c]}console.error("the param in fire is not an instance of function")}function a(c,u){for(let h in u)if(u.hasOwnProperty(h)){let d=u[h],m=d.original,g={[m]:function(f,p){return p!=null&&(p=p),p==null&&m=="destroy"&&(p=!0),p==null&&(p=!1),p?(i.await[m]=new Promise(y=>{setTimeout(()=>{let b=f||{};O.Observer.notify(i.name,m,b).then(()=>O.Observer.results[i.name][m]).then(v=>{y(v)}).catch(v=>{console.log(447,v),console.log(448,i.name,m,b),console.trace(),console.error(v)})})}),i.await[m]):d(f)}};g[m]=g[m].bind(i),g[m].originalName=m,g[m].binded=i.name,c[m]=g[m],c.component=i.name}}return a(s,i.handlers),s}()}).then(()=>{i.type=="view"&&(i.toggler=i.toggler(i),mr.set(e,i))}).then(()=>{i.options.router&&O.Router.subscribe(i.options.router.bind(i)),i.options.data&&i.options.data.bind(i.data)(i),i.options.utils&&i.options.utils.bind(i.utils)(i),i.options.init&&i.options.init.bind(i)()}).then(()=>{i.type=="model"&&(O.Models[e]=i),i.isStatic&&i.type=="view"&&i.render()})};ei.exports=O});var $n=De(),Pn=Be(),kn=Xe(),An=F(),Ln=Ge(),Rn=re(),yr=ti();window.Cake=yr;})();
