(()=>{var I=(g,f)=>()=>(f||g((f={exports:{}}).exports,f),f.exports);var D=I(()=>{(function(g){g.env={destructure:!0};let f=g.env;try{let{a:h}={a:!0}}catch{f.destructure=!1}Promise.prototype.ObjectType="Promise"})(window)});var F=I(()=>{(function(g){HTMLCollection.prototype.toArray=function(){let f=[];for(let h=0;h<this.length;h++)f[h]=this[h];return f},NodeList.prototype.toArray=function(){let f=[],h=-1,u=this.length;for(;++h<u;)f[h]=this[h];return f},Object.cache=Object.create(null),String.prototype.toHyphen=function(){let f=Object.cache,h=null,u=this;if(f.toHyphen||(f.toHyphen={}),f[u]&&(h=f[u]),h!=null)return h;let m=u.split(""),e="",t=-1;for(;++t<m.length;){let n=m[t];switch(t){case 0:e+=n.toLowerCase();break;default:n.charCodeAt()<91&&(e+="-"),e+=n.toLowerCase()}}return f[u]=e,h=e,h},String.prototype.toCamelCase=function(){let f=this.toLowerCase(),h=Object.cache,u=null;switch(!0){case!h.toCamel:h.toCamel={};case!0:h=h.toCamel;case h[f]:u=h[f];break;default:{let m=f.split("-");if(m.length==1)return f;let e="",t=-1,n=m.length;for(;++t<n;){let a=m[t];switch(t){case 0:e+=a;default:{let s=a.substring(0,1).toUpperCase(),c=a.substring(1);e+=s+c}break}}h[f]=e,u=e}break}return u},HTMLElement.prototype.querySelectorIncluded=function(f,h,u){let m=this.querySelector(f);return m||(()=>{switch(!0){case(!h&&!u):{let e=this.closest(f);e==this&&(m=e)}break;case(!!h&&!!u):m=this.getAttribute(h)==u?this:null;break;case(!!h&&!u):m=this.getAttribute(h)?this:null;break}return m})()},HTMLElement.prototype.querySelectorAllIncluded=function(f,h,u){let m=this.querySelectorAll(f).toArray();switch(!0){case(!h&&!u):{let e=this.closest(f);e==this&&m.push(e)}break;case(h&&u):this.getAttribute(h)==u&&m.push(this);break;case(h&&!u):this.getAttribute(h)&&m.push(this);break}return m},HTMLDocument.prototype.querySelectorIncluded=function(f){return this.querySelector(f)},HTMLDocument.prototype.querySelectorAllIncluded=function(f){return this.querySelectorAll(f)},Array.prototype.toggler=function(f,h){for(let u=0;u<this.length;u++){let m=this[u];(m.dataset.name==f||m.classList.contains(h))&&m.classList.toggle(h)}},HTMLElement.prototype.Ref=function(){let f="_cakes_storage";!this[f]&&(this._cakes_storage={});let h=this[f];return{set(u,m){h[u]=m},get(u){return h[u]},getAll(u){return h},remove(u){delete h[u]}}}})(window)});var B=I(()=>{Object.keys||(Object.keys=function(g){var f=[];for(var h in g)g.hasOwnProperty(h)&&f.push(h);return f})});var K=I((xt,W)=>{var R={},H={typeof:function(g){switch(!0){case typeof g=="string":return"string";case typeof g=="number":return"number";case g instanceof Array:return"array";case g instanceof Function:return"function";case g instanceof HTMLCollection:return"htmlcollection";case g instanceof NodeList:return"htmlnodelist";case g instanceof Element:return"domlement";case g instanceof Object:return"object"}},isArray:function(g){return this.typeof(g)=="array"},isObject:function(g){return this.typeof(g)=="object"},isNumber:function(g){return this.typeof(g)=="number"},isString:function(g){return this.typeof(g)=="string"},isHTMLCollection:function(g){return this.typeof(g)=="htmlcollection"},isNodeList:function(g){return this.typeof(g)=="htmlnodelist"},isElement:function(g){return this.typeof(g)=="domlement"},isFunction:function(g){return this.typeof(g)=="function"}},x={each:function(g,f,h){if(h=="object"){var u=0;for(var m in g)g.hasOwnProperty(m)&&(f({key:m,value:g[m]},u),u=u+1)}else for(var e=0;e<g.length;e++)f(g[e],e)},map:function(g,f){var h=H.isArray(g)||g.length?"array":"object",u=g.length&&h=="array"?[]:{};return this.each(g,function(m,e){var t=f(m,e);h=="object"?u[t.key]=t.value:u.push(t)},h),u},reduce:function(g,f,h){var u=H.typeof(g);return this.each(g,function(m,e){f=h(m,f,e)},u),f},filter:function(g,f){var h=H.isArray(g)||g.length?"array":"object",u=g.length&&h=="array"?[]:{};return this.each(g,function(m,e){var t=f(m,e);t&&(h=="object"?u[m.key]=m.value:u.push(m.value))},h),u}},J={perf:function(g){console.time("test"),g(),console.timeEnd("test")},logTest:function(g,f,h){switch(f){case"==":return g==h;case"!=":return g!=h;case"<":return g<h;case">":return g>h;case">=":return g>=h;case"<=":return g<=h}},toUrlSearchParams:function(g,f=!0){let h="";for(let u in g)if(g.hasOwnProperty(u)){let m=g[u];f&&m?h+=`${encodeURI(u)}=${encodeURI(m)}&`:h+=`${encodeURI(u)}=${encodeURI(m)}&`}return h},sanitize:function(g){if(typeof g!="string")return g;let f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},h=/[&<>"'/]/ig;return g.replace(h,u=>f[u])},toFormData:function(g,f={}){let h=new FormData(g),u={},m=new FormData;for(let[e,t]of h.entries())t&&(t=this.sanitize(t)),f.json?f.trim?t&&(u[e]=t):u[e]=t:m.append(e,t);return f.json?u:m},loopStringSplitSpace:function(g,f){if(g&&(g=g.split(" "),H.isArray(g)))for(let h=0;h<g.length;h++)f(g[h])}};try{R.UTILS={...x,...H,...J}}catch{R.UTILS={},M=x.each,M(x,function(f,h){R.UTILS[f]=h}),M(H,function(f,h){R.UTILS[f]=h}),M(J,function(f,h){R.UTILS[f]=h})}var M;W.exports=R.UTILS});var z=I(()=>{(function(){customElements.define("sub-template",class extends HTMLElement{constructor(){super()}connectedCallback(){this.replace(this)}replace(g){let f=g.dataset.template,h=document.getElementsByName(f);if(h.length>1){console.error(`template with name ${f} has more than one reference.`);return}if(!h)throw g.remove(),new Error(`${f} is not found!`);if(h[0]){let u=h[0];if(u.constructor.name=="HTMLTemplateElement"){if(u=u.content.cloneNode(!0).firstElementChild,!u)return;let m=g.attributes;for(let e=0;e<m.length;e++){let t=m[e];t.name!="data-template"&&u.setAttribute(t.name,t.value)}g.replaceWith(u)}else throw new Error(`${f} is not referred to a Template Element!`)}}}),HTMLTemplateElement.prototype.replaceSubTemplate=function(g){let f=g.getElementsByTagName("sub-template");if(f){f=f.toArray();for(let h=0;h<f.length;h++){let u=f[h];customElements.get("sub-template").prototype.replace(u)}}},HTMLTemplateElement.prototype.collectContent=function(){let g=this,f=null,h=g.cloneNode(!0),u=document.createDocumentFragment(),m=h.content.querySelector("style");m&&u.appendChild(m);let e=[];for(let t=0;t<h.content.children.length;t++){let n=h.content.children[0];this.replaceSubTemplate(n),e.push(n)}return f={style:u.children[0],others:e},f},HTMLTemplateElement.prototype.parseStyle=function(g){if(!g)return!1;var f=g.textContent;if(f=f.replace(/\s/g,""),!f.length)return;let h=!1,u=!1,m=!1,e=f.split(""),t="";f="";var n=!1;for(let a=0;a<e.length;a++){let s=e[a];s=="{"&&(h=!0,u=!0),s=="}"&&(h=!1,u=!1),!h&&s!="	"&&s!="}"&&s!=" "&&s!=";"&&(t+=s),u&&s!="	"&&s!="{"&s!=" "&&(f+=s),s=="}"&&(n||(n={}),n[t]=f,t="",f="")}return n},HTMLTemplateElement.prototype.parseHTML=function(g){if(g){var f=document.createElement("HTML");for(let h=0;h<g.length;h++){let u=g[h];f.append(u)}}return f||!1},HTMLTemplateElement.prototype.getContent=function(g){let{style:f,others:h}=this.collectContent(),u=this.parseStyle(f),m=this.parseHTML(h);for(let e in u)if(u.hasOwnProperty(e)){let t=m.querySelectorAll(e),n=u[e];for(let a=0;a<t.length;a++)t[a].setAttribute("style",n)}return m=g?m.children.toArray():m.innerHTML,m.length==1?m[0]:m}})()});var G=I((Bt,X)=>{X.exports=function(){function g(r){return r.constructor.name.toLowerCase()}function f(r,i){for(let y in r)r.hasOwnProperty(y)&&i(r[y],y)}function h(r,i,y){r=Object.assign(r,{[y]:i})}function u(r){return r===null}function m(r){return r===void 0}function e(r){return g(r)=="array"}function t(r){return g(r)=="object"}var n=function(r,i){for(var y=null,v=0;v<r.length;v++){var b=r[v];if(g(i)=="object"){var S=i,w=Object.keys(i)[0],_=S[w];if(g(b)=="object"){var O=b[w]==_;if(O){y=v;break}}}else if(g(i)!="array"){var O=i==b;if(O){y=v;break}}}return y},a=function(r,i){var y=null,v=g(i);if(v=="object"){var b=Object.keys(i)[0];r[y]!=null&&r[y]==i[b]&&(y=b)}else v=="string"&&(y=i);return y},s=function(r,i){var y=null;return g(r)=="array"?y=n(r,i):g(r)=="object"&&(y=a(r,i)),y},c={create:function(r,i){if(e(r)){let y=new Set(r);g(i)=="array"?i.forEach(v=>{y.add(v)}):y.add(i),r=Array.from(y)}else t(r)&&(t(i)?f(i,function(y,v){r[v]=y}):r[i]=i);return r},createOrUpdate:function(r,i){var y=s(r,i);return g(r)=="array"?u(y)?r.includes(i):r[y]=i:g(r)=="object"&&(u(y)?t(i)?f(i,function(v,b){h(r,v,b)}):r[i]=i:r[y]=i),r},remove:function(r,i){if(g(i)=="string"){var y=s(r,i);if(g(r)=="object")delete r[y];else if(g(r)=="array"){for(var v=[],b=0;b<r.length;b++)if(b!=y)v.push(r[b]);else continue;r=v}return r}else{if(g(i)=="object")return Object.filter(r,function(S,w){var _=i[w]!=null&&i[w]==S;return!_});if(g(i)=="array")return Object.filter(r,function(S,w){var _=i.contains(w);return!_})}if(u(y))return!1},get:function(r,i){var y=g(i);if(y=="string"){var v=s(r,i);if(v==0||v)return r[v]}else{if(y=="object")return Object.filter(r,function(b,S){var w=!m(i[S])&&i[S]==b;return w});if(y=="array")return Object.filter(r,function(b,S){var w=i.contains(S);return w})}return null},getNot:function(r,i){var y=g(i);return y=="string"?Object.filter(r,function(v,b){var S=b!=i;return S}):y=="object"?Object.filter(r,function(v,b){return Object.some(i,function(S,w){var _=w==b&&S==v;return!_})}):y=="array"?Object.filter(r,function(v,b){var S=!i.contains(b);return S}):null},getAll:function(r){return r}},p=class{constructor(r,i,y){this.type=r,this.name=i,this.child=y,this.cache={},g(this.child)=="string"&&(this.child=y=="array"?[]:y=="object"?{}:!1)}init(r){return this[this.type]?(this[this.type](r),!0):!1}open(){if(this.type=="session"){var r=JSON.parse(sessionStorage[this.name]);return r[this.name]}else if(this.type=="local"){var r=JSON.parse(localStorage[this.name]);return r[this.name]}else return this.cache[this.name]}close(r){return this.child=r,this.create(),this.init(!0)}create(){this.cache[this.name]=this.child}array(){this.create()}object(){this.create()}session(r){this.create();try{sessionStorage[this.name]?r?sessionStorage.setItem(this.name,JSON.stringify(this.cache)):(sessionStorage.removeItem(this.name),sessionStorage.setItem(this.name,JSON.stringify(this.cache))):sessionStorage.setItem(this.name,JSON.stringify(this.cache))}catch{this.create()}}local(r){this.create();try{localStorage[this.name]?r?localStorage.setItem(this.name,JSON.stringify(this.cache)):(localStorage.removeItem(this.name),localStorage.setItem(this.name,JSON.stringify(this.cache))):localStorage.setItem(this.name,JSON.stringify(this.cache))}catch{this.create()}}},d=class{constructor(r){this.name=r.name,this.storageType=r.storage,this.child=r.child||"object";try{g(this.child)=="string"&&(this.child=this.child=="array"?[]:this.child=="object"?{}:null)}catch{this.storageType=="session"?sessionStorage.clear():this.storageType=="local"&&localStorage.clear(),g(this.child)=="string"&&(this.child=this.child=="array"?[]:this.child=="object"?{}:null)}if(!["array","object"].includes(g(this.child)))throw new Error("the child must be an object or array type.");this.storage=new p(this.storageType,this.name,this.child),this.storage.init()}has(r){var i=this.storage.open(),y=s(i,r);return u(y)?!1:y}get(r,i){if(i){var y=this.storage.open();return c.get(y,r)}else return new Promise((v,b)=>{setTimeout(()=>{var S=this.storage.open();v(S)})}).then(v=>c.get(v,r))}getNot(r){var i=this.storage.open();return c.getNot(i,r)}getAll(){var r=this.storage.open();return Promise.resolve(r)}update(r,i){var y=this.storage.open(),v=s(y,r);return v==0||v?(y=c.createOrUpdate(y,data),this.storage.close(y)):!1}createOrUpdate(r){if(arguments.length>1){let y=arguments[0],v=arguments[1];r={[y]:v}}var i=this.storage.open();return i=c.createOrUpdate(i,r),this.storage.close(i)}create(r){var i=this.storage.open();return i=c.create(i,r),this.storage.close(i)}remove(r){var i=this.storage.open();return i=c.remove(i,r),this.storage.close(i)}};return d}});var Q=I((Jt,Y)=>{Y.exports=function(){function g(f){this.el=g.toArray(f)}return g.toArray=function(f){let h=[];switch(!0){case f instanceof Array:h=f;break;case(f.length&&f.tagName&&f.tagName!="FORM"&&!(f instanceof Array)):for(let u=0;u<f.length;u++)h.push(f[u]);break;case!(f instanceof Array):h=[f];break}return h},g.prototype.getElements=function(){return this.el},g.prototype.getElement=function(){return this.el[0]},g.prototype.remove=function(f){let h=-1,u=this.el.length,m=document.createDocumentFragment();for(;++h<u;){let e=this.el[h];e&&m.appendChild(e)}fr=null},g.prototype.replaceDataSrc=function(){let h=this.el[0].querySelectorAll("[data-src]");for(let u=0;u<h.length;u++)el=h[u],el.setAttribute("src",el.dataset.src),el.removeAttribute("data-src")},g.cloneNode=function(f){f=f instanceof Array?f:this.toArray(f);let h=[];for(let u=0;u<f.length;u++)h.push(f[u].cloneNode(!0));return new g(h)},g.prototype.dataset=function(f,h){let u=this.el.length,m=-1;for(;++m<u&&!(this.el[m].dataset[f]&&h(this.el[m])=="break"););return!0},g.prototype.getContainers=function(){return this.getElementsByDataset("container").container},g.prototype.cloneNode=function(f){return f=this.el,g.cloneNode(f)},g.prototype.getAllElements=function(){let f=this.el.length,h=[];switch(!0){case f==1:h=this.el[0].getElementsByTagName("*").toArray();break;case f>1:{let u=-1;for(;++u<f;){let e=this.el[u].getElementsByTagName("*");if(e)for(let t=0;t<e.length;t++)h.push(e[t])}}break}return h},g.prototype.appendTo=function(f,h){if(!f&&!f.attributes)throw new TypeError(`the ${f} is not an instance of Element`);h&&(f.innerHTML="");for(let u=0;u<this.el.length;u++){let m=this.el[u];f.appendChild(m)}},g.prototype.getElementsByTagName=function(f){let h=this.el.length,u=[];switch(!0){case h==1:u=this.el[0].getElementsByTagName(id).toArray();break;case h>1:{let m=-1;for(;++m<h;){let t=this.el[m].getElementsByTagName(selector);if(t)for(let n=0;n<t.length;n++)u.push(t[n])}}break}return u},g.prototype.getElementById=function(f){let h=this.el.length,u=[];switch(!0){case h==1:u=this.el[0].getElementById(id);break;case h>1:{let m=-1;for(;++m<h;){let t=this.el[m].querySelector(selector);t&&u.push(t)}}break}return u},g.prototype.querySelectorAll=function(f){let h=this.el.length,u=[];switch(!0){case h==1:u=this.el[0].querySelectorAll(f);break;case h>1:{let m=[],e=-1;for(;++e<h;){let n=this.el[e].querySelectorAll(f);n&&(u=u.concat(n.toArra()))}}break;default:u=[]}return u},g.prototype.querySelector=function(f){let h=this.el.length,u=[];switch(!0){case h==1:u=this.el[0].querySelector(f);break;case h>1:{let m=-1;for(;++m<h;){let t=this.el[m].querySelector(f);t&&u.push(t)}}break}return u},g.prototype.querySelectorIncluded=function(f,h,u){let m=this.el.length,e=[];switch(!0){case m==1:e=this.el[0].querySelectorIncluded(f,h,u);break;case m>1:{let t=-1;for(;++t<m;){let a=this.el[t].querySelectorIncluded(f,h,u);a&&e.push(a)}}break}return e},g.prototype.querySelectorAllIncluded=function(f,h,u){let m=this.el.length,e=[];switch(!0){case m==1:e=this.el[0].querySelectorAllIncluded(f,h,u);break;case m>1:{let t=-1;for(;++t<m;){let a=this.el[t].querySelectorAllIncluded(f,h,u);a&&(e=e.concat(a.toArra()))}}break}return e},g.prototype.contains=function(f){let h=this.el.length,u=!1;switch(h==1){case!0:u=this.el[0].contains(f);break;case!1:{let m=-1;for(;++m<h;)if(this.el[m].contains(f)){u=!0;break}}break}return u},g.prototype.getElementsByDataset=function(){let f,h,u,m,e,t;for(f=arguments,o={},length=f.length,u=-1,m=-1;++u<this.el.length;)for(e=this.el[u];++m<length;)h=f[m],e.getAttribute(`data-${h}`)?o[h]=[e]:o[h]=[],t=e.querySelectorAll(`[data-${h}]`),t.length&&(o[h]=o[h].concat([...t]));return o},g}});var V=I((Wt,Z)=>{Z.exports=function(){function g(f,h,u){this.subscribe=f,this.handlers=h,this.logger=u||!1,this.stat={handlers:{},subscribe:{}},this.results={},this.wm=new WeakMap}return g.prototype.notify=function(f,h,u,m,e,t){function n(){return{_component:f,_event:h,_e:u}}function a(i){return i}let{_component:s,_event:c,_e:p}=n(),d=this.handlers[s]&&this.handlers[s][c];if(d==null&&e){let i={[c]:function(){return p}};i[c].binded=s,i[c].listenTo=t,d=i[c]}if(s=d.binded,d=d,!d){console.error(`no setup handler for the event ${c} in ${s} component`);return}let r=new Promise((i,y)=>{let v=d(p);i(v)});return this.stat.handlers[d.original]+=1,r.then(i=>{let y=[];if(this.results[s]||(this.results[s]={}),this.subscribe[s]&&this.subscribe[s][c]){let v=this.subscribe[s][c];m=m?(()=>{v=v.filter(b=>{let S=b.binded;return m.includes(S)})})():!0;for(let b=0;b<v.length;b++){let S=v[b];this.stat.subscribe[S.original]+=1,y.push(new Promise((w,_)=>{try{let O=(()=>S(i))();O&&O.ObjectType=="Promise"?O.then(k=>{this.results[s]||(this.results[s]={}),this.results[s][c]=O,w()}).catch(k=>{_(k)}):(this.results[s][c]=O,w())}catch(O){console.log(O),_(O)}}))}}else this.logger&&console.info(`no subscriber for (${c}) event of (${s}) component`),this.results[s][c]=i;return Promise.all(y).then(()=>{i=null})})},g.prototype.registerSubscribe=function(f){return new Promise((h,u)=>{for(component in f)if(f.hasOwnProperty(component))if(!this.subscribe[component])this.subscribe[component]={};else continue;h()}).then(()=>{let h={};for(component in f)if(f.hasOwnProperty(component)){let u=f[component];for(let m in u)if(u.hasOwnProperty(m)){let e=u[m];for(let t=0;t<e.length;t++){let n=e[t];h[component]||(h[component]={}),h[component][n.original]||(h[component][n.original]=[]),h[component][n.original].push(n),this.stat.subscribe[n.original]=0}}}return h}).then(h=>{for(let u in h)if(h.hasOwnProperty(u)){this.subscribe[u]||(this.subscribe[u]={});for(let m in h[u])if(h[u].hasOwnProperty(m))for(let e of h[u][m])this.subscribe[u][e.original]||(this.subscribe[u][e.original]=[]),this.subscribe[u][e.original].push(e)}h={}})},g.prototype.registerHandlers=function(f,h){this.handlers[h]||(this.handlers[h]={});for(let u in f)if(f.hasOwnProperty(u)){let m=f[u];this.handlers[h][u]=m,this.stat.handlers[m.original]=0}},g}});var et=I((Kt,tt)=>{tt.exports=function(){function g(f,h,u){this.data=f,this.template=h,this.isConvert=u}return g.prototype._getTag=function(f){return f.match(new RegExp("(?<=<)|([^/s]+)(?=>)","g"))[2]},g.prototype._bindReplace=function(f,h){for(let u in f)if(f.hasOwnProperty(u)){let m=new RegExp(`{{${u}}}`,"g");m&&(h=h.replace(m,`${f[u]}`))}return h},g.prototype._toElement=function(f,h){let u=document.createElement("template");return u.innerHTML=f,u.content.children[0]},g.prototype.createElement=function(){let f=this.template,h=this.data,u=this.isConvert;if(h){if(h instanceof Array){let m=typeof f=="string",e=m?this._getTag(f):f.tagName;f=m?f:f.outerHTML;let t=[];for(let n=0;n<h.length;n++){let a=h[n],s=this._bindReplace(a,f),c=this._toElement(s,e);u&&(c=c.outerHTML),t.push(c)}return t}else if(h instanceof Object){let m=typeof f=="string",e=m?this._getTag(f):f.tagName;f=m?f:f.outerHTML;let t=this._bindReplace(h,f),n=this._toElement(t,e);return u&&(n=n.outerHTML),n}}else{let e=typeof f=="string"?this._getTag(f):f.tagName;return this._toElement(f,e)}},g}});var rt=I((zt,it)=>{it.exports=class{constructor(g=[],f){this.html=f||document,this.cf=g,this.duration=300}animate(g){return this.config=this.parse(this.cf),new Promise(f=>{for(let h=0;h<this.config.length;h++){let u=this.config[h],{element:m}=u;if(!u[g]){f();break}let e=u[g];if(!e.options&&!(e.options&&e.options.duration)&&(e.options={duration:this.duration}),!e.keyframes&&!m)continue;let t=e.keyframes,n=0,a=[];for(let c=0;c<t.length;c++){let p=t[c];switch(!0){case typeof p=="string":a.push(this.dic(p));break;case p instanceof Object:{let{name:d,offset:r}=p;if(d&&r){let i=this.dic(d);i[i.length-1].offset=r,a.push(i)}else a.push(p)}}}t=a,a=null;let s=()=>{let c=t[n];m.animate(c,e.options||this.duration).finished.then(()=>{n<t.length-1?(n+=1,s()):(t=[],f())})};s()}})}parse(g){let f=[],h=g.length,u=-1;for(;++u<h;){let m=g[u],e=m.selector,t;switch(!0){case!!(e.val&&e.attr):t=this.html.querySelectorIncluded(`[${e.attr}=${e.val}]`,e.attr,e.val);break;case!!(e.val&&!e.attr):{let n=e.val.match(new RegExp("^[.]"))?"class":e.val.match(new RegExp("^[#]"))?"id":null,a=n?e.val.slice(1):null;t=this.html.querySelectorIncluded(e.val,n,a)}break}m.element=t,f.push(m)}return f}dic(g){return{slideOutUp:[{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"},{transform:"translate3d(0,100%,0)",visibility:"hidden",opacity:"0"}],slideOutRight:[{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"},{transform:"translate3d(100%,0,0)",visibility:"hidden",opacity:"0"}],slideOutLeft:[{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"},{transform:"translate3d(-100%,0,0)",visibility:"hidden",opacity:"0"}],slideOutDown:[{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"},{transform:"translate3d(0,-100%,0)",visibility:"hidden",opacity:"0"}],slideInUp:[{transform:"translate3d(0,100%,0)",visibility:"hidden",opacity:"0"},{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"}],slideInRight:[{transform:"translate3d(100%,0,0)",visibility:"hidden",opacity:"0"},{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"}],slideInLeft:[{transform:"translate3d(-100%,0,0)",visibility:"hidden",opacity:"0",easing:"ease-out"},{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"}],slideInDown:[{transform:"translate3d(0,-100%,0)",visibility:"hidden",opacity:"0"},{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"}],disappear:[{opacity:"1"},{opacity:"0"}],appear:[{opacity:"0"},{opacity:"1"}],flipInX:[,{offset:0,backfaceVisibility:"visible"},{transform:"perspective(400px) rotate3d(1,0,0,90deg)",opacity:"0",offset:0},{transform:"perspective(400px) rotate3d(1,0,0,-20deg)",offset:.4,easing:"ease-in"},{offset:.6,opacity:"1",transform:"perspective(400px) rotate3d(1,0,0,10deg)"},{transform:"perspective(400px) rotate3d(1,0,0,-5deg)",offset:.8},{offset:1,backfaceVisibility:"visible",transform:"perspective(400px) rotate3d(1,0,0,0)"}]}[g.trim()]||[]}}});var st=I((Xt,nt)=>{nt.exports=function(g){let f=g.StorageKit;return class{constructor(){this.storage=new f({child:"array",storage:"session",name:"_cake_persistent"})}listen(h){window.addEventListener("DOMContentLoaded",u=>{setTimeout(()=>{this.storage.getAll().then(m=>{if(!(m&&!m.length))for(let e=0;e<m.length;e++){let t=m[e],n=h[t];n.isConnected=!1,n?!n.isConnected&&n.render.bind(n)():console.error(`component ${n} is not found!`)}})})})}append(h){this.storage.create(h)}remove(h){this.storage.remove(h)}}}});var ot=I((Gt,lt)=>{lt.exports=class{constructor(g){this.Components=g}listen(){window.addEventListener("hashchange",g=>{let f=this.compare(g);this.find(f,this.notify)})}compare(g){let{oldURL:f,newURL:h}=g,u=null;if(f.length>h.length){let m=new URL(f).hash.substring(1).split("/"),e=new URL(h).hash.substring(1).split("/");for(let t=0;t<m.length;t++)if(!e.includes(m[t])){u=m[t];break}}return u}find(g,f){if(!!g)if(this.Components[g])this.Components[g].isConnected&&f(this.Components[g]);else{let h=setInterval(()=>{this.Components[g]&&(this.Components[g].isConnected&&f(this.Components[g]),clearTimeout(h))},50);setTimeout(()=>{clearTimeout(h)},5e3)}}notify(g){g.fire.destroy()}add(g){let f=location.hash;f.includes(g)||(location.hash=f+"/"+g)}remove(g){let h=location.hash.replace(g,"");location.replace(h)}}});var ct=I((Yt,at)=>{at.exports=function(g,f){let h=[];return class{constructor(u){this.route=this.compile(u),this.prev=null,this.components=g,this.watch(),this.persist(),Object.defineProperty(f.prototype,"$router",{configurable:!0,get:()=>({goTo:this.goTo,...this.prev}),set(m){}})}goTo(u,m){if(m){let e="";for(let t in m)e+=`${t}=${m[t]}&`;m=e,window.location.hash=`!/${u}?${m}`}else window.location.hash=`!/${u}`}persist(){document.hasRouterPersist||(document.addEventListener("DOMContentLoaded",u=>{this.navigate(!0)}),document.hasRouterPersist=!0)}watch(){window.hasRouterPop||(window.onpopstate=u=>{this.clear().then(()=>{this.navigate()})},window.hasRouterPop=!0)}compile(u){let m={};for(let e in u){let t=e.length,n=String(e);n=n.slice(1),n=n.split("/"),n=n.map((a,s)=>{let c=a.includes(":"),p="";if(s==0?p+="^/":p+="/",c?p+="(([^/#?]+?))":p+=a,s==t-1?p+="/?$":p+="",c){let d=a.replace(":","");m[e]||(m[e]={}),m[e].params={[d]:s}}return p}),m[e]&&m[e].params?m[e]={params:m[e].params,regex:new RegExp(n.join("")),...u[e]}:m[e]={regex:new RegExp(n.join("")),...u[e]}}return m.length=Object.keys(u).length,m.keys=Object.keys(u),m}navigate(u){let m=window.location.hash,e;if(m?(e=m.includes("#!/")?2:m.includes("#/")?1:null,m=m.slice(e)):(m="/",e=!0),!e)return;let t=new URL(`http://localhost${m}`),{search:n,pathname:a}=t,s=this.route.keys,c={};n&&new URLSearchParams(n).forEach((p,d)=>{c[d]=p});for(let p=0;p<s.length;p++){let d=this.route[s[p]],{regex:r,components:i,params:y,name:v}=d;if(y){let S=String(a);S=S.slice(1),S=S.split("/"),Object.entries(y).forEach(w=>{let[_,O]=w;S[O]&&(c[_]=S[O])})}if(r.test(a)){this.prev={components:i,state:c,path:a,name:v};break}}if(this.prev){let{components:p,state:d,path:r,name:i}=this.prev;try{return Promise.all(h.map(y=>y())).then(()=>{if(p.length)return Promise.all(p.map(y=>this.components[y].render({emit:{data:this.prev}})))})}catch{throw new Error(`some of the component in ${JSON.stringify(p)} in path ${r} of router is not found, make sure the it is created`)}}}static pushState(u,m,e){window.history.pushState(u,m,e);let t=Promise.resolve();if(this.prev){let{components:n,state:a,path:s,name:c}=this.prev;t=Promise.all(n.map(p=>g[p].fire.destroy()))}return t.then(()=>this.navigate())}clear(){let u=Promise.resolve();if(this.prev){let{components:m,state:e,path:t,name:n}=this.prev;u=Promise.all(m.map(a=>g[a].fire.destroy?g[a].fire.destroy():(console.error(`there is no destroy handler in "${a}" component`),Promise.resolve())))}return u}pushState(u,m,e){window.history.pushState(u,m,e);let t=Promise.resolve();return this.clear(),t.then(()=>this.navigate())}static subscribe(u){u&&u.constructor.name=="Function"&&h.push(u)}}}});var ft=I((Qt,ht)=>{ht.exports=function(){let g=this;this.$form={},this.$form.options=(f,h)=>{let{options:u,params:m}=f;return u||(u=[]),Promise.all(u.map(t=>{let{control:n,field:a,tbl:s,src:c,schema:p}=t;return g.fire(c,{tbl:s,field:a,params:m}).then(d=>{d=d||[],t.query=d,d=d.map(i=>p(i));let r=p({});for(let i in r)r.hasOwnProperty(i)&&(r[i]="");return d.unshift(r),t.options=d,t})})).then(t=>h?t.reduce((n,a)=>{let{type:s,control:c}=a;return s||(s="select"),n[s]||(n[s]={}),n[s][c]||(n[s][c]=a),n},{}):t.reduce((n,a)=>(n[a.control]=a.options,n),{})).catch(t=>{console.error(t)})},this.$form.plot=f=>{let{data:h,container:u}=f;if(!h&&!u)return;let m=(e,t,n)=>{if(!e){console.info("root is not provided!");return}let a=e.querySelectorAll(`${t}`),s=a.length;if(!s){n(null,h);return}for(let c=0;c<s;c++){let p=a[c],d=p.name,r=h[d],i=n(p,r,c);if(i=="break")break;i!="continue"}};return m(u,"INPUT.input",function(e,t){t!=null&&(e.type=="date"&&(t=new Date(t)=="Invalid Date"?"":new Date(t).toJSON().split("T")[0]),e.value=t)}),setTimeout(()=>{m(u,"SELECT.input:not(.cake-template)",function(e,t){m(e,"OPTION:not(.cake-template)",function(n,a,s){if(n){if(n.value==t)return e.selectedIndex=s,"break"}else console.log(n,a,"provide schema")})})},500),Promise.resolve()}}});var pt=I((Zt,ut)=>{ut.exports=function(g){let f=g.StorageKit,h={};class u{constructor(e){this.name=e,this.reactiveData={},this.notify=[],this.install(this.name),this.pKeys={},this.sanitize=function(t){let n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},a=/[&<>"'/]/ig;return typeof t=="string"?t.replace(a,s=>n[s]||""):t}}registerNotifier(e){this.notify.push(e)}install(e){this.session=new f({child:"object",storage:"session",name:"_cake_scope_cf"}),this.memory=new f({child:"object",storage:"object",name:"_cake_scope_cf"})}notifier(e,t){let{value:n,bind:a}=t;return this.reactiveData[e]||(this.reactiveData[e]={}),this.reactiveData[e][a]=n,this.set(a,n)}getInputData(e="json",t){let n=t||this.name;console.log(this.reactiveData);let a=JSON.parse(JSON.stringify(this.reactiveData[n]));for(let s in a){let c=a[s];a[s]=this.sanitize(c)}if(e=="json")return a;if(e=="formdata"){let s=new FormData;for(let c in a){let p=a[c];s.append(c,p)}return s}}hook(e,t,n){h[e]||(h[e]={}),h[e][t]||(h[e][t]=[]),h[e][t].push(n)}get(e,t=!1){let n=this.pKeys[e];return n?t?this.memory.get(n,!0):this.session.get(n):Promise.reject(`${e} is not found`)}set(e,t){let n=`${this.name}-${e}`,a=this.notify,s=this.name,c=null;return this.pKeys[e]=n,new Promise(async(p,d)=>{c=await this.get(e,!0),e!="password"&&this.session.createOrUpdate(n,t),p()}).then(()=>{this.memory.createOrUpdate(n,t);let p=h[this.name];if(p){let d=p[e];d&&d.forEach(r=>{r(t)})}return Promise.all(a.map(d=>d(e,t,c,s)))})}}return u}});var gt=I((Vt,dt)=>{dt.exports=function(g){let f=g.StorageKit,h=g.Templating,u=g.Utils;function m(){this.uiid=0,this.notify={},this.st={},this.cacheStatic=[],this.store=new f({child:"object",storage:"session",name:"_cake_component_cf"})}return m.prototype._getConfig=function(e,t,n,a,s){if(n==null)return[];if(n==a&&e!="bind")return[];let c=`${e}-${t}-${s}`,p=Object.cache._getConfig;if(p||(p=Object.cache._getConfig={}),!p[c]){var d=s?(()=>{let r=this.st[s]&&this.st[s][e];return r&&r.length?r.filter(i=>{let{bind:y}=i||{bind:!1};return y==t||!1}):[]})():(()=>{let r=[];for(let i in this.st)if(this.st.hasOwnProperty(i)){let y=this.st[i];if(y[e])for(let v=0;v<y[e].length;v++){let b=y[e][v];b.bind==t&&r.push({...b,component:i})}}return r})();p[c]=d}return p[c]},m.prototype._notifyToggle=function(e,t,n,a,s){s=s||document;let c=this._getConfig("toggle",e,t,n);if(!!c){s=s||document;for(let p=0;p<c.length;p++){let d=c[p];if(!d)continue;let{sel:r,bind:i,value:y,ops:v}=d,b=s.querySelector(`[data-toggle=${r}]`);y==n&&b&&b.classList.remove("is-active"),y==t&&b&&(b.classList.contains("is-active")&&b.classList.remove("is-active"),b&&b.classList.add("is-active"))}}},m.prototype._notifySwitch=function(e,t,n,a,s){s=s||document;let c=this._getConfig("switch",e,t,n,a);if(!c.length)return;let p={};for(let d=0;d<c.length;d++){let r=c[d],{bind:i,sel:y,map:v,cases:b}=r,S=s.querySelectorAll(`[data-switch-slot=${y}]`);for(let w=0;w<t.length;w++){let _=t[w],O=S[w],k=_[v];if(k!=null){let T=null;for(let E=0;E<b.length;E++)if(b[E].bind.includes(k)){T=b[E];break}if(T){let{_id:E,bind:P}=T,$=document.querySelector(`[data-case=${y}-${E}]`);if($&&$.toString().includes("Element")){$=$.cloneNode(!0);let L=$.querySelectorAll("[data-for-auto=true]");for(let C=0;C<L.length;C++){let j=L[C];j.dataset.for=`${j.dataset.for}-active`}$.removeAttribute("data-case");let A=new h(_,$,!1).createElement();if($.dataset.if){let C=$.dataset.if,j=A.dataset.ifBind,N=r.component,{bind:q}=this.getWatchItemsBySel(N,"if",C);C&&(p[q]||(p[q]={}),p[q][j]=_)}A.classList.remove("cake-template"),O.replaceWith(A)}}}}}for(let d in p)p.hasOwnProperty(d)&&this._notifyIf(d,p[d])},m.prototype._notifyBind=function(e,t,n,a,s){s=s||document;let c=this._getConfig("bind",e,t,n,a);if(!!c.length)for(let p=0;p<c.length;p++){let d=c[p],{attr:r,bind:i,sel:y}=d,v=r.toHyphen();if(e==i){let b=s.querySelectorAll(`[data-bind=${y}]`);for(let S=0;S<b.length;S++){let w=b[S];r=="class"||r=="className"?w.classList.length?(console.log(n),u.loopStringSplitSpace(n,function(_){w.classList.remove(_)}),u.loopStringSplitSpace(t,function(_){w.classList.add(_)})):u.loopStringSplitSpace(t,function(_){w.classList.add(_)}):(w.setAttribute(v,t),w[r]=t)}}}},m.prototype._notifyInput=function(e,t,n,a,s){s=s||document;let c=this._getConfig("input",e,t,n,a);if(!!c.length)for(let p=0;p<c.length;p++){let d=c[p],{attr:r,bind:i,sel:y}=d,v=r.toHyphen();if(e==i){let b=s.querySelectorAll(`[data-input=${y}]`);for(let S=0;S<b.length;S++){let w=b[S];r=="className"?n?t?w.classList.replace(n,t):w.classList.remove(n):w.classList.add(t):(w.setAttribute(v,t),w[r]=t)}}}},m.prototype._notifyFor=function(e,t,n,a,s){let c=this._getConfig("for",e,t,n,a);if(!c.length)return;let p=[];for(let d=0;d<c.length;d++){let{bind:r,sel:i,iter:y,ins:v,component:b,cleaned:S}=c[d];s=s||document,b&&(s=Cake.Components[b].html);let w=s.querySelectorIncluded(`[data-for-template=${i}]`),_=w.cloneNode(!0);(()=>{let O=_&&_.querySelectorAll("[data-switch]");if(O&&O.length){let k=O.length,T=-1;for(;++T<k;){let E=O[T],P=E.parentElement,$=document.createElement("div");$.dataset.switchSlot=E.dataset.switch,P.replaceChild($,E)}O=null}})(),(()=>{let O=_,k=-1;l=t.length,t=t.map(T=>{for(let E in T)T.hasOwnProperty(E)&&(T[`${y}.${E}`]=T[E]);return T}),t.forEach(T=>{let E=new h(T,O,!1).createElement();E.style.removeProperty("display"),E.classList.remove("cake-template"),E.removeAttribute("data-for-template"),w.insertAdjacentElement("beforebegin",E);let P=E.querySelectorAll("[data-src]");if(P)for(let $=0;$<P.length;$++){let L=P[$];L.src=L.dataset.src,L.removeAttribute("data-src")}}),S&&w.remove()})()}this._notifyForAuto({configs:c,newValue:t})},m.prototype._notifyForAuto=function(e){let{vItems:t,configs:n,newValue:a}=e;for(let s=0;s<n.length;s++){let c=n[s],p=c.children;if(!p)continue;let d=[];for(let r=0;r<p.length;r++){let i=p[r];if(!this.st[c.component])continue;let y=this.st[c.component].for.find(v=>v.sel==i);y&&d.push(new Promise(v=>{let{bind:b,sel:S,iter:w,ins:_}=y;setTimeout(()=>{let O=document.querySelectorAll(`[data-for=${S}-active]`);for(let k=0;k<O.length;k++){let T=O[k],E=T.dataset.forBindKey,P=T.dataset.forBindVal,$=a.find(C=>C[E]==P),L=b.split(".")[b.split(".").length-1],A=$[L].length&&$[L].map(C=>C instanceof Object?C:{[w]:C});if(A)for(let C=0;C<A.length;C++){let j=A[C],N=T.cloneNode(!0),q=new h(j,N,!1).createElement();q.style.removeProperty("display"),q.classList.remove("cake-template"),q.removeAttribute("data-for-template"),fragment.append(q),T.insertAdjacentElement("beforebegin",q)}T.parentElement.tagName=="SELECT"&&(T.parentElement.selectedIndex=0)}})}))}}},m.prototype._notifyForUpdate=function(e,t,n,a,s){s=s||document;let c=this._getConfig("forUpdate",e,t,n,a);if(!!c.length)for(let p=0;p<c.length;p++){let{bind:d,sel:r,iter:i,ins:y}=c[p];for(let v in t)if(t.hasOwnProperty(v)){let b=document.querySelectorAll(`[data-for-bind-val=${v}]`);for(let S=0;S<b.length;S++){let w=b[S],_=w.dataset.forBindVal;if(!w.dataset.forTemplate)w.remove();else{let O=w.cloneNode(!0);O.style.removeProperty("display"),O.classList.remove("cake-template");let k=t[_],T=-1;for(l=k.length;++T<l;){let E=k[T],P=new h(E,O,!1).createElement();P.classList.remove("cake-template"),P.removeAttribute("data-for-template"),w.insertAdjacentElement("beforebegin",P),w.parentElement.tagName=="SELECT"&&(w.parentElement.selectedIndex=0)}}}}}},m.prototype._notifyClass=function(e,t,n,a,s){s=s||document;let c=this._getConfig("class",e,t,n,a);if(!c.length)return;let p=function(r){return r.split(" ").join("")},d={};for(let r=0;r<c.length;r++){let i=c[r],{hasNegate:y,bind:v,testVal:b,className:S,ops:w,sel:_}=i;if(v=p(v),e==v){d[_]||(d[_]=s.querySelectorAll(`[data-class=${_}]:not(.cake-template)`));let O=d[_];for(let k=0;k<O.length;k++){let T=O[k],E=!1;w?(E=u.logTest(t,w,b),y&&(E=!E)):y?E=!t:E=!!t,E?u.loopStringSplitSpace(S,function(P){T.classList.contains(P)||T.classList.add(P)}):u.loopStringSplitSpace(S,function(P){T.classList.contains(P)&&T.classList.remove(P)})}}}},m.prototype._notifyAttr=function(e,t,n,a,s){s=s||document;let c=this._getConfig("attr",e,t,n,a);if(!c.length)return;let p=function(r){return r&&r.split(" ").join("")},d={};for(let r=0;r<c.length;r++){let i=c[r],{hasNegate:y,bind:v,testVal:b,attr:S,ops:w,sel:_,attrkey:O,attrvalue:k}=i;if(v=p(v),S=p(S),e==v){d[_]||(d[_]=s.querySelectorAll(`[data-attr=${_}]:not(.cake-template)`));let T=d[_];for(let E=0;E<T.length;E++){let P=T[E],$=!1;w?($=u.logTest(t,w,b),y&&($=!$)):y?$=!t:$=!!t,$?P.removeAttribute(O):k&&P.setAttribute(O,k)}}}},m.prototype._notifyIf=function(e,t,n,a,s){s=s||document;let c=this._getConfig("if",e,t,n,a);if(!c.length)return;let p={};for(let d=0;d<c.length;d++){let r=c[d],{attr:i,bind:y,sel:v,testval:b,_true:S,_false:w,ops:_,hasNegate:O}=r,k=i.toHyphen(),T=S!="null",E=w!="null";if(e==y){p[v]||(p[v]=s.querySelectorAll(`[data-if=${v}]:not(.cake-template)`));let P=p[v];for(let $=0;$<P.length;$++){let L=P[$],A=t,C;if(b?C=u.logTest(b,_,A):C=O?!A:!!A,C){if(T)if(i=="class"){let j=S.split(" ");E?(w.split(" ").forEach(q=>{L.classList.remove(q)}),j.forEach(q=>{L.classList.add(q)})):j.forEach(N=>{L.classList.contains(N)||L.classList.add(N)})}else L.setAttribute(i,S)}else if(E)if(i=="class"){let j=w.split(" ");T?(S.split(" ").forEach(q=>{L.classList.remove(q)}),j.forEach(q=>{L.classList.add(q)})):trueClasses.forEach(N=>{L.classList.contains(N)||L.classList.add(N)})}else L.setAttribute(i,w)}}}},m.prototype.notifier=function(e,t,n,a){let s=t;return u.isObject(s)&&(s=JSON.parse(JSON.stringify(t))),new Promise(c=>{this._notifyFor(e,s,n,a),c()}).then(()=>this._notifyForUpdate(e,s,n,a)).then(()=>this._notifySwitch(e,s,n,a)).then(()=>this._notifyToggle(e,s,n,a)).then(()=>this._notifyBind(e,s,n,a)).then(()=>this._notifyInput(e,s,n,a)).then(()=>this._notifyIf(e,s,n,a)).then(()=>this._notifyClass(e,s,n,a)).then(()=>this._notifyAttr(e,s,n,a))},m.prototype.registerNotifier=function(e,t){this.notify[e]||(this.notify[e]=[]),this.notify[e].push(t)},m.prototype.getEventTarget=function(e){let t=`${e}`,n=Object.cache.getEventTarget;if(n||(n=Object.cache.getEventTarget={}),!n[t]){let a=this.st[e];n[t]=a&&(a?.evt??[])||[]}return n[t]},m.prototype.getRouterTarget=function(e){let t=`${e}`,n=Object.cache.getRouterTarget;if(n||(n=Object.cache.getRouterTarget={}),!n[t]){let a=this.st[e];n[t]=a&&(a?.router??[])||[]}return n[t]},m.prototype.getWatchItems=function(e){let t=`${e}`,n=Object.cache.getWatchItems;if(n||(n=Object.cache.getWatchItems={}),!n[t]){let a=this.st[e]||{},s=new Set;for(let c in a)if(a.hasOwnProperty(c)){let p=a[c];for(let d=0;d<p.length;d++){let r=p[d],{bind:i}=r;if(i)s.add(i);else continue}}n[t]=[...s]}return n[t]},m.prototype.getWatchItemsByType=function(e,t){let n=`${e}-${t}`,a=Object.cache.getWatchItemsByType;if(a||(a=Object.cache.getWatchItemsByType={}),!a[n]){let c=(this.st[e]||{})[t]||[],p=new Set;for(let d=0;d<c.length;d++){let r=c[d],{bind:i}=r;switch(!!i){case!0:p.add(i);break;default:switch(!0){case(t=="animate"||t=="toggle"):(p.constructor.name="Set")&&(p=[]),p.push(r)}}}a[n]=[...p]}return a[n]},m.prototype.getWatchItemsBySel=function(e,t,n){let a=`${e}-${t}-${n}`,s=Object.cache.watchItemsBySel;if(s||(s=Object.cache.watchItemsBySel={}),!s[a]){let p=this.st[e][t].find(d=>d.sel==n);s[a]=p||!1}return s[a]},m.prototype._activateReactive=e=>{},m.prototype._register=function(e,t,n,a){switch(!0){case!e[t]:e[t]={};case!e[t][n]:e[t][n]=[];default:e[t][n].push(a);break}},m.prototype._static=function(e){return function(t,n){let a=[];for(let s=0;s<t.length;s++){let c=t[s];switch(n){case!1:a.push(c);break;case!0:{let p=c.closest("[data-component]");switch(p=p&&p.dataset.component,p==e){case!0:a.push(c);break}}break;default:continue}}return a}},m.prototype._compileEvents=function(e,t,n){return new Promise(a=>{if(!e.length){a();return}let s=this._static(t)(e,n);if(!s.length){a();return}for(let c=0;c<s.length;c++){let p=`cke${this.uiid}`,d=s[c],r=d.dataset.event.split(" ").join("").split(",");for(let i=0;i<r.length;i++){let[y,v]=r[i].split(":");v=v||y,this._register(this.st,t,"evt",{event:y,sel:p,cb:v}),d.dataset.event=p,this.uiid++}}a()})},m.prototype._compileToggle=function(e,t,n){return new Promise(a=>{if(!e.length){a();return}if(!this._static(t)(e,n).length){a();return}let c={};for(let p=0;p<e.length;p++){let d=`ckt${this.uiid}`,r=e[p],i=r.dataset.toggle;c[i]&&(d=c[i]),this._register(this.st,t,"toggle",{sel:d,name:"ns-"+i}),r.dataset.toggle=d,this.uiid++,c[i]=d}c={},a()})},m.prototype._compileFor=function(e,t,n,a){return new Promise(s=>{let c=a;if(!e.length){s();return}let p=this._static(t)(e,n);if(!p.length){s();return}let d={};for(let r=0;r<p.length;r++){let i=`ckf${this.uiid}`,y=p[r],v=y.dataset.for,b=y.dataset.forCleaned=="true",[S,w,_]=v.split(" ");if(y.style.display="none",y.classList.add("cake-template"),y.dataset.for=i,y.dataset.forTemplate=i,d[i]={bind:_,sel:i,iter:S,ins:w,cleaned:b},++this.uiid,r!=0){let O=y.parentElement&&y.parentElement.closest("[data-for]");if(!O)continue;let k=!!O.dataset.for;if(c.contains(O)&&k){let T=O.dataset.for,E=d[T];E&&!E.children?E.children=[i]:E&&E.children.push(i)}}}for(let r in d)d.hasOwnProperty(r)&&this._register(this.st,t,"for",d[r]);s()})},m.prototype._compileForUpdate=function(e,t,n){return new Promise(a=>{if(!e.length){a();return}let s=this._static(t)(e,n);if(!s.length){a();return}for(let c=0;c<s.length;c++){let p=`ckfu${this.uiid}`,d=s[c],r=d.dataset.forUpdate;d.style.display="none",d.classList.add("cake-template"),d.dataset.forUpdate=p,d.dataset.for||(d.dataset.forTemplate=p);let[i,y,v]=r.split(" ");this._register(this.st,t,"forUpdate",{bind:v,sel:p,iter:i,ins:y}),this.uiid++}a()})},m.prototype._compileSwitch=function(e,t,n){return new Promise(a=>{if(!e.length){a();return}let s=this._static(t)(e,n);if(!s.length){a();return}for(let d=0;d<s.length;d++){let r=`cks${this.uiid}`,i=s[d],y=i.dataset.switch,v="def";if(y.includes(".")){var[c,...p]=i.dataset.switch.split(".");y=c,v=p[0]}i.dataset.switch=r;let b=i.querySelectorAll("[data-case]"),S=[];for(let w=0;w<b.length;w++){let _=b[w],O=_.closest(`[data-switch=${r}]`);if(_.classList.add("cake-template"),O){let k=_.dataset.case,T=`cksc${this.uiid}`;_.dataset.case=`${r}-${T}`,S.push({_id:T,bind:k}),this.uiid++}}this._register(this.st,t,"switch",{bind:y,sel:r,map:v,cases:S}),this.uiid++}a()})},m.prototype._compileBind=function(e,t,n){return new Promise(a=>{if(!e.length){a();return}let s=this._static(t)(e,n);if(!s.length){a();return}for(let d=0;d<s.length;d++){let r=`ckm${this.uiid}`,i=s[d],v=i.dataset.bind.split(",");for(let b=0;b<v.length;b++){let S=v[b].split(" ").join("");if(S.includes(":"))var[c,p]=S.split(":");else var p=S,c="value";this._register(this.st,t,"bind",{attr:c,bind:p,sel:r})}this.uiid++,i.dataset.bind=r}a()})},m.prototype._compileAnimate=function(e,t,n){return new Promise(a=>{if(!e.length){a();return}let s=this._static(t)(e,n);if(!s.length){a();return}for(let c=0;c<s.length;c++){let p=`cka${this.uiid}`,d=s[c],r=d.dataset.animate;r=r.split(" ").join("");let i={},y=r.split(",");for(let v=0;v<y.length;v++){let b=y[v],[S,w]=b.split(":");if(S=="ns"){i.ns=w;break}else i[S]={keyframes:w.split("-")}}i.selector={attr:"data-animate",val:p},this._register(this.st,t,"animate",i),this.uiid++,d.dataset.animate=p}a()})},m.prototype._compileIf=function(e,t,n){return new Promise(a=>{if(!e.length){a();return}let s=this._static(t)(e,n);if(!s.length){a();return}let c=new RegExp("<|>|===|==|!==|!=");for(let p=0;p<s.length;p++){let d=`ci${this.uiid}`,r=s[p],y=r.dataset.if.split(",");for(let v=0;v<y.length;v++){let b=y[v],S=b.substring(0,b.indexOf("=")),w=b.substring(b.indexOf("=")+1,b.length);w=w.split(new RegExp("[()]")).join("");let[_,O]=w.split("?"),k=_[0]=="!";hasRegularLog=_.match(c);let T,E,P;if(hasRegularLog){let A=_.split(c);T=A[0].trim(),E=A[1].trim(),P=hasRegularLog[0]}else T=_;k&&(T=T.slice(1));let[$,L]=O.split(":");this._register(this.st,t,"if",{hasNegate:k,attr:S,ops:P,bind:T,testval:E||null,_true:$,_false:L,sel:d})}this.uiid++,r.dataset.if=d}a()})},m.prototype._compileClass=function(e,t,n){return new Promise(a=>{if(!e.length){a();return}let s=this._static(t)(e,n);if(!s.length){a();return}let c=new RegExp("<|>|===|==|!==|!=");for(let p=0;p<s.length;p++){let d,r,i,y,v,b,S,w;d=`cc${this.uiid}`,r=s[p],i=r.dataset.class;let[_,O]=i.split("&&");if(_=_.trim(),O=O.trim(),y=_.match(c),v=_[0]=="!",y){let k=_.split(c);bind=k[0],w=k[1],S=y[0]}else bind=_;v&&v&&(bind=bind.slice(1)),this._register(this.st,t,"class",{hasNegate:v,bind,testVal:w,className:O,ops:S,sel:d}),this.uiid++,r.dataset.class=d}a()})},m.prototype._compileAttr=function(e,t,n){return new Promise(a=>{if(!e.length){a();return}let s=this._static(t)(e,n);if(!s.length){a();return}let c=new RegExp("<|>|===|==|!==|!=");for(let p=0;p<s.length;p++){let d,r,i,y,v,b,S,w;d=`cre${this.uiid}`,r=s[p],i=r.dataset.attr;let[_,O]=i.split("&&");O=O.trim();let[k,T]=O.split("=");if(_=_.trim(),y=_.match(c),v=_[0]=="!",y){let E=_.split(c);bind=E[0],w=E[1],S=y[0]}else bind=_;v&&v&&(bind=bind.slice(1)),this._register(this.st,t,"attr",{hasNegate:v,bind,testVal:w,attrkey:k,attrvalue:T,ops:S,sel:d}),this.uiid++,r.dataset.attr=d}a()})},m.prototype._compileRouter=function(e,t,n){return new Promise(a=>{if(!e.length){a();return}let s=this._static(t)(e,n);if(!s.length){a();return}for(let c=0;c<s.length;c++){let p=`rt${this.uiid}`,d=s[c],r=d.dataset.routerLink;this._register(this.st,t,"router",{value:r,sel:p}),this.uiid++,d.dataset.routerLink=p}a()})},m.prototype._compileInput=function(e,t,n){return new Promise(a=>{if(!e.length){a();return}let s=this._static(t)(e,n);if(!s.length){a();return}for(let d=0;d<s.length;d++){let r=`cknt${this.uiid}`,i=s[d],y=i.tagName,b=i.dataset.input.split(",");for(let S=0;S<b.length;S++){let w=b[S].split(" ").join("");if(w.includes(":"))var[c,p]=w.split(":");else var p=w,c="value";this._register(this.st,t,"input",{attr:c,bind:p,sel:r,nodeType:y})}this.uiid++,i.dataset.input=r}a()})},m.prototype.inject=function(e,t,n=!1){return new Promise(a=>{let s=e.getElementsByDataset("bind","for","for-update","switch","toggle","event","animate","if","class","input","attr");a(s)}).then(a=>{let s=[],c={bind:this._compileBind,for:this._compileFor,"for-update":this._compileForUpdate,switch:this._compileSwitch,toggle:this._compileToggle,event:this._compileEvents,animate:this._compileAnimate,if:this._compileIf,class:this._compileClass,input:this._compileInput,attr:this._compileAttr};for(let p in a)a.hasOwnProperty(p)&&a[p].length&&s.push(c[p].apply(this,[a[p],t,n,e]));return console.timeEnd(t),s.length?Promise.all(s):Promise.resolve()}).then(()=>Promise.resolve())},m}});var yt=I((te,mt)=>{mt.exports=function(g){let f=g.Mo,h=g.Templating,u=g.Piece,m=g.Utils,e=g.pushState;function t(n,a,s){this.name=n,this.template=a,this.options=s,this.handlers=s.handlers,this.subscribe=s.subscribe,this.data={},this.root=s.root,this.items=!1,this.type=s.type||"view",this.toggle=s.toggle,this.targets={},this.animateOptions=s.animate,this.role=s.role,this.isReady=!1,this.await={},this.utils=m,(n=="app"||s.role=="app")&&(this.staticComponent=s.static||[]),this.container={},this.compile=new Promise(c=>{this._bindHandlers(),c()}).then(()=>{this._bindSubscribe()}).then(()=>{switch(this.type=="view"&&!!this.template){case!0:return this.createElementAsync();default:this.isStatic=!1;break}})}return t.prototype.isStatic=!1,t.prototype.hasEvent=!1,t.prototype.isConnected=!1,t.prototype.destroyed=!1,t.prototype.isCreated=!1,t.prototype.Subscribe=function(n){this.$observer.registerSubscribe({[n.listenTo]:{[n.original]:[n]}})},t.prototype.Node=function(n){return new u(n)},t.prototype._bindHandlers=function(){for(let n in this.handlers)if(this.handlers.hasOwnProperty(n)){let a=this.handlers[n],s=a.name;a=a.bind(this),a.original=s,a.binded=this.name,this.handlers[s]=a,this.initAwaitHandlers(n)}this.await.destroy||(this.await.destroy=Promise.resolve()),this.await.animateRemove||(this.await.animateRemove=Promise.resolve())},t.prototype.initAwaitHandlers=function(n){this.await[n]=Promise.resolve()},t.prototype._bindSubscribe=function(){let n={};for(let a in this.subscribe)if(this.subscribe.hasOwnProperty(a))if(subscribe=this.subscribe[a],!!subscribe.components&&!!subscribe.handler){let c=a,{components:p,handler:d}=subscribe;d=d.bind(this),d.binded=this.name,d.original=c;for(let r=0;r<p.length;r++){let i=p[r];n[i]||(n[i]={}),n[i][c]||(n[i][c]=[]),d.listenTo=i,n[i][c].push(d)}}else{n[a]||(n[a]={});let c=subscribe;for(let p in c)if(c.hasOwnProperty(p)){let d=c[p],r=d.name;d=d.bind(this),d.original=r,d.binded=this.name,d.listenTo=a,n[a][r]||(n[a][r]=[]),n[a][r].push(d)}}this.subscribe=n},t.prototype.notifyStaticComponent=function(n,a,s){Cake.Observer.notify(n,a,s,this.staticComponent[n],!0,this.name)},t.prototype.doFor=function(n,a){let s=()=>this.html;a!=null&&this.$attrib._notifyFor(n,a,null,this.name,s())},t.prototype.doToggle=function(n,a){this.$attrib._notifyToggle(n,a,null,this.name,this.html)},t.prototype.doSwitch=function(n,a){this.$attrib._notifySwitch(n,a,null,this.name,this.html)},t.prototype.doIf=function(n,a){this.$attrib._notifyIf(n,a,null,this.name,this.html)},t.prototype.$animate=function(n){let a=this.$attrib.getWatchItemsByType(this.name,"animate"),s=this.animateOptions,c=[];return(()=>{if(!(!a.length&&!(a instanceof Array)||!s))for(let p=0;p<a.length;p++){let d=a[p],{ns:r,selector:i}=d;if(d.ns){if(s[r]){let y=s[r];Object.assign(d,s[r]),delete s[r]}}else c.push(a)}})(),a.length?((()=>{let p={},d={};for(let r in s)s.hasOwnProperty(r)&&(d.val=r,p.selector=d,Object.assign(p,s[r]),a.push(p),p={},d={})})(),new f(a,this.html).animate(n)):!1},t.prototype.$templating=function(n,a,s){let c=a||this.template;return new h(n,c,s).createElement()},t.prototype.createElement=function(){if(!(this.template.substring(0,1)=="#"))return;let a=this.template.substr(1),s=document.getElementById(a),c=this.isTemplate=s&&s.toString().includes("Template");if(!s)throw new Error(`the template for ${this.name} is not found with.`);return new Promise(p=>{switch(c){case!0:{let d=s.getContent(!0);if(!d)throw new Error(`it might be theres no template in component - ${this.name}`);d.cake_component=this.name,this.html=this.Node(d),this._parseHTML(this.isStatic).then(()=>{this._watchBindedItems(),p()})}break;case null:p();break;default:{let d=s;if(!d)throw new Error(`it might be theres no template in component - ${this.name}`);d.cake_component=this.name,this.html=this.Node(d),this.isStatic=!0,this._parseHTML(this.isStatic).then(()=>{p()})}}})},t.prototype.createElementAsync=function(){return new Promise(n=>{this.createElement().then(()=>{n()})}).then(()=>{this.isReady=!0})},t.prototype._isParsed=!1,t.prototype._parseHTML=function(n=!1){return this.$attrib.inject(this.html,this.name,n).then(()=>{this.original=this.html.cloneNode(),this._isParsed=!0})},t.prototype.render=function(n){let a=null,{root:s,multiple:c,cleaned:p,emit:d,static:r,hashed:i,data:y}=n||{},v=b=>this.data[b]||this.$scope[b]||null;return new Promise((b,S)=>{!!s&&(this.root=s),c&&this._smoothReset(),this.isReady?b():this.createElement().then(()=>{i===!0&&this.$hash.add(this.name),!this.template&&this.fire.isConnected&&this.fire.isConnected({emit:d},!0)}).then(()=>{this.isReady=!0,b()})}).then(()=>this.await.destroy.then(()=>this.await.animateRemove).then(()=>new Promise((b,S)=>{let w=this.$attrib.getWatchItemsByType(this.name,"for");for(let _=0;_<w.length;_++){let O=v(w[_]);this.doFor(w[_],O)}b(this.html)}).then(b=>(a={element:b,emit:d},this.fire.beforeConnected&&this.fire.beforeConnected(a,!0),b)).then(b=>{if(!this.isStatic)return(y?(()=>new Promise(w=>{let _=b.getElement();_=this.$templating(y,_),this.html=b=this.Node(_),this.html.replaceDataSrc(),y=null,w()}))():Promise.resolve()).then(()=>{b.appendTo(this.root,p),this.isConnected=!0})}).then(()=>this.findTarget()).then(()=>this.findContainer()).then(()=>{let b=this.$attrib.getWatchItemsByType(this.name,"switch");for(let S=0;S<b.length;S++)this.doSwitch(b[S],v(b[S]))}).then(()=>this.addEvent(r,c)).then(()=>this.fire.isConnected&&this.fire.isConnected(a,!0)).then(()=>this.$animate("render")).then(()=>new Promise((b,S)=>{setTimeout(()=>{this._watchReactive(),b()},100)}))))},t.prototype.renderAsync=function(n){this.render(n).then(()=>{this.$persist.append(this.name)})},t.prototype._smoothReset=function(){this.isConnected=!1,this.html=this.original.cloneNode()},t.prototype._hardReset=function(n){return this.isConnected=!1,this.$persist.remove(n),this.html=this.original.cloneNode(),!0},t.prototype.reset=function(){let n=this.$animate("remove");return n instanceof Promise?this.await.animateRemove=new Promise(a=>{n.then(()=>this.html.remove()).then(()=>this._hardReset(this.name)).then(()=>{a()})}):new Promise(a=>{this.html.remove(this.name),this._hardReset(this.name),a()})},t.prototype.addEvent=function(n,a){if(!!a&&!!n)return!1;let p=this.name;function d(r,i,y,v){return function(b){y&&b.preventDefault(),v&&b.stopPropagation(),Cake.Observer.notify(i,r,b)}}if(!!this.targets){for(let r in this.targets)if(this.targets.hasOwnProperty(r)){let i=this.targets[r];for(let y of i){let{sel:v,el:b,cb:S}=y;S=S||r,b.Ref().get("__cake__events")||b.Ref().set("__cake__events",{});let w=b.Ref().get("__cake__events");if(!w[S]){let _=r.substring(0,2),O=!_.includes("~"),k=_.includes("^");(!O||k)&&(r=r.slice(1)),b.addEventListener(r,d(S,p,O,k),!0),w[S]=!0,b.Ref().set("__cake__events",w)}}}}},t.prototype.findTarget=function(){let n=this.$attrib.getEventTarget(this.name),a=JSON.parse(JSON.stringify(n));for(let s of a)s.el=document.querySelector(`[data-event=${s.sel}]`),this.targets[s.event]||(this.targets[s.event]=[]),this.targets[s.event].push(s)},t.prototype.toggler=function(n){let a=this.$attrib.getWatchItemsByType(this.name,"toggle"),s=class{constructor(p,d,r,i){this.toggle=i.toggle,this.bind=p,this.bases=d,this.cache=i.$cache,this.html=r}check(p){let d=this.toggle[p];if(!d)console.error(`${p} is not found in toggle! choose from ${JSON.stringify(Object.keys(this.toggle))}`);else{if(a.length){let{ns:r}=d,i=a.find(y=>y.name==`ns-${r}`);i&&(d.sel=`[data-toggle=${i.sel}]`)}return d}}_toggle(){let p=this.check(this.bind);if(!p)return;let{basis:d="data-name",cls:r="is-active",mode:i="radio",sel:y,persist:v=!0}=p,b=this.html.querySelectorAll(y);if(!b.length)return;let S,w;if(b.length==1){let _=typeof this.bases=="boolean",O=!!this.bases,k=b[0];if(v){let T=function(E,P,$){$?E.classList.contains(P)&&E.classList.remove(P):E.classList.contains(P)||E.classList.add(P)};_?(O?(this.cache.createOrUpdate(this.bind,!0),T(k,r,!0)):(this.cache.createOrUpdate(this.bind,!1),T(k,r,!1)),k.classList.toggle(r)):(this.cache.createOrUpdate(this.bind,!k.classList.contains(r)),k.classList.toggle(r))}}else for(let _=0;_<b.length;_++){let O=b[_],k=O.classList.contains(r),T=O.getAttribute(d);T==this.bases?(i=="switch"?O.classList.toggle(r):k||O.classList.add(r),v&&this.cache.createOrUpdate(this.bind,T),w=T):k&&(O.classList.remove(r),S=O.getAttribute(d))}return{prev:S,next:w}}_recall(){let p=this.check(this.bind);if(!p)return;let{basis:d="data-name",cls:r="is-active",sel:i}=p;return this.cache.get(this.bind).then(y=>{if(!y)return y;let v=y,b=this.html.querySelectorAll(i);if(!!b.length){if(b.length==1){let S=b[0];v&&S.classList.add(r)}else for(let S=0;S<b.length;S++){let w=b[S],_=w.classList.contains(r);w.getAttribute(d)==v&&(_||w.classList.add(r))}return v}})}},c=(p,d)=>new s(p,d,this.html,this)._toggle();return c.recall=p=>new s(p,!1,this.html,this)._recall(),c},t.prototype.findContainer=function(){return new Promise(n=>{let a=this.html.getContainers();for(let s=0;s<a.length;s++){let c=a[s],p=c.dataset.container;p&&(this.container[p]=c)}n()})},t.prototype._watchBindedItems=function(){},t.prototype._watchReactive=function(){if(!this.items.length){this.items=this.$attrib.getWatchItems(this.name);let n=this.name,{input:a}=this.$attrib.st[n]||{input:!1},s=this.$attrib.notify[n];a&&a.forEach(c=>{let{attr:p,bind:d,sel:r,nodeType:i}=c,y=document.querySelector(`[data-input=${r}]`);y&&!y._reactive&&(i=="INPUT"||i=="TEXTAREA"?(s.forEach(v=>{v(n,{value:y.value,bind:d})}),y.addEventListener("input",v=>{s&&s.length&&s.forEach(b=>{b(n,{value:v.target.value,bind:d})})}),y.addEventListener("change",v=>{s&&s.length&&s.forEach(b=>{b(n,{value:v.target.value,bind:d})})})):i=="SELECT"&&((()=>{let{selectedOptions:v}=a,b=[];for(let S=0;S<v.length;S++){let w=v[S],_=w.text,O=w.value;b.push({text:_,value:O})}s&&s.length&&s.forEach(S=>{S(n,{value:b,bind:d})})})(),y.addEventListener("change",v=>{let{selectedOptions:b}=v.target,S=[];for(let w=0;w<b.length;w++){let _=b[w],O=_.text,k=_.value;S.push({text:O,value:k})}s&&s.length&&s.forEach(w=>{w(n,{value:S,bind:d})})})),y._reactive=!0)})}},t.prototype.observer=function(n){function a(s){return this.handler[s]}this.observer=new Observer(this,n,a.bind(this))},t.prototype.variable=function(n){let a=Object.keys(n),s={},c=[];function p(d,r,i){r||(s[d]=`value is not '${i}'`)}for(let d in n)if(n.hasOwnProperty(d)){let r=n[d],{type:i,value:y}=r,v;["string","number"].includes(i)?v=typeof y==i:y instanceof Array?v=i=="array":v=i=="object",c.push(y),p(d,v,i)}if(Object.keys(s).length)throw new Error(JSON.stringify(s));return c},t}});var vt=I((ee,bt)=>{bt.exports=function(g){let f=g.Attrib,h=g.Scope,u=g.Component,m=g.Hasher,e=g.Router,t=g.Persistent,n=g.StorageKit,a=g.Observer,s=g.Formy;function c(p){this.name=p,this.components={}}return c.Components=function(p){return{subscribe(d,r){function i(){let y=c.Components[p];if(y&&d instanceof Function){let v=d.name;r&&(d=d.bind(r)),d.binded="external",d.original=v,d.listenTo=y.name,y.Subscribe(d)}}return new Promise((y,v)=>{let b=setInterval(()=>{c.Components[p]&&(i(),clearInterval(b),y())})})}}},c.Models={},c.Subscribe={},c.Handlers={},c.Attributes=new f,c.Models.$loaded=function(p){return new Promise((d,r)=>{let i=setInterval(()=>{c.Models[p]&&(clearInterval(i),d(c.Models[p]))});setTimeout(()=>{c.Models[p]||(clearInterval(i),r(p))},1e4)})},c.MainMessageChannel=function(){let p=new MessageChannel;return{send(d){p.port2.postMessage(d)},receive(d){p.port1.onmessage=function(r){let{isTrusted:i,data:y}=r||{isTrusted:!1};d(i?{status:1,data:y}:{status:0,err:"not trusted!"})}}}}(),c.Utils={scopeTrap(p){return!1},scopeNotifier(p){return p}},c.create=function(p,d,r){new c(p,d,r).create(p,d,r)},c.plugin=function(){},c.init=function(p){return new u(p)},c.Hasher=new m(c.Components),c.Hasher.listen(),c.Router=e(c.Components,u),c.Persistent=new t,c.Persistent.listen(c.Components),c.Cache=new n({name:"cache",storage:"session",child:"object"}),c.getSubscriber=function(p,d){let r=c.Subscribe,i={};for(let y in r)if(r.hasOwnProperty(y)){let v=r[y];for(let b in v)if(v.hasOwnProperty(b)){let S=v[b];for(let w of S){let _=w,O=_.original,k=_.binded;if(_.listenTo==p){if(O==d)if(!i[k])i[k]=d;else{let E=i[k]instanceof Array?i[k]:[i[k]];i[k]=E.concat(d)}else if(!d)if(!i[k])i[k]=O;else{let E=i[k]instanceof Array?i[k]:[i[k]];i[k]=E.concat(O)}}}}}return i},c.Observer=new a(c.Subscribe,c.Handlers),c.prototype._defineProperty=function(p,d,r,i){Object.defineProperty(p,d,{configurable:!0,get(){return r()},set(y){i&&i(y)}})},c.prototype._defineProperty(u.prototype,"$observer",function(){return c.Observer}),c.prototype._defineProperty(u,"$globalScope",function(){return new h("globalScope")}),c.$universalScope=function(){return new h("universalScope")},c.prototype._defineProperty(u.prototype,"$attrib",function(){return c.Attributes}),c.prototype._defineProperty(u.prototype,"$persist",function(){return c.Persistent}),c.prototype._defineProperty(u.prototype,"$cache",function(){return c.Cache}),c.prototype._defineProperty(u.prototype,"$hash",function(){return c.Hasher}),c.prototype.create=function(p,d,r){console.time(p);let i=new u(p,d,r),y=new h(p);y.registerNotifier(function(v,b,S,w){return c.Attributes.notifier(v,b,S,w)}),c.Attributes.registerNotifier(p,function(v,b){y.notifier(v,b)}),i.compile.then(()=>{let{subscribe:v,root:b,html:S,handlers:w,role:_}=i;return _=="form"&&function(){s.bind(i)()}(),c.Observer.registerSubscribe(v).then(()=>({root:b,handlers:w}))}).then(({handlers:v,root:b})=>{c.Observer.registerHandlers(v,i.name),this._defineProperty(i,"root",function(){if(i._root)return i._root;{let S=b||"#app",w=document.querySelector(S);if(w)return w}throw new Error(`the selector '${b}' as container of component '${i.name}' is not found!`)},function(S){Object.assign(i,{_root:S})}),this._defineProperty(i,"$scope",function(){return y})}).then(()=>{i.fire=function(){function v(S,w){w=w?typeof w=="function"?w.bind(i)():function(){return w}.bind(i)():null;let _={[S]:()=>w};if(fn=_[S].bind(i),typeof fn=="function"){let T=function(P){let $={};if(!P)return $;let L=P.attributes;if(L)for(let A=0;A<L.length;A++){let C=L[A],j=C.name,N=C.value;$[j]=N}return $};var O=T;fn.name=S,fn.original=S,fn.binded=i.name,c.Observer.registerHandlers({[S]:fn},i.name);let k=w;if(w&&(w.element||w.root||w.container)){let P=T(w.element),$=T(w.root),L=T(w.container);k={status:0,attributes:{element:P,root:$,container:L}}}c.MainMessageChannel.send({component:i.name,event:S,payload:k});let E=c.Observer.notify(i.name,S,{}).then(()=>c.Observer.results[i.name][S]);return i.await[S]=E,i.await[S]}console.error("the param in fire is not an instance of function")}function b(S,w){for(let _ in w)if(w.hasOwnProperty(_)){let O=w[_],k=O.original;Object.defineProperty(S,k,{get(){let T={[k]:function(E,P){if(P!=null&&(P=P),P==null&&k=="destroy"&&(P=!0),P==null&&(P=!1),P){let $=new Promise((L,A)=>{setTimeout(()=>{let C=E;E&&E.element&&(C={status:0,message:"element cant be cloned"}),c.MainMessageChannel.send({component:i.name,event:p,payload:C}),c.Observer.notify(i.name,k,E).then(()=>c.Observer.results[i.name][k]).then(j=>{L(j)}).catch(j=>{console.error(j)})})});return i.await[k]=$,i.await[k]}else return O(E)}};return T[k]=T[k].bind(i),T[k].originalName=k,T[k].binded=i.name,T[k]}})}}return b(v,i.handlers),v}()}).then(()=>{i.type=="view"&&(i.toggler=i.toggler(i),c.Components[p]=i)}).then(()=>{i.options.router&&c.Router.subscribe(i.options.router.bind(i)),i.options.data&&i.options.data.bind(i.data)(i),i.options.init&&i.options.init.bind(i)(),i.options.utils&&i.options.utils.bind(i.utils)(i)}).then(()=>{i.type=="model"&&(c.Models[p]=i),i.isStatic&&i.type=="view"&&i.render()})},c}});var ie=D(),re=F(),ne=B(),wt=K(),se=z(),U=G(),Ot=Q(),kt=V(),St=et(),Tt=rt(),Et=st(),Pt=ot(),_t=ct(),$t=ft(),Lt=pt()({StorageKit:U()}),Ct=gt()({StorageKit:U(),Templating:St(),Utils:wt}),At=yt()({Utils:wt,Mo:Tt,Templating:St(),Piece:Ot(),pushState:_t.pushState}),It=vt()({Attrib:Ct,Scope:Lt,Component:At,Hasher:Pt,Router:_t,Persistent:Et({StorageKit:U()}),StorageKit:U(),Observer:kt(),Formy:$t});window.Cake=It;})();
