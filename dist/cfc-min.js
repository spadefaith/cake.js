(()=>{var q=(g,f)=>()=>(f||g((f={exports:{}}).exports,f),f.exports);var J=q(()=>{(function(g){g.env={destructure:!0};let f=g.env;try{let{a:s}={a:!0}}catch{f.destructure=!1}Promise.prototype.ObjectType="Promise"})(window)});var K=q(()=>{(function(g){HTMLCollection.prototype.toArray=function(){let f=[];for(let s=0;s<this.length;s++)f[s]=this[s];return f},NodeList.prototype.toArray=function(){let f=[],s=-1,h=this.length;for(;++s<h;)f[s]=this[s];return f},Object.cache=Object.create(null),String.prototype.toHyphen=function(){let f=Object.cache,s=null,h=this;if(f.toHyphen||(f.toHyphen={}),f[h]&&(s=f[h]),s!=null)return s;let p=h.split(""),t="",e=-1;for(;++e<p.length;){let r=p[e];switch(e){case 0:t+=r.toLowerCase();break;default:r.charCodeAt()<91&&(t+="-"),t+=r.toLowerCase()}}return f[h]=t,s=t,s},String.prototype.toCamelCase=function(){let f=this.toLowerCase(),s=Object.cache,h=null;if(s.toCamel||(s.toCamel={}),s=s.toCamel,s[f])return s[f];{let p=f.split("-");if(p.length==1)return f;let t="",e=-1,r=p.length;for(;++e<r;){let c=p[e];switch(e){case 0:t+=c;break;default:{let n=c.substring(0,1).toUpperCase(),b=c.substring(1);t+=n+b}break}}return s[f]=t,t}},HTMLElement.prototype.querySelectorIncluded=function(f,s,h){let p=this.querySelector(f);return p||(()=>{switch(!0){case(!s&&!h):{let t=this.closest(f);t==this&&(p=t)}break;case(!!s&&!!h):p=this.getAttribute(s)==h?this:null;break;case(!!s&&!h):p=this.getAttribute(s)?this:null;break}return p})()},HTMLElement.prototype.querySelectorAllIncluded=function(f,s,h){let p=this.querySelectorAll(f).toArray();switch(!0){case(!s&&!h):{let t=this.closest(f);t==this&&p.push(t)}break;case(s&&h):this.getAttribute(s)==h&&p.push(this);break;case(s&&!h):this.getAttribute(s)&&p.push(this);break}return p},HTMLDocument.prototype.querySelectorIncluded=function(f){return this.querySelector(f)},HTMLDocument.prototype.querySelectorAllIncluded=function(f){return this.querySelectorAll(f)},Array.prototype.toggler=function(f,s){for(let h=0;h<this.length;h++){let p=this[h];(p.dataset.name==f||p.classList.contains(s))&&p.classList.toggle(s)}},HTMLElement.prototype.Ref=function(){let f="_cakes_storage";!this[f]&&(this._cakes_storage={});let s=this[f];return{set(h,p){s[h]=p},get(h){return s[h]},getAll(h){return s},remove(h){delete s[h]}}}})(window)});var W=q(()=>{Object.keys||(Object.keys=function(g){var f=[];for(var s in g)g.hasOwnProperty(s)&&f.push(s);return f})});var G=q((Ft,X)=>{var U={},M={typeof:function(g){switch(!0){case typeof g=="string":return"string";case typeof g=="number":return"number";case g instanceof Array:return"array";case g instanceof Function:return"function";case g instanceof HTMLCollection:return"htmlcollection";case g instanceof NodeList:return"htmlnodelist";case g instanceof Element:return"domlement";case g instanceof Object:return"object"}},isArray:function(g){return this.typeof(g)=="array"},isObject:function(g){return this.typeof(g)=="object"},isNumber:function(g){return this.typeof(g)=="number"},isString:function(g){return this.typeof(g)=="string"},isHTMLCollection:function(g){return this.typeof(g)=="htmlcollection"},isNodeList:function(g){return this.typeof(g)=="htmlnodelist"},isElement:function(g){return this.typeof(g)=="domlement"},isFunction:function(g){return this.typeof(g)=="function"}},F={each:function(g,f,s){if(s=="object"){var h=0;for(var p in g)g.hasOwnProperty(p)&&(f({key:p,value:g[p]},h),h=h+1)}else for(var t=0;t<g.length;t++)f(g[t],t)},map:function(g,f){var s=M.isArray(g)||g.length?"array":"object",h=g.length&&s=="array"?[]:{};return this.each(g,function(p,t){var e=f(p,t);s=="object"?h[e.key]=e.value:h.push(e)},s),h},reduce:function(g,f,s){var h=M.typeof(g);return this.each(g,function(p,t){f=s(p,f,t)},h),f},filter:function(g,f){var s=M.isArray(g)||g.length?"array":"object",h=g.length&&s=="array"?[]:{};return this.each(g,function(p,t){var e=f(p,t);e&&(s=="object"?h[p.key]=p.value:h.push(p.value))},s),h}},z={perf:function(g){console.time("test"),g(),console.timeEnd("test")},logTest:function(g,f,s){try{g=JSON.parse(g)}catch{}try{s=JSON.parse(s)}catch{}switch(f){case"==":return g==s;case"!=":return g!=s;case"<":return g<s;case">":return g>s;case">=":return g>=s;case"<=":return g<=s}},toUrlSearchParams:function(g,f=!0){let s="";for(let h in g)if(g.hasOwnProperty(h)){let p=g[h];f&&p?s+=`${encodeURI(h)}=${encodeURI(p)}&`:s+=`${encodeURI(h)}=${encodeURI(p)}&`}return s},sanitize:function(g){if(typeof g!="string")return g;let f={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},s=/[&<>"'/]/ig;return g.replace(s,h=>f[h])},toFormData:function(g,f={}){let s=new FormData(g),h={},p=new FormData;for(let[t,e]of s.entries())e&&(e=this.sanitize(e)),f.json?f.trim?e&&(h[t]=e):h[t]=e:p.append(t,e);return f.json?h:p},splitBySpace:function(g,f){if(g&&(g=g.split(" "),M.isArray(g)))for(let s=0;s<g.length;s++)f(g[s])},toArray(g){let f=[];if(!g.length)return f;for(let s=0;s<g.length;s++)f.push(g[s]);return f},timeOut(g){setTimeout(()=>{g()})}};try{U.UTILS={...F,...M,...z}}catch{U.UTILS={},x=F.each,x(F,function(f,s){U.UTILS[f]=s}),x(M,function(f,s){U.UTILS[f]=s}),x(z,function(f,s){U.UTILS[f]=s})}var x;X.exports=U.UTILS});var Y=q(()=>{(function(){customElements.define("sub-template",class extends HTMLElement{constructor(){super()}connectedCallback(){this.replace(this)}replace(g){let f=g.dataset.template,s=document.getElementsByName(f);if(s.length>1){console.error(`template with name ${f} has more than one reference.`);return}if(!s)throw g.remove(),new Error(`${f} is not found!`);if(s[0]){let h=s[0];if(h.constructor.name=="HTMLTemplateElement"){if(h=h.content.cloneNode(!0).firstElementChild,!h)return;let p=g.attributes;for(let t=0;t<p.length;t++){let e=p[t];e.name!="data-template"&&h.setAttribute(e.name,e.value)}g.replaceWith(h)}else throw new Error(`${f} is not referred to a Template Element!`)}}}),HTMLTemplateElement.prototype.replaceSubTemplate=function(g){let f=g.getElementsByTagName("sub-template");if(f){f=f.toArray();for(let s=0;s<f.length;s++){let h=f[s];customElements.get("sub-template").prototype.replace(h)}}},HTMLTemplateElement.prototype.collectContent=function(){let g=this,f=null,s=g.cloneNode(!0),h=document.createDocumentFragment(),p=s.content.querySelector("style");p&&h.appendChild(p);let t=[];for(let e=0;e<s.content.children.length;e++){let r=s.content.children[0];this.replaceSubTemplate(r),t.push(r)}return f={style:h.children[0],others:t},f},HTMLTemplateElement.prototype.parseStyle=function(g){if(!g)return!1;var f=g.textContent;if(f=f.replace(/\s/g,""),!f.length)return;let s=!1,h=!1,p=!1,t=f.split(""),e="";f="";var r=!1;for(let c=0;c<t.length;c++){let n=t[c];n=="{"&&(s=!0,h=!0),n=="}"&&(s=!1,h=!1),!s&&n!="	"&&n!="}"&&n!=" "&&n!=";"&&(e+=n),h&&n!="	"&&n!="{"&n!=" "&&(f+=n),n=="}"&&(r||(r={}),r[e]=f,e="",f="")}return r},HTMLTemplateElement.prototype.parseHTML=function(g){if(g){var f=document.createElement("HTML");for(let s=0;s<g.length;s++){let h=g[s];f.append(h)}}return f||!1},HTMLTemplateElement.prototype.getContent=function(g){let{style:f,others:s}=this.collectContent(),h=this.parseStyle(f),p=this.parseHTML(s);for(let t in h)if(h.hasOwnProperty(t)){let e=p.querySelectorAll(t),r=h[t];for(let c=0;c<e.length;c++)e[c].setAttribute("style",r)}return p=g?p.children.toArray():p.innerHTML,p.length==1?p[0]:p}})()});var Z=q((Wt,Q)=>{Q.exports=function(g){let f=g.Utils;function s(i){return i.constructor.name.toLowerCase()}function h(i,y){for(let m in i)i.hasOwnProperty(m)&&y(i[m],m)}function p(i,y,m){i=Object.assign(i,{[m]:y})}function t(i){return i===null}function e(i){return i===void 0}function r(i){return s(i)=="array"}function c(i){return s(i)=="object"}var n=function(i,y){for(var m=null,w=0;w<i.length;w++){var S=i[w];if(s(y)=="object"){var _=y,O=Object.keys(y)[0],T=_[O];if(s(S)=="object"){var k=S[O]==T;if(k){m=w;break}}}else if(s(y)!="array"){var k=y==S;if(k){m=w;break}}}return m},b=function(i,y){var m=null,w=s(y);if(w=="object"){var S=Object.keys(y)[0];i[m]!=null&&i[m]==y[S]&&(m=S)}else w=="string"&&(m=y);return m},a=function(i,y){var m=null;return s(i)=="array"?m=n(i,y):s(i)=="object"&&(m=b(i,y)),m},u=class{constructor(i,y,m){this.type=i,this.name=y,this.child=m,this.cache={},s(this.child)=="string"&&(this.child=m=="array"?[]:m=="object"?{}:!1)}init(i){return this[this.type]?(this[this.type](i),!0):!1}open(){if(this.type=="session"){var i=JSON.parse(sessionStorage[this.name]);return i[this.name]}else if(this.type=="local"){var i=JSON.parse(localStorage[this.name]);return i[this.name]}else return this.cache[this.name]}close(i){return this.child=i,this.recache(),this.init(!0)}recache(){this.cache[this.name]=this.child}create(){this.cache[this.name]=this.child}array(){this.create()}object(i){this.create()}session(i){i||this.recache();try{!sessionStorage[this.name]&&!i?sessionStorage.setItem(this.name,JSON.stringify(this.cache)):i&&sessionStorage.setItem(this.name,JSON.stringify(this.cache))}catch{this.recache()}}verifyLocalStorage(){sessionStorage.reset||(sessionStorage.setItem("reset",!1),localStorage.clear())}local(i){this.verifyLocalStorage(),this.create();try{localStorage[this.name]?i?localStorage.setItem(this.name,JSON.stringify(this.cache)):(localStorage.removeItem(this.name),localStorage.setItem(this.name,JSON.stringify(this.cache))):localStorage.setItem(this.name,JSON.stringify(this.cache))}catch{this.create()}}},d={create:function(i,y){if(r(i)){let m=new Set(i);s(y)=="array"?y.forEach(w=>{m.add(w)}):m.add(y),i=Array.from(m)}else c(i)&&(c(y)?h(y,function(m,w){i[w]=m}):i[y]=y);return i},createOrUpdate:function(i,y){var m=a(i,y);return s(i)=="array"?t(m)?i.includes(y):i[m]=y:s(i)=="object"&&(t(m)?c(y)?h(y,function(w,S){p(i,w,S)}):i[y]=y:i[m]=y),i},remove:function(i,y){if(s(y)=="string"){var m=a(i,y);if(s(i)=="object")delete i[m];else if(s(i)=="array"){for(var w=[],S=0;S<i.length;S++)if(S!=m)w.push(i[S]);else continue;i=w}return i}else{if(s(y)=="object")return Object.filter(i,function(_,O){var T=y[O]!=null&&y[O]==_;return!T});if(s(y)=="array")return Object.filter(i,function(_,O){var T=y.contains(O);return!T})}if(t(m))return!1},get:function(i,y){var m=s(y);if(m=="string"){var w=a(i,y);if(w==0||w)return i[w]}else{if(m=="object")return Object.filter(i,function(S,_){var O=!e(y[_])&&y[_]==S;return O});if(m=="array")return Object.filter(i,function(S,_){var O=y.contains(_);return O})}return null},getNot:function(i,y){var m=s(y);return m=="string"?Object.filter(i,function(w,S){var _=S!=y;return _}):m=="object"?Object.filter(i,function(w,S){return Object.some(y,function(_,O){var T=O==S&&_==w;return!T})}):m=="array"?Object.filter(i,function(w,S){var _=!y.contains(S);return _}):null},getAll:function(i){return i}},v=class{constructor(i){this.name=i.name,this.storageType=i.storage,this.child=i.child||"object";try{s(this.child)=="string"&&(this.child=this.child=="array"?[]:this.child=="object"?{}:null)}catch{this.storageType=="session"?sessionStorage.clear():this.storageType=="local"&&localStorage.clear(),s(this.child)=="string"&&(this.child=this.child=="array"?[]:this.child=="object"?{}:null)}if(!["array","object"].includes(s(this.child)))throw new Error("the child must be an object or array type.");this.storage=new u(this.storageType,this.name,this.child),this.storage.init()}has(i){var y=this.storage.open(),m=a(y,i);return t(m)?!1:m}get(i,y){if(y){var m=this.storage.open();return d.get(m,i)}else return new Promise((w,S)=>{f.timeOut(()=>{var _=this.storage.open();w(_)})}).then(w=>d.get(w,i))}getNot(i){var y=this.storage.open();return d.getNot(y,i)}getAll(){var i=this.storage.open();return Promise.resolve(i)}update(i,y){var m=this.storage.open(),w=a(m,i);return w==0||w?(m=d.createOrUpdate(m,data),this.storage.close(m)):!1}createOrUpdate(i){if(arguments.length>1){let w=arguments[0],S=arguments[1];i={[w]:S}}var y=this.storage.open();return y=d.createOrUpdate(y,i),this.storage.close(y)}create(i){var y=this.storage.open();return y=d.create(y,i),this.storage.close(y)}remove(i){var y=this.storage.open();return y=d.remove(y,i),this.storage.close(y)}};return v}});var tt=q((zt,V)=>{V.exports=function(){function g(f){this.el=g.toArray(f)}return g.toArray=function(f){let s=[];switch(!0){case f instanceof Array:s=f;break;case(f.length&&f.tagName&&f.tagName!="FORM"&&!(f instanceof Array)):for(let h=0;h<f.length;h++)s.push(f[h]);break;case!(f instanceof Array):s=[f];break}return s},g.prototype.getElements=function(){return this.el},g.prototype.getElement=function(){return this.el[0]},g.prototype.remove=function(f){let s=-1,h=this.el.length,p=document.createDocumentFragment();for(;++s<h;){let t=this.el[s];t&&p.appendChild(t)}fr=null},g.prototype.replaceDataSrc=function(){let s=this.el[0].querySelectorAll("[data-src]");for(let h=0;h<s.length;h++)el=s[h],el.setAttribute("src",el.dataset.src),el.removeAttribute("data-src")},g.cloneNode=function(f){f=f instanceof Array?f:this.toArray(f);let s=[];for(let h=0;h<f.length;h++)s.push(f[h].cloneNode(!0));return new g(s)},g.prototype.dataset=function(f,s){let h=this.el.length,p=-1;for(;++p<h&&!(this.el[p].dataset[f]&&s(this.el[p])=="break"););return!0},g.prototype.getContainers=function(){return this.getElementsByDataset("container").container},g.prototype.cloneNode=function(f){return f=this.el,g.cloneNode(f)},g.prototype.getAllElements=function(){let f=this.el.length,s=[];switch(!0){case f==1:s=this.el[0].getElementsByTagName("*").toArray();break;case f>1:{let h=-1;for(;++h<f;){let t=this.el[h].getElementsByTagName("*");if(t)for(let e=0;e<t.length;e++)s.push(t[e])}}break}return s},g.prototype.appendTo=function(f,s){if(!f&&!f.attributes)throw new TypeError(`the ${f} is not an instance of Element`);s&&(f.innerHTML="");for(let h=0;h<this.el.length;h++){let p=this.el[h];f.appendChild(p)}},g.prototype.getElementsByTagName=function(f){let s=this.el.length,h=[];switch(!0){case s==1:h=this.el[0].getElementsByTagName(id).toArray();break;case s>1:{let p=-1;for(;++p<s;){let e=this.el[p].getElementsByTagName(selector);if(e)for(let r=0;r<e.length;r++)h.push(e[r])}}break}return h},g.prototype.getElementById=function(f){let s=this.el.length,h=[];switch(!0){case s==1:h=this.el[0].getElementById(id);break;case s>1:{let p=-1;for(;++p<s;){let e=this.el[p].querySelector(selector);e&&h.push(e)}}break}return h},g.prototype.querySelectorAll=function(f){let s=this.el.length,h=[];switch(!0){case s==1:h=this.el[0].querySelectorAll(f);break;case s>1:{let p=[],t=-1;for(;++t<s;){let r=this.el[t].querySelectorAll(f);r&&(h=h.concat(r.toArra()))}}break;default:h=[]}return h},g.prototype.querySelector=function(f){let s=this.el.length,h=[];switch(!0){case s==1:h=this.el[0].querySelector(f);break;case s>1:{let p=-1;for(;++p<s;){let e=this.el[p].querySelector(f);e&&h.push(e)}}break}return h},g.prototype.querySelectorIncluded=function(f,s,h){let p=this.el.length,t=[];switch(!0){case p==1:t=this.el[0].querySelectorIncluded(f,s,h);break;case p>1:{let e=-1;for(;++e<p;){let c=this.el[e].querySelectorIncluded(f,s,h);c&&t.push(c)}}break}return t},g.prototype.querySelectorAllIncluded=function(f,s,h){let p=this.el.length,t=[];switch(!0){case p==1:t=this.el[0].querySelectorAllIncluded(f,s,h);break;case p>1:{let e=-1;for(;++e<p;){let c=this.el[e].querySelectorAllIncluded(f,s,h);c&&(t=t.concat(c.toArra()))}}break}return t},g.prototype.contains=function(f){let s=this.el.length,h=!1;switch(s==1){case!0:h=this.el[0].contains(f);break;case!1:{let p=-1;for(;++p<s;)if(this.el[p].contains(f)){h=!0;break}}break}return h},g.prototype.getElementsByDataset=function(){let f,s,h,p,t,e;for(f=arguments,o={},length=f.length,h=-1,p=-1;++h<this.el.length;)for(t=this.el[h];++p<length;)s=f[p],t.getAttribute(`data-${s}`)?o[s]=[t]:o[s]=[],e=t.querySelectorAll(`[data-${s}]`),e.length&&(o[s]=o[s].concat([...e]));return o},g}});var it=q((Xt,et)=>{et.exports=function(){function g(f,s,h){this.subscribe=f,this.handlers=s,this.logger=h||!1,this.stat={handlers:{},subscribe:{}},this.results={},this.wm=new WeakMap}return g.prototype.notify=function(f,s,h,p,t,e){function r(){return{_component:f,_event:s,_e:h}}function c(v){return v}let{_component:n,_event:b,_e:a}=r(),u=this.handlers[n]&&this.handlers[n][b];if(u==null&&t){let v={[b]:function(){return a}};v[b].binded=n,v[b].listenTo=e,u=v[b]}if(n=u.binded,u=u,!u){console.error(`no setup handler for the event ${b} in ${n} component`);return}let d=new Promise((v,i)=>{let y=u(a);v(y)});return this.stat.handlers[u.original]+=1,d.then(v=>{let i=[];if(this.results[n]||(this.results[n]={}),this.subscribe[n]&&this.subscribe[n][b]){let y=this.subscribe[n][b];p=p?(()=>{y=y.filter(m=>{let w=m.binded;return p.includes(w)})})():!0;for(let m=0;m<y.length;m++){let w=y[m];this.stat.subscribe[w.original]+=1,i.push(new Promise((S,_)=>{try{let O=(()=>w(v))();O&&O.ObjectType=="Promise"?O.then(T=>{this.results[n]||(this.results[n]={}),this.results[n][b]=O,S()}).catch(T=>{_(T)}):(this.results[n][b]=O,S())}catch(O){console.log(O),_(O)}}))}}else this.logger&&console.info(`no subscriber for (${b}) event of (${n}) component`),this.results[n][b]=v;return Promise.all(i).then(()=>{v=null})})},g.prototype.registerSubscribe=function(f){return new Promise((s,h)=>{for(component in f)if(f.hasOwnProperty(component))if(!this.subscribe[component])this.subscribe[component]={};else continue;s()}).then(()=>{let s={};for(component in f)if(f.hasOwnProperty(component)){let h=f[component];for(let p in h)if(h.hasOwnProperty(p)){let t=h[p];for(let e=0;e<t.length;e++){let r=t[e];s[component]||(s[component]={}),s[component][r.original]||(s[component][r.original]=[]),s[component][r.original].push(r),this.stat.subscribe[r.original]=0}}}return s}).then(s=>{for(let h in s)if(s.hasOwnProperty(h)){this.subscribe[h]||(this.subscribe[h]={});for(let p in s[h])if(s[h].hasOwnProperty(p))for(let t of s[h][p])this.subscribe[h][t.original]||(this.subscribe[h][t.original]=[]),this.subscribe[h][t.original].push(t)}s={}})},g.prototype.registerHandlers=function(f,s){this.handlers[s]||(this.handlers[s]={});for(let h in f)if(f.hasOwnProperty(h)){let p=f[h];this.handlers[s][h]=p,this.stat.handlers[p.original]=0}},g}});var st=q((Gt,rt)=>{rt.exports=function(){function g(f,s,h){this.data=f,this.template=s,this.isConvert=h}return g.prototype._getTag=function(f){return f.match(new RegExp("(?<=<)|([^/s]+)(?=>)","g"))[2]},g.prototype._bindReplace=function(f,s){for(let h in f)if(f.hasOwnProperty(h)){let p=new RegExp(`{{${h}}}`,"g");p&&(s=s.replace(p,`${f[h]}`))}return s},g.prototype._toElement=function(f,s){let h=document.createElement("template");return h.innerHTML=f,h.content.children[0]},g.prototype.createElement=function(){let f=this.template,s=this.data,h=this.isConvert;if(s){if(s instanceof Array){let p=typeof f=="string",t=p?this._getTag(f):f.tagName;f=p?f:f.outerHTML;let e=[];for(let r=0;r<s.length;r++){let c=s[r],n=this._bindReplace(c,f),b=this._toElement(n,t);h&&(b=b.outerHTML),e.push(b)}return e}else if(s instanceof Object){let p=typeof f=="string",t=p?this._getTag(f):f.tagName;f=p?f:f.outerHTML;let e=this._bindReplace(s,f),r=this._toElement(e,t);return h&&(r=r.outerHTML),r}}else{let t=typeof f=="string"?this._getTag(f):f.tagName;return this._toElement(f,t)}},g}});var lt=q((Yt,nt)=>{nt.exports=class{constructor(g=[],f){this.html=f||document,this.cf=g,this.duration=300}animate(g){return this.config=this.parse(this.cf),new Promise(f=>{for(let s=0;s<this.config.length;s++){let h=this.config[s],{element:p}=h;if(!h[g]){f();break}let t=h[g];if(!t.options&&!(t.options&&t.options.duration)&&(t.options={duration:this.duration}),!t.keyframes&&!p)continue;let e=t.keyframes,r=0,c=[];for(let b=0;b<e.length;b++){let a=e[b];switch(!0){case typeof a=="string":c.push(this.dic(a));break;case a instanceof Object:{let{name:u,offset:d}=a;if(u&&d){let v=this.dic(u);v[v.length-1].offset=d,c.push(v)}else c.push(a)}}}e=c,c=null;let n=()=>{let b=e[r];p.animate(b,t.options||this.duration).finished.then(()=>{r<e.length-1?(r+=1,n()):(e=[],f())})};n()}})}parse(g){let f=[],s=g.length,h=-1;for(;++h<s;){let p=g[h],t=p.selector,e;switch(!0){case!!(t.val&&t.attr):e=this.html.querySelectorIncluded(`[${t.attr}=${t.val}]`,t.attr,t.val);break;case!!(t.val&&!t.attr):{let r=t.val.match(new RegExp("^[.]"))?"class":t.val.match(new RegExp("^[#]"))?"id":null,c=r?t.val.slice(1):null;e=this.html.querySelectorIncluded(t.val,r,c)}break}p.element=e,f.push(p)}return f}dic(g){return{slideOutUp:[{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"},{transform:"translate3d(0,100%,0)",visibility:"hidden",opacity:"0"}],slideOutRight:[{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"},{transform:"translate3d(100%,0,0)",visibility:"hidden",opacity:"0"}],slideOutLeft:[{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"},{transform:"translate3d(-100%,0,0)",visibility:"hidden",opacity:"0"}],slideOutDown:[{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"},{transform:"translate3d(0,-100%,0)",visibility:"hidden",opacity:"0"}],slideInUp:[{transform:"translate3d(0,100%,0)",visibility:"hidden",opacity:"0"},{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"}],slideInRight:[{transform:"translate3d(100%,0,0)",visibility:"hidden",opacity:"0"},{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"}],slideInLeft:[{transform:"translate3d(-100%,0,0)",visibility:"hidden",opacity:"0",easing:"ease-out"},{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"}],slideInDown:[{transform:"translate3d(0,-100%,0)",visibility:"hidden",opacity:"0"},{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"}],disappear:[{opacity:"1"},{opacity:"0"}],appear:[{opacity:"0"},{opacity:"1"}],flipInX:[,{offset:0,backfaceVisibility:"visible"},{transform:"perspective(400px) rotate3d(1,0,0,90deg)",opacity:"0",offset:0},{transform:"perspective(400px) rotate3d(1,0,0,-20deg)",offset:.4,easing:"ease-in"},{offset:.6,opacity:"1",transform:"perspective(400px) rotate3d(1,0,0,10deg)"},{transform:"perspective(400px) rotate3d(1,0,0,-5deg)",offset:.8},{offset:1,backfaceVisibility:"visible",transform:"perspective(400px) rotate3d(1,0,0,0)"}]}[g.trim()]||[]}}});var at=q((Qt,ot)=>{ot.exports=function(g){let f=g.StorageKit;return class{constructor(){this.storage=new f({child:"array",storage:"session",name:"_cake_persistent"})}listen(s){window.addEventListener("DOMContentLoaded",h=>{setTimeout(()=>{this.storage.getAll().then(p=>{if(!(p&&!p.length))for(let t=0;t<p.length;t++){let e=p[t],r=s[e];r.isConnected=!1,r?!r.isConnected&&r.render.bind(r)():console.error(`component ${r} is not found!`)}})})})}append(s){this.storage.create(s)}remove(s){this.storage.remove(s)}}}});var ht=q((Zt,ct)=>{ct.exports=class{constructor(g){this.Components=g}listen(){window.addEventListener("hashchange",g=>{let f=this.compare(g);this.find(f,this.notify)})}compare(g){let{oldURL:f,newURL:s}=g,h=null;if(f.length>s.length){let p=new URL(f).hash.substring(1).split("/"),t=new URL(s).hash.substring(1).split("/");for(let e=0;e<p.length;e++)if(!t.includes(p[e])){h=p[e];break}}return h}find(g,f){if(!!g)if(this.Components[g])this.Components[g].isConnected&&f(this.Components[g]);else{let s=setInterval(()=>{this.Components[g]&&(this.Components[g].isConnected&&f(this.Components[g]),clearTimeout(s))},50);setTimeout(()=>{clearTimeout(s)},5e3)}}notify(g){g.fire.destroy()}add(g){let f=location.hash;f.includes(g)||(location.hash=f+"/"+g)}remove(g){let s=location.hash.replace(g,"");location.replace(s)}}});var ut=q((Vt,ft)=>{ft.exports=function(g,f){let s=[];return class{constructor(h){this.route=this.compile(h),this.prev=null,this.components=g,this.watch(),this.persist(),Object.defineProperty(f.prototype,"$router",{configurable:!0,get:()=>({goTo:this.goTo,...this.prev}),set(p){}})}goTo(h,p){if(p){let t="";for(let e in p)t+=`${e}=${p[e]}&`;p=t,window.location.hash=`!/${h}?${p}`}else window.location.hash=`!/${h}`}persist(){document.hasRouterPersist||(document.addEventListener("DOMContentLoaded",h=>{this.parse(),this.notify().then(()=>this.navigate(!0))}),document.hasRouterPersist=!0)}watch(){window.hasRouterPop||(window.onpopstate=h=>{this.parse(),this.notify().then(()=>this.clear().then(()=>{this.navigate()}))},window.hasRouterPop=!0)}compile(h){let p={};for(let t in h){t=String(t);let e=t.length,r=t;if(["404"].includes(t)){let c=h[t];h[t]={callback:c,name:t}}else r=r.slice(1);r=r.split("/"),r=r.map((c,n)=>{let b=c.includes(":"),a="";if(n==0?a+="^/":a+="/",b?a+="(([^/#?]+?))":a+=c,n==e-1?a+="/?$":a+="",b){let u=c.replace(":","");p[t]||(p[t]={}),p[t].params={[u]:n}}return a}),p[t]&&p[t].params?p[t]={params:p[t].params,regex:new RegExp(r.join("")),...h[t]}:p[t]={regex:new RegExp(r.join("")),...h[t]}}return p.length=Object.keys(h).length,p.keys=Object.keys(h),p}parse(){let h=window.location.hash,p;if(h?(p=h.includes("#!/")?2:h.includes("#/")?1:null,h=h.slice(p)):(h="/",p=!0),!p)return;let t=new URL(`http://localhost${h}`),{search:e,pathname:r}=t,c=this.route.keys,n={};e&&new URLSearchParams(e).forEach((a,u)=>{n[u]=a});let b=!1;for(let a=0;a<c.length;a++){let u=this.route[c[a]],{regex:d,components:v,params:i,name:y}=u;if(i){let w=String(r);w=w.slice(1),w=w.split("/"),Object.entries(i).forEach(S=>{let[_,O]=S;w[O]&&(n[_]=w[O])})}if(d.test(r)){this.prev={components:v,state:n,path:r,name:y,prev:this.prev},b=!0;break}}if(!b&&this.route["404"]){let a=this.route["404"].callback(),{origin:u,pathname:d}=location;this.route[a]?(console.log(1),a=="/"?a=`${u}${d}`:d.slice(-1)=="/"?a=`${u}${d}#!${a}`:a=`${u}${d}/#!${a}`,location.replace(a)):!!a&&!this.route[a]&&(u.slice(-1)=="/"&&a[0]=="/"&&(a=a.slice(1)),a=`${u}${a}`,location.replace(a))}}navigate(h){if(this.prev){let{components:p,state:t,path:e,name:r}=this.prev;try{if(p.length)return Promise.all(p.map(c=>this.components[c].render({emit:{route:this.prev}})))}catch(c){throw console.log(c),new Error(`some of the component in ${JSON.stringify(p)} in path ${e} of router is not found, make sure the it is created`)}}}static pushState(h,p,t){window.history.pushState(h,p,t);let e=Promise.resolve();if(this.prev){let{components:r,state:c,path:n,name:b}=this.prev;e=Promise.all(r.map(a=>g[a].fire.destroy()))}return e.then(()=>this.navigate())}clear(){let h=Promise.resolve();if(this.prev&&this.prev.prev){let{components:p,state:t,path:e,name:r}=this.prev.prev;h=Promise.all(p.map(c=>g[c].fire.destroy?g[c].fire.destroy():(console.error(`there is no destroy handler in "${c}" component`),Promise.resolve())))}return h}pushState(h,p,t){window.history.pushState(h,p,t);let e=Promise.resolve();return this.clear(),e.then(()=>this.navigate())}static subscribe(h){h&&h.constructor.name=="Function"&&s.push(h)}notify(){return Promise.all(s.map(h=>h()))}}}});var dt=q((te,pt)=>{pt.exports=function(){let g=this;this.$form={},this.$form.options=(f,s)=>{let{options:h,params:p}=f;return h||(h=[]),Promise.all(h.map(e=>{let{control:r,field:c,tbl:n,src:b,schema:a}=e;return g.fire(b,{tbl:n,field:c,params:p}).then(u=>{u=u||[],e.query=u,u=u.map(v=>a(v));let d=a({});for(let v in d)d.hasOwnProperty(v)&&(d[v]="");return u.unshift(d),e.options=u,e})})).then(e=>s?e.reduce((r,c)=>{let{type:n,control:b}=c;return n||(n="select"),r[n]||(r[n]={}),r[n][b]||(r[n][b]=c),r},{}):e.reduce((r,c)=>(r[c.control]=c.options,r),{})).catch(e=>{console.error(e)})},this.$form.plot=f=>{let{data:s,container:h}=f;if(!s&&!h)return;let p=(t,e,r)=>{if(!t){console.info("root is not provided!");return}let c=t.querySelectorAll(`${e}`),n=c.length;if(!n){r(null,s);return}for(let b=0;b<n;b++){let a=c[b],u=a.name,d=s[u],v=r(a,d,b);if(v=="break")break;v!="continue"}};return p(h,"INPUT.input",function(t,e){e!=null&&(t.type=="date"&&(e=new Date(e)=="Invalid Date"?"":new Date(e).toJSON().split("T")[0]),t.value=e)}),setTimeout(()=>{p(h,"SELECT.input:not(.cake-template)",function(t,e){p(t,"OPTION:not(.cake-template)",function(r,c,n){if(r){if(r.value==e)return t.selectedIndex=n,"break"}else console.log(r,c,"provide schema")})})},500),Promise.resolve()}}});var mt=q((ee,gt)=>{gt.exports=function(g){let f=g.StorageKit,s={};class h{constructor(t){this.name=t,this.reactiveData={},this.notify=[],this.install(this.name),this.pKeys={},this.sanitize=function(e){let r={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"},c=/[&<>"'/]/ig;return typeof e=="string"?e.replace(c,n=>r[n]||""):e}}registerNotifier(t){this.notify.push(t)}install(){this.session=new f({child:"object",storage:"session",name:`_cake_${this.name}_cf`})}notifier(t,e){let{value:r,bind:c}=e;return this.reactiveData[t]||(this.reactiveData[t]={}),this.reactiveData[t][c]=r,this.set(c,r)}getInputData(t="json",e){let r=e||this.name,c=JSON.parse(JSON.stringify(this.reactiveData[r]));for(let n in c){let b=c[n];c[n]=this.sanitize(b)}if(t=="json")return c;if(t=="formdata"){let n=new FormData;for(let b in c){let a=c[b];n.append(b,a)}return n}}hook(t,e,r){s[t]||(s[t]={}),s[t][e]||(s[t][e]=[]),s[t][e].push(r)}get(t,e=!1){let r=this.pKeys[t];return e?this.session.get(t,!0):this.session.get(t)}set(t,e){let r=`${this.name}-${t}`,c=this.notify,n=this.name,b=null;return this.pKeys[t]=r,new Promise(async(a,u)=>{t!="password"&&this.session.createOrUpdate(t,e),a()}).then(async()=>{let a=s[this.name];if(a){let u=a[t];u&&u.forEach(d=>{d(e)})}return Promise.all(c.map(u=>u(t,e,b,n)))})}}return h}});var bt=q((ie,yt)=>{yt.exports=function(g){let f=g.StorageKit,s=g.Templating,h=g.Utils;function p(){this.uiid=0,this.notify={},this.st={},this.cacheStatic=[],this.logicalType=["if","bind","switch","toggle","class","attr"],this.store=new f({child:"object",storage:"session",name:"_cake_component_cf"})}return p.prototype._getConfig=function(t,e,r,c,n){if(r==null)return[];if(r==c&&t!="bind")return[];let b=`${t}-${e}-${n}`,a=Object.cache._getConfig;if(a||(a=Object.cache._getConfig={}),!a[b]){var u=n?(()=>{let d=this.st[n]&&this.st[n][t];if(d&&d.length){let v=[];for(let i=0;i<d.length;i++){let y=JSON.parse(JSON.stringify(d[i]));if(y.bind==e){v.push({...y,...r});break}}return v}else return[]})():(()=>{let d=[];for(let v in this.st)if(this.st.hasOwnProperty(v)){let i=this.st[v];if(i[t])for(let y=0;y<i[t].length;y++){let m=i[t][y],w=JSON.parse(JSON.stringify(m));m.bind==e&&d.push({...w,component:v,...r})}}return d})();a[b]=u}return a[b]},p.prototype._notifyToggle=function(t,e,r,c,n){n=n||document;let b=this._getConfig("toggle",t,e,r);if(!!b){n=n||document;for(let a=0;a<b.length;a++){let u=b[a];if(!u)continue;let{sel:d,bind:v,value:i,ops:y}=u,m=n.querySelector(`[data-toggle=${d}]`);i==r&&m&&m.classList.remove("is-active"),i==e&&m&&(m.classList.contains("is-active")&&m.classList.remove("is-active"),m&&m.classList.add("is-active"))}}},p.prototype._notifySwitch=function(t,e,r,c,n){n=n||document;let b=this._getConfig("switch",t,e,r,c);if(!b.length)return;let a=[];for(let u=0;u<b.length;u++){let d=b[u],{bind:v,sel:i,map:y,cases:m}=d,w=n.querySelectorAll(`[data-switch-slot=${i}]`);for(let S=0;S<e.length;S++){let _=S,O=e[S],T=w[S],k=O[y];if(k!=null){let $=null;for(let E=0;E<m.length;E++)if(m[E].bind.includes(k)){$=m[E];break}if($){let{_id:E,bind:P}=$,L=document.querySelector(`[data-case=${i}-${E}]`);if(L&&L.toString().includes("Element")){L=L.cloneNode(!0);let A=L.querySelectorAll("[data-for-auto=true]");for(let I=0;I<A.length;I++){let j=A[I];j.dataset.for=`${j.dataset.for}-active`}L.removeAttribute("data-case");let C=new s(O,L,!1).createElement();for(let I=0;I<this.logicalType.length;I++){let j=this.logicalType[I];if(L.dataset[j]){let N=L.dataset[j],R=`${N}-${_}`;C.dataset[j]=R;let{bind:H}=this.getWatchItemsBySel(c,j,N);N&&a.push({_type:j,...O,incrementedSel:R,sel:N,bind:H,incrementId:_})}}C.classList.remove("cake-template"),T.replaceWith(C)}}}}}for(let u of a){let{bind:d,_type:v}=u,i=`_notify-${v}`.toCamelCase();this[i](d,u)}},p.prototype._notifyBind=function(t,e,r,c,n){n=n||document;let b=this._getConfig("bind",t,e,r,c);if(!!b.length)for(let a=0;a<b.length;a++){let u=b[a],d,{attr:v,bind:i,sel:y,incrementedSel:m,incrementId:w}=u;m?d=e[i]:d=e;let S=v.toHyphen();if(t==i){let _=n.querySelectorAll(`[data-bind=${m||y}]`);for(let O=0;O<_.length;O++){let T=_[O];v=="class"||v=="className"?T.classList.length?(console.log(r),h.splitBySpace(r,function(k){T.classList.remove(k)}),h.splitBySpace(d,function(k){T.classList.add(k)})):h.splitBySpace(d,function(k){T.classList.add(k)}):(T.setAttribute(S,d),T[v]=d)}}}},p.prototype._notifyInput=function(t,e,r,c,n){n=n||document;let b=this._getConfig("input",t,e,r,c);if(!!b.length)for(let a=0;a<b.length;a++){let u=b[a],{attr:d,bind:v,sel:i}=u,y=d.toHyphen();if(t==v){let m=n.querySelectorAll(`[data-input=${i}]`);for(let w=0;w<m.length;w++){let S=m[w];d=="className"?r?e?S.classList.replace(r,e):S.classList.remove(r):S.classList.add(e):(S.setAttribute(y,e),S[d]=e)}}}},p.prototype._notifyFor=function(t,e,r,c,n){let b=this._getConfig("for",t,e,r,c);if(!b.length)return;let a=[];for(let u=0;u<b.length;u++){let{bind:d,sel:v,iter:i,ins:y,component:m,cleaned:w}=b[u];n=n||document,m&&(n=Cake.Components[m].html);let S=n.querySelectorIncluded(`[data-for-template=${v}]`),_=S.cloneNode(!0);(()=>{let O=_&&_.querySelectorAll("[data-switch]");if(O&&O.length){let T=O.length,k=-1;for(;++k<T;){let $=O[k],E=$.parentElement,P=document.createElement("div");P.dataset.switchSlot=$.dataset.switch,E.replaceChild(P,$)}O=null}})(),(()=>{let O=_,T=-1;l=e.length,e=e.map(k=>{for(let $ in k)k.hasOwnProperty($)&&(k[`${i}.${$}`]=k[$]);return k}),e.forEach(k=>{let $=new s(k,O,!1).createElement();$.style.removeProperty("display"),$.classList.remove("cake-template"),$.removeAttribute("data-for-template"),S.insertAdjacentElement("beforebegin",$);let E=$.querySelectorAll("[data-src]");if(E)for(let P=0;P<E.length;P++){let L=E[P];L.src=L.dataset.src,L.removeAttribute("data-src")}}),w&&S.remove()})()}this._notifyForAuto({configs:b,newValue:e})},p.prototype._notifyForAuto=function(t){let{vItems:e,configs:r,newValue:c}=t;for(let n=0;n<r.length;n++){let b=r[n],a=b.children;if(!a)continue;let u=[];for(let d=0;d<a.length;d++){let v=a[d];if(!this.st[b.component])continue;let i=this.st[b.component].for.find(y=>y.sel==v);i&&u.push(new Promise(y=>{let{bind:m,sel:w,iter:S,ins:_}=i;h.timeOut(()=>{let O=document.querySelectorAll(`[data-for=${w}-active]`);for(let T=0;T<O.length;T++){let k=O[T],$=k.dataset.forBindKey,E=k.dataset.forBindVal,P=c.find(C=>C[$]==E),L=m.split(".")[m.split(".").length-1],A=P[L].length&&P[L].map(C=>C instanceof Object?C:{[S]:C});if(A)for(let C=0;C<A.length;C++){let I=A[C],j=k.cloneNode(!0),N=new s(I,j,!1).createElement();N.style.removeProperty("display"),N.classList.remove("cake-template"),N.removeAttribute("data-for-template"),fragment.append(N),k.insertAdjacentElement("beforebegin",N)}k.parentElement.tagName=="SELECT"&&(k.parentElement.selectedIndex=0)}})}))}}},p.prototype._notifyForUpdate=function(t,e,r,c,n){n=n||document;let b=this._getConfig("forUpdate",t,e,r,c);if(!!b.length)for(let a=0;a<b.length;a++){let{bind:u,sel:d,iter:v,ins:i}=b[a];for(let y in e)if(e.hasOwnProperty(y)){let m=document.querySelectorAll(`[data-for-bind-val=${y}]`);for(let w=0;w<m.length;w++){let S=m[w],_=S.dataset.forBindVal;if(!S.dataset.forTemplate)S.remove();else{let O=S.cloneNode(!0);O.style.removeProperty("display"),O.classList.remove("cake-template");let T=e[_],k=-1;for(l=T.length;++k<l;){let $=T[k],E=new s($,O,!1).createElement();E.classList.remove("cake-template"),E.removeAttribute("data-for-template"),S.insertAdjacentElement("beforebegin",E),S.parentElement.tagName=="SELECT"&&(S.parentElement.selectedIndex=0)}}}}}},p.prototype._notifyClass=function(t,e,r,c,n){n=n||document;let b=this._getConfig("class",t,e,r,c);if(!b.length)return;let a=function(d){return d.split(" ").join("")},u={};for(let d=0;d<b.length;d++){let v=b[d],i,{hasNegate:y,bind:m,testVal:w,className:S,ops:_,sel:O,incrementedSel:T,incrementId:k}=v;if(m=a(m),T?i=e[m]:i=e,t==m){u[O]||(u[O]=n.querySelectorAll(`[data-class=${T||O}]:not(.cake-template)`));let $=u[O];for(let E=0;E<$.length;E++){let P=$[E],L=!1;_?(L=h.logTest(i,_,w),y&&(L=!L)):y?L=!i:L=!!i,L?h.splitBySpace(S,function(A){h.toArray(P.classList).includes(A)||h.timeOut(()=>{P.classList.add(A)})}):h.splitBySpace(S,function(A){h.toArray(P.classList).includes(A)&&h.timeOut(()=>{P.classList.remove(A)})})}}}},p.prototype._notifyAttr=function(t,e,r,c,n){n=n||document;let b=this._getConfig("attr",t,e,r,c);if(!b.length)return;let a=function(d){return d&&d.split(" ").join("")},u={};for(let d=0;d<b.length;d++){let v=b[d],{hasNegate:i,bind:y,testVal:m,attr:w,ops:S,sel:_,attrkey:O,attrvalue:T,incrementedSel:k,incrementId:$}=v;if(y=a(y),w=a(w),t==y){u[_]||(u[_]=n.querySelectorAll(`[data-attr=${k||_}]:not(.cake-template)`));let E=u[_];for(let P=0;P<E.length;P++){let L=E[P],A=!1;S?(A=h.logTest(e,S,m),i&&(A=!A)):i?A=!e:A=!!e,A?L.removeAttribute(O):T&&L.setAttribute(O,T)}}}},p.prototype._notifyIf=function(t,e,r,c,n){n=n||document;let b=this._getConfig("if",t,e,r,c);if(!b.length)return;let a={};for(let u=0;u<b.length;u++){let d=b[u],{attr:v,bind:i,sel:y,testval:m,_true:w,_false:S,ops:_,hasNegate:O,incrementedSel:T,incrementId:k}=d,$=v.toHyphen(),E=w!="null",P=S!="null";if(t==i){a[y]||(a[y]=n.querySelectorAll(`[data-if=${T||y}]:not(.cake-template)`));let L=a[y];for(let A=0;A<L.length;A++){let C=L[A],I=e,j;if(m?j=h.logTest(m,_,I):j=O?!I:!!I,j){if(E)if(v=="class"){let N=w.split(" ");P?(S.split(" ").forEach(H=>{C.classList.remove(H)}),N.forEach(H=>{C.classList.add(H)})):N.forEach(R=>{C.classList.contains(R)||C.classList.add(R)})}else I[w]&&C.setAttribute(v,I[w])}else if(P)if(v=="class"){let N=S.split(" ");E?(w.split(" ").forEach(H=>{C.classList.remove(H)}),N.forEach(H=>{C.classList.add(H)})):trueClasses.forEach(R=>{C.classList.contains(R)||C.classList.add(R)})}else C.setAttribute(v,S)}}}},p.prototype.notifier=function(t,e,r,c){let n=e;return h.isObject(n)&&(n=JSON.parse(JSON.stringify(e))),new Promise(b=>{this._notifyFor(t,n,r,c),b()}).then(()=>this._notifyForUpdate(t,n,r,c)).then(()=>this._notifySwitch(t,n,r,c)).then(()=>this._notifyToggle(t,n,r,c)).then(()=>this._notifyBind(t,n,r,c)).then(()=>this._notifyInput(t,n,r,c)).then(()=>this._notifyIf(t,n,r,c)).then(()=>this._notifyClass(t,n,r,c)).then(()=>this._notifyAttr(t,n,r,c))},p.prototype.registerNotifier=function(t,e){this.notify[t]||(this.notify[t]=[]),this.notify[t].push(e)},p.prototype.getEventTarget=function(t){let e=`${t}`,r=Object.cache.getEventTarget;if(r||(r=Object.cache.getEventTarget={}),!r[e]){let c=this.st[t];r[e]=c&&(c?.evt??[])||[]}return r[e]},p.prototype.getRouterTarget=function(t){let e=`${t}`,r=Object.cache.getRouterTarget;if(r||(r=Object.cache.getRouterTarget={}),!r[e]){let c=this.st[t];r[e]=c&&(c?.router??[])||[]}return r[e]},p.prototype.getWatchItems=function(t){let e=`${t}`,r=Object.cache.getWatchItems;if(r||(r=Object.cache.getWatchItems={}),!r[e]){let c=this.st[t]||{},n=new Set;for(let b in c)if(c.hasOwnProperty(b)){let a=c[b];for(let u=0;u<a.length;u++){let d=a[u],{bind:v}=d;if(v)n.add(v);else continue}}r[e]=[...n]}return r[e]},p.prototype.getWatchItemsByType=function(t,e){let r=`${t}-${e}`,c=Object.cache.getWatchItemsByType;if(c||(c=Object.cache.getWatchItemsByType={}),!c[r]){let b=(this.st[t]||{})[e]||[],a=new Set;for(let u=0;u<b.length;u++){let d=b[u],{bind:v}=d;switch(!!v){case!0:a.add(v);break;default:switch(!0){case(e=="animate"||e=="toggle"):(a.constructor.name="Set")&&(a=[]),a.push(d)}}}c[r]=[...a]}return c[r]},p.prototype.getWatchItemsBySel=function(t,e,r){let c=`${t}-${e}-${r}`,n=Object.cache.watchItemsBySel;if(n||(n=Object.cache.watchItemsBySel={}),!n[c]){let a=this.st[t][e].find(u=>u.sel==r);n[c]=a||!1}return n[c]},p.prototype._activateReactive=t=>{},p.prototype._register=function(t,e,r,c){switch(!0){case!t[e]:t[e]={};case!t[e][r]:t[e][r]=[];default:t[e][r].push(c);break}},p.prototype._static=function(t){return function(e,r){let c=[];for(let n=0;n<e.length;n++){let b=e[n];switch(r){case!1:c.push(b);break;case!0:{let a=b.closest("[data-component]");switch(a=a&&a.dataset.component,a==t){case!0:c.push(b);break}}break;default:continue}}return c}},p.prototype._compileEvents=function(t,e,r){return new Promise(c=>{if(!t.length){c();return}let n=this._static(e)(t,r);if(!n.length){c();return}for(let b=0;b<n.length;b++){let a=`cke${this.uiid}`,u=n[b],d=u.dataset.event.split(" ").join("").split(",");for(let v=0;v<d.length;v++){let[i,y]=d[v].split(":");this._register(this.st,e,"evt",{event:i,sel:a,cb:y}),u.dataset.event=a,this.uiid++}}c()})},p.prototype._compileToggle=function(t,e,r){return new Promise(c=>{if(!t.length){c();return}if(!this._static(e)(t,r).length){c();return}let b={};for(let a=0;a<t.length;a++){let u=`ckt${this.uiid}`,d=t[a],v=d.dataset.toggle;b[v]&&(u=b[v]),this._register(this.st,e,"toggle",{sel:u,name:"ns-"+v}),d.dataset.toggle=u,this.uiid++,b[v]=u}b={},c()})},p.prototype._compileFor=function(t,e,r,c){return new Promise(n=>{let b=c;if(!t.length){n();return}let a=this._static(e)(t,r);if(!a.length){n();return}let u={};for(let d=0;d<a.length;d++){let v=`ckf${this.uiid}`,i=a[d],y=i.dataset.for,m=i.dataset.forCleaned=="true",[w,S,_]=y.split(" ");if(i.style.display="none",i.classList.add("cake-template"),i.dataset.for=v,i.dataset.forTemplate=v,u[v]={bind:_,sel:v,iter:w,ins:S,cleaned:m},++this.uiid,d!=0){let O=i.parentElement&&i.parentElement.closest("[data-for]");if(!O)continue;let T=!!O.dataset.for;if(b.contains(O)&&T){let k=O.dataset.for,$=u[k];$&&!$.children?$.children=[v]:$&&$.children.push(v)}}}for(let d in u)u.hasOwnProperty(d)&&this._register(this.st,e,"for",u[d]);n()})},p.prototype._compileForUpdate=function(t,e,r){return new Promise(c=>{if(!t.length){c();return}let n=this._static(e)(t,r);if(!n.length){c();return}for(let b=0;b<n.length;b++){let a=`ckfu${this.uiid}`,u=n[b],d=u.dataset.forUpdate;u.style.display="none",u.classList.add("cake-template"),u.dataset.forUpdate=a,u.dataset.for||(u.dataset.forTemplate=a);let[v,i,y]=d.split(" ");this._register(this.st,e,"forUpdate",{bind:y,sel:a,iter:v,ins:i}),this.uiid++}c()})},p.prototype._compileSwitch=function(t,e,r){return new Promise(c=>{if(!t.length){c();return}let n=this._static(e)(t,r);if(!n.length){c();return}for(let u=0;u<n.length;u++){let d=`cks${this.uiid}`,v=n[u],i=v.dataset.switch,y="def";if(i.includes(".")){var[b,...a]=v.dataset.switch.split(".");i=b,y=a[0]}v.dataset.switch=d;let m=v.querySelectorAll("[data-case]"),w=[];for(let S=0;S<m.length;S++){let _=m[S],O=_.closest(`[data-switch=${d}]`);if(_.classList.add("cake-template"),O){let T=_.dataset.case,k=`cksc${this.uiid}`;_.dataset.case=`${d}-${k}`,w.push({_id:k,bind:T}),this.uiid++}}this._register(this.st,e,"switch",{bind:i,sel:d,map:y,cases:w}),this.uiid++}c()})},p.prototype._compileBind=function(t,e,r){return new Promise(c=>{if(!t.length){c();return}let n=this._static(e)(t,r);if(!n.length){c();return}for(let u=0;u<n.length;u++){let d=`ckm${this.uiid}`,v=n[u],y=v.dataset.bind.split(",");for(let m=0;m<y.length;m++){let w=y[m].split(" ").join("");if(w.includes(":"))var[b,a]=w.split(":");else var a=w,b="value";this._register(this.st,e,"bind",{attr:b,bind:a,sel:d})}this.uiid++,v.dataset.bind=d}c()})},p.prototype._compileAnimate=function(t,e,r){return new Promise(c=>{if(!t.length){c();return}let n=this._static(e)(t,r);if(!n.length){c();return}for(let b=0;b<n.length;b++){let a=`cka${this.uiid}`,u=n[b],d=u.dataset.animate;d=d.split(" ").join("");let v={},i=d.split(",");for(let y=0;y<i.length;y++){let m=i[y],[w,S]=m.split(":");if(w=="ns"){v.ns=S;break}else v[w]={keyframes:S.split("-")}}v.selector={attr:"data-animate",val:a},this._register(this.st,e,"animate",v),this.uiid++,u.dataset.animate=a}c()})},p.prototype._compileIf=function(t,e,r){return new Promise(c=>{if(!t.length){c();return}let n=this._static(e)(t,r);if(!n.length){c();return}let b=new RegExp("<|>|===|==|!==|!=");for(let a=0;a<n.length;a++){let u=`ci${this.uiid}`,d=n[a],v=d.dataset.if,i=d.dataset.ifBind,y=v.split(",");for(let m=0;m<y.length;m++){let w=y[m],S=w.substring(0,w.indexOf("=")),_=w.substring(w.indexOf("=")+1,w.length);_=_.split(new RegExp("[()]")).join("");let[O,T]=_.split("?"),k=O[0]=="!";hasRegularLog=O.match(b);let $,E,P;if(hasRegularLog){let C=O.split(b);$=C[0].trim(),E=C[1].trim(),P=hasRegularLog[0]}else $=O;k&&($=$.slice(1));let[L,A]=T.split(":");this._register(this.st,e,"if",{hasNegate:k,attr:S,ops:P,bind:$,testval:E||null,_true:L,_false:A,sel:u,ifBind:i})}this.uiid++,d.dataset.if=u}c()})},p.prototype._compileClass=function(t,e,r){return new Promise(c=>{if(!t.length){c();return}let n=this._static(e)(t,r);if(!n.length){c();return}let b=new RegExp("<|>|===|==|!==|!=");for(let a=0;a<n.length;a++){let u,d,v,i,y,m,w,S;u=`cc${this.uiid}`,d=n[a],v=d.dataset.class;let[_,O]=v.split("&&");if(_=_.trim(),O=O.trim(),i=_.match(b),y=_[0]=="!",i){let T=_.split(b);bind=T[0],S=T[1],w=i[0]}else bind=_;y&&y&&(bind=bind.slice(1)),this._register(this.st,e,"class",{hasNegate:y,bind,testVal:S,className:O,ops:w,sel:u}),this.uiid++,d.dataset.class=u}c()})},p.prototype._compileAttr=function(t,e,r){return new Promise(c=>{if(!t.length){c();return}let n=this._static(e)(t,r);if(!n.length){c();return}let b=new RegExp("<|>|===|==|!==|!=");for(let a=0;a<n.length;a++){let u,d,v,i,y,m,w,S;u=`cre${this.uiid}`,d=n[a],v=d.dataset.attr;let[_,O]=v.split("&&");O=O.trim();let[T,k]=O.split("=");if(_=_.trim(),i=_.match(b),y=_[0]=="!",i){let $=_.split(b);bind=$[0],S=$[1],w=i[0]}else bind=_;y&&y&&(bind=bind.slice(1)),this._register(this.st,e,"attr",{hasNegate:y,bind,testVal:S,attrkey:T,attrvalue:k,ops:w,sel:u}),this.uiid++,d.dataset.attr=u}c()})},p.prototype._compileRouter=function(t,e,r){return new Promise(c=>{if(!t.length){c();return}let n=this._static(e)(t,r);if(!n.length){c();return}for(let b=0;b<n.length;b++){let a=`rt${this.uiid}`,u=n[b],d=u.dataset.routerLink;this._register(this.st,e,"router",{value:d,sel:a}),this.uiid++,u.dataset.routerLink=a}c()})},p.prototype._compileInput=function(t,e,r){return new Promise(c=>{if(!t.length){c();return}let n=this._static(e)(t,r);if(!n.length){c();return}for(let u=0;u<n.length;u++){let d=`cknt${this.uiid}`,v=n[u],i=v.tagName,m=v.dataset.input.split(",");for(let w=0;w<m.length;w++){let S=m[w].split(" ").join("");if(S.includes(":"))var[b,a]=S.split(":");else var a=S,b="value";this._register(this.st,e,"input",{attr:b,bind:a,sel:d,nodeType:i})}this.uiid++,v.dataset.input=d}c()})},p.prototype.inject=function(t,e,r=!1){return new Promise(c=>{let n=t.getElementsByDataset("bind","for","for-update","switch","toggle","event","animate","if","class","input","attr");c(n)}).then(c=>{let n=[],b={bind:this._compileBind,switch:this._compileSwitch,toggle:this._compileToggle,if:this._compileIf,class:this._compileClass,attr:this._compileAttr,for:this._compileFor,"for-update":this._compileForUpdate,event:this._compileEvents,animate:this._compileAnimate,input:this._compileInput};for(let a in c)c.hasOwnProperty(a)&&c[a].length&&n.push(b[a].apply(this,[c[a],e,r,t]));return console.timeEnd(e),n.length?Promise.all(n):Promise.resolve()}).then(()=>Promise.resolve())},p}});var wt=q((re,vt)=>{vt.exports=function(g){let f=g.Mo,s=g.Templating,h=g.Piece,p=g.Utils,t=g.pushState;function e(r,c,n){this.name=r,this.template=c,this.options=n,this.handlers=n.handlers,this.subscribe=n.subscribe,this.data={},this.root=n.root,this.items=!1,this.type=n.type||"view",this.toggle=n.toggle,this.targets={},this.animateOptions=n.animate,this.role=n.role,this.isReady=!1,this.await={},this.utils=p,(r=="app"||n.role=="app")&&(this.staticComponent=n.static||[]),this.container={},this.compile=new Promise(b=>{this._bindHandlers(),b()}).then(()=>{this._bindSubscribe()}).then(()=>{switch(this.type=="view"&&!!this.template){case!0:return this.createElementAsync();default:this.isStatic=!1;break}})}return e.prototype.isStatic=!1,e.prototype.hasEvent=!1,e.prototype.isConnected=!1,e.prototype.destroyed=!1,e.prototype.isCreated=!1,e.prototype.Subscribe=function(r){this.$observer.registerSubscribe({[r.listenTo]:{[r.original]:[r]}})},e.prototype.Node=function(r){return new h(r)},e.prototype._bindHandlers=function(){for(let r in this.handlers)if(this.handlers.hasOwnProperty(r)){let c=this.handlers[r],n=c.name;c=c.bind(this),c.original=n,c.binded=this.name,this.handlers[n]=c,this.initAwaitHandlers(r)}this.await.destroy||(this.await.destroy=Promise.resolve()),this.await.animateRemove||(this.await.animateRemove=Promise.resolve())},e.prototype.initAwaitHandlers=function(r){this.await[r]=Promise.resolve()},e.prototype._bindSubscribe=function(){let r={};for(let c in this.subscribe)if(this.subscribe.hasOwnProperty(c))if(subscribe=this.subscribe[c],c=="alert"&&console.log(subscribe),!!subscribe.components&&!!subscribe.handler){let b=c,{components:a,handler:u}=subscribe;u=u.bind(this),u.binded=this.name,u.original=b;for(let d=0;d<a.length;d++){let v=a[d];r[v]||(r[v]={}),r[v][b]||(r[v][b]=[]),u.listenTo=v,r[v][b].push(u)}}else{r[c]||(r[c]={});let b=subscribe;for(let a in b)if(b.hasOwnProperty(a)){let u=b[a],d=u.name;try{u=u.bind(this)}catch{}u.original=d,u.binded=this.name,u.listenTo=c,r[c][d]||(r[c][d]=[]),r[c][d].push(u)}}this.subscribe=r},e.prototype.notifyStaticComponent=function(r,c,n){Cake.Observer.notify(r,c,n,this.staticComponent[r],!0,this.name)},e.prototype.doFor=function(r,c){let n=()=>this.html;c!=null&&this.$attrib._notifyFor(r,c,null,this.name,n())},e.prototype.doToggle=function(r,c){this.$attrib._notifyToggle(r,c,null,this.name,this.html)},e.prototype.doSwitch=function(r,c){this.$attrib._notifySwitch(r,c,null,this.name,this.html)},e.prototype.doIf=function(r,c){this.$attrib._notifyIf(r,c,null,this.name,this.html)},e.prototype.$animate=function(r){let c=this.$attrib.getWatchItemsByType(this.name,"animate"),n=this.animateOptions,b=[];return(()=>{if(!(!c.length&&!(c instanceof Array)||!n))for(let a=0;a<c.length;a++){let u=c[a],{ns:d,selector:v}=u;if(u.ns){if(n[d]){let i=n[d];Object.assign(u,n[d]),delete n[d]}}else b.push(c)}})(),c.length?((()=>{let a={},u={};for(let d in n)n.hasOwnProperty(d)&&(u.val=d,a.selector=u,Object.assign(a,n[d]),c.push(a),a={},u={})})(),new f(c,this.html).animate(r)):!1},e.prototype.$templating=function(r,c,n){let b=c||this.template;return new s(r,b,n).createElement()},e.prototype.createElement=function(){if(!(this.template.substring(0,1)=="#"))return;let c=this.template.substr(1),n=document.getElementById(c),b=this.isTemplate=n&&n.toString().includes("Template");if(!n)throw new Error(`the template for ${this.name} is not found with.`);return new Promise(a=>{switch(b){case!0:{let u=n.getContent(!0);if(!u)throw new Error(`it might be theres no template in component - ${this.name}`);u.cake_component=this.name,this.html=this.Node(u),this._parseHTML(this.isStatic).then(()=>{this._watchBindedItems(),a()})}break;case null:a();break;default:{let u=n;if(!u)throw new Error(`it might be theres no template in component - ${this.name}`);u.cake_component=this.name,this.html=this.Node(u),this.isStatic=!0,this._parseHTML(this.isStatic).then(()=>{a()})}}})},e.prototype.createElementAsync=function(){return new Promise(r=>{this.createElement().then(()=>{r()})}).then(()=>{this.isReady=!0})},e.prototype._isParsed=!1,e.prototype._parseHTML=function(r=!1){return this.$attrib.inject(this.html,this.name,r).then(()=>{this.original=this.html.cloneNode(),this._isParsed=!0})},e.prototype.render=function(r){let{root:c,multiple:n,cleaned:b,emit:a,static:u,hashed:d,data:v}=r||{},i={emit:a||{}},y=m=>this.data[m]||this.$scope[m]||null;return new Promise((m,w)=>{!!c&&(this.root=c),n&&this._smoothReset(),this.isReady?m():this.createElement().then(()=>(d===!0&&this.$hash.add(this.name),!this.template&&this.fire.isConnected&&this.fire.isConnected(i,!0))).then(()=>{this.isReady=!0,m()})}).then(()=>this.await.destroy.then(()=>this.await.animateRemove).then(()=>new Promise((m,w)=>{let S=this.$attrib.getWatchItemsByType(this.name,"for");for(let _=0;_<S.length;_++){let O=y(S[_]);this.doFor(S[_],O)}m(this.html)}).then(m=>(i={element:m,emit:a},new Promise((w,S)=>{try{this.fire.beforeConnected&&this.fire.beforeConnected(i,!0),w(m)}catch(_){S(_)}}))).then(m=>{if(!this.isStatic)return(v?(()=>new Promise(S=>{let _=m.getElement();_=this.$templating(v,_),this.html=m=this.Node(_),this.html.replaceDataSrc(),v=null,S()}))():Promise.resolve()).then(()=>{m.appendTo(this.root,b),this.isConnected=!0})}).then(()=>this.findTarget()).then(()=>this.findContainer()).then(()=>{let m=this.$attrib.getWatchItemsByType(this.name,"switch");for(let w=0;w<m.length;w++)this.doSwitch(m[w],y(m[w]))}).then(()=>this.addEvent(u,n)).then(()=>{try{return this.fire.isConnected&&this.fire.isConnected(i,!0)}catch(m){console.log(440,m)}}).then(()=>this.$animate("render")).then(()=>new Promise((m,w)=>{p.timeOut(()=>{this._watchReactive(),m()},100)}))))},e.prototype.renderAsync=function(r){this.render(r).then(()=>{this.$persist.append(this.name)})},e.prototype._smoothReset=function(){this.isConnected=!1,this.html=this.original.cloneNode()},e.prototype._hardReset=function(r){return this.isConnected=!1,this.$persist.remove(r),this.html=this.original.cloneNode(),!0},e.prototype.reset=function(){let r=this.$animate("remove");return r instanceof Promise?this.await.animateRemove=new Promise(c=>{r.then(()=>this.html.remove()).then(()=>this._hardReset(this.name)).then(()=>{c()})}):new Promise(c=>{this.html.remove(this.name),this._hardReset(this.name),c()})},e.prototype.addEvent=function(r,c){if(!!c&&!!r)return!1;let a=this.name;function u(d,v,i,y){return function(m){i||m.preventDefault(),y&&m.stopPropagation(),Cake.Observer.notify(v,d,m)}}if(!!this.targets){for(let d in this.targets)if(this.targets.hasOwnProperty(d)){let v=this.targets[d];for(let i of v){let{sel:y,el:m,cb:w}=i,S=d,_=d.substring(0,2),O=_.includes("~"),T=_.includes("^");O||T?(S=d.slice(1),w=w||S):w||(w=d),m.Ref().get("__cake__events")||m.Ref().set("__cake__events",{});let k=m.Ref().get("__cake__events");if(!k[w])m.addEventListener(S,u(w,a,O,T),!0),k[w]=!0,m.Ref().set("__cake__events",k);else continue}}}},e.prototype.findTarget=function(){let r=this.$attrib.getEventTarget(this.name),c=JSON.parse(JSON.stringify(r));for(let n of c)n.el=document.querySelector(`[data-event=${n.sel}]`),this.targets[n.event]||(this.targets[n.event]=[]),this.targets[n.event].push(n)},e.prototype.toggler=function(r){let c=this.$attrib.getWatchItemsByType(this.name,"toggle"),n=class{constructor(a,u,d,v){this.toggle=v.toggle,this.bind=a,this.bases=u,this.cache=v.$cache,this.html=d}check(a){let u=this.toggle[a];if(!u)console.error(`${a} is not found in toggle! choose from ${JSON.stringify(Object.keys(this.toggle))}`);else{if(c.length){let{ns:d}=u,v=c.find(i=>i.name==`ns-${d}`);v&&(u.sel=`[data-toggle=${v.sel}]`)}return u}}_toggle(){let a=this.check(this.bind);if(!a)return;let{basis:u="data-name",cls:d="is-active",mode:v="radio",sel:i,persist:y=!0}=a,m=this.html.querySelectorAll(i);if(!m.length)return;let w,S;if(m.length==1){let _=typeof this.bases=="boolean",O=!!this.bases,T=m[0];if(y){let k=function($,E,P){P?$.classList.contains(E)&&$.classList.remove(E):$.classList.contains(E)||$.classList.add(E)};_?(O?(this.cache.createOrUpdate(this.bind,!0),k(T,d,!0)):(this.cache.createOrUpdate(this.bind,!1),k(T,d,!1)),T.classList.toggle(d)):(this.cache.createOrUpdate(this.bind,!T.classList.contains(d)),T.classList.toggle(d))}}else for(let _=0;_<m.length;_++){let O=m[_],T=O.classList.contains(d),k=O.getAttribute(u);k==this.bases?(v=="switch"?O.classList.toggle(d):T||O.classList.add(d),y&&this.cache.createOrUpdate(this.bind,k),S=k):T&&(O.classList.remove(d),w=O.getAttribute(u))}return{prev:w,next:S}}_recall(){let a=this.check(this.bind);if(!a)return;let{basis:u="data-name",cls:d="is-active",sel:v}=a;return this.cache.get(this.bind).then(i=>{if(!i)return i;let y=i,m=this.html.querySelectorAll(v);if(!!m.length){if(m.length==1){let w=m[0];y&&w.classList.add(d)}else for(let w=0;w<m.length;w++){let S=m[w],_=S.classList.contains(d);S.getAttribute(u)==y&&(_||S.classList.add(d))}return y}})}},b=(a,u)=>new n(a,u,this.html,this)._toggle();return b.recall=a=>new n(a,!1,this.html,this)._recall(),b},e.prototype.findContainer=function(){return new Promise(r=>{let c=this.html.getContainers();for(let n=0;n<c.length;n++){let b=c[n],a=b.dataset.container;a&&(this.container[a]=b)}r()})},e.prototype._watchBindedItems=function(){},e.prototype._watchReactive=function(){if(!this.items.length){this.items=this.$attrib.getWatchItems(this.name);let r=this.name,{input:c}=this.$attrib.st[r]||{input:!1},n=this.$attrib.notify[r];c&&c.forEach(b=>{let{attr:a,bind:u,sel:d,nodeType:v}=b,i=document.querySelector(`[data-input=${d}]`);i&&!i._reactive&&(v=="INPUT"||v=="TEXTAREA"?(n.forEach(y=>{y(r,{value:i.value,bind:u})}),i.addEventListener("input",y=>{n&&n.length&&n.forEach(m=>{m(r,{value:y.target.value,bind:u})})}),i.addEventListener("change",y=>{n&&n.length&&n.forEach(m=>{m(r,{value:y.target.value,bind:u})})})):v=="SELECT"&&((()=>{let{selectedOptions:y}=c,m=[];for(let w=0;w<y.length;w++){let S=y[w],_=S.text,O=S.value;m.push({text:_,value:O})}n&&n.length&&n.forEach(w=>{w(r,{value:m,bind:u})})})(),i.addEventListener("change",y=>{let{selectedOptions:m}=y.target,w=[];for(let S=0;S<m.length;S++){let _=m[S],O=_.text,T=_.value;w.push({text:O,value:T})}n&&n.length&&n.forEach(S=>{S(r,{value:w,bind:u})})})),i._reactive=!0)})}},e.prototype.observer=function(r){function c(n){return this.handler[n]}this.observer=new Observer(this,r,c.bind(this))},e.prototype.variable=function(r){let c=Object.keys(r),n={},b=[];function a(u,d,v){d||(n[u]=`value is not '${v}'`)}for(let u in r)if(r.hasOwnProperty(u)){let d=r[u],{type:v,value:i}=d,y;["string","number"].includes(v)?y=typeof i==v:i instanceof Array?y=v=="array":y=v=="object",b.push(i),a(u,y,v)}if(Object.keys(n).length)throw new Error(JSON.stringify(n));return b},e}});var _t=q((se,St)=>{St.exports=function(g){let f=g.Attrib,s=g.Scope,h=g.Component,p=g.Hasher,t=g.Router,e=g.Persistent,r=g.StorageKit,c=g.Observer,n=g.Formy,b=g.Utils;function a(u){this.name=u,this.components={}}return a.Components=function(u){return{subscribe(d,v){function i(){let y=a.Components[u];if(y&&d instanceof Function){let m=d.name;v&&(d=d.bind(v)),d.binded="external",d.original=m,d.listenTo=y.name,y.Subscribe(d)}}return new Promise((y,m)=>{let w=setInterval(()=>{a.Components[u]&&(i(),clearInterval(w),y())})})}}},a.Models={},a.Subscribe={},a.Handlers={},a.Attributes=new f,a.Models.$loaded=function(u){return new Promise((d,v)=>{let i=setInterval(()=>{a.Models[u]&&(clearInterval(i),d(a.Models[u]))});b.timeOut(()=>{a.Models[u]||(clearInterval(i),v(u))},1e4)})},a.MainMessageChannel=function(){let u=new MessageChannel;return{send(d){u.port2.postMessage(d)},receive(d){u.port1.onmessage=function(v){let{isTrusted:i,data:y}=v||{isTrusted:!1};d(i?{status:1,data:y}:{status:0,err:"not trusted!"})}}}}(),a.Utils={scopeTrap(u){return!1},scopeNotifier(u){return u}},a.create=function(u,d,v){new a(u,d,v).create(u,d,v)},a.plugin=function(){},a.init=function(u){return new h(u)},a.Hasher=new p(a.Components),a.Hasher.listen(),a.Router=t(a.Components,h),a.Persistent=new e,a.Persistent.listen(a.Components),a.Cache=new r({name:"cache",storage:"session",child:"object"}),a.getSubscriber=function(u,d){let v=a.Subscribe,i={};for(let y in v)if(v.hasOwnProperty(y)){let m=v[y];for(let w in m)if(m.hasOwnProperty(w)){let S=m[w];for(let _ of S){let O=_,T=O.original,k=O.binded;if(O.listenTo==u){if(T==d)if(!i[k])i[k]=d;else{let E=i[k]instanceof Array?i[k]:[i[k]];i[k]=E.concat(d)}else if(!d)if(!i[k])i[k]=T;else{let E=i[k]instanceof Array?i[k]:[i[k]];i[k]=E.concat(T)}}}}}return i},a.Observer=new c(a.Subscribe,a.Handlers),a.prototype._defineProperty=function(u,d,v,i){Object.defineProperty(u,d,{configurable:!0,get(){return v()},set(y){i&&i(y)}})},a.prototype._defineProperty(h.prototype,"$observer",function(){return a.Observer}),a._globalScope=new s("globalScope"),a.prototype._defineProperty(h.prototype,"$globalScope",function(){return a._globalScope}),a._universalScope=new s("universalScope"),a.$universalScope=function(){return a._universalScope},a.prototype._defineProperty(h.prototype,"$attrib",function(){return a.Attributes}),a.prototype._defineProperty(h.prototype,"$persist",function(){return a.Persistent}),a.prototype._defineProperty(h.prototype,"$cache",function(){return a.Cache}),a.prototype._defineProperty(h.prototype,"$hash",function(){return a.Hasher}),a.prototype.create=function(u,d,v){console.time(u);let i=new h(u,d,v),y=new s(u);y.registerNotifier(function(m,w,S,_){return a.Attributes.notifier(m,w,S,_)}),a.Attributes.registerNotifier(u,function(m,w){y.notifier(m,w)}),i.compile.then(()=>{let{subscribe:m,root:w,html:S,handlers:_,role:O}=i;return O=="form"&&function(){n.bind(i)()}(),a.Observer.registerSubscribe(m).then(()=>({root:w,handlers:_}))}).then(({handlers:m,root:w})=>{a.Observer.registerHandlers(m,i.name),this._defineProperty(i,"root",function(){if(i._root)return i._root;{let S=w||"#app",_=document.querySelector(S);if(_)return _}throw new Error(`the selector '${w}' as container of component '${i.name}' is not found!`)},function(S){Object.assign(i,{_root:S})}),this._defineProperty(i,"$scope",function(){return y})}).then(()=>{i.fire=function(){function m(S,_){_=_?typeof _=="function"?_.bind(i)():function(){return _}.bind(i)():null;let O={[S]:()=>_};if(fn=O[S].bind(i),typeof fn=="function"){let $=function(P){let L={};if(!P)return L;let A=P.attributes;if(A)for(let C=0;C<A.length;C++){let I=A[C],j=I.name,N=I.value;L[j]=N}return L};var T=$;fn.name=S,fn.original=S,fn.binded=i.name,a.Observer.registerHandlers({[S]:fn},i.name);let k=_;if(_&&(_.element||_.root||_.container)){let P=$(_.element),L=$(_.root),A=$(_.container);k={status:0,attributes:{element:P,root:L,container:A}}}a.MainMessageChannel.send({component:i.name,event:S,payload:k});let E=a.Observer.notify(i.name,S,{}).then(()=>a.Observer.results[i.name][S]);return i.await[S]=E,i.await[S]}console.error("the param in fire is not an instance of function")}function w(S,_){for(let O in _)if(_.hasOwnProperty(O)){let T=_[O],k=T.original;Object.defineProperty(S,k,{get(){let $={[k]:function(E,P){if(P!=null&&(P=P),P==null&&k=="destroy"&&(P=!0),P==null&&(P=!1),P){let L=new Promise((A,C)=>{b.timeOut(()=>{let I=E;I=I||{},a.Observer.notify(i.name,k,I).then(()=>a.Observer.results[i.name][k]).then(j=>{A(j)}).catch(j=>{console.log(448,i.name,k,I),console.trace(),console.error(j)})})});return i.await[k]=L,i.await[k]}else return T(E)}};return $[k]=$[k].bind(i),$[k].originalName=k,$[k].binded=i.name,$[k]}})}}return w(m,i.handlers),m}()}).then(()=>{i.type=="view"&&(i.toggler=i.toggler(i),a.Components[u]=i)}).then(()=>{i.options.router&&a.Router.subscribe(i.options.router.bind(i)),i.options.data&&i.options.data.bind(i.data)(i),i.options.init&&i.options.init.bind(i)(),i.options.utils&&i.options.utils.bind(i.utils)(i)}).then(()=>{i.type=="model"&&(a.Models[u]=i),i.isStatic&&i.type=="view"&&i.render()})},a}});var ne=J(),le=K(),oe=W(),B=G(),ae=Y(),Tt=Z(),$t=tt(),Et=it(),Ot=st(),Pt=lt(),Lt=at(),Ct=ht(),kt=ut(),At=dt(),D=Tt({Utils:B}),It=mt()({StorageKit:D}),jt=bt()({StorageKit:D,Templating:Ot(),Utils:B}),qt=wt()({Utils:B,Mo:Pt,Templating:Ot(),Piece:$t(),pushState:kt.pushState}),Nt=_t()({Attrib:jt,Scope:It,Component:qt,Hasher:Ct,Router:kt,Persistent:Lt({StorageKit:D}),StorageKit:D,Observer:Et(),Formy:At,Utils:B});window.Cake=Nt;})();
