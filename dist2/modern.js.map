{"mappings":"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","sources":["src/scripts/scope.js","src/scripts/storage.js","src/scripts/utils.js","src/scripts/env.js","src/scripts/extends.js","src/scripts/polyfill.js","src/scripts/template-extend.js","src/scripts/plugin.js","src/scripts/templating.js","src/scripts/attrib/utils.js","src/scripts/attrib/data-attr.js","src/scripts/attrib/data-bind.js","src/scripts/attrib/data-class.js","src/scripts/attrib/data-for-update.js","src/scripts/piece.js","src/scripts/attrib/data-for.js","src/scripts/storage/components-store.js","src/scripts/attrib/data-if.js","src/scripts/attrib/data-model.js","src/scripts/attrib/data-toggle.js","src/scripts/storage/AttribConfigStorage.js","src/scripts/attributes.js","src/scripts/cake.js","src/scripts/animate.js","src/scripts/component.js","src/scripts/router.js","src/scripts/persist.js","src/scripts/storage/handler-stat.js","src/scripts/storage/subscriber.js","src/scripts/storage/handler.js","src/scripts/observer.js","src/scripts/form.js","src/app.js"],"sourcesContent":["const StorageKit = require('./storage')();\r\nmodule.exports = function(dependency){\r\n    // const StorageKit = dependency.StorageKit;\r\n    const _hooks = {};\r\n    class Scope {\r\n        constructor(name){\r\n\r\n            this.name = name;\r\n\r\n      \r\n\r\n            this.reactiveData = {};\r\n\r\n            this.notify = [];\r\n\r\n            this.install(this.name);\r\n\r\n            this.pKeys = {};\r\n\r\n            this.sanitize = function(data) {\r\n                const map = {\r\n                    '&': '&amp;',\r\n                    '<': '&lt;',\r\n                    '>': '&gt;',\r\n                    '\"': '&quot;',\r\n                    \"'\": '&#x27;',\r\n                    \"/\": '&#x2F;',\r\n                };\r\n                const reg = /[&<>\"'/]/ig;\r\n                if (typeof data == 'string'){\r\n                    return data.replace(reg, (match)=>(map[match] || \"\"));\r\n                } else {\r\n                    return data;\r\n                };\r\n            };\r\n        }\r\n        registerNotifier(fn){\r\n            this.notify.push(fn);\r\n        }\r\n        install(){\r\n            this.session = new StorageKit({\r\n                child:'object',\r\n                storage:'session',\r\n                name:`_cake_${this.name}_cf`,\r\n            });\r\n            // console.log(this.name, this.session);\r\n            // this.memory = new StorageKit({\r\n            //     child:'object',\r\n            //     storage:'object',\r\n            //     name:`_cake_${this.name}_cf`,\r\n            // });\r\n        }\r\n        notifier(component, obj){\r\n            //called by usually form input;\r\n            //reactive input;\r\n            // const {value, bind} = obj;\r\n            const value = obj.value;\r\n            const bind = obj.bind;\r\n            if (!this.reactiveData[component]){\r\n                this.reactiveData[component] = {};\r\n            };\r\n            this.reactiveData[component][bind] = value;\r\n\r\n            return this.set(bind, value);\r\n\r\n            // console.log(this.reactiveData[component]);\r\n        }\r\n\r\n\r\n        getInputData(type='json', _component){\r\n            let component = _component || this.name;\r\n\r\n            // console.log(this.reactiveData);\r\n\r\n            let data = JSON.parse(JSON.stringify(this.reactiveData[component]));\r\n            //reset the reactiveData when after get;\r\n\r\n            for (let key in data){\r\n                let value = data[key];\r\n                data[key] = this.sanitize(value);\r\n            };\r\n\r\n            if (type == 'json'){\r\n                return data;\r\n            } else if (type == 'formdata'){\r\n                const formData = new FormData;\r\n                for (let key in data){\r\n                    let value = data[key];\r\n\r\n                    formData.append(key, value);\r\n                };\r\n                return formData;\r\n            };\r\n        }\r\n        //a change to get notified when the data of other component is changed;\r\n        hook(component, bind, callback){\r\n\r\n            \r\n            if (!_hooks[component]){\r\n                _hooks[component] = {};\r\n            };\r\n            if (!_hooks[component][bind]){\r\n                //callbacks;\r\n                _hooks[component][bind] = []\r\n            };\r\n            _hooks[component][bind].push(callback);\r\n\r\n\r\n            // console.log(component, bind, callback, _hooks);\r\n        }\r\n        get(key, quick=false){\r\n\r\n            let pkey = this.pKeys[key];\r\n            // if(this.name == 'globalScope'){\r\n            //     // console.trace();\r\n            //     // console.log(106, pkey,key,quick,this.pKeys,pkey)\r\n            //     console.log(112,this.memory, quick);\r\n            //     // console.log(113,this.memory.get('key',true));\r\n            // }\r\n            // if(!pkey){\r\n            //     if(quick){\r\n            //         return `${key} is not found`;\r\n            //     } else {\r\n            //         return Promise.reject(`${key} is not found`);\r\n            //     }\r\n            // }\r\n            if (quick){\r\n                return this.session.get(key, true);\r\n            } else {\r\n                return this.session.get(key);\r\n            };\r\n        }\r\n\r\n        set(key, value){\r\n            let pkey = `${this.name}-${key}`;\r\n            let notify = this.notify;\r\n            let name = this.name;\r\n            let prevValue = null;\r\n\r\n            this.pKeys[key] = pkey;\r\n\r\n            return new Promise(async (res, rej)=>{\r\n                // prevValue = await this.get(key, true);\r\n                // if(key == 'color'){\r\n                //     console.log(118,key, prevValue, value);\r\n                // }\r\n                if (key != 'password'){\r\n                    this.session.createOrUpdate(key, value);\r\n                };\r\n                res();\r\n            }).then(async ()=>{\r\n                // await this.memory.createOrUpdate(key, value);\r\n\r\n\r\n                // if (this.name == 'globalScope'){\r\n\r\n                //     console.log(137,this.memory);\r\n                // };\r\n\r\n\r\n                // console.log(this.memory);\r\n                // if(key == 'color'){\r\n                //     console.log(139, this.memory.getAll());\r\n                // }\r\n\r\n                //custom callback for other component;\r\n\r\n\r\n                //callback for html attributes;\r\n\r\n                // console.log(notify)\r\n\r\n                return Promise.all(notify.map(cb=>{\r\n                    return cb(key, value, prevValue, name).then(()=>{\r\n                        // console.log('finish notified in scope');\r\n\r\n\r\n                        const hooks = _hooks[this.name];\r\n\r\n                \r\n                        if (hooks){\r\n                            const callbacks = hooks[key];\r\n                            if (callbacks){\r\n                                callbacks.forEach(cb=>{\r\n                                    cb(value);\r\n                                });\r\n                            };\r\n                        };\r\n                    });\r\n                }));\r\n            });\r\n        }\r\n\r\n        removeCache(key){\r\n            return this.session.remove(key);\r\n        }\r\n    }\r\n    \r\n    return Scope;\r\n\r\n}\r\n\r\n\r\n// module.exports = function(dependency){\r\n//     const StorageKit = dependency.StorageKit;\r\n\r\n//     function Scope(parent, options){\r\n//         this.pKey = options.pKey || '$scope';\r\n//         this.temp = {};\r\n//         this.trap = options.trap;\r\n//         this.notify = [];\r\n//         this.parent = parent;\r\n//         this._clone = {};\r\n//         this._cloneAsync = {};\r\n//         this.whitelist = ['extend', 'set', 'get'];\r\n\r\n//         this.install();\r\n//     };\r\n    \r\n//     Scope.prototype.registerNotifier = function(fn){\r\n//         this.notify.push(fn);\r\n//     };\r\n    \r\n//     Scope.prototype.notifier = function(obj){\r\n//         // console.log(obj);\r\n//         Cake.$scope[obj.bind] = obj.value;\r\n//     };\r\n\r\n//     Scope.prototype.method = function(){\r\n//         let temp = this.temp;\r\n//         let trap = this.trap;\r\n//         let notify = this.notify;\r\n//         let _this = this.parent;\r\n//         let whitelist = this.whitelist;\r\n//         let cloneAsync = this._cloneAsync;\r\n        \r\n//         return {\r\n//             update(keys, fn){\r\n//                 if (!keys.length) return;\r\n//                 for (let k = 0; k < keys.length; k++){\r\n//                     let key = keys[k];\r\n//                     fn(key);\r\n//                 };\r\n//             },\r\n//             defineProperty(key, cloned){\r\n//                 Object.defineProperty(temp, key, {\r\n//                     configurable:true,\r\n//                     get(){\r\n//                         let t = trap.bind(_this)(key) || false;\r\n//                         if (t){\r\n//                             return t;\r\n//                         };\r\n//                         return cloned[key];\r\n//                     },\r\n//                     set(newValue){\r\n//                         if (whitelist.includes(key) || cloneAsync[key]){\r\n//                         } else {\r\n//                             let prevValue = this[key];\r\n//                             for (let n = 0; n < notify.length; n++){\r\n//                                 let fn = notify[n];\r\n//                                 fn(key, newValue, prevValue);\r\n//                             };\r\n//                             cloned[key] = newValue;\r\n//                         }\r\n//                     },\r\n//                 });\r\n//             }\r\n//         };\r\n//     };\r\n\r\n//     Scope.prototype.install = function(){\r\n//         let {update, defineProperty} = this.method();\r\n//         let temp = this.temp;\r\n//         let cloned = this._clone;\r\n//         let clonedAsync = this._cloneAsync;\r\n//         Object.defineProperty(this.parent, this.pKey, {\r\n//             configurable:true,\r\n//             get(){\r\n//                 cloned = Object.assign(cloned, temp);\r\n//                 cloned = Object.assign(cloned, clonedAsync);\r\n\r\n//                 let keys = Object.keys(temp);\r\n//                 update(keys, function(key){\r\n//                     defineProperty(key, cloned);\r\n//                 });\r\n//                 return temp;\r\n//             },\r\n//         });\r\n//     };\r\n    \r\n//     Scope.prototype.watch = function(array){\r\n//         // console.log(array)\r\n//         // console.trace();\r\n//         if (!array) return;\r\n//         let {update, defineProperty} = this.method();\r\n//         let cloned = this._clone;\r\n//         update(array, function(key){\r\n//             defineProperty(key, cloned);\r\n//         });\r\n//         return true;\r\n//     };\r\n\r\n//     Scope.prototype.set = function(key, value, cloned){\r\n//         // console.log(96,key, value);\r\n//         if (this.whitelist.includes(key)){\r\n//             return;\r\n//         };\r\n\r\n//         // console.log(102,this._clone);\r\n\r\n//         let notify = this.notify || [];\r\n//         let prevValue = cloned[key];\r\n//         cloned[key] = value;\r\n\r\n//         Object.assign(this.temp, cloned);\r\n\r\n//         // console.log(109,notify);\r\n\r\n//         return Promise.all(notify.map(cb=>{\r\n//             return cb(key, value, prevValue);\r\n//         }));\r\n//     };\r\n    \r\n//     return Scope;\r\n\r\n// }\r\n\r\n\r\n\r\n","const Utils = require('./utils');\r\nmodule.exports = function(){\r\n    /**\r\n     * this class is use to unified the use of storage, in\r\n     * object for memory and storages for sessionStorage/localStorage;\r\n     */\r\n    // const Utils = dependency.Utils;\r\n    // const appName = deoendenvy.appName;\r\n\r\n    function typeOf(_obj){\r\n        if(!_obj){\r\n            return null;\r\n        };\r\n        return (_obj).constructor.name.toLowerCase();\r\n    };\r\n    function ObjectForEach (obj, fn){\r\n        for (let key in obj){\r\n            if (obj.hasOwnProperty(key)){\r\n                \r\n                fn(obj[key], key);\r\n            };\r\n        };\r\n    };\r\n    function ObjectMerge (obj, value, key){\r\n        obj = Object.assign(obj, {[key]:value});\r\n    };\r\n    function isNull(d){\r\n        return d === null;\r\n    };\r\n    function isUndefined(d){\r\n        return d === undefined;\r\n    };\r\n    function isArray(_obj){\r\n        return typeOf(_obj) == 'array';\r\n    };\r\n    function isObject(_obj){\r\n        return typeOf(_obj) == 'object';\r\n    };\r\n    var hasInArray = function(src, id){\r\n        var has = null;\r\n        for (var i = 0; i < src.length; i++){\r\n            var item = src[i];\r\n            if (typeOf(id) == 'object'){\r\n                var obj = id;\r\n                var key = Object.keys(id)[0];\r\n                var value = obj[key];\r\n                if (typeOf(item) == 'object'){\r\n                    var test = item[key] == value;\r\n                    if (test){\r\n                        has = i;\r\n                        break;\r\n                    };\r\n                };\r\n            } else if(typeOf(id) != 'array'){\r\n                var test = id == item;\r\n                if (test){\r\n                    has = i;\r\n                    break;\r\n                };\r\n            };\r\n        };\r\n        return has;\r\n    };\r\n    var hasInObject = function(src, id){\r\n        var key = null;\r\n        var type = typeOf(id); \r\n        if (type == 'object'){\r\n            var _key = Object.keys(id)[0];\r\n            if (src[key] != undefined && src[key] == id[_key]){\r\n                key = _key;\r\n            };\r\n        } else if(type == 'string') {\r\n            key = id;\r\n        };\r\n        return key;\r\n    };\r\n    var hasItem = function(src, id){\r\n        var has = null;\r\n        if (typeOf(src) == 'array'){\r\n            has = hasInArray(src, id);\r\n        } else if (typeOf(src) == 'object'){\r\n            has = hasInObject(src, id);\r\n        };\r\n        return has;\r\n    };\r\n    var STORAGE = class{\r\n        constructor(type, name, child){\r\n            this.type = type;\r\n            this.name = `${Utils.instanceID()}-${name}`;\r\n            this.child = child;\r\n            this.cache = {};\r\n            if (typeOf(this.child) == 'string'){\r\n                this.child = child=='array'?[]:child=='object'?{}:false;\r\n            };\r\n        }\r\n        init(save){\r\n            if (this[this.type]){\r\n                this[this.type](save);\r\n                return true;\r\n            };\r\n            return false;\r\n        }\r\n        open(){\r\n            if (this.type == 'session'){\r\n                var decoded = JSON.parse(sessionStorage[this.name]);\r\n                // if (this.name == '_cake_persistent'){\r\n                //     console.log(2503,decoded);\r\n                // };\r\n                return decoded[this.name];\r\n            } else if(this.type == 'local'){\r\n                var decoded = JSON.parse(localStorage[this.name]);\r\n                return decoded[this.name];\r\n            } else {\r\n                // console.log(119,this.type,this.cache);\r\n                return this.cache[this.name];\r\n            };\r\n        }\r\n        close(storage){\r\n            this.child = storage;\r\n            this.recache();\r\n            // console.log(94,this.name, storage);\r\n            return this.init(true);\r\n        }\r\n        recache(){\r\n            this.cache[this.name] = this.child;\r\n        }\r\n        create(){\r\n            // console.log(93, this.name, this.cache);\r\n            this.cache[this.name] = this.child;\r\n            \r\n        }\r\n        array(){\r\n            this.create();\r\n        }\r\n        object(issave){\r\n            this.create();\r\n            // console.log(120,this.type,this.cache);\r\n            // console.trace();\r\n        }\r\n        session(save){\r\n            if(!save){\r\n                this.recache();\r\n            };\r\n            try{\r\n                if (!sessionStorage[this.name] && !save){\r\n                    sessionStorage.setItem(this.name, JSON.stringify(this.cache));\r\n                } else if (save){\r\n                    sessionStorage.setItem(this.name, JSON.stringify(this.cache));\r\n                } else {\r\n\r\n                };\r\n            } catch(err){\r\n                this.recache();\r\n            };\r\n        }\r\n        local(save){\r\n            // this.verifyLocalStorage();\r\n            if(!save){\r\n                this.recache();\r\n            };\r\n            try{\r\n                if (!localStorage[this.name] && !save){\r\n                    localStorage.setItem(this.name, JSON.stringify(this.cache));\r\n                } else if (save){\r\n                    localStorage.setItem(this.name, JSON.stringify(this.cache));\r\n                } else {\r\n\r\n                };\r\n            } catch(err){\r\n                this.recache();\r\n            };\r\n        }\r\n        // verifyLocalStorage(){\r\n        //     if(!sessionStorage.reset){\r\n        //         sessionStorage.setItem('reset', false);\r\n        //         localStorage.clear();\r\n        //     };\r\n        // }\r\n    };\r\n    var methods = {\r\n        create:function(storage, data){\r\n\r\n            if(isArray(storage)){\r\n                let unique = new Set(storage);\r\n                if (typeOf(data) == 'array'){\r\n                    data.forEach(i=>{\r\n                        unique.add(i);\r\n                    });\r\n                } else {\r\n                    unique.add(data)\r\n                };\r\n                storage = Array.from(unique)\r\n            } else if (isObject(storage)){\r\n                if (isObject(data)){\r\n                    ObjectForEach(data, function(value, key){\r\n                        storage[key] = value;\r\n                    });\r\n                } else {\r\n                    storage[data] = data;\r\n                };\r\n            };\r\n\r\n            return storage;\r\n        },\r\n        createOrUpdate:function(storage, data){\r\n            var has = hasItem(storage, data);\r\n            if (typeOf(storage) == 'array'){\r\n                if (!isNull(has)){\r\n                    storage[has] = data;\r\n                } else {\r\n                   storage.includes(data);\r\n                }\r\n            } else if (typeOf(storage) == 'object'){\r\n                if (isNull(has)){\r\n                    if (isObject(data)){\r\n                        ObjectForEach(data, function(value, key){\r\n                            ObjectMerge(storage, value, key);\r\n                        });\r\n                    } else {\r\n                        storage[data] = data;\r\n                    };\r\n                } else {\r\n                    storage[has] = data;\r\n                };\r\n            };\r\n            return storage;\r\n        },\r\n        remove:function(storage, id){\r\n            if (typeOf(id) == 'string'){\r\n                var has = hasItem(storage, id);\r\n                if (typeOf(storage) == 'object'){\r\n                    delete storage[has];\r\n                } else if (typeOf(storage) == 'array'){\r\n                    var arr = [];\r\n                    for (var i = 0; i < storage.length; i++){\r\n                        if (i != has){\r\n                            arr.push(storage[i]);\r\n                        } else {continue};\r\n                    };\r\n                    storage = arr;\r\n                };\r\n                return storage;\r\n            } else if (typeOf(id) == 'object'){\r\n                return Object.filter(storage, function(value, key){\r\n                    var test = id[key] != undefined && id[key] == value;\r\n                    return !test;\r\n                });\r\n            } else if (typeOf(id) == 'array'){\r\n                return Object.filter(storage, function(value, key){\r\n                    var test = id.contains(key);\r\n                    return !test;\r\n                });\r\n            };\r\n            if (isNull(has)){\r\n                return false;\r\n            };\r\n        },\r\n        get:function(storage,id){\r\n            var type = typeOf(id);\r\n            if (type == 'string'){\r\n                var has = hasItem(storage, id);\r\n\r\n                if (has == 0 || has){\r\n                    return storage[has];\r\n                };\r\n            } else if (type == 'object'){\r\n                return Object.filter(storage, function(value, key){\r\n                    var test = !isUndefined(id[key]) && id[key] == value;\r\n                    return test;\r\n                });\r\n            } else if (type == 'array'){\r\n                return Object.filter(storage, function(value, key){\r\n                    var test = id.contains(key);\r\n                    return test;\r\n                });\r\n            }\r\n            return null;\r\n        },\r\n        getNot:function(storage,id){\r\n            var type = typeOf(id);\r\n            if (type == 'string'){\r\n                return Object.filter(storage, function(value, key){\r\n                    var test = key != id;\r\n                    return test;\r\n                });\r\n            } else if (type == 'object'){\r\n                return Object.filter(storage, function(value, key){\r\n                    return Object.some(id,function(_value, _key){\r\n                        var test = _key == key && _value == value;\r\n\r\n                        return !test;\r\n                    })\r\n                });\r\n            } else if (type == 'array'){\r\n                return Object.filter(storage, function(value, key){\r\n                    var test = !id.contains(key);\r\n                    return test;\r\n                });\r\n            }\r\n            return null;\r\n        },\r\n        getAll:function(storage){\r\n            return storage;\r\n        },\r\n    };\r\n    var USB = class{\r\n        constructor(_obj){\r\n            this.name = _obj.name;\r\n            this.storageType = _obj.storage;\r\n            this.child = _obj.child || 'object';\r\n            try {\r\n                if (typeOf(this.child) == 'string'){\r\n                    this.child = this.child == 'array'?[]:this.child=='object'?{}:null;\r\n                };\r\n\r\n\r\n\r\n            } catch(err){\r\n                if (this.storageType == 'session'){\r\n                    sessionStorage.clear();\r\n                } else if (this.storageType == 'local'){\r\n                    localStorage.clear();\r\n                };\r\n\r\n                if (typeOf(this.child) == 'string'){\r\n                    this.child = this.child == 'array'?[]:this.child=='object'?{}:null;\r\n                };\r\n\r\n            };\r\n            if (!['array', 'object'].includes(typeOf(this.child))){\r\n                throw new Error('the child must be an object or array type.');\r\n            };\r\n\r\n\r\n            this.storage = new STORAGE(this.storageType, this.name, this.child);\r\n            this.storage.init();\r\n        }\r\n        has(id){\r\n            var storage = this.storage.open();\r\n            var has = hasItem(storage, id);\r\n            return isNull(has)?false:has;\r\n        }\r\n        get(id, quick){\r\n            if(quick){\r\n                var storage = this.storage.open();\r\n                \r\n                return methods.get(storage, id);\r\n            } else {\r\n                return new Promise((res, rej)=>{\r\n                    setTimeout(()=>{\r\n                        var storage = this.storage.open();\r\n                        res(storage);\r\n                    });\r\n                }).then(storage=>{\r\n                    // console.log(342, storage)\r\n                    return methods.get(storage, id);\r\n                });\r\n            }\r\n        }\r\n        getNot(id){\r\n            var storage = this.storage.open();\r\n            return methods.getNot(storage, id);\r\n        }\r\n        getAll(){\r\n            var storage = this.storage.open();\r\n            return Promise.resolve(storage);\r\n        }\r\n        update(id, update){\r\n            var storage = this.storage.open();\r\n            var has = hasItem(storage, id);\r\n            if (has == 0 || has){\r\n                storage = methods.createOrUpdate(storage, data);\r\n                return this.storage.close(storage);\r\n            };\r\n            return false;\r\n        }\r\n        createOrUpdate(data){\r\n            if (arguments.length > 1){\r\n                let key = arguments[0];\r\n                let value = arguments[1];\r\n                data = {[key]:value};\r\n            };\r\n            var storage = this.storage.open();\r\n            storage = methods.createOrUpdate(storage, data);\r\n            const close = this.storage.close(storage);\r\n            // console.log(377, storage);\r\n\r\n            return close;\r\n        }\r\n        create(data){\r\n            var storage = this.storage.open();\r\n            storage = methods.create(storage, data);\r\n\r\n\r\n            return this.storage.close(storage);\r\n        }\r\n        remove(id){\r\n            var storage = this.storage.open();\r\n            storage = methods.remove(storage, id);\r\n            return this.storage.close(storage);\r\n        }\r\n    };\r\n    return USB;\r\n};","var global = {};\nconst TYPES = {\n    typeof: function(ctx){\n        switch(true){\n            case typeof ctx == 'string': return 'string';\n            case typeof ctx == 'number': return 'number';\n            case ctx instanceof Array: return 'array';\n            case ctx instanceof Function: return 'function';\n            case ctx instanceof HTMLCollection: return 'htmlcollection';\n            case ctx instanceof NodeList: return 'htmlnodelist';\n            case ctx instanceof Element: return 'domlement';\n            case ctx instanceof Object: return 'object';\n        };\n    },\n    isArray:function(ctx){\n        return this.typeof(ctx) == 'array';\n    },\n    isObject:function(ctx){\n        return this.typeof(ctx) == 'object';\n    },\n    isNumber:function(ctx){\n        return this.typeof(ctx) == 'number';\n    },\n    isString:function(ctx){\n        return this.typeof(ctx) == 'string';\n    },\n    isHTMLCollection:function(ctx){\n        return this.typeof(ctx) == 'htmlcollection';\n    },\n    isNodeList:function(ctx){\n        return this.typeof(ctx) == 'htmlnodelist';\n    },\n    isElement:function(ctx){\n        return this.typeof(ctx) == 'domlement';\n    },\n    isFunction:function(ctx){\n        return this.typeof(ctx) == 'function';\n    },\n};\n\nconst LOOP = {\n    _each:function(ctx, fn, type){\n        \n        if (type == 'object'){\n            var i = 0;\n            for (var key in ctx){\n                if (ctx.hasOwnProperty(key)){\n                    fn({key, value:ctx[key]}, i);\n                    i = i + 1;\n                };\n            };\n        } else {\n            for (var a = 0; a < ctx.length; a++){\n                fn(ctx[a], a);\n            }\n        };\n    },\n    each:function(ctx, fn){\n        var type = TYPES.isArray(ctx) || ctx.length ? 'array': 'object';\n        this._each(ctx,  function(obj, index){\n            fn(obj, index);\n        },type);\n    },\n    map:function(ctx, fn){\n        var type = TYPES.isArray(ctx) || ctx.length ? 'array': 'object';\n        var st = ctx.length &&  type == 'array'?[]:{};\n        this._each(ctx, function(obj, index){\n            var r = fn(obj, index);\n            if (type == 'object'){\n                st[r.key] = r.value;\n            } else {\n                st.push(r)\n            };\n        }, type);\n        return st;\n    },\n    reduce: function(ctx, accu, fn){\n        var type = TYPES.typeof(ctx);\n        this._each(ctx, function(obj, index){\n            accu = fn(obj,accu, index);\n        }, type);\n        return accu;\n    },\n    filter:function(ctx, fn){\n        var type = TYPES.isArray(ctx) || ctx.length ? 'array': 'object';\n        var st = ctx.length && type == 'array'?[]:{};\n        this._each(ctx, function(obj, index){\n            var r = fn(obj, index);\n            if (r){\n                if (type == 'object'){\n                    st[obj.key] = obj.value;\n                } else {\n                    st.push(obj.value);\n                };\n            };\n        },type);\n        return st;\n    },\n};\n\nconst OBJECT = {\n    dictionary:function(obj,path){\n        if(path){\n            path = path.split('.');\n        };\n        for (let p = 0; p < path.length; p++){\n            let _p = path[p];\n            if(obj[_p]){\n                obj = obj[_p];\n            } else{\n                obj = null;\n                break;\n            };\n        };\n        return obj;\n    }\n};\n\nconst STRING = {\n    removeWhiteSpace(str){\n        return String(str).split(\" \").join(\"\");\n    },\n}\n\nconst OTHERS = {\n    perf:function(fn){\n        console.time('test');\n        fn();\n        console.timeEnd('test');\n    },\n    logTest:function(a, ops, b){\n        try { a = JSON.parse(a)}catch(err){}\n        try { b = JSON.parse(b)}catch(err){}\n        switch (ops) {\n            case '==':{\n                return a == b;\n            };\n            case '!=':{\n                return a != b;\n            };\n            case '<':{\n                return a < b;\n            };\n            case '>':{\n                return a > b;\n            };\n            case '>=':{\n                return a >= b;\n            };\n            case '<=':{\n                return a <= b;\n            };\n        }\n    },\n    toUrlSearchParams:function(obj,istrim=true){\n        let searchParams = \"\";\n        for(let key in obj){\n            if(obj.hasOwnProperty(key)){\n                let val = obj[key];\n                if(val.toString().includes('Object')){\n                    val = JSON.stringify(val);\n                };\n                if(istrim && val){\n                    searchParams += `${encodeURI(key)}=${encodeURI(val)}&`;\n                } else {\n                    searchParams += `${encodeURI(key)}=${encodeURI(val)}&`;\n                };\n            };\n        };\n        return searchParams.slice(0, searchParams.length - 1);\n    },\n    sanitize:function(string, exclude=[]){\n        if(typeof string != 'string'){\n            return string;\n        };\n        // let map = {\n        //     '&': '&amp;',\n        //     '<': '&lt;',\n        //     '>': '&gt;',\n        //     '\"': '&quot;',\n        //     \"'\": '&#x27;',\n        //     \"/\": '&#x2F;',\n        // };\n        // map = Object.keys(map).reduce((accu, key)=>{\n        //     if(!exclude.includes(key)){\n        //         accu[key] = map[key];\n        //     };\n        //     return accu;\n        // },{});\n   \n        // const reg = /[&<>\"'/]/ig;\n        // return string.replace(reg, (match)=>{\n        //     return map[match] || match;\n        // });\n        return decodeURIComponent(string.replace(/<.*>/, \"\"));\n    },\n    toFormData:function(form, options={}){\n        //trim, json, skipsanitize, sanitize = boolean\n\n        const controls = [];\n        const textareas = form.querySelectorAll('TEXTAREA');\n        const inputs = form.querySelectorAll('INPUT');\n        const selects = form.querySelectorAll('SELECT');\n        \n\n        function loop(arr, cont, sort){\n            let files = [];\n            for (let i = 0; i < arr.length; i++){\n                let test = true;\n                \n                try {\n                    test = arr[i].closest('.cake-template');\n                } catch(err){};\n                try {\n                    if(!test){\n                        test = arr[i].classList.includes('cake-template');\n                    };\n                } catch(err){};\n                if(test){} else {\n                    if(arr[i].getAttribute('type') == 'file'){\n                        files.push(arr[i]);\n                    } else {\n                        cont.push(arr[i]);\n                    }\n                };\n            };\n            if(files.length){\n                files.forEach(item=>{\n                    cont.push(item);\n                });\n                files = [];\n            };\n        };\n\n        loop(textareas, controls);\n        loop(selects, controls);\n        loop(inputs, controls, true);\n\n        let o = {};\n\n        for (let i = 0; i < controls.length; i++){\n            let control = controls[i];\n            let key = control.name || control.id;\n\n\n            if(key && [\"{{\",\"((\",\"[[\",\"<<\",\"%%\",\"&&\"].includes(key)){\n\n            } else {\n                let type;\n                let element = form[key];\n\n                \n                if(element){\n\n                    if(element.nodeType){\n\n                    } else if(element.length){\n                        for (let i = 0; i < element.length; i++){\n                            let el =  element[i];\n                            if(el.nodeType == 1){\n                                let test = el.closest('.cake-template');\n                                if(test){\n\n                                } else {\n                                    element = el;\n                                    break;\n                                };\n                            };\n                        };     \n                    };\n\n                    const tag = element.tagName;\n                    \n                    if (tag == 'SELECT'){\n                        value = element.value\n                    }  else if(tag == 'INPUT' && element.getAttribute('type') == 'checkbox'){\n                        value = element.checked;\n                    } else if(tag == 'INPUT' && element.getAttribute('type') == 'file'){\n                        value = element.files;\n                    } else {\n                        if(options.sanitize == false){\n                            value = element.value;\n                        } else {\n                            value = this.sanitize(element.value,options.skipsanitize);\n                        }\n                    };\n                    \n                    if(options.json){\n                        if(options.trim){\n                            if(value != \"\"){\n                                o[key] = value;\n                            };\n                        } else {\n                            o[key] = value;\n                        }; \n                    } else {\n                        o[key] = value;\n                    }\n    \n                };\n            };\n        };\n        \n\n        if(options.json){\n            return o;\n        } else {\n            let fd = new FormData();\n            for (let key in o){\n                if (o.hasOwnProperty(key)){\n                    let value = o[key];\n                    \n                    if(value.constructor.name == \"FileList\"){\n                        LOOP.each(value, function(item, index){\n                            fd.append(key, item, item.name);\n                        });\n                    } else {\n                        fd.append(key, value);\n                    };\n                };\n            };\n            return fd;\n        };\n    },\n    splitBySpace:function(string, fn){\n        if(string){\n            string = string.split(\" \");\n            if(TYPES.isArray(string)){\n                for (let i = 0; i < string.length; i++){\n                    fn(string[i]);\n                };\n            };\n        }\n    },\n    toArray(arrayLike){\n        let a = [];\n        if(!arrayLike.length){\n            return a;\n        };\n        for (let i = 0; i < arrayLike.length; i++){\n            a.push(arrayLike[i]);\n        };\n        return a;\n    },\n    timeOut(fn, time=1){\n        setTimeout(()=>{\n            fn();\n        }, time);\n    },\n    instanceID(){\n        //to have unique identifier every web app using this, in sessionStorage or localStorage;\n        return location.origin;\n    },\n    recurse(array, callback){\n        return new Promise((res, rej)=>{\n            try {\n                let l = array.length;\n                let index = 0;\n                const rec = (()=>{\n                    if(l > index){\n                        callback(array[index]);\n                        index += 1;\n                        rec();\n                    } else {\n                        res();\n                    };\n                });rec();\n            } catch(err){\n                rej(err.message);\n            };\n        });\n    },\n    browser(){\n        // Return cached result if avalible, else get result then cache it.\n\n\n        if (window._browser)\n        return window._browser;\n        // Opera 8.0+\n        var isOpera = (!!window.opr && !!opr.addons) || !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0;\n        // Firefox 1.0+\n        var isFirefox = typeof InstallTrigger !== 'undefined';\n        // Safari 3.0+ \"[object HTMLElementConstructor]\" \n        var isSafari = /constructor/i.test(window.HTMLElement) || (function (p) { return p.toString() === \"[object SafariRemoteNotification]\"; })(!window['safari'] || safari.pushNotification);\n        // Internet Explorer 6-11\n        var isIE = /*@cc_on!@*/false || !!document.documentMode;\n        // Edge 20+\n        var isEdge = !isIE && !!window.StyleMedia;\n        // Chrome 1+\n        var isChrome = !!window.chrome && !!window.chrome.webstore || !!window.cordova;\n        // Blink engine detection\n        var isBlink = (isChrome || isOpera) && !!window.CSS;\n        return window._browser =\n            isOpera ? 'Opera' :\n            isFirefox ? 'Firefox' :\n            isSafari ? 'Safari' :\n            isChrome ? 'Chrome' :\n            isIE ? 'IE' :\n            isEdge ? 'Edge' :\n            isBlink ? 'Blink' :\n            \"Don't know\";\n    },\n    isOpera(){\n        return this.browser == 'Opera';\n    },\n    isFirefox(){\n        return this.browser() == 'Firefox';\n    },\n    isSafari(){\n        return this.browser == 'Safari';\n    },\n    isChrome(){\n        return this.browser == 'Chrome';\n    },\n    isIE(){\n        return this.browser == 'IE';\n    },\n    isEdge(){\n        return this.browser == 'Edge';\n    },\n    isBlink(){\n        return this.browser == 'Blink';\n    },\n    device(){\n        if(navigator.userAgent.includes('Android')){\n            return 'android';\n        } else if(/iPhone|iPad|iPod/i.test(navigator.userAgent)){\n            return 'IOS'\n        } else {\n            return 'desktop';\n        };\n    },\n    isAndroid(){\n        return this.device() == 'android';\n    },\n    isIOS(){\n        return this.device() == 'ios';\n    },\n    isDesktop(){\n        return this.device() == 'desktop';\n    },\n    escapeRegExp(text) {\n        return text.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\n    }\n};\n\nconst ARRAY = {\n    unique:function(arr, prop){\n        if(Set && TYPES.isArray(arr)){\n            return [...new Set(arr)];\n        } else {\n            let a = {};\n            Loop.each(arr, function(item, index){\n                if(prop && TYPES.isObject(item)){\n                    let p = OBJECT.dictionary(item, prop);\n                    if(p){\n                        a[p] = true;\n                    };\n                } else {\n                    a[item] = true;\n                };\n            });\n            return Object.keys(a);\n        };\n    }\n}\n\ntry {\n    global.UTILS = {...LOOP, ...TYPES, ...OTHERS, ...STRING,...ARRAY};\n} catch (err){\n    global.UTILS = {};\n\n    var iter = LOOP.each;\n    iter(LOOP, function(key, value){\n        global.UTILS[key] = value;\n    });\n    iter(TYPES, function(key, value){\n        global.UTILS[key] = value;\n    });\n    iter(OTHERS, function(key, value){\n        global.UTILS[key] = value;\n    });\n    iter(STRING, function(key, value){\n        global.UTILS[key] = value;\n    });\n};\n\nmodule.exports = global.UTILS;",";(function(global){\r\n    global.env = {\r\n        destructure:true,\r\n    };\r\n    const env = global.env;\r\n    // try {let {a} = {a:true};} catch(err){env.destructure = false};\r\n    Promise.prototype.ObjectType = 'Promise';\r\n})(window);\r\n\r\n\r\n","(function(global){\n    HTMLCollection.prototype.toArray = function(){\n        let b = [];\n        for (let a = 0; a < this.length ;a++){\n            b[a] = this[a];\n        }\n    \n        return b;\n    };\n    NodeList.prototype.toArray = function(){\n        \n        let b = [];\n        let index = -1;\n        let length = this.length;\n        while(++index < length){\n            b[index] = this[index];\n        };\n        // console.trace();\n        // console.log(b);\n        return b;\n    };\n    Object.cache = Object.create(null);\n\n    Object.caching = (name)=>{\n        const obj = Object.cache;\n        if(!obj[name]){\n            obj[name] = {};\n        };\n\n        return {\n            set(key, value){\n                obj[name][key] = value;\n                return true;\n            },\n            get(key){\n                return obj[name][key];\n            },\n        };\n    };\n    \n    String.prototype.toHyphen = function(){\n        let _StringCache = Object.cache;\n        let cvt = null;\n        let str = this;\n\n        if (!_StringCache.toHyphen){\n            _StringCache.toHyphen = {};\n        };\n        if (_StringCache[str]){\n            cvt = _StringCache[str];\n        };\n\n        if (cvt != undefined){\n            return cvt;\n        };\n        let splitted = str.split('');\n        // console.log(splitted)\n        let ss = \"\", i = -1;\n        while (++i < splitted.length){\n            let s = splitted[i];\n            switch(i){\n                case 0:{\n                    ss += s.toLowerCase();\n                } break;\n                default:{\n                    s.charCodeAt() < 91 && (ss += '-');\n                    ss += s.toLowerCase();\n                }\n            }\n        };\n        _StringCache[str] = ss;\n        cvt = ss;\n\n        \n        return cvt;\n    };\n\n    String.prototype.toProper = function(){\n        let str = this;\n        let cache = Object.caching('toProper').get(str);\n        if(cache){\n            return cache;\n        } else {\n            let first = str.substring(0,1);\n            let rest = str.slice(1);\n            let proper = `${first.toUpperCase()}${rest}`;\n            Object.caching('toProper').set(str, proper);\n            return proper;\n        };\n    };\n    String.prototype.removeSpace = function(){\n        return this.split(\" \").join(\"\");\n    };\n    \n    String.prototype.toCamelCase = function(){\n        let str = this.toLowerCase();\n        let _StringCache = Object.cache;\n\n        let cvt =null;\n\n        if(!_StringCache.toCamel){\n            _StringCache.toCamel = {};\n        };\n        _StringCache = _StringCache.toCamel;\n\n        if(_StringCache[str]){\n            return _StringCache[str];\n        } else {\n            let split = str.split('-');\n            if (split.length == 1){\n                return str;\n            };\n            let join = \"\";\n            let i = -1;\n            let length = split.length;\n            while (++i < length){\n                let str = split[i];\n                switch(i){\n                    case 0:{join += str};break\n                    default:{\n                        let first = str.substring(0,1).toUpperCase();;\n                        let second = str.substring(1);\n                        join += (first+second);\n                    } break;\n                }\n            };\n            _StringCache[str] = join;\n            return join;\n        };\n    };\n    \n    HTMLElement.prototype.querySelectorIncluded = function(selector, attr, val){\n        let q = this.querySelector(selector);\n        return (q)?q:(()=>{\n            switch (true){\n                case !attr && !val:{\n                    let qu = this.closest(selector);\n                    if (qu == this){\n                        q = qu;\n                    };\n                };\n                break;\n                case !!attr && !!val:{\n                    \n                    q = this.getAttribute(attr) == val?this:null;\n                };\n                break;\n                case !!attr && !val:{\n                    q = this.getAttribute(attr)?this:null;\n                }\n                break;\n            };\n            return q;\n        })();\n    };\n\n\n    \n    HTMLElement.prototype.querySelectorAllIncluded = function(selector, attr, val){\n        let q;\n        try {\n            q = this.querySelectorAll(selector);\n            q && (q = q.toArray());\n        } catch(err){\n            q = [];\n        };\n\n        if(selector){\n            q = this.querySelectorAll(selector).toArray();\n        } else if (attr && val){\n            q = this.querySelectorAll(`[${attr}=${val}]`).toArray();\n            if(this.dataset[attr] == val){\n                q.push(this);\n            };\n        } else if (attr && !val){\n            q = this.querySelectorAll(`[${attr}]`).toArray();\n            if(!!this.dataset[attr]){\n                q.push(this);\n            };\n        };\n\n        switch (true){\n            case !attr && !val:{\n                let qu = this.closest(selector);\n                qu == this && q.push(qu);\n            };\n            break;\n            case attr && val:{\n                // this.getAttribute(attr) == val && q.push(this);\n            };\n            break;\n            case attr && !val:{\n                \n                // this.getAttribute(attr) && q.push(this);\n            }\n            break;\n        };\n        return q;\n    };\n    \n    HTMLDocument.prototype.querySelectorIncluded = function(selector){\n        return this.querySelector(selector);\n    };\n    \n    HTMLDocument.prototype.querySelectorAllIncluded = function(selector){\n        return this.querySelectorAll(selector);\n    };\n    \n    \n    \n    Array.prototype.toggler = function(dataName, activeClass){\n        for (let t = 0; t < this.length; t++){\n            let node = this[t];\n            let name = node.dataset.name;\n            if (name == dataName){\n                node.classList.toggle(activeClass);\n            } else {\n                if (node.classList.contains(activeClass)){\n                    node.classList.toggle(activeClass);\n                };\n            };\n        };\n    };\n    \n    HTMLElement.prototype.Ref = function(){\n        let n = '_cakes_storage';\n        !this[n] && (this._cakes_storage = {})\n        let storage = this[n];\n        return {\n            set(key, value){\n                storage[key] = value;\n            },\n            get(key){\n                return storage[key];\n            },\n            getAll(key){\n                return storage;\n            },\n            remove(key){\n                delete storage[key];\n            }\n        }\n    };\n\n    HTMLElement.prototype.replaceDataSrc = function(){\n        let srcs = this.querySelectorAllIncluded(null, 'data-src',null);\n        for (let s = 0; s < srcs.length; s++){\n            let el = srcs[s];\n            el.setAttribute('src', el.dataset.src);\n            el.removeAttribute('data-src');\n        };\n    };\n\n    HTMLElement.prototype.unRequired = function(){\n        let srcs = this.querySelectorAll('.cake-template [required]');\n        for (let i = 0; i < srcs.length; i++){\n            let el = srcs[i];\n            \n            if(el){\n                el.removeAttribute('required');\n            };\n        };\n\n    };\n\n\n    Object.keep = function(path, data){\n        let rawdirs = path.split(\".\");\n        let dirs = rawdirs.slice(1);\n        let isArray = data.constructor.name=='Array';\n        let ins = isArray?[]:{};\n\n        const has = function(obj, prop, value){\n            if(!obj[prop]){\n                obj[prop] = value==undefined?{}:value;\n            };\n            return obj[prop];\n        };\n\n        if(rawdirs[0]){\n            has(Object.cache, rawdirs[0], (dirs.length)?{}:data);\n        };\n\n        let orig = Object.cache[rawdirs[0]];\n\n        for (let i = 0; i < dirs.length; i++){\n            let dir = dirs[i];\n            let last = dirs.length -1 == i;\n        \n            if(last){\n                orig = has(orig, dir, ins);\n                if(isArray){\n                    orig = orig.concat(data);\n                } else {\n                    orig = Object.assign(orig, data);\n                };\n            } else {\n                orig = has(orig, dir, {});\n            };\n        };\n        return Object.cache[rawdirs[0]];\n    };\n    \n})(window);","const UTILS = require('./utils');\r\nconst self = window || {};\r\nmodule.exports = {\r\n  Set:function(data){\r\n    if(self.Set){\r\n      return new Set(data);\r\n    } else {\r\n      return UTILS.unique(data);\r\n    };\r\n  }\r\n}",";(function(){\r\n    customElements.define('sub-template',\r\n  class extends HTMLElement {\r\n    constructor() {\r\n      super();\r\n  \t}\r\n    connectedCallback(){\r\n        this.replace(this);\r\n    }\r\n    replace(subTemplate){\r\n        let ref = subTemplate.dataset.template;\r\n        let refEl = document.getElementsByName(ref);\r\n        \r\n        \r\n        if (refEl.length > 1){\r\n            console.error(`template with name ${ref} has more than one reference.`)\r\n            return ;\r\n        };\r\n        if (!refEl){\r\n            subTemplate.remove();\r\n            throw new Error(`${ref} is not found!`);\r\n\r\n        };\r\n        if (refEl[0]){\r\n            let temp = refEl[0];\r\n            if (temp.constructor.name == \"HTMLTemplateElement\"){\r\n                temp = temp.content.cloneNode(true).firstElementChild;\r\n                if (!temp) {return;};\r\n                let attrs = subTemplate.attributes;\r\n                for (let a = 0; a < attrs.length ;a++){\r\n                    let attr = attrs[a];\r\n                    if (attr.name != 'data-template'){\r\n                        temp.setAttribute(attr.name, attr.value);\r\n                    };\r\n                };\r\n                // console.log(temp);\r\n                subTemplate.replaceWith(temp);\r\n            } else {\r\n                throw new Error(`${ref} is not referred to a Template Element!`);\r\n            };\r\n        };\r\n    }\r\n});\r\nHTMLTemplateElement.prototype.replaceSubTemplate = function(el){\r\n    let subTemplates = el.getElementsByTagName('sub-template');\r\n    if (subTemplates){\r\n        subTemplates = subTemplates.toArray();\r\n        for (let s = 0; s < subTemplates.length; s++){\r\n            let subTemplate = subTemplates[s];\r\n            customElements.get('sub-template').prototype.replace(subTemplate);\r\n        };\r\n    };\r\n}\r\nHTMLTemplateElement.prototype.collectContent = function(){\r\n    let template = this;\r\n    let cf = null;\r\n    let temp =template.cloneNode(true);\r\n    let fr = document.createDocumentFragment();\r\n    let styles = temp.content.querySelector('style');\r\n    if (styles){\r\n        fr.appendChild(styles);\r\n    }\r\n    let others = [];\r\n    for (let o = 0; o < temp.content.children.length; o++){\r\n        let el = temp.content.children[0];\r\n        this.replaceSubTemplate(el);\r\n        others.push(el);\r\n    }\r\n    cf = {style:fr.children[0], others}\r\n    return cf; \r\n};\r\nHTMLTemplateElement.prototype.parseStyle = function(style){\r\n    if (!style) return false;\r\n    var styles = style.textContent.trim();\r\n    if (!styles.length) { return;}\r\n    let obj = {};\r\n\r\n    let sel = \"\";\r\n    let splitted = styles.split(\"}\");\r\n    for (let sp = 0; sp < splitted.length; sp++){\r\n        let item = splitted[sp];\r\n        let _sp1 = item.split(\"{\");\r\n        let sel = _sp1[0];\r\n        let style = _sp1[1];\r\n        // let [sel, style] = item.split(\"{\");\r\n        if(!!sel){\r\n            obj[sel.trim()] = (()=>{\r\n                let n = false;\r\n                let s = \"\";\r\n                let splitted = style.split(\"\");\r\n                for (let sp = 0; sp < splitted.length; sp++){\r\n                    let item = splitted[sp];\r\n                    if(item == \"\\n\"){\r\n                        n = true;\r\n                    } else if (item == \" \"){\r\n                        if(n){\r\n\r\n                        } else {\r\n                            s += item;\r\n                        };\r\n                    } else {\r\n                        n = false;\r\n                        s += item;\r\n                    };\r\n                };\r\n                return s;\r\n            })();\r\n        };\r\n    };\r\n\r\n\r\n    return obj;\r\n};\r\n\r\nHTMLTemplateElement.prototype.parseHTML = function(others){\r\n    if (others){\r\n        var parent = document.createElement('HTML');\r\n        for (let o = 0; o < others.length; o++){\r\n            let other = others[o];\r\n            parent.append(other);\r\n        };\r\n    };\r\n    return parent || false;\r\n};\r\n\r\nHTMLTemplateElement.prototype.getContent = function(isConvert){\r\n    let _collectedContent = this.collectContent();\r\n    // let {style, others} = this.collectContent();\r\n    let style = _collectedContent.style;\r\n    let others = _collectedContent.others;\r\n    \r\n    let styles = this.parseStyle(style);\r\n    let element = this.parseHTML(others);\r\n\r\n    \r\n    for (let selector in styles){\r\n        if (styles.hasOwnProperty(selector)){\r\n            // console.log(element.outerHTML)\r\n            let query = element.querySelectorAll(selector);\r\n            let css = styles[selector];\r\n            for (let q= 0; q < query.length; q++){\r\n                let item = query[q];\r\n                // console.log(item, css)\r\n                item.setAttribute('style', css);\r\n                // console.log(item);\r\n            };\r\n        }\r\n    };\r\n    element = (isConvert)?element.children.toArray():element.innerHTML;\r\n    return (element.length == 1)?element[0]:element;\r\n};\r\n})();","\nconst Utils = require('./utils');\nmodule.exports = (function(){\n    Object.caching('plugins').set('plugin', {});\n    return function(key, value){\n        if(Utils.isObject(key) && !value){\n            const plugins = Object.caching('plugins').get('plugin');\n            Object.caching('plugins').set('plugin', Object.assign(plugins, key));\n        } else if(Utils.isString(key) && value != undefined){\n            const plugins = Object.caching('plugins').get('plugin');\n            plugins[key] = value;\n            Object.caching('plugins').set('plugin', plugins);\n        } else if(Utils.isString(key) && value == undefined) {\n            return Object.caching('plugins').get('plugin')[key] || {};\n        };\n    };\n})();","const Utils = require('./utils');\r\n// escapeRegExp\r\n\r\nfunction Templating(options){\r\n    this.options = options;\r\n    this.tag = ((this.options && this.options.tag) || \"{{ }}\").split(\" \");\r\n    this.lefttag = Utils.escapeRegExp(this.tag[0]);\r\n    this.righttag = Utils.escapeRegExp(this.tag[1]); \r\n};\r\nTemplating.prototype._getTag = function(template){\r\n    //get the tag in < h1>;\r\n    try {\r\n        return template.match(new RegExp('(?<=<)|([^/s]+)(?=\\>)', 'g'))[2];\r\n    } catch(err){\r\n        throw new Error(`template of ${template} is empty.`);\r\n    }\r\n};\r\nTemplating.prototype._bindReplace = function(obj,string){\r\n    for (let key in obj){\r\n        if (obj.hasOwnProperty(key)){\r\n\r\n            let pattern = new RegExp(`${this.lefttag}${key}${this.righttag}`, 'g');\r\n            pattern && (string = string.replace(pattern, `${obj[key]}`));\r\n        };\r\n    };\r\n    return string;\r\n};\r\nTemplating.prototype.replaceString = function(obj, string){\r\n    return this._bindReplace(obj, string);\r\n}\r\nTemplating.prototype._toElement = function(template, tag){\r\n    let fr = document.createElement('template');\r\n    fr.innerHTML = template;\r\n    return fr.content.children[0];\r\n};\r\nTemplating.prototype.createElement = function(data,template,  isConvert){\r\n    // let template = this.template;\r\n    // let data = this.data;\r\n    // let isConvert = this.isConvert;\r\n\r\n\r\n    if (data){\r\n        if (data instanceof Array){\r\n            let isString = typeof template == 'string';\r\n            let tag = (isString)?this._getTag(template): template.tagName;\r\n            template = (isString)?template:template.outerHTML;\r\n\r\n            let els = [];\r\n            for (let d = 0; d < data.length; d++){\r\n                let dd = data[d];\r\n                let bindData = this._bindReplace(dd, template);\r\n\r\n                // console.log(42, dd, bindData);\r\n\r\n                let element = this._toElement(bindData, tag);\r\n                if (isConvert){\r\n                    element = element.outerHTML;\r\n                };\r\n                els.push(element);\r\n            };\r\n            return els;\r\n        } else if (data instanceof Object){\r\n            // console.log(template)\r\n            let isString = typeof template == 'string';\r\n            let tag = (isString)?this._getTag(template): template.tagName;\r\n            template = (isString)?template:template.outerHTML;\r\n\r\n\r\n            let bindData = this._bindReplace(data, template);\r\n\r\n            // console.log(60, this.tag);\r\n            // console.log(61, bindData);\r\n\r\n\r\n            let element = this._toElement(bindData, tag);\r\n            if (isConvert){\r\n                element = element.outerHTML;\r\n            };\r\n            return element;\r\n        }\r\n    } else {\r\n        let isString = typeof template == 'string';\r\n        let tag = (isString)?this._getTag(template): template.tagName;\r\n        return this._toElement(template, tag);\r\n    };\r\n};\r\nmodule.exports = Templating;","exports.getConfig = function(st, prop, newValue, prevValue, component){\n    /*\n        newValue is null, when emptying the scope;\n    */\n    if (newValue == null) {return []};\n    if (newValue == prevValue && type != 'bind'){ return [];};\n    return (()=>{\n        let ctx = [];\n        let s = st;\n        if (s && s.length){\n            for (let i = 0; i < s.length; i++){\n                let item = s[i];\n                // console.log(item.bind, prop, item);\n                if (item.bind == prop){\n                    // console.log(type, item);\n                    ctx.push({...item, component});\n                };\n            };\n        };\n        return ctx;\n    })();\n};\n\nexports.updateConfig = function(st, type, prop, newValue, prevValue, component, update,sel){\n    if (newValue == null) {return };\n    if (newValue == prevValue && type != 'bind'){ return };\n    // if(update.incrementedSels){\n    //     console.debug(121,sel, update);\n    // };\n    var st = (()=>{\n        let config = (st[component] && st[component][type]);\n        if(config && config.length){\n            let ctx = [];\n            for (let i = 0; i < config.length; i++){\n                let item = config[i];\n                let test = item.bind == prop && ((sel)?item.sel == sel:true);\n                if(test){\n                    Object.assign(item, update);\n                } else {\n\n                };\n            };\n            return ctx;\n        } else {\n            return [];\n        };\n    })();\n    return st;\n};\n\n\n\nexports.extendConfig = function(configs){\n    /**\n     * add config dynanucakky since\n     * every element has unique identifier.\n     * everytime it is created either in swith or forUpdate;\n     */\n    const cloned = [];\n\n    for (let i = 0; i < configs.length; i++){\n        const cl = {};\n        const item = configs[i];\n        for (let key in item){\n            cl[key] = item[key];\n        };\n        cloned.push(cl);\n    };\n\n    return cloned.reduce((accu, iter)=>{\n        // let {incrementedSels} = iter;\n        let incrementedSels = iter.incrementedSels;\n        if(incrementedSels && incrementedSels.length){\n            incrementedSels.forEach(ic=>{\n                let cloned = {...iter};\n                cloned.incrementedSel = ic;\n\n                accu.push(cloned);\n            });\n        } else {\n            accu.push(iter);\n        };\n        return accu;\n    }, []);\n};","const Utils = require('../utils');\nconst _utils = require('./utils');\nconst getConfig =_utils.getConfig\nconst updateConfig =_utils.updateConfig\nconst extendConfig =_utils.extendConfig\nmodule.exports = (async function(prop, newValue, prevValue, component, html){\n    html = html || document;\n    let st = this.storage.get(component, 'attr');\n    let configs = getConfig(st, prop, newValue, prevValue, component);\n    if (!configs.length) return;\n\n    // console.log(834, newValue);\n    // if(!(newValue).toString().includes('Object')){\n    //     console.log(852, configs);\n    // };\n    configs = extendConfig(configs);\n    // if(!(newValue).toString().includes('Object')){\n    //     console.table(854, configs);\n    // };\n\n    return Promise.all(configs.map(config=>{\n        let  data;\n        // let {hasNegate, bind, testVal,attr, ops, sel, attrkey, attrvalue, incrementedSel,incrementId} = config;\n\n        let hasNegate = config.hasNegate;\n        let bind = config.bind;\n        let testVal = config.testVal;\n        let attr = config.attr;\n        let ops = config.ops;\n        let sel = config.sel;\n        let attrkey = config.attrkey;\n        let attrvalue = config.attrvalue;\n        let incrementedSel = config.incrementedSel;\n        let incrementId = config.incrementId;\n\n        bind = Utils.removeWhiteSpace(bind);\n        attr = Utils.removeWhiteSpace(attr);\n\n        incrementedSel = newValue.incrementedSel || incrementedSel;\n\n        // console.log(850,incrementedSel);\n\n        if(!!newValue.incrementedSel){\n            // console.log(229, newValue, bind);\n            data = newValue[bind];\n        } else {\n            data = newValue;\n        };\n\n        \n        // console.log(39, data);\n        \n        if (prop == bind){\n\n            let els = html.querySelectorAll(`[data-attr=${incrementedSel || sel}]:not(.cake-template)`);\n            // console.log(839, els, `[data-attr=${incrementedSel || sel}]:not(.cake-template)`);\n            // console.log(865,sel,incrementedSel,els);\n\n            // console.log(572, prop, bind, data, sel, els);\n            \n            return Promise.all([...els].map(el=>{\n                // console.log(869,el);\n                \n                let test = false;\n                if (ops){\n                    test = Utils.logTest(data, ops, testVal);\n                    hasNegate && (test = !test);\n                } else if (hasNegate){\n                    test = !data;\n                } else {\n                    test = !!data;\n                };\n\n                // console.log(el, prop, data);\n                \n\n                \n                if (test){\n                    if(attrvalue){\n                        el.setAttribute(attrkey, attrvalue);\n                    } else {\n                        el.setAttribute(attrkey);\n                    };\n                } else {\n                    el.removeAttribute(attrkey);\n                };\n            }));\n        };\n\n        newValue = null;\n    }));\n});","const Utils = require('../utils');\nconst _utils = require('./utils');\nconst getConfig =_utils.getConfig\nconst updateConfig =_utils.updateConfig\nconst extendConfig =_utils.extendConfig\n\n\nmodule.exports = (async function(prop, newValue, prevValue, component, html){\n    html = html || document;\n    let st = this.storage.get(component, 'bind');\n    let configs = getConfig(st,prop, newValue, prevValue, component);\n\n\n    if (!configs.length) return;\n\n\n    configs = extendConfig(configs);\n\n\n    for (let c = 0; c < configs.length; c++){\n        let config = configs[c], data;\n        // let {attr, bind, sel, incrementedSel,incrementId, incrementedSels} = config;\n\n        let attr = config.attr;\n        let bind = config.bind;\n        let sel = config.sel;\n        let incrementedSel = config.incrementedSel;\n        let incrementId = config.incrementId;\n        let incrementedSels = config.incrementedSels;\n\n        \n        incrementedSel = newValue.incrementedSel || incrementedSel;\n\n        \n\n\n        if(!!newValue.incrementedSel){\n            // console.log(229, newValue, bind);\n            data = newValue[bind];\n        } else {\n            data = newValue;\n        };\n        let attrHyphen = attr.toHyphen();\n        if (prop == bind){\n            let els = html.querySelectorAll(`[data-bind=${incrementedSel || sel}]`);\n            // console.log(incrementedSel, els);\n\n            for (let p = 0; p < els.length; p++){\n                let el = els[p];\n\n                \n                if (attr == 'class' || attr == 'className'){\n\n                    if (el.classList.length){\n                        // console.log(prevValue);\n                        Utils.splitBySpace(prevValue, function(cls){\n                            el.classList.remove(cls);\n                        });\n                        Utils.splitBySpace(data, function(cls){\n                            el.classList.add(cls);\n                        });\n                    } else {\n                        Utils.splitBySpace(data, function(cls){\n                            el.classList.add(cls);\n                        });\n                    };\n\n                } else {\n\n                    // if(prop == 'current_balance'){\n                    //     console.log(262, el, attrHyphen, data,)\n                    //     console.log(263, config.incrementedSel, newValue.incrementedSel);\n                    //     console.log(264, newValue, data);\n                    // };\n\n                    if(data != undefined || data != null){\n                        \n \n\n                        el.setAttribute(attrHyphen, data);\n                        el[attr] = data;\n                    };\n\n                };\n            };\n        };\n    };\n\n    newValue = null;\n});","const Utils = require('../utils');\nconst _utils = require('./utils');\nconst getConfig =_utils.getConfig\nconst updateConfig =_utils.updateConfig\nconst extendConfig =_utils.extendConfig\n\nmodule.exports = (async function(prop, newValue, prevValue, component, html){\n\n    // console.log(477,prop, newValue, component);\n\n    let st = this.storage.get(component, 'class');\n    html = html || document;\n    let configs = getConfig(st,prop, newValue, prevValue, component);\n\n    // console.log(478, configs);\n\n    if (!configs.length) return;\n\n    let cache = {};\n\n    configs = extendConfig(configs);\n\n    // console.log(731, configs);\n\n    for (let c = 0; c < configs.length; c++){\n        let config = configs[c], data;\n        // let {hasNegate, bind, testVal,className, ops, sel,  incrementedSel,incrementId} = config;\n\n        let hasNegate = config.hasNegate;\n        let bind = config.bind;\n        let testVal = config.testVal;\n        let className = config.className;\n        let ops = config.ops;\n        let sel = config.sel;\n        let incrementedSel = config.incrementedSel;\n        let incrementId = config.incrementId;\n\n        bind = Utils.removeWhiteSpace(bind);\n\n        incrementedSel = newValue.incrementedSel || incrementedSel;\n\n        if(!!newValue.incrementedSel){\n            // console.log(229, newValue, bind);\n            data = newValue[bind];\n        } else {\n            data = newValue;\n        };\n        \n        if (prop == bind){\n            if (!cache[incrementedSel || sel]){\n                cache[incrementedSel || sel] = html.querySelectorAll(`[data-class=${incrementedSel || sel}]:not(.cake-template)`);//just to convert iterable;\n            }\n            let els = cache[incrementedSel || sel];\n\n            // component == 'header1' && console.log(759, data,  component);\n\n            for (let p = 0; p < els.length; p++){\n                let el = els[p];\n                let test = false;\n                if (ops){\n                    test = Utils.logTest(data, ops, testVal);\n                    hasNegate && (test = !test);\n                } else if (hasNegate){\n                    // test = !data;\n                    test = data == testVal;\n                } else {\n                    test = !!data;\n                };\n\n                // component == 'header1' && console.log(503, {data}, {testVal}, {test}, {el}, {className});\n\n                if (test){\n                    // console.log('add ',className);\n                    Utils.splitBySpace(className, function(cls){\n                        // console.log(519, data,  ops, testVal, test);\n                        const classList = Utils.toArray(el.classList);\n                        if (!classList.includes(cls)){\n                           setTimeout(()=>{\n                                el.classList.add(cls);\n                           });\n                        };\n                    });\n                } else {\n                    // console.log('remove ',className);\n                    Utils.splitBySpace(className, function(cls){\n                        const classList = Utils.toArray(el.classList);\n\n                        if (classList.includes(cls)){\n                            setTimeout(()=>{\n                                el.classList.remove(cls);\n                            });\n                        };\n                    });\n\n                };\n            };\n        };\n    };\n\n    newValue = null;\n});","const Utils = require('../utils');\nconst Piece = require('../piece');\nconst Templating = require('../templating');\nconst Plugin = require('../plugin');\n\nconst _utils = require('./utils');\nconst getConfig =_utils.getConfig\nconst updateConfig =_utils.updateConfig\nconst extendConfig =_utils.extendConfig\n\n\nmodule.exports = (async function(prop, newValue, prevValue, component, html){\n    html = html || document;\n\n    let st = this.storage.get(component, 'forUpdate');\n\n    let configs = getConfig(st, prop, newValue, prevValue, component);\n    if (!configs.length) return;\n\n    let templating = new Templating(Plugin('templating'));\n    // console.log(configs)\n\n    // console.log(206, prop, newValue, component);\n\n\n    // console.log(23, this.sts);\n\n    const attrPayload = [];\n    for (let c = 0; c < configs.length; c++){\n        // let {bind, sel, iter, ins, targets} = configs[c];\n        let bind = configs[c].bind;\n        let sel = configs[c].sel;\n        let iter = configs[c].iter;\n        let ins = configs[c].ins;\n        let targets = configs[c].targets;\n        // let index = -1;\n\n        for (let o in newValue){\n            if (newValue.hasOwnProperty(o)){\n                let targets = document.querySelectorAll(`[data-for-update-bind=${o}]`);\n\n  \n\n                // console.log(467, targets);\n                // const row = newValue[o];\n                // index += 1;\n\n                for (let t = 0; t < targets.length; t++){\n                    \n                    let target = targets[t];\n                    let binded = target.dataset.forUpdateBind;\n\n         \n\n                    // console.log({binded})\n                    // console.log({target})\n\n                    if (!target.dataset.forTemplate){\n                        target.remove();\n                    } else {\n                        let template = target.cloneNode(true);\n                        template.style.removeProperty('display');\n                        template.classList.remove('cake-template');\n                        let dataForIteration = newValue[binded];\n\n     \n\n                        let i = -1; l = dataForIteration.length;\n                        while(++i < l){\n                            let item = dataForIteration[i];\n                            let index = i;\n                            // console.log(71, item, index, t, o);\n                            \n                            for (let lt = 0; lt < this.logicalType.length; lt++){\n                                let type = this.logicalType[lt];\n                                const logicalHtml = new Piece(target).querySelectorAllIncluded(`[data-${type}]`)\n     \n                                for (let l = 0; l < logicalHtml.length; l++){\n                                    const hit = logicalHtml[l];\n                                    // console.log(550, hit, hit.dataset[type]);\n                                    if (hit.dataset[type]){\n                                        let sel = hit.dataset[type];\n                                        let incrementedSel = `${sel}-${o}-${index}`;\n                                        // console.log(83, incrementedSel);\n                                        template.dataset[type] = incrementedSel;\n                                        let bind = this.getWatchItemsBySel(component,type,sel).bind;\n                                        if (bind.includes('.')){\n                                            let split = bind.split('.');\n                                            binded = split[0];\n                                            for (let key in item){\n                                                let value = item[key];\n                                                let _key = `${binded}.${key}`;\n                                                item[_key] = value;\n                                            };\n                                        };\n                                       \n                                        \n                                        \n                                        if (sel){\n                 \n                                            \n                                            attrPayload.push({_type:type, ...item, incrementedSel,sel, bind, incrementId:index, component});\n                                        };\n                                    };\n                                };\n                            };\n    \n                              \n                            let create = templating.createElement(item, template, false);\n\n                            create.classList.remove('cake-template');\n                            create.removeAttribute('data-for-template');\n                            target.insertAdjacentElement('beforebegin', create);\n                            if (target.parentElement.tagName == 'SELECT'){\n                                target.parentElement.selectedIndex = 0;\n                            };\n                        };\n                    };\n                };\n            };\n        };\n    };\n\n    newValue = null;\n\n    // console.log(attrPayload);\n    // console.log(185, attrPayload);\n    return Promise.all(attrPayload.map(payload=>{\n        // const {bind, _type, component, incrementedSel, sel} = payload;\n        const bind = payload.bind;\n        const _type = payload._type;\n        const component = payload.component;\n        const incrementedSel = payload.incrementedSel;\n        const sel = payload.sel;\n        const name = `notify${_type.toProper()}`;\n\n\n        // console.log(665, {incrementedSel});\n        updateConfig(_type, bind, payload, null, component, {incrementedSel}, sel);\n\n\n        return this[name](bind, payload, null,component);\n    })).then(()=>{\n        // console.log('finish setting attribute', component);\n    });\n});","function Piece(el){\n    this.el = Piece.toArray(el);\n};\nPiece.toArray = function(el){\n    let r = [];\n    switch(true){\n        case (el instanceof Array):{\n            r = el;\n        } break;\n        case (el.length && (el.tagName && el.tagName != 'FORM') && !(el instanceof Array)):{\n            for (let e = 0; e < el.length; e++){\n                r.push(el[e]);\n            };\n        } break;\n        case !(el instanceof Array):{\n            r = [el];\n        } break;\n    };\n    return r;\n};\nPiece.prototype.loop = function(callback){\n    try {\n        let i = -1, length = this.el.length;\n        while(++i < length){\n            let el = this.el[i];\n            callback(i, el);\n        };\n        return true;\n    } catch(err){\n        console.error(err);\n        return false;\n    };\n\n}\nPiece.prototype.getElements = function(){\n    return this.el;\n};\nPiece.prototype.getElement = function(index=0){\n    return this.el[index];\n};\nPiece.prototype.remove = function(){\n    let i = -1, length = this.el.length;\n    let fg = document.createDocumentFragment();\n    while(++i < length){\n        let el = this.el[i];\n        el  && (fg.appendChild(el));\n        // el  && el.remove();\n    };\n    fg = null;\n    return true;\n};\n\nPiece.prototype.unRequired = function(){\n\n    return this.loop(function(index, el){\n        el.unRequired();\n    });\n};\n\nPiece.prototype.replaceDataSrc = function(){\n\n    return this.loop(function(index, el){\n        el.replaceDataSrc();\n    });\n};\n\nPiece.cloneNode = function(el){\n    el = (el instanceof Array)?el:this.toArray(el);\n    let a = [];\n    for (let e = 0; e < el.length; e++){\n        a.push(el[e].cloneNode(true));\n    };\n    return new Piece(a);\n};\nPiece.prototype.dataset = function(data, cb){\n    let l = this.el.length;\n    let i = -1;\n\n    while(++i < l){\n        if (this.el[i].dataset[data]){\n            let exec = cb(this.el[i]);\n            if (exec == 'break'){\n                break;\n            };\n        };\n    };\n    return true;\n};\nPiece.prototype.getContainers = function(){\n    // console.log('111111');\n    let container = this.getElementsByDataset('container').container;\n    return container\n};\nPiece.prototype.cloneNode = function(el){\n    el = this.el;\n    return Piece.cloneNode(el);\n};\nPiece.prototype.getAllElements = function(){\n    let length = this.el.length;\n    let r = [];\n    switch(true){\n        case length == 1:{\n            r = this.el[0].getElementsByTagName('*').toArray();\n        } break;\n        case length > 1:{\n            let i = -1;\n            while(++i < length){\n                let el = this.el[i];\n                let q = el.getElementsByTagName('*');\n                if (q){\n                    for (let i = 0; i < q.length; i++){\n                        r.push(q[i]);\n                    };\n                };\n            };\n        } break;\n    };\n    return r;\n};\n\nPiece.prototype.appendTo = function(roots, cleaned){\n\n    if(roots.nodeType == 1){\n        roots = [roots];\n    };\n\n\n    for (let i = 0; i < roots.length; i++){\n        let root = roots[i];\n        if (!root && !root.attributes){\n            throw new TypeError(`the ${root} is not an instance of Element`);\n        };\n    \n        // console.log(root);\n    \n        cleaned && (root.innerHTML = \"\");\n    \n    \n        for (let i = 0; i < this.el.length; i++){\n            let el = this.el[i];\n            root.appendChild(el);\n        };\n    }\n};\nPiece.prototype.getElementsByTagName = function(tag){\n    let length = this.el.length;\n    let r = [];\n    switch(true){\n        case length == 1:{\n            r = this.el[0].getElementsByTagName(id).toArray();\n        } break;\n        case length > 1:{\n            let i = -1;\n            while(++i < length){\n                let el = this.el[i];\n                let q = el.getElementsByTagName(selector);\n                if (q){\n                    for (let i = 0; i < q.length; i++){\n                        r.push(q[i]);\n                    };\n                };\n            };\n        } break;\n    };\n    return r;\n};\n\nPiece.prototype.getElementById = function(ids){\n    let length = this.el.length;\n    let r = [];\n    switch(true){\n        case length == 1:{\n            r = this.el[0].getElementById(id);\n        } break;\n        case length > 1:{\n            let i = -1;\n            while(++i < length){\n                let el = this.el[i];\n                let q = el.querySelector(selector);\n                if (q){\n                    r.push(q);\n                };\n            };\n        } break;\n    };\n    return r;\n}\n\nPiece.prototype.querySelectorAll = function(selector){\n    let length = this.el.length;\n    let r = [];\n    switch(true){\n        case length == 1:{\n            r = this.el[0].querySelectorAll(selector);\n        } break;\n        case length > 1:{\n            let els = [];\n            let i = -1;\n            while(++i < length){\n                let el = this.el[i];\n                let q = el.querySelectorAll(selector);\n                q && (r = r.concat(q.toArra()));\n            };\n        } break;\n        default:{\n            r = [];\n        }\n    };\n    return r;\n};\n\nPiece.prototype.querySelector = function(selector){\n    let length = this.el.length;\n    let r = [];\n    switch(true){\n        case length == 1:{\n            r = this.el[0].querySelector(selector);\n        } break;\n        case length > 1:{\n            let i = -1;\n            while(++i < length){\n                let el = this.el[i];\n                let q = el.querySelector(selector);\n                if (q){\n                    r.push(q);\n                };\n            };\n        } break;\n    };\n    return r;\n};\n\nPiece.prototype.querySelectorIncluded = function(selector, attr, val){\n    let length = this.el.length;\n    let r = [];\n    switch(true){\n        case length == 1:{\n            r = this.el[0].querySelectorIncluded(selector, attr, val);\n        } break;\n        case length > 1:{\n            let i = -1;\n            while(++i < length){\n                let el = this.el[i];\n                let q = el.querySelectorIncluded(selector, attr, val);\n                q && (r.push(q))\n            };\n        } break;\n    };\n    return r;\n};\n\n\nPiece.prototype.querySelectorAllIncluded = function(selector, attr, val){\n    let length = this.el.length;\n    let r = [];\n    switch(true){\n        case length == 1:{\n            r = this.el[0].querySelectorAllIncluded(selector, attr,val);\n        } break;\n        case length > 1:{\n            let i = -1;\n            while(++i < length){\n                let el = this.el[i];\n                let q = el.querySelectorAllIncluded(selector, attr, val);\n                q && (r = r.concat(q.toArra()));\n            };\n        } break;\n    };\n    return r;\n};\n\nPiece.prototype.contains = function(el){\n    let length = this.el.length, test = false;\n    switch(length == 1){\n        case true:{\n            test = this.el[0].contains(el);\n        } break;\n        case false:{\n           let index = -1;\n           while(++index < length){\n               let _el = this.el[index];\n               if (_el.contains(el)){\n                test = true;\n                break;\n               };\n           };\n        } break;\n    }\n    return test;\n};\nPiece.prototype.getElementsByDataset = function(){\n    let arg, sel, i, a, el, query;\n    arg = arguments;\n    o = {};\n    length = arg.length;\n    i = -1;\n    a = -1;\n\n    // console.log(292, this.el);\n    while(++i < this.el.length){\n        el = this.el[i];\n        while(++a < length){\n            sel = arg[a];\n            if (el.getAttribute(`data-${sel}`)){\n                o[sel] = [el];\n            } else {\n                o[sel] = [];\n            }\n            let query = el.querySelectorAll(`[data-${sel}]`);\n            if (query.length){\n                for (let q = 0; q < query.length; q++){\n                    let qe = query[q];\n                    let istemp = qe.closest('.cake-template');\n                    if(!istemp){\n                        o[sel].push(qe);\n                    };\n                };\n            };\n        };\n    };\n    return o;\n}\n\nmodule.exports = Piece;","const Utils = require('../utils');\nconst Templating = require('../templating');\nconst Plugin = require('../plugin');\nconst ComponentStorage = require('../storage/components-store');\nconst _utils = require('./utils');\nconst getConfig =_utils.getConfig\nconst updateConfig =_utils.updateConfig\nconst extendConfig =_utils.extendConfig\n\nmodule.exports = (async function(prop, newValue, prevValue, component, html){\n        \n    // console.log(12, this.sts);\n\n    let sts = this.storage.get(component);\n  \n\n    // console.log(18, st);\n\n    let templating = new Templating(Plugin('templating'));\n    return new Promise((res, rej)=>{\n        try {\n            let configs = getConfig(this.storage.get(component,'for'), prop, newValue, prevValue, component);\n            \n            let switchConfig = getConfig(this.storage.get(component,'switch'), prop, newValue, prevValue, component);\n            \n           \n            \n            if (!configs.length) return;\n\n            let data = newValue.reduce((accu, item)=>{\n                accu.push(item);\n                return accu;\n            }, []);\n\n            newValue = null;\n\n\n\n\n            for (let c = 0; c < configs.length; c++){\n                // let {bind, sel, iter, ins, component, cleaned} = configs[c];\n\n                let bind = configs[c].bind;\n                let sel = configs[c].sel;\n                let iter = configs[c].iter;\n                let ins = configs[c].ins;\n                let component = configs[c].component;\n                let cleaned = configs[c].cleaned;\n        \n                // html = Cake.Components[component].html;\n                html = ComponentStorage.get(component).html;\n\n\n                \n                let target = html.querySelectorIncluded(`[data-for-template=${sel}]`);\n                let cloned = target.cloneNode(true);\n\n\n  \n\n                //manipulate data;\n                ;(()=>{\n                    data = data.map(item=>{\n                        for (let key in item){\n\n\n                            // console.log(64, key, item[key]);\n\n                            if (item.hasOwnProperty(key)){\n                                item[`${iter}.${key}`] = item[key];\n                            };\n                        };\n                        return item;\n                    });\n                })();\n\n\n                let hasReplaced = [];\n                //update other\n                ;(()=>{\n                    let increment = 0;\n                    // console.log(83,sts, data);\n                    Object.keys(sts).forEach(key=>{\n                        if(!['for','evt','animate','switch'].includes(key)){\n                           let conf = sts[key];\n                           let temp = conf[0];\n                        //    let {bind} = temp || {};\n\n                           let bind = temp && temp.bind || undefined;\n\n                           if(bind && bind.match(new RegExp(templating.lefttag),'g')){\n                                data.forEach((item, index)=>{\n                                    let o = {};\n                                    o.bind =  templating.replaceString(item, bind);\n                                    o.sel = `${temp.sel}-${increment}`;\n                                    o.rawsel = temp.sel;\n                                    increment += 1;\n\n                                    //data binding to the element selector;\n                                    data[index].__sel = o.sel;\n                                    \n                                    for (let key in temp){\n                                        if (temp.hasOwnProperty(key)){\n                                            if(!o[key]){\n                                                o[key] = temp[key];\n                                            };\n                                        };\n                                    };\n\n                                    conf.push(o);\n\n                                });\n                                hasReplaced.push(key);\n                            \n                            };\n                        };\n                    });\n\n                })();\n\n                ;(()=>{\n                    if (cleaned){\n                        let parent = target.parentElement;\n                        parent.children.toArray().forEach(child=>{\n                            if(child.dataset.for && !child.classList.contains('cake-template')){\n                                child.remove();\n                            };\n                        });\n                    };\n\n                    let i = -1; l = data.length;\n        \n                    \n                    data.forEach((item, index)=>{\n                        let template = target.cloneNode(true);\n                        //switch;\n                        (()=>{\n                            if(switchConfig && !switchConfig.length)return;\n                            // const [{bind, map, sel, cases}] = switchConfig;\n\n                            let bind = switchConfig[0].bind;\n                            let map = switchConfig[0].map;\n                            let sel = switchConfig[0].sel;\n                            let cases = switchConfig[0].cases;\n\n                            const mapping = item[map];\n                            const switchElement = template.querySelector(`[data-switch=${sel}]`);\n                            let hitCase = cases.find(item=>{\n\n                           \n                                let _id = item._id;\n                                let bind = item.bind;\n                                \n                                if(bind.includes('|')){\n                                    return bind.split('|').map(item=>item.trim()).some(item=>item==mapping);\n                                } else {\n                                    return bind == mapping\n                                };\n                            });\n\n                            \n\n                            const find = cloned.querySelector(`[data-case=${sel}-${hitCase._id}]`);\n\n                            \n\n                            find.classList.remove('cake-template');\n                            switchElement.innerHTML = find.outerHTML;\n\n                            // switchElement.parentNode.replaceChild(find, switchElement);\n                        })();\n\n                        let create = templating.createElement(item, template, false);\n                        \n                        //replace the templated data-*;\n\n                        \n                        ;(()=>{\n                            Object.keys(sts).forEach(key=>{\n                                if(hasReplaced.includes(key)){\n                                    let conf = sts[key];\n                                    let cf = conf.find(cf=>{\n                                        return cf.sel == item.__sel;\n                                    });\n                                    if(cf){\n                                        let rawsel = cf.rawsel;\n                                        if(rawsel){\n                                            let get = create.querySelector(`[data-${key}=${rawsel}]`);\n                                            get.dataset[key] = cf.sel;\n                                        };\n                                    }\n                                };\n                            });\n    \n                        })();\n\n                        //for\n                        ;(()=>{\n                            // create.style.display = 'block';\n                            create.style.removeProperty('display');\n                            create.classList.remove('cake-template');\n                            create.removeAttribute('data-for-template');\n                            target.insertAdjacentElement('beforebegin', create);\n                        })();\n\n\n                        //auto\n                        ;(()=>{\n                            const children = configs[0] && configs[0].children;\n                            if(!children) return;\n\n                            children.forEach(child=>{\n                                const forAutoElement = create.querySelector(`[data-for=${child}]`);\n\n                                if(forAutoElement){\n                                    const dataBindKey = forAutoElement.dataset.forAutoBindKey;\n                                    const dataBindValue = forAutoElement.dataset.forAutoBindValue;\n                                    const iteration = forAutoElement.dataset.forIter;\n\n                                    const datas = item[iteration];\n\n                                    if(datas){\n                                        for (let d = 0; d < datas.length; d++){\n                                            let data = datas[d];\n                                            let template = forAutoElement.cloneNode(true);\n\n                                            let create = templating.createElement(data, template, false);\n                                            create.style.removeProperty('display');\n                                            create.classList.remove('cake-template');\n                                            create.removeAttribute('data-for-template');\n                                            forAutoElement.insertAdjacentElement('beforebegin', create);\n                                        };\n                                    };\n\n                                    const select = forAutoElement.closest('SELECT');\n                                    if (select){\n                                        select.selectedIndex = 0;\n                                    };\n                                };\n                            });\n                        })();\n\n                        create.replaceDataSrc();\n                    });\n\n                    \n\n                    res()\n                })();\n            };\n\n            html.unRequired();\n \n            data= null;\n        } catch(err){\n            rej(err);\n        }\n    });\n});","const storage = {};\n\nfunction subscribeExternal(){\n    let component = storage[name];\n    \n    if (component){\n        if (cb instanceof Function){\n            let name = cb.name;\n            if (ctx){\n                cb = cb.bind(ctx)\n            }\n            cb.binded = 'external';\n            cb.original = name;\n            cb.listenTo = component.name;\n            component.Subscribe(cb);\n        }\n    } else {\n    };\n};\n\nwindow.ComponentStorage = storage;\n\nmodule.exports = {\n    subscribe(cb, ctx){\n\n        return new Promise((res, rej)=>{\n\n            let lk = setInterval(()=>{\n                if (storage[name]){\n                    \n                    subscribeExternal();\n                    clearInterval(lk);\n                    res();\n                };\n            });\n        })\n    },\n    set(componentName, component){\n        storage[componentName] = component;\n        return true;\n    },\n    get(componentName){\n        return storage[componentName];\n    }\n};","const Utils = require('../utils');\nconst _utils = require('./utils');\nconst getConfig =_utils.getConfig\nconst updateConfig =_utils.updateConfig\nconst extendConfig =_utils.extendConfig\n\nmodule.exports = (async function(prop, newValue, prevValue, component, html){\n    html = html || document;\n    // console.log(605,prop, newValue);\n\n    let st = this.storage.get(component, 'if');\n\n    let configs = getConfig(st, prop, newValue, prevValue, component);\n    // console.log(603, configs);\n\n    if (!configs.length) return;\n\n    configs = extendConfig(configs);\n\n    let cache = {};\n\n    // console.log(610, configs);\n    for (let c = 0; c < configs.length; c++){\n        let config = configs[c];\n        /**\n         * the incremetedSel is not null when this is called within a loop or data-for;\n         */\n        // let {attr, bind, sel, testval, _true, _false, ops, hasNegate, incrementedSel,incrementId} = config;\n\n        let attr = config.attr;\n        let bind = config.bind;\n        let sel = config.sel;\n        let testval = config.testval;\n        let _true = config._true;\n        let _false = config._false;\n        let ops = config.ops;\n        let hasNegate = config.hasNegate;\n        let incrementedSel = config.incrementedSel;\n        let incrementId = config.incrementId;\n\n\n\n\n        let attrHyphen = attr.toHyphen();\n        let trueNotIgnore = _true != 'null';\n        let falseNotIgnore = _false != 'null';\n\n        if (prop == bind){\n            if (!cache[sel]){\n                // console.log(incrementedSel, sel,`[data-if=${incrementedSel || sel}]:not(.cake-template)`);\n                cache[sel] = html.querySelectorAll(`[data-if=${incrementedSel || sel}]:not(.cake-template)`);//just to convert iterable;\n            }\n            let els = cache[sel];\n            // console.log(624,els, newValue);\n\n            for (let p = 0; p < els.length; p++){\n                let el = els[p];\n\n                let data = newValue; //it can accept, el with data-if-bind and none;\n\n                let test;\n                if(testval){\n                    test = Utils.logTest(testval, ops, data);\n                } else {\n                    test = (hasNegate)?!data:!!data;\n                };\n\n                if(test){\n                    if(trueNotIgnore){\n                        if(attr == 'class'){\n                            let trueClasses = _true.split(' ');\n                            if(falseNotIgnore){\n                                let falseClasses = _false.split(' ');\n                                falseClasses.forEach(cls=>{\n                                    el.classList.remove(cls);\n                                });\n                                trueClasses.forEach(cls=>{\n                                    el.classList.add(cls);\n                                });\n                            } else {\n                                trueClasses.forEach(cls=>{\n                                    if(!el.classList.contains(cls)){\n                                        el.classList.add(cls);\n                                    };\n                                });\n                            };\n                            \n                        } else {\n                            if(data[_true]){\n                                el.setAttribute(attr, data[_true]);\n                            }\n                        };\n                    }\n                } else {\n                    if(falseNotIgnore){\n                        if(attr == 'class'){\n                            let falseClasses = _false.split(' ');\n                            if(trueNotIgnore){\n                                let trueClasses = _true.split(' ');\n                                trueClasses.forEach(cls=>{\n                                    el.classList.remove(cls);\n                                });\n                                falseClasses.forEach(cls=>{\n                                    el.classList.add(cls);\n                                });\n                            } else {\n                                trueClasses.forEach(cls=>{\n                                    if(!el.classList.contains(cls)){\n                                        el.classList.add(cls);\n                                    };\n                                });\n                            };\n                            \n                        } else {\n                            el.setAttribute(attr, _false);\n                        };\n                    }\n                };\n            };\n        };\n    };\n\n    newValue = null;\n});","const Utils = require('../utils');\n\nconst _utils = require('./utils');\nconst getConfig =_utils.getConfig\nconst updateConfig =_utils.updateConfig\nconst extendConfig =_utils.extendConfig\n\nmodule.exports = (async function(prop, newValue, prevValue, component, html){\n    html = html || document;\n\n\n    let st =this.storage.get(component, 'model');\n\n    let configs = getConfig(st,  prop, newValue, prevValue, component);\n    if (!configs.length) return;\n    for (let c = 0; c < configs.length; c++){\n        let config = configs[c];\n        // let {attr, bind, sel} = config;\n\n        let attr = config.attr;\n        let bind = config.bind;\n        let sel = config.sel;\n\n        let attrHyphen = attr.toHyphen();\n        if (prop == bind){\n            let els = html.querySelectorAll(`[data-model=${sel}]`);\n            for (let p = 0; p < els.length; p++){\n                let el = els[p];\n                if (attr == 'className'){\n                    if (prevValue){\n                        if (newValue){\n                            el.classList.replace(prevValue, newValue);\n                        } else {\n                            el.classList.remove(prevValue);\n                        };\n                    } else {\n                        el.classList.add(newValue);\n                    };\n                } else {\n                    el.setAttribute(attrHyphen, newValue);\n                    el[attr] = newValue;\n                };\n            };\n        };\n    };\n\n    newValue = null;\n});","const Utils = require('../utils');\nconst _utils = require('./utils');\nconst getConfig =_utils.getConfig\nconst updateConfig =_utils.updateConfig\nconst extendConfig =_utils.extendConfig\n\nmodule.exports = (async function(prop, newValue, prevValue, component, html){\n    html = html || document;\n    let st = this.storage.get(component, 'toggle');\n    // console.log(8, this.sts);\n    let configs = getConfig(st,prop, newValue, prevValue);\n    // if (!configs.length) return;\n    if (!configs){return ;};\n\n    configs = extendConfig(configs);\n\n    html = html || document;\n    for (let s = 0; s < configs.length; s++){\n        let sub = configs[s];\n        if (!sub) continue;\n        // let {sel, bind, value, ops} = sub;\n\n        let sel = sub.sel;\n        let bind = sub.bind;\n        let value = sub.value;\n        let ops = sub.ops;\n\n        let el = html.querySelector(`[data-toggle=${sel}]`);\n\n\n        //TODO\n        if (value == prevValue){\n            el && el.classList.remove('is-active');\n        }  \n        if (value == newValue){\n            if (el){\n                if (el.classList.contains('is-active')){\n                    el.classList.remove('is-active');\n                };\n                el && el.classList.add('is-active');\n            };\n        };\n    };\n\n    newValue = null;\n});","function ComponentAttribStorage(){\n    this.store = {};\n\n};\n\nComponentAttribStorage.prototype.set = function(component, type, obj){\n    let store = this.store;\n    switch(true){\n        case (!store[component]):{store[component] = {}};\n        case (!store[component][type]):{store[component][type] = []};\n        default:{store[component][type].push(obj)};\n        break;\n    };\n    return true;\n};\n\nComponentAttribStorage.prototype.get = function(component, attr){\n    let store = this.store;\n    if(component && attr){\n        return store[component] && store[component][attr] || [];\n    };\n    if(component && !attr){\n        return store[component] || {};\n    }\n};\n\n\n\n\nmodule.exports = ComponentAttribStorage;","\nconst Templating = require('./templating');\n\nconst notifyAttr = require('./attrib/data-attr');\nconst notifyBind = require('./attrib/data-bind');\nconst notifyClass = require('./attrib/data-class');\nconst notifyForUpdate = require('./attrib/data-for-update');\nconst notifyFor = require('./attrib/data-for');\nconst notifyIf = require('./attrib/data-if');\nconst notifyModel = require('./attrib/data-model');\nconst notifyToggle = require('./attrib/data-toggle');\nconst AttribConfigStorage = require('./storage/AttribConfigStorage');\nconst UTILS = require('./utils');\n// const notifyForAuto = require('./attrib/data-for-auto');\n// const notifySwitch = require('./attrib/data-switch');\n\n// const st = {};\n// \nfunction Attrib(){\n\n    this.uiid = 0;\n    this.notify = {};\n    this.sts = {};\n    this.storage = new AttribConfigStorage();\n    this.logicalType = ['if', 'bind', 'switch', 'toggle', 'class', 'attr'];\n};\n\nAttrib.prototype.notifyFor = notifyFor;\nAttrib.prototype.notifyForUpdate = notifyForUpdate;\n\nAttrib.prototype.notifyClass = notifyClass;\nAttrib.prototype.notifyBind = notifyBind;\nAttrib.prototype.notifyAttr = notifyAttr;\nAttrib.prototype.notifyIf = notifyIf;\nAttrib.prototype.notifyModel = notifyModel;\nAttrib.prototype.notifyToggle = notifyToggle;\n\n/*\n    watch for the (name) which is registered to the scope\n    get all attribute with that name,\n    get all component holding that (name),\n    and notify them;\n*/\n\nAttrib.prototype.notifier = function(prop, newValue, prevValue, component){\n    // console.time('attr');\n\n    // console.log(47, newValue);\n\n    if(newValue == undefined){\n        return Promise.resolve();\n    };\n\n    let val = JSON.parse(JSON.stringify(newValue));\n    // if(Utils.isObject(val)){\n    //     val = JSON.parse(JSON.stringify(newValue));\n    // };\n    const equiv = {\n        for:'For',\n        forUpdate:'ForUpdate',\n        // switch:'Switch',\n        // toggle:'Toggle',\n        bind:'Bind',\n        // model:'Model',\n        if:'If',\n        class:'Class',\n        attr:'Attr',\n\n        // disabled:'Disabled',\n        // readonly:'Readonly',\n        // checked:'Checked',\n    };\n\n    let hits = Object.caching('AttribProp').get(prop) || \n    (()=>{\n        let hits = {};\n        const actions = Object.keys(equiv);\n        // const configs = this.sts[component];\n        const configs = this.storage.get(component);\n        if(!configs){\n            return [];\n        };\n        for (let a = 0; a < actions.length; a++){\n            const action = actions[a];\n            const vals = configs[action];\n            if(vals){\n                for (let v = 0; v < vals.length; v++){\n                    const val = vals[v];\n                    // const {bind} = val;\n                    const bind = val.bind;\n                    if(bind == prop){\n                        hits[action] = true;\n                    };\n                };\n            };\n        };\n        hits = Object.keys(hits);\n\n        Object.caching('AttribProp').set(prop, hits);\n        return hits;\n    })();\n\n\n    return new Promise((res, rej)=>{\n        try {\n            let l = hits.length;\n            let index = 0;\n            const rec = (()=>{\n                if(l > index){\n                    let attr = hits[index];\n                    const name = equiv[attr];\n                    index += 1;\n                    this[`notify${name}`](prop, val, prevValue, component).then(()=>{\n                        rec();\n                    });\n                } else {\n                    res();\n                };\n            });rec();\n        } catch(err){\n            rej(err.message);\n        };\n    });\n};\n\nAttrib.prototype.registerNotifier = function(component, fn){\n\n    if (!this.notify[component]){\n        this.notify[component] = [];\n    };\n    this.notify[component].push(fn);\n};\n\nAttrib.prototype.getEventTarget = function(component){\n    let id = `${component}`;\n    let target = Object.caching('getEventTarget').get(id);\n    if (!target){\n        let cf = this.storage.get(component);\n        target = (cf && cf.evt)?cf.evt:[];\n        Object.caching('getEventTarget').set(id, target);\n    };\n    return target;\n};\n\nAttrib.prototype.getRouterTarget = function(component){\n    let id = `${component}`;\n    let target =  Object.caching('getRouterTarget').get(id);\n    if(!target){\n        let cf = this.storage.get(component);\n        target = (cf && cf.router)?cf.router:[];\n        Object.caching('getRouterTarget').set(id, target);\n    };\n    return target;\n};\n\nAttrib.prototype.getWatchItems = function(component){ \n    let id = `${component}`;\n    let target =  Object.caching('getWatchItems').get(id);\n    if(!target){\n        let _st = this.storage.get(component);\n        let red = UTILS.reduce(_st,{wt:[], forWt:[]}, function(obj, accu, index){\n            let type = obj.key;\n            let tst = obj.value;\n            UTILS.each(tst, function(item, index){\n                let bind = item.bind;\n                if(bind){\n                    if(type == 'for'){\n                        accu.forWt.push(bind);\n                    } else {\n                        accu.wt.push(bind);\n                    };\n                };\n            });\n            return accu;\n        });\n        let wt = UTILS.unique(red.wt);\n        let forWt = UTILS.unique(red.forWt);\n        //make the for first;\n        target = forWt.concat(wt);\n        Object.caching('getWatchItems').set(id, target);\n    };\n    return target;\n};\n\nAttrib.prototype.getWatchItemsByType = function(component, type){\n    let id = `${component}-${type}`;\n    let target =  Object.caching('getWatchItemsByType').get(id);\n    \n    if (!target){\n        let _st = this.storage.get(component);\n\n        // console.log(219, component, _st);\n  \n\n        let tst = _st[type] || [];\n        let wt = new Set();\n\n        if(type == 'animate' || type == 'toggle'){\n            wt = [];\n        };\n\n        for (let t = 0; t < tst.length; t++){\n\n            let item = tst[t];\n            // let {bind} = item;\n            let bind = item.bind;\n            \n\n\n            if(type == 'animate' || type == 'toggle'){\n                wt.push(item);\n            } else {\n                !!bind && wt.add(bind);\n            };\n        };\n        target = [...wt];\n        Object.caching('getWatchItemsByType').set(id, target);\n    };\n\n    return target;\n};\n\nAttrib.prototype.getWatchItemsBySel = function(component, type, sel){\n    let id = `${component}-${type}-${sel}`\n    let target =  Object.caching('watchItemsBySel').get(id);\n    if (!target){\n        // let array = this.sts[component][type];\n        let array = this.storage.get(component, type);;\n        let find = array.find(item=>{return item.sel == sel});\n        target = (find)?find:false;\n        Object.caching('watchItemsBySel').set(id, target);\n    };\n    return target;\n};\nAttrib.prototype.getConfig = function(component){\n    return this.storage.get(component);\n};\n\nAttrib.prototype._activateReactive = (component)=>{\n\n};\n\nAttrib.prototype._register = function(f, s, obj){\n    return this.storage.set(f, s, obj);\n};\n\nAttrib.prototype._static = function(component){\n    return function(qs, isStatic){\n        let els = [];\n\n        // console.log(component, qs, isStatic)\n        for(let t = 0; t < qs.length; t++){\n            let el = qs[t];\n            // console.log(el);\n            switch(isStatic){\n                case false:{\n                    els.push(el);\n                };\n                break;\n                case true:{\n                    let dComponent = el.closest('[data-component]');\n                    // console.log(dComponent ,component);\n                    dComponent = dComponent && dComponent.dataset.component;\n                    switch(dComponent == component){\n                        case true:{\n                            els.push(el);\n                        } break;\n                    };\n                }\n                break;\n                default:{continue;}\n            };\n        };\n        // console.log(els, component);\n        return els;\n    }\n};\n\nAttrib.prototype._loopElements = function(attr, els, component, isStatic,cb){\n    if (!els.length) {return false;};\n    els = this._static(component)(els, isStatic);\n    if (!els.length){return false;};\n    for (let i = 0; i < els.length; i++){\n        let el = els[i];\n        let id = `ckm${this.uiid}`;\n        let target, gr;\n        if(attr.includes(',')){\n            let attrs = attr.split(',');\n            target = {}, gr = {};\n            for (let a = 0; a < attrs.length; a++){\n                let attr = attrs[a];\n                target[attr] = el.dataset[attr];\n                gr[attr] = target.split(',');\n            };\n        } else {\n            target = el.dataset[attr];\n            gr = target.split(',');\n        }\n        cb(el, id, target, gr, i);\n    };\n    return true;\n};\n\nAttrib.prototype._compileEvents = function(events,component, isStatic){\n    return new Promise((res)=>{\n        this._loopElements('event',events, component, isStatic, (function(el, id, target, gr, index){\n            let splitted = gr;\n            \n            for (let s = 0; s < splitted.length ; s++){\n                let _sp1 = splitted[s].split(':');\n                let event = _sp1[0];\n                let cb = _sp1[1];\n                event = event.trim();\n                cb = cb ? cb.trim(): cb;\n                this._register(component, 'evt', {event, sel:id, cb});\n                el.dataset.event = id;\n                this.uiid++;\n            }\n        }).bind(this));\n\n        res();\n    });\n};\n\nAttrib.prototype._compileToggle = function(toggles, component, isStatic){\n    return new Promise((res)=>{\n        let c = {};\n        this._loopElements('toggle',toggles, component, isStatic, (function(el, id, target, gr, index){\n            let ns = target;\n            if (c[ns]){\n                id = c[ns];\n            };\n            this._register(component, 'toggle', {sel:id, name:'ns-'+ns});\n            el.dataset.toggle = id;\n            this.uiid++;\n            c[ns] = id;\n        }).bind(this));\n        c = {};\n        res();\n    });\n};\nAttrib.prototype._compileFor = function(fors, component, isStatic, el){\n    return new Promise((res)=>{\n        let target = el;\n        if (!fors.length) {res();return;};\n        let els = this._static(component)(fors, isStatic);\n        if (!els.length){res();return;}\n\n        let o = {};\n        for (let f = 0; f < els.length; f++){\n            let id = `ckf${this.uiid}`;\n\n            o[id] = {};\n\n            let el = els[f];\n            let fr = el.dataset.for;\n            let autoBind = el.dataset.forAutoBind;\n            let isCleaned = el.dataset.forCleaned==undefined || el.dataset.forCleaned==\"true\"; \n            // let [a, b, c] = fr.split(\" \");\n            let _sp1 = fr.split(\" \");\n            let a = _sp1[0];\n            let b = _sp1[1];\n            let c = _sp1[2];\n\n            if(autoBind){\n                let iteration = el.dataset.forIter;\n\n                let split = autoBind.split(':');\n                let autoBindKey = split[0] && split[0].trim();\n                let autoBindValue = split[1] && split[1].trim();\n\n                o[id] = {iteration};\n\n                // console.log(342, iter);\n\n                el.dataset.forAutoBindKey = autoBindKey;\n                el.dataset.forAutoBindValue = autoBindValue;\n                el.removeAttribute('data-for-auto-bind');\n            }\n            \n            el.style.display  = 'none';\n            el.classList.add('cake-template');\n            el.dataset.for = id;\n            el.dataset.forTemplate = id;\n\n\n            o[id] = Object.assign(o[id], {bind:c, sel:id, iter:a, ins: b, cleaned:isCleaned});\n\n            ++this.uiid;\n            if (f != 0){\n                let parent = el.parentElement && el.parentElement.closest('[data-for]');\n                if (!parent) { continue}\n                let parentIsFor = !!parent.dataset.for;\n                if (target.contains(parent) && parentIsFor){\n                    let parentId = parent.dataset.for;\n                    let parentCf = o[parentId];\n                    if (parentCf && !parentCf.children){\n                        parentCf.children = [id];\n                    } else if (parentCf){\n                        parentCf.children.push(id);\n                    };\n                }\n                \n            };\n        };\n        for (let key in o){\n            if (o.hasOwnProperty(key)){\n                this._register(component, 'for', o[key]);\n            };\n        };\n        res();\n    });\n};\n\nAttrib.prototype._compileForUpdate = function(fors, component, isStatic){\n    return new Promise((res)=>{\n        this._loopElements('forUpdate',fors, component, isStatic, (function(el, id, target, gr, index){\n\n            el.style.display  = 'none';\n            el.classList.add('cake-template');\n            el.dataset.forUpdate = id;\n\n            if (!el.dataset.for){\n                el.dataset.forTemplate = id;\n            }\n            let _sp1 = target.split(\" \");\n            let a = _sp1[0];\n            let b = _sp1[1];\n            let c = _sp1[2];\n\n            this._register(component, 'forUpdate', {bind:c, sel:id, iter:a,ins: b});\n            this.uiid++;\n        }).bind(this));\n\n        res();\n    });\n};\n\nAttrib.prototype._compileSwitch = function(switchs, component, isStatic){\n    return new Promise((res)=>{\n        this._loopElements('switch',switchs, component, isStatic, (function(el, id, target, gr, index){\n            let bind = el.dataset.switch, map='def';\n            if (bind.includes('.')){\n                const _sp1 = el.dataset.switch.split('.');\n                bind = _sp1[0];\n                map = _sp1[1];\n            };\n            el.dataset.switch = id;\n            let cases = el.querySelectorAll('[data-case]');\n            let casesId = [];\n            for (let c = 0; c < cases.length; c++){\n                let _case = cases[c];\n                let closest = _case.closest(`[data-switch=${id}]`);\n                _case.classList.add('cake-template');\n                if (closest){\n                    let caseBind = _case.dataset.case;\n                    let _id = `cksc${this.uiid}`\n                    _case.dataset.case = `${id}-${_id}`;\n                    casesId.push({_id, bind:caseBind});\n                    this.uiid++;\n                };\n            };\n            this._register(component, 'switch', {bind, sel:id, map, cases:casesId});\n            this.uiid++;\n        }).bind(this));\n        res()\n    });\n};\n\nAttrib.prototype._compileBind = function(elModels, component, isStatic){\n    return new Promise((res)=>{\n        this._loopElements('bind',elModels, component, isStatic, (function(el, id, target, gr, index){\n            for (let g = 0; g < gr.length; g++){\n                let val = gr[g].split(\" \").join(\"\");\n                if (val.includes(':')){\n                    const _sp1 = val.split(\":\");\n                    var attr = _sp1[0];\n                    var bind = _sp1[1];\n                } else {\n                    var bind = val;\n                    var attr = el.value == undefined?'textContent':'value';\n                };\n                this._register(component, 'bind', {attr, bind, sel:id});\n            }\n            this.uiid++;\n            el.dataset.bind = id;\n        }).bind(this));\n        res();\n    });\n};\n\nAttrib.prototype._compileAnimate = function(anims, component, isStatic){\n    return new Promise((res)=>{\n        this._loopElements('animate',anims, component, isStatic,(function(el, id, target, gr, index){\n            let o = {};\n            for (let a = 0; a < gr.length; a++){\n                let item = gr[a];\n                let _sp1 = item.split(':');\n                let ctx = _sp1[0];\n                let anims = _sp1[1];\n                if (ctx == 'ns'){\n                    o.ns = anims;\n                    break;\n                } else {\n                    o[ctx] = {keyframes:anims.split('-')};\n                };\n            };\n            o.selector = {attr:'data-animate', val:id};\n            this._register(component, 'animate', o);\n            this.uiid++;\n            el.dataset.animate = id;\n        }).bind(this));\n        res();\n    });\n};\n\n\nAttrib.prototype._compileIf = function(ifs, component, isStatic){\n    return new Promise((res)=>{\n        const regex = new RegExp('<|>|===|==|!==|!=');\n        this._loopElements('if,ifBind',ifs, component, isStatic,(function(el, id, target, gr, index){\n            let _if = target['if'];\n            let _ifBind = target['ifBind'];\n            let _gr = gr['if'];\n            \n            for (let g = 0; g < _gr.length; g++){\n                let val = gr[g];\n                let attr = val.substring(0,val.indexOf('='));\n                let exp = val.substring(val.indexOf('=')+1, val.length);\n                exp = exp.split(new RegExp('[()]')).join(\"\");\n                let _sp2 = exp.split('?');\n                let test = _sp2[0];\n                let r = _sp2[1];\n\n                let hasNegate = test[0] == '!';\n                hasRegularLog = test.match(regex);\n\n                let bind, testVal, ops;\n                if(hasRegularLog){\n                    let splitted = test.split(regex);\n                    bind = splitted[0].trim();\n                    testVal = splitted[1].trim();\n                    ops = hasRegularLog[0];\n                } else {\n                    bind = test;\n                };\n\n                if(hasNegate){\n                    bind = bind.slice(1);\n                };\n                \n                let _sp1 = r.split(':');\n                let _true = _sp1[0];\n                let _false = _sp1[1];\n                this._register(component, 'if', {hasNegate, attr, ops, bind, testval:testVal || null, _true, _false, sel:id, ifBind:_ifBind});\n            }\n            this.uiid++;\n            el.dataset.if = id;\n\n        }).bind(this));\n\n\n        // if (!ifs.length) {res();return;};\n        // let els = this._static(component)(ifs, isStatic);\n        // if (!els.length){res();return;}\n        // const regex = new RegExp('<|>|===|==|!==|!=');\n        // for (let s = 0; s < els.length; s++){\n        //     let id = `ci${this.uiid}`;\n        //     let el = els[s];\n        //     let _if = el.dataset.if;\n        //     let _ifBind = el.dataset.ifBind;\n        //     let gr = _if.split(',');\n        //     for (let g = 0; g < gr.length; g++){\n        //         let val = gr[g];\n\n        //         let attr = val.substring(0,val.indexOf('='));\n        //         let exp = val.substring(val.indexOf('=')+1, val.length);\n\n\n        //         exp = exp.split(new RegExp('[()]')).join(\"\");\n                \n        //         // let [test, r] = exp.split('?');\n\n        //         let _sp2 = exp.split('?');\n        //         let test = _sp2[0];\n        //         let r = _sp2[1];\n\n\n        //         let hasNegate = test[0] == '!';\n        //         hasRegularLog = test.match(regex);\n\n        //         let bind, testVal, ops;\n        //         if(hasRegularLog){\n        //             let splitted = test.split(regex);\n        //             bind = splitted[0].trim();\n        //             testVal = splitted[1].trim();\n        //             ops = hasRegularLog[0];\n        //         } else {\n        //             bind = test;\n        //         };\n\n        //         if(hasNegate){\n        //             bind = bind.slice(1);\n        //         };\n                \n        //         let _sp1 = r.split(':');\n        //         let _true = _sp1[0];\n        //         let _false = _sp1[1];\n        //         // let [_true, _false] = r.split(':');\n\n\n        //         this._register(component, 'if', {hasNegate, attr, ops, bind, testval:testVal || null, _true, _false, sel:id, ifBind:_ifBind});\n\n                \n        //     }\n        //     this.uiid++;\n        //     el.dataset.if = id;\n        // };\n        res();\n    });\n};\n\nAttrib.prototype._compileClass = function(cls, component, isStatic){\n    return new Promise((res)=>{\n        let regex = new RegExp('<|>|===|==|!==|!=');\n        this._loopElements('class',cls, component, isStatic, (function(el, id, target, gr, index){\n            let hasRegularLog, hasNegate, bindVal, ops, testVal, hasNegateCount;\n            let cls = gr;\n            for (let c = 0; c < cls.length; c++){\n                let clItem = cls[c];\n                let _sp1 = clItem.split('&&');\n                // let [test, className] = clItem.split('&&');\n                let test = _sp1[0];\n                let className = _sp1[1];\n\n                test = test.trim();\n                className = className.trim();\n    \n                \n    \n                hasRegularLog = test.match(regex);\n    \n    \n                if(test.substring(0,2).includes('!')){\n                    hasNegate = true;\n                    hasNegateCount = (test.substring(0,2) == '!!')?2:(test.substring(0,1)=='!')?1:0;\n                } else {\n                    hasNegate = false;\n                    hasNegateCount = 0;\n                };\n    \n                \n                if(hasRegularLog){\n                    let splitted = test.split(regex);\n                \n                    bindVal = splitted[0].trim();\n                    testVal = splitted[1].trim();\n                    ops = hasRegularLog[0].trim();\n                } else {\n                    \n                    !hasNegate && (bindVal = test);\n                    if(hasNegate){\n                        bindVal = test.substring(hasNegateCount);\n                        testVal = hasNegateCount == 2;\n                    };\n                };\n    \n                \n                // if(component == 'header1'){\n                //     console.log(1534, bindVal, test, testVal, hasNegateCount);\n                // }\n    \n                this._register(component, 'class', {hasNegate, bind:bindVal, testVal,className, ops, sel:id});\n            }\n\n\n\n            this.uiid++;\n            el.dataset.class = id;\n        }).bind(this));\n\n        res();\n    });\n};\n\nAttrib.prototype._compileAttr = function(attrs, component, isStatic){\n    return new Promise((res)=>{\n        let regex = new RegExp('<|>|===|==|!==|!=');\n        this._loopElements('attr',attrs, component, isStatic, (function(el, id, target, gr, index){\n            let hasRegularLog, hasNegate, bindVal, ops, testVal;\n            let _sp2 = target.split('&&');\n            let test = _sp2[0];\n            let attrPair = _sp2[1];\n            attrPair = attrPair.trim();\n        \n            let _sp1 = attrPair.split('=');\n            let attrkey = _sp1[0];\n            let attrvalue = _sp1[1];\n\n            test = test.trim();\n            \n            hasRegularLog = test.match(regex);\n            hasNegate = test[0] == '!';\n            if(hasRegularLog){\n                let splitted = test.split(regex);\n            \n                bind = splitted[0];\n                testVal = splitted[1];\n                ops = hasRegularLog[0];\n            } else {\n                bind = test;\n            };\n\n            if(hasNegate){\n                hasNegate && (bind = bind.slice(1));\n            };\n\n            this._register(component, 'attr', {hasNegate, bind, testVal,attrkey, attrvalue, ops, sel:id});\n            this.uiid++;\n            el.dataset.attr = id;\n        }).bind(this));\n\n        res();\n    });\n};\n\nAttrib.prototype._compileModel = function(elModels, component, isStatic){\n    return new Promise((res)=>{\n\n        this._loopElements('model',elModels, component, isStatic, (function(el, id, target, gr, index){\n            let nodeType = el.tagName;\n\n            for (let g = 0; g < gr.length; g++){\n                let val = gr[g].split(\" \").join(\"\");\n                if (val.includes(':')){\n                    // var [attr, bind] = val.split(\":\");\n                    var splitted = val.split(':');\n                    var attr = splitted[0];\n                    var bind = splitted[1];\n\n                } else {\n                    var bind = val;\n                    var attr = 'value';\n                };\n                this._register(component, 'model', {attr, bind, sel:id,nodeType});\n            };\n            this.uiid++;\n            el.dataset.model = id;\n        }).bind(this));\n\n        res();\n    });\n}\n\nAttrib.prototype.inject = function(el, component, isStatic=false){\n    return new Promise((res)=>{\n        let query = el.getElementsByDataset('bind', 'for', 'for-update', 'switch', 'toggle', 'event', 'animate','if','class','attr');\n        res(query);\n    }).then((query)=>{\n        let r = [];\n        let map = {\n            'bind':this._compileBind,//logical\n            'switch':this._compileSwitch,//logical\n            'toggle':this._compileToggle,//logical\n            'if':this._compileIf,//logical\n            'class':this._compileClass,//logical\n            'attr':this._compileAttr,//logical\n            'for':this._compileFor,\n            'for-update':this._compileForUpdate,\n            'event':this._compileEvents,\n            'animate':this._compileAnimate,\n            // 'model':this._compileModel,\n\n            // 'model':\"\",\n            // 'validator':\"\",\n        };\n\n        for (let q in query){\n            if (query.hasOwnProperty(q)){\n                if (query[q].length){\n                    r.push(map[q].apply(this, [query[q], component, isStatic, el]));\n                };\n            };\n        };\n        \n        // console.timeEnd(component);\n        \n        return Promise.all(r.length?r:[r]);\n    }).then(()=>{\n        \n        // return this.store.createOrUpdate(component, this.st[component]);\n        return Promise.resolve();\n    });\n    \n};\n\n\nmodule.exports = Attrib;","const Attrib = require('./attributes');\nconst Scope = require('./scope')();\nconst Component = require('./component');\n// const Hasher = require('./hash');\nconst Router = require('./router');\nconst Persistent = require('./persist');\nconst StorageKit = require('./storage')();\nconst Observer = require('./observer');\nconst Formy = require('./form');\nconst Utils = require('./utils');\nconst Templating = require('./templating');\nconst Plugin = require('./plugin');\nconst Subscriber = require('./storage/subscriber');\nconst Handler = require('./storage/handler');\nconst ComponentStorage = require('./storage/components-store');\n\n\nfunction Cake(name){\n    this.componentName = name;\n    this.components = {};\n};\n\nCake.app = function (config){\n    this.name = config.name || \"\";\n};\n\nCake.Components = function(name){\n    return {\n        subscribe(cb, ctx){\n            function subscribeExternal(){\n                let component = Cake.Components[name];\n                \n                if (component){\n                    if (cb instanceof Function){\n                        let name = cb.name;\n                        if (ctx){\n                            cb = cb.bind(ctx)\n                        }\n                        cb.binded = 'external';\n                        cb.original = name;\n                        cb.listenTo = component.name;\n                        component.Subscribe(cb);\n                    }\n                } else {\n                };\n            };\n            return new Promise((res, rej)=>{\n\n                let lk = setInterval(()=>{\n                    if (Cake.Components[name]){\n                        \n                        subscribeExternal();\n                        clearInterval(lk);\n                        res();\n                    };\n                });\n            })\n        },\n    };\n};\n\nCake.Models = {};\n\nCake.plugin = Plugin;\n\nCake.Attributes = new Attrib();\n\nCake.Models.$loaded = function(name){\n    return new Promise((res, rej)=>{\n        let mk = setInterval(()=>{\n            if (Cake.Models[name]){\n                clearInterval(mk);\n                res(Cake.Models[name]);\n            };\n        });\n        setTimeout(()=>{\n            if(!Cake.Models[name]){\n                clearInterval(mk);\n                rej(name);\n            }\n        }, 10000);\n    })\n};\n\nCake.MainMessageChannel = (function(){\n    let channel = new MessageChannel();\n    return {\n        send(data){\n            // console.log(data);\n            channel.port2.postMessage(data);\n        },\n        receive(fn){\n            channel.port1.onmessage = function(payload){\n                // let {isTrusted, data} = payload || {isTrusted:false};\n                let data = payload.data;\n                let isTrusted = payload.isTrusted == undefined?false:payload.isTrusted;\n\n\n                if (isTrusted){\n                    fn({status:1, data});\n                } else {\n                    fn({status:0, err:'not trusted!'});\n                };\n            };\n        },\n    };\n})();\n\nCake.Utils = {\n    scopeTrap(k){\n        return false;\n    },\n    scopeNotifier(m){\n        return m;\n    },\n};\n\nCake.create = function(name, template, options){\n    let group = new Cake(name, template, options);\n    // console.log(group);\n    group.create(name, template, options);\n};\n\n\nCake.init = function(name){\n    return new Component(name);\n};\n\n\n\n// Cake.Hasher = new Hasher(Cake.Components); \n// Cake.Hasher.listen();\n\n\nCake.Router = Router(Cake.Models, Component);\n\n\n\n\n\nCake.Persistent = new Persistent;\n\nCake.Persistent.listen(Cake.Components);\n\nCake.Cache = new StorageKit({\n    name:'cache',\n    storage:'session',\n    child:'object',\n});\n\nCake.getSubscriber = function(component, handler){\n    // let subscribe = Cake.Subscribe;\n    let subscribe = Subscriber;\n    let obj = {};\n    for (let c in subscribe){\n        if (subscribe.hasOwnProperty(c)){\n            let handlers = subscribe[c];\n            // console.log(handlers);\n            for (let h in handlers){\n                if (handlers.hasOwnProperty(h)){\n                    let hs = handlers[h];\n                \n                    for (let h of hs){\n                        let _handler = h;\n                        let original = _handler.original;\n                        let binded = _handler.binded;\n                        let listenTo = _handler.listenTo;\n\n                        if (listenTo == component){\n                            // console.log(original, handler, original==handler);\n                            if (original == handler){\n                                if (!obj[binded]){\n                                    obj[binded] = handler;\n                                } else {\n                                    let v = obj[binded] instanceof Array?obj[binded]:[obj[binded]];\n                                    obj[binded] = v.concat(handler);\n                                };\n                            } else if(!handler) {\n                                // console.log(h);\n                                if (!obj[binded]){\n                                    obj[binded] = original;\n                                } else {\n                                    let v = obj[binded] instanceof Array?obj[binded]:[obj[binded]];\n                                    obj[binded] = v.concat(original);\n                                };\n                            }\n                        };\n\n                    };\n                };\n            };\n        }\n    };\n    return obj;\n};\n\nCake.Observer = new Observer();\n\nCake.prototype._defineProperty = function(component, prop, get, set){\n    Object.defineProperty(component, prop, {\n        configurable:true,\n        get(){\n            return get();\n        },\n        set(value){\n            if (set){\n                set(value);\n            } else {\n                // throw new Error(`unable to set property in (${prop})`);\n            }\n        },\n    });\n};\n\nCake.prototype._defineProperty(Component.prototype, '$observer', function(){\n    return Cake.Observer;\n});\n\n//global scope\nCake._globalScope = new Scope('globalScope');\nCake.prototype._defineProperty(Component.prototype, '$globalScope', function(){\n    const scope = Cake._globalScope;\n    return scope;\n});\nCake._universalScope = new Scope('universalScope');\n\nCake.$universalScope = (function(){\n    const scope = Cake._universalScope;\n    return scope;\n});\n\n//attributes\nCake.prototype._defineProperty(Component.prototype, '$attrib', function(){\n    return Cake.Attributes;\n});\n//persistent ui using sessionStorage\nCake.prototype._defineProperty(Component.prototype, '$persist', function(){\n    return Cake.Persistent;\n});\n//caching data;\nCake.prototype._defineProperty(Component.prototype, '$cache', function(){\n    return Cake.Cache;\n});\n//hash\nCake.prototype._defineProperty(Component.prototype, '$hash', function(){\n    return Cake.Hasher;\n});\n\nCake.prototype.create = function(name, template, options){\n    // console.time(name);\n    //observer\n    // console.time(name);\n    let component = new Component(name, template, options);\n    //after it has been pass to Cakem t ws assumed that the fn are binded to component holder;\n    const scope = new Scope(name);\n    component.scope && (()=>{\n    \n        for (let _component in component.scope){\n\n\n            if(component.scope.hasOwnProperty(_component)){\n                const handlers = component.scope[_component];\n                for(let key in handlers){\n                    if(handlers.hasOwnProperty(key)){\n                        let handler = handlers[key];\n                        const bind = handler.name;\n                        handler = handler.bind(component);\n                        scope.hook(_component, bind, handler);\n                    };\n                };\n            };\n        };\n    })();\n\n    //register a notifier;\n    scope.registerNotifier(function(prop, newValue, prevValue, component){\n        return Cake.Attributes.notifier(prop, newValue, prevValue, component);\n    });\n\n    Cake.Attributes.registerNotifier(name, function(name, obj){\n        return scope.notifier(name, obj);\n    });\n\n\n    component.compile.then(()=>{\n        // let { subscribe, root, html, handlers, role, state} = component;\n\n        let subscribe = component.subscribe;\n        let root = component.root;\n        let html = component.html;\n        let handlers = component.handlers;\n        let role = component.role;\n        let state = component.state;\n\n\n\n        // console.log(role == 'form');\n\n        // console.log(284, component.name, subscribe);\n        // return Cake.Observer.registerSubscribe(subscribe).then(()=>{\n        //     return {root, handlers}\n        // });\n        return Subscriber.set(subscribe).then(()=>{\n            return {root, handlers};\n        });\n\n        //subscribe and handlers are binded to its componnt\n        \n    }).then((_obj)=>{\n        // const {handlers,root}\n        const handlers = _obj.handlers;\n        const root = _obj.root;\n        // Cake.Observer.registerHandlers(handlers, component.name);\n\n \n        Handler.set(handlers, component.name);\n\n\n        this._defineProperty(component, 'root', function(){\n            // console.log(281,component);\n            if (component._root){\n                return component._root;\n            }else {\n                let selector = root || '#app';\n                let query = document.querySelectorAll(selector);\n                if (query){\n                    return query;\n                }\n            };\n            throw new Error(`the selector '${root}' as container of component '${component.name}' is not found!`);\n        },function(value){\n            Object.assign(component, {_root:value})\n        });\n\n        //scope\n        this._defineProperty(component, '$scope', function(){\n            return scope;\n        });\n\n\n        component.role == 'form' && (()=>{\n            // console.log(component;\n            const methods = Formy(component);\n\n            // let has = !!component.root.querySelector('FORM');\n            const form = ()=>{\n                if(component.root.length){\n                    let root = component.root[0];\n\n                    let sel = `${(component.formSelector || 'FORM')}:not(.cake-template)`;\n                    return root.querySelector(sel);\n                };\n                return null;\n            };\n\n            for (let method in methods){\n                if(methods.hasOwnProperty(method)){\n                    Object.defineProperty(form, method, {\n                        get(){\n                            return methods[method];\n                        }\n                    })\n                };\n            };\n\n            // console.log(this._defineProperty);\n            this._defineProperty(component, '$form', function(){\n                return form;\n            });\n\n        })();\n\n    }).then(()=>{\n        component.fire = (function(){\n            function fire(name, variable){\n                /**\n                 * the static fn of fire are those declared in handlers;\n                 * fire is also a function that accepts handler fn, that is not declared in handlers;\n                 * these are commonly refers to quick functions;\n                 * the usage of fire is to manually run the notify, it tells notify what handler has been fired;\n                 * so that the notify will make a variable from it, to be feed to subscriber to that;\n                 */\n\n\n\n                variable = !variable?null:typeof variable == 'function'?variable.bind(component)():(function(){return variable}).bind(component)();\n\n                let o = {\n                    [name]:()=>{\n                        return variable;\n                    }\n                };\n                fn = o[name].bind(component);\n                if (typeof fn == 'function'){\n                    fn.name = name;\n                    fn.original = name;\n                    fn.binded = component.name;\n\n                    Handler.set({[name]: fn}, component.name);\n\n                    // const awaitNotify = Cake.Observer.notify(component.name, name, {});\n                    // component.await[name] = awaitNotify;\n                    // return awaitNotify;\n\n                    let payload = variable;\n                    // console.log(payload);\n\n                    function getAttributes(element){\n                        let o = {};\n                        if (!element){\n                            return o;\n                        };\n                        let attributes = element.attributes;\n                        if (attributes){\n                            for (let i = 0; i < attributes.length; i++){\n                                let attribute = attributes[i];\n                                let name = attribute.name;\n                                let value = attribute.value;\n                                o[name] = value;\n                            };\n                        };\n                        return o;\n                    };\n\n\n                    if (variable && (variable.element || variable.root || variable.container)){\n                        const element = getAttributes(variable.element);\n                        const root = getAttributes(variable.root);\n                        const container = getAttributes(variable.container);\n                        payload = {status:0, attributes:{element, root, container}};\n                    };\n\n                    // console.log(392, {component:component.name, event:name, payload});\n\n                    // Cake.MainMessageChannel.send({component:component.name, event:name, payload});\n\n                    const notify = Cake.Observer.notify(component.name, name, {}).then(()=>{\n                        return Cake.Observer.results[component.name][name];\n                    });\n                    component.await[name] = notify;\n\n                    return component.await[name];\n                };\n                console.error(`the param in fire is not an instance of function`);\n            };\n            \n            function addStaticMethod(fire, handlers){\n                for (let h in handlers){\n                    if (handlers.hasOwnProperty(h)){\n                        let handler = handlers[h];\n\n                        let event = handler.original;\n                        let fn = {\n                            [event]:function (variable, isBroadcast){\n                                //automatic broadcast if the event is destroy;\n                                if (isBroadcast != undefined){\n                                    isBroadcast = isBroadcast;\n                                };\n\n\n                                if (isBroadcast == undefined && event == 'destroy'){\n                                    //force to broadcast is destroy event;\n                                    isBroadcast = true;\n                                };\n\n                                if (isBroadcast == undefined){\n                                    isBroadcast = false;\n                                };\n\n                                // console.log(461, component.name, event, isBroadcast);\n\n                                if (isBroadcast){\n                                    /**\n                                     * async\n                                     */\n                                    component.await[event] = new Promise((res)=>{\n                                        //without setTimeout, there will be a problem;\n                                        //i think setTimeout, helps the promise to call resolve;\n                                        //as it commands the promise to resolve on the next clock tick;\n                                        setTimeout(()=>{\n                                            let payload = variable || {};\n\n                                            Cake.Observer.notify(component.name, event, payload).then(()=>{\n                                                return Cake.Observer.results[component.name][event];\n                                            }).then(r=>{\n                                                res(r);\n                                            }).catch(err=>{\n                                                console.log(448, component.name, event, payload);\n                                                console.trace();\n                                                console.error(err);\n                                            });\n                                            \n                                        });\n                                    });\n                                    return component.await[event];\n                                } else {\n                                    return handler(variable);\n                                };\n                            }\n                        };\n                        // console.log(412, event, fn);\n                        fn[event] = fn[event].bind(component);\n                        fn[event].originalName = event;\n                        fn[event].binded = component.name;\n\n                        fire[event] = fn[event];\n                        fire.component = component.name;\n                    };\n                };\n            }\n            addStaticMethod(fire, component.handlers);\n\n            return fire;\n        })()\n    }).then(()=>{\n\n        if (component.type == 'view'){\n            component.toggler = component.toggler(component);\n            // Cake.Components[name] = component;\n            ComponentStorage.set(name, component);\n        };\n    }).then(()=>{\n        //update the binding of data, trigger, and utils option of component;\n        component.options.router && Cake.Router.subscribe(component.options.router.bind(component));\n        component.options.data && component.options.data.bind(component.data)(component);\n        component.options.init && component.options.init.bind(component)();\n        component.options.utils && component.options.utils.bind(component.utils)(component);\n\n    }).then(()=>{\n\n        if (component.type == 'model'){\n            Cake.Models[name] = component;\n        }\n        if (component.isStatic && component.type == 'view'){\n            component.render();\n        } else {\n            \n        };\n    });\n};\n\n\n\n\n\nmodule.exports = Cake;","module.exports = class {\n    constructor(config=[],html){\n        this.html = html || document;\n        this.cf = config;\n        this.duration = 300;\n    }\n    animate(moment){\n        this.config = this.parse(this.cf);\n\n        let element = this.config[0].element;\n        let config = this.config[0][moment];\n\n        if(!config){\n            return Promise.resolve();\n        };\n\n        // console.log(16, element);\n\n\n        return new Promise((res, rej)=>{\n            element.velocity(config.velocity,{\n                complete:function(){\n                    res();\n                }\n            })\n        })\n    }\n    // animate(moment){\n    //     this.config = this.parse(this.cf);\n\n    //     return new Promise((res)=>{\n    //         for (let i = 0; i < this.config.length; i++){\n    //             let cf = this.config[i];\n    //             // console.log(cf)\n\n    //             let element = cf.element;\n    //             //when there is no config for certain moment, render || remove\n    //             //safekeep\n    //             if (!cf[moment]){ res();break;};\n    //             let config = cf[moment];\n    //             if (!config.options && !(config.options && config.options.duration)){\n    //                 config.options = {duration : this.duration};\n    //             };\n    //             if (!config.keyframes && !element){continue;}\n\n    //             let keyframes = config.keyframes;\n    //             let index = 0;\n    //             let fr = [];\n    //             for (let k = 0; k < keyframes.length; k++){\n    //                 let kk = keyframes[k];\n    //                 switch(true){\n    //                     case typeof kk == 'string':{\n    //                         fr.push(this.dic(kk));\n    //                     } break;\n    //                     case (kk instanceof Object):{\n    //                         //maybe the offset is declared along with the keyframes;\n    //                         //name - refers to default animation\n    //                         // let {name, offset} = kk;\n    //                         let name = kk.name;\n    //                         let offset = kk.offset;\n    //                         if (name && offset){\n    //                             //support for element.animation - offset, equivalent to 10%-100% css @keyframes;\n    //                             let def = this.dic(name);\n    //                             def[def.length-1].offset = offset;\n    //                             fr.push(def);\n    //                         } else {\n    //                             fr.push(kk)\n    //                         }\n    //                     }\n    //                 };\n    //             }\n    //             keyframes = fr;\n    //             fr = null;\n    //             //to series calls of animation, one after the another;\n    //             // console.log(element, keyframes, config);\n    //             let recurseCall= ()=>{\n    //                 let kf = keyframes[index];\n    //                 let animate = element.animate(kf, (config.options || this.duration));\n    //                 // console.log(animate);\n    //                 if(animate.finished){\n    //                     animate.finished.then(()=>{\n    //                         if (index < keyframes.length -1){\n    //                             index += 1;\n    //                             recurseCall()\n    //                         } else {\n    //                             keyframes = [];\n    //                             // console.log(index, keyframes.length)\n    //                             res();\n    //                         }\n    //                     });\n    //                 } else {\n    //                     animate.onfinish =()=>{\n    //                         if (index < keyframes.length -1){\n    //                             index += 1;\n    //                             recurseCall()\n    //                         } else {\n    //                             keyframes = [];\n    //                             // console.log(index, keyframes.length)\n    //                             res();\n    //                         }\n    //                     };\n    //                 };\n\n\n    //             }; recurseCall();\n    //         };\n    //     });\n    // }\n    parse(config){\n        let configs = [], length = config.length, i = -1;\n        // console.log(config);\n        while(++i < length){\n            let cf = config[i];\n            let selector = cf.selector, el;\n            \n            switch(true){\n                case !!(selector.val && selector.attr):{\n                    el = this.html.querySelectorIncluded(`[${selector.attr}=${selector.val}]`, selector.attr, selector.val);\n                } break;\n                case !!(selector.val && !selector.attr):{\n                    let attr = selector.val.match(new RegExp(`^[.]`))?'class':\n                    selector.val.match(new RegExp(`^[#]`))?'id':null;\n                    let val = (attr)?selector.val.slice(1):null;\n                    el = this.html.querySelectorIncluded(selector.val, attr, val);\n                } break;\n            };\n            cf.element = el;\n            configs.push(cf);\n        };\n        // console.log(configs);\n        return configs;\n    }\n    dic(name){\n        let coll = {\n            slideOutUp:[{\n                transform: \"translate3d(0,0,0)\",\n                visibility: \"visible\",\n                opacity: \"1\",\n                easing: 'ease-out',\n            },{\n                transform: \"translate3d(0,100%,0)\",\n                visibility: \"hidden\",\n                opacity: \"0\",\n                easing: 'ease-out',\n            }],\n            slideOutRight:[{\n                transform: \"translate3d(0,0,0)\",\n                visibility: \"visible\",\n                opacity: \"1\"\n            },{\n                transform: \"translate3d(100%,0,0)\",\n                visibility: \"hidden\",\n                opacity: \"0\"\n            }],\n            slideOutLeft:[{\n                transform: \"translate3d(0,0,0)\",\n                visibility: \"visible\",\n                opacity: \"1\"\n            },{\n                transform: \"translate3d(-100%,0,0)\",\n                visibility: \"hidden\",\n                opacity: \"0\"\n            }],\n            slideOutDown:[{\n                transform: \"translate3d(0,0,0)\",\n                visibility: \"visible\",\n                opacity: \"1\",\n                easing: 'ease-out'\n            },{\n                transform: \"translate3d(0,-100%,0)\",\n                visibility: \"hidden\",\n                opacity: \"0\",\n                easing: 'ease-out',\n            }],\n            slideInUp:[\n                {\n                    transform: \"translate3d(0,100%,0)\",\n                    visibility: \"hidden\",\n                    opacity: \"0\",\n                    easing: 'ease-out',\n                },\n                {\n                    transform: \"translate3d(0,0,0)\",\n                    visibility: \"visible\",\n                    opacity: \"1\",\n                    easing: 'ease'\n                },\n            ],\n            slideInRight:[{\n                transform: \"translate3d(100%,0,0)\",\n                visibility: \"hidden\",\n                opacity: \"0\"\n            },{\n                transform: \"translate3d(0,0,0)\",\n                visibility: \"visible\",\n                opacity: \"1\"\n            }],\n            slideInLeft:[{\n                transform: \"translate3d(-100%,0,0)\",\n                visibility: \"hidden\",\n                opacity: \"0\",\n                easing:'ease-out',\n            },{\n                transform: \"translate3d(0,0,0)\",\n                visibility: \"visible\",\n                opacity: \"1\"\n            }],\n            slideInDown:[{\n                transform: \"translate3d(0,-100%,0)\",\n                visibility: \"hidden\",\n                opacity: \"0\",\n                easing: 'ease-out',\n            },{\n                transform: \"translate3d(0,0,0)\",\n                visibility: \"visible\",\n                opacity: \"1\",\n                easing: 'ease-out',\n            }],\n            disappear:[{\n                opacity: \"1\"\n            },{\n                opacity: \"0\"\n            }],\n            appear:[{\n                opacity: \"0\"\n            },{\n                opacity: \"1\"\n            }],\n            flipInX:[\n                ,{offset:0, backfaceVisibility: \"visible\"}\n                ,{transform: \"perspective(400px) rotate3d(1,0,0,90deg)\",opacity: \"0\", offset:0}\n                ,{transform: \"perspective(400px) rotate3d(1,0,0,-20deg)\", offset: 0.4,easing:'ease-in'}\n                ,{offset:0.6,  opacity: \"1\",transform: \"perspective(400px) rotate3d(1,0,0,10deg)\"}\n                ,{transform: \"perspective(400px) rotate3d(1,0,0,-5deg)\", offset:0.8}\n                ,{offset:1, backfaceVisibility: \"visible\",transform: \"perspective(400px) rotate3d(1,0,0,0)\"}\n            ],\n        };\n        return coll[name.trim()] || [];\n    }\n};","const Mo = require('./animate');\nconst Piece = require('./piece');\nconst Utils = require('./utils');\nconst Templating = require('./templating');\nconst Plugin = require('./plugin');\n\n// const {pushState} = require('./router')();\n\nfunction Component(name, template, options){\n    this.name = name;\n    this.template = template;\n    this.options = options;\n    this.handlers = options.handlers;\n    this.subscribe = options.subscribe;\n    this.renderqueue = options.renderqueue;\n    this.data = {};\n    this.root = options.root?`${options.root}:not(.cake-template)`:options.root;\n\n    this.items = false;\n    this.type = options.type || 'view';\n    this.toggle = options.toggle;\n    this.targets = {};\n    this.animateOptions = options.animate;\n    this.role = options.role;\n    this.isReady = false;\n    this.scope = options.scope;\n\n    this.animatecss = this.options.animatecss;\n\n    this.formSelector = options.form;\n\n    this.await = {};//storage of async handlers\n    \n    this.state = options.state;\n    this.originalState = [];\n\n\n    this.utils = Utils;\n\n    this.renderQueing = [];\n\n    if(!this.handlers){\n        console.error(`${this.name} has no handlers`);\n    };\n    if(!this.subscribe){\n        console.error(`${this.name} has no subscribe`);\n    };\n\n\n\n    // options.data && options.data.bind(this.data)(this);\n    ((name == 'app') || (options.role == 'app')) && (()=>{ this.staticComponent = options.static || [];})();\n    // options.trigger && options.trigger.bind(this)();\n    // options.utils && options.utils.bind(this.utils)(this);\n\n    this.container = {};\n\n\n    this.compile = new Promise((res)=>{\n\n        this._bindHandlers();\n        res();\n    }).then(()=>{\n\n        return this._bindSubscribe();\n    }).then(()=>{\n        return this.cloneState();\n    }).then(()=>{\n        switch(this.type == 'view' && !!this.template){\n            case true:\n                return this.createElementAsync();\n            default:\n                this.isStatic = false;\n                break\n        };\n    });\n\n};\n\nComponent.prototype.isStatic = false;\nComponent.prototype.hasEvent = false;\nComponent.prototype.isConnected = false;\nComponent.prototype.destroyed = false;\nComponent.prototype.isCreated = false;\n\n\n\nComponent.prototype.cloneState = function(){\n    if(!this.state){\n        return;\n    };\n    for (let key in this.state){\n        if(this.state.hasOwnProperty(key)){\n            this.originalState[key] = this.state[key];\n        };\n    };\n    this.$state = (()=>{\n        return this.state;\n    })();\n\n};\n\n\n\nComponent.prototype.clearState = function(){\n    if(!this.state){\n        return;\n    };\n    this.state = JSON.parse(JSON.stringify(this.originalState));\n\n    this.$state = (()=>{\n        return this.state;\n    })();\n};\n\nComponent.prototype.Subscribe = function(handler){\n    this.$observer.registerSubscribe({\n        [handler.listenTo]:{\n            [handler.original]:[handler],\n        }\n    })\n};\n\nComponent.prototype.Node = function(el){\n    const piece = new Piece(el);;\n    return piece;\n};\n\nComponent.prototype._bindHandlers = function(){\n    for (let key in this.handlers){\n        if (this.handlers.hasOwnProperty(key)){\n            let fn = this.handlers[key];\n            let originalName = fn.name;\n            fn = fn.bind(this);\n            fn.original = originalName;\n            fn.binded = this.name;\n            this.handlers[originalName] = fn;\n    \n            this.initAwaitHandlers(key);\n        };\n    };\n    if (!this.await.destroy){\n        this.await.destroy = Promise.resolve();\n    }\n    if (!this.await.animateRemove){\n        this.await.animateRemove = Promise.resolve();\n    }\n};\n\nComponent.prototype.initAwaitHandlers = function(handlerName){\n    //initializing awaits for handlers;\n    this.await[handlerName] = Promise.resolve();\n};\n\nComponent.prototype._bindSubscribe = function(){\n    //binding the subscribe to component;\n    let flattened = {};\n    for (let component in this.subscribe){\n        if (this.subscribe.hasOwnProperty(component)){\n            subscribe = this.subscribe[component];\n\n            if(!!subscribe.components && !subscribe.handler){\n                throw new Error(`there is no handler in format many of subscribe in event ${component}`);\n            } else if (!subscribe.components && !!subscribe.handler){\n                throw new Error(`there is no components in format many of subscribe in event ${component}`);\n            };\n\n            let isMany = !!subscribe.components && !!subscribe.handler;\n            \n            if (isMany){\n    \n                /**\n                 * multiple components triggering the same event;\n                 * this component is listening to that one event;\n                    event :{\n                        components:[],\n                        handler(){},\n                    }\n                 */\n                let event = component;\n                // let {components, handler} = subscribe;\n\n                let components = subscribe.components;\n                let handler = subscribe.handler;\n\n                handler =  handler.bind(this);\n                handler.binded = this.name;\n                handler.original = event;\n                for (let c = 0; c < components.length; c++){\n                    let component = components[c];\n      \n                    if (!flattened[component]){\n                        flattened[component] = {};\n                    };\n                    if (!flattened[component][event]){\n                        // flattened[component][event] = [];\n                        flattened[component][event] = {};\n                    }\n                    handler.listenTo = component;\n                    // flattened[component][event].push(handler);\n                    flattened[component][event] = handler;\n                };\n    \n            } else {\n                \n                if (!flattened[component]){\n                    flattened[component] = {};\n                };\n                /**\n                single event is triggerd by a component;\n                    component:{\n                        event:{\n                            handler(){},\n                        }\n                    }\n                 */\n                 let fns = subscribe;//object\n       \n                 for (let fn in fns){\n                    if (fns.hasOwnProperty(fn)){\n                        let handler = fns[fn];\n                        let original = handler.name;\n\n                        // console.log(component, handler);\n                        try{\n                            handler = handler.bind(this);\n                        } catch(err){}\n                        handler.original = original;\n                        handler.binded = this.name;\n                        handler.listenTo = component;\n       \n                        if (!flattened[component][original]){\n                           flattened[component][original] = {};\n                        //    flattened[component][original] = [];\n                        };\n                        \n                        // flattened[component][original].push(handler);\n                        flattened[component][original] = handler;\n                    };\n    \n                 };\n            };\n        };\n    };\n    this.subscribe = flattened;\n};\n\nComponent.prototype.getHTML = function(){\n    return this.html;\n}\n\nComponent.prototype.doFor = function(prop, newValue){\n\n    if (newValue == null) return;\n    return this.$attrib.notifyFor(prop, newValue, null, this.name, this.getHTML());\n};\n\nComponent.prototype.doToggle = function(prop, newValue){\n    this.$attrib.notifyToggle(prop, newValue, null, this.name, this.html);\n};\nComponent.prototype.doSwitch = function(prop, newValue){\n    this.$attrib.notifySwitch(prop, newValue, null, this.name, this.html);\n};\nComponent.prototype.doIf = function(prop, newValue){\n    this.$attrib.notifyIf(prop, newValue, null, this.name, this.html);\n};\nComponent.prototype.$animate = function(moment){\n    //normalize the two sourse, attr, and component declaration;\n    let ata = this.$attrib.getWatchItemsByType(this.name, 'animate');\n    let da = this.animateOptions;\n    let arr = [];\n    \n    ;(()=>{\n        if ((!ata.length && !(ata instanceof Array)) || !da){return;}\n        for (let a = 0; a < ata.length; a++){\n            let at = ata[a];\n            // let {ns:name, selector} = at;\n\n            let name = at.ns;\n            let selector = at.selector;\n\n            //declare name space in html, mapped to component animation declaration\n            if (at.ns){\n                if (da[name]){\n                    let ns = da[name];\n                    Object.assign(at, da[name]);\n                    delete da[name];\n                };\n            } else {\n                //declared animation in html, using animation name;\n                arr.push(ata);\n            };\n        };\n    })();\n    if (!ata.length) {return false}\n    //tweak component declared animation;\n    ;(()=>{\n        let obj = {};\n        let selector = {};\n        for (let key in da){\n            if (da.hasOwnProperty(key)){\n                selector.val = key;\n                obj.selector = selector;\n                Object.assign(obj, da[key]);\n                ata.push(obj);\n                //reset;\n                obj = {};\n                selector = {};\n            };\n        };\n    })();\n\n    // console.log(ata);\n\n    \n    return new Mo(ata, this.html).animate(moment);\n    // return Promise.resolve();\n};\n\nComponent.prototype.$templating = function(data, t, isConvert){\n    let template = t || this.template;\n    return new Templating(Plugin('templating')).createElement(data, template, isConvert);\n};\n\nComponent.prototype.createElement = function(){\n    let isSelector = this.template.substring(0,1) == '#';\n    if (!isSelector) return;\n    let selector =  this.template.substr(1);\n    let query = document.getElementById(selector);\n    let isTemplate = this.isTemplate = query && query.toString().includes('Template');\n\n\n\n    if (!query){\n        throw new Error(`the template for ${this.name} is not found with.`);\n    };\n\n    return new Promise((res)=>{\n        switch(isTemplate){\n            //template html\n            case true:{\n                // console.time(this.name)\n                let element = query.getContent(true);\n                if (!element){\n                    throw new Error(`it might be theres no template in component - ${this.name}`);\n                }\n                element.cake_component = this.name;\n                // console.timeEnd(this.name)\n                this.html = this.Node(element);\n                // console.log(274,this.html);\n                this._parseHTML(this.isStatic).then(()=>{\n                    res();\n                })\n            } break;\n            case null:{\n                res();\n            }\n            break;\n            //static html\n            default:{\n                let element = query;\n                if (!element){\n                    throw new Error(`it might be theres no template in component - ${this.name}`);\n                }\n                element.cake_component = this.name;\n                this.html = this.Node(element);\n                // console.log(290,this.html);\n                this.isStatic = true;\n\n                this._parseHTML(this.isStatic).then(()=>{\n                    res();\n                })\n            };\n        };\n    })\n};\n\nComponent.prototype.createElementAsync = function(){\n\n    return new Promise((res)=>{\n        this.createElement().then(()=>{\n            res();\n        });\n    }).then(()=>{\n        // console.log(`${this.name} is rendered async`)\n        this.isReady = true;\n    });\n    // console.log(`${this.name} is creating async el`)\n};\n\nComponent.prototype._isParsed = false;\n\nComponent.prototype._parseHTML = function(isStatic=false){\n    return this.$attrib.inject(this.html, this.name, isStatic).then(()=>{\n        // console.log(this.html, this.name)\n        this.original = this.html.cloneNode();\n        this._isParsed = true;\n    });\n};\n\nComponent.prototype.renderQue = function(options={}){\n    let hasNoId = options.id == undefined && options.id != null;\n    if(hasNoId){\n        throw new Error(`renderQue method requires an id.`);\n    };\n    let id = options.id;\n    if(id){\n        options.hasqued = true;\n        this.renderQueing.push({date:new Date().toString(), id, options});\n    };\n    return this.render(options);\n};\n\n\n\nComponent.prototype.render = function(options={}){\n    if(options.hasqued){\n        // console.log(`rendering ${this.name} has been queued`);\n    } else {\n        if(this.isConnected){\n            console.error(`${this.name} is already rendered and connected to the DOM`);\n        };\n    };\n\n    if(options.revokeque){\n        //TODO why the this.wait.destroy is hanging when renderQue\n        this.await.destroy = Promise.resolve();\n    };\n\n    \n\n\n    if(this.isConnected){\n\n        return Promise.resolve();\n    };\n\n\n\n\n    // let {root, cleaned, emit={}, data={}} = options || {};\n\n    let root = options.root;\n    let cleaned = options.cleaned;\n    let emit = options.emit || {};\n    let DATA = options.data || {};\n\n    if(typeof root == 'string'){\n        let sel = `${root}:not(.cake-template)`;\n        root = [document.querySelector(sel)];\n    };\n\n\n\n\n\n    let multiple = this.options.multiple;\n    let state = this.state || {};\n\n    let payload = {emit};\n\n\n    this.isConnected = true;\n    return new Promise((res, rej)=>{\n\n        (!!root) && (this.root = root);\n        \n\n        // console.log(423, 'render', !this.isReady);\n        if (!this.isReady){\n  \n            this.createElement().then(()=>{\n                \n                // (hashed === true) && this.$hash.add(this.name);\n\n                return (!this.template) && this.fire.isConnected && this.fire.isConnected(payload, true);\n\n            }).then(()=>{\n                this.isReady = true;\n                res();\n            });\n        } else {\n            res();\n        };\n    }).then(()=>{\n\n        return this.await.destroy.then(()=>{\n\n            return this.await.animateRemove;\n        }).then(()=>{\n            return new Promise((res, rej)=>{\n                //html restructure base on data;\n                //by mutation;\n    \n                // let forItems = this.$attrib.getWatchItemsByType(this.name, 'for');\n                let attrItems = this.$attrib.getWatchItems(this.name);\n                // for (let i = 0; i < forItems.length; i++){\n                //     let nv = getValue(forItems[i]);\n                //     this.doFor(forItems[i], nv);\n                // };\n\n                // this.$attrib.notifier(prop, newValue, null, this.name, this.getHTML());\n\n\n                Promise.all(attrItems.map(item=>{\n                    if(DATA[item]){\n                        return this.$attrib.notifier(item, DATA[item], null, this.name);\n                    }\n                    // console.log(453, item)\n                    // return this.doFor(item, value);\n                })).then(()=>{\n                    // console.log(405, this.name, this.html);\n                    res(this.html);\n\n                });\n\n\n\n            }).then((element)=>{\n                payload = {element, emit};\n\n  \n                \n                return new Promise((res, rej)=>{\n                    try {\n                        this.fire.beforeConnected && this.fire.beforeConnected(payload, true);\n                        res(element);\n                    } catch(err){\n                        rej(err);\n                    };\n                });\n            }).then((element)=>{\n                if (this.isStatic){\n                    //static component, those already attached to DOM;\n                } else {\n                    //replace the mustache here;\n                    let prom = (!DATA)?Promise.resolve():(()=>{\n                        return new Promise((res)=>{\n                            let el = element.getElement();\n                            el = this.$templating(DATA, el);\n                            this.html = element = this.Node(el);\n                            this.html.replaceDataSrc();\n                            \n                            DATA = null;\n                            res();\n                        })\n                    })();\n\n                    \n                    \n\n                    return prom.then(()=>{\n                        return this._animatecss('render');\n                    }).then(()=>{\n                        element.appendTo(this.root, cleaned);\n                        \n                        return true;\n                    });\n                }\n            }).\n            // .then(()=>{\n            //     return this.findRouterLink();\n            // }).\n            then(()=>{\n                //switch\n                // let switchItems = this.$attrib.getWatchItemsByType(this.name, 'switch');\n    \n                // for (let i = 0; i < switchItems.length; i++){\n                //     this.doSwitch(switchItems[i], getValue(switchItems[i]));\n                // };\n            }).then(()=>{\n                \n                return this.findContainer();\n                \n            }).then(()=>{\n                try {\n                    // console.log('setting attributes', this.name);\n\n                    return  this.fire.isConnected && this.fire.isConnected(payload, true);\n                }catch(err){\n                    console.log(440,err);\n                }\n            }).then(()=>{\n                \n                // console.log(532, this.name, this.html);\n                return this.findTarget();\n            }).then(()=>{\n                // console.log(this.container);\n                // console.log('this containers must have el',this.name, this.container);\n                // return this.addEvent(static, multiple);\n                return this.addEvent();\n            }).then(()=>{\n                // console.log('start animation', this.name);\n                return this.$animate('render');\n            }).then(()=>{\n                (multiple) && this._smoothReset();\n                return new Promise((res, rej)=>{\n                    setTimeout(()=>{\n                        this._watchReactive();\n                        res();\n                    },100);\n                });\n            });\n    \n        })\n    })\n};\n\nComponent.prototype._animatecss = function(moment){\n    try {\n        if (!this.animatecss){\n            return Promise.resolve();\n        };\n        let conf = this.animatecss[moment];\n        if(conf){\n            \n            return Promise.all(Object.keys(conf).map(key=>{\n                \n                \n                let value = 'animate__animated,';\n                value += conf[key];\n\n                let els = this.html.querySelectorAllIncluded(null,'data-animatecss',key);\n                if(els){\n                    //clear\n                    return Promise.all(els.map(el=>{\n                        let classList = el.classList;\n                        for (let c = 0; c < classList; c++){\n                            let cl = classList[c];\n                            if(cl.includes('animate_')){\n                                el.classList.remove(cl);\n                            };\n                        };\n\n                        //reapply\n                        value.split(',').forEach(item=>{\n                            el.classList.add(item.trim());\n                        });\n\n                        el.style.setProperty('--animate-duration', '0.3s');\n\n                        return new Promise((res, rej)=>{\n                            setTimeout(()=>{\n                                res();\n                            },500);\n                        });\n\n                    }));\n                } ;\n                return Promise.resolve();\n            }));\n        };\n        return Promise.resolve();\n    } catch(err){\n        console.error(err);\n        return Promise.resolve();\n    };\n};\n\nComponent.prototype.renderAsync = function(options){\n    this.render(options).then(()=>{\n        this.$persist.append(this.name);\n    });\n};\n\nComponent.prototype._smoothReset = function(){\n    this.html = this.original.cloneNode();\n};\n\nComponent.prototype._hardReset = function(name){\n    this.$persist.remove(name);\n    //remove the element first;\n    //clone the element;\n    this.html = this.original.cloneNode();\n    return true;\n};\n\nComponent.prototype.reset = function(options={}){\n    let hasNoId = options.id == undefined && options.id != null;\n    if(hasNoId){\n        throw new Error(`renderQue method requires an id.`);\n    };\n    let id = options.id, conf;\n    if(id){\n        conf = this.renderQueing.filter(item=>{\n            return item.id == id;\n        });\n        this.renderQueing = JSON.parse(JSON.stringify(this.renderQueing)).filter(item=>{\n            return item.id != id;\n        });\n    };\n\n    let animate = this.$animate('remove');\n\n    if (animate instanceof Promise){\n        return this.await.animateRemove = new Promise((res)=>{\n            animate.then(()=>{\n                //it is very important to remove first the component\n                //before hard reset;\n                return this.html.remove();\n            }).then(()=>{\n                this.container = {};\n            }).then(()=>{\n                return this.clearState();\n            }).then(()=>{\n                return this._hardReset(this.name);\n            }).then(()=>{\n                res();\n            }).then(()=>{\n                this.isConnected = false;\n                if(this.renderQueing && this.renderQueing.length){\n                    if(conf){\n                        let options = conf.options;\n                        if(!options){\n                            options = {};\n                        };\n                        options.revokeque = true;\n                        return this.render(options);\n                    };\n                };\n            });\n        });\n    } else {\n        return new Promise((res)=>{\n            this.html.remove(this.name);\n            this.clearState();\n            this.container = {};\n            this._hardReset(this.name);\n            this.isConnected = false;\n            res();\n        }).then(()=>{\n            if(this.renderQueing && this.renderQueing.length){\n                if(conf){\n                    let options = conf.options;\n                    if(!options){\n                        options = {};\n                    };\n                    options.revokeque = true;\n                    return this.render(options);\n                };\n            };\n        });\n    }\n};\n\nComponent.prototype.addEvent = function (static, multiple){\n    // let isStatic = !!static;\n    // let isMultiple = !!multiple;\n    // if (isMultiple && isStatic){\n    //     return false;\n    // };\n    let component = this.name;\n    function notify(event, component,  isPreventDefault, isStopPropagation){\n        return function(e){ \n            // console.log(512,e);\n            // console.log(509,!isPreventDefault, component,event)\n            if (!isPreventDefault){\n                e.preventDefault();\n            };\n            if (isStopPropagation){\n                e.stopPropagation();\n            };\n\n            Cake.Observer.notify(component, event, e);\n        };\n    };\n    // this.name == 'product_list' && console.log(this.targets);\n    // console.log(547,this.name, this.targets);\n    if (!this.targets) return;\n    for (let event in this.targets){\n        if (this.targets.hasOwnProperty(event)){\n            // let cf = JSON.parse(JSON.stringify(this.targets[event]));\n            let cf = this.targets[event];\n            // if(this.name == 'sidebar'){\n            //     console.log(527, cf);\n            // };\n  \n            for (let item of cf){\n                // let {sel, el, cb} = item;\n\n                let sel = item.sel;\n                let el = item.el;\n                let cb = item.cb;\n\n                let _event = event;\n                \n                let place = event.substring(0,2);\n                let isPreventDefault = place.includes('~');//default to true;\n                let isStopPropagation = place.includes('^');//default to false;\n\n                // console.log(542,isPreventDefault);\n\n                if(isPreventDefault || isStopPropagation){\n                    _event = event.slice(1);\n                    cb = cb || _event;\n                } else {\n                    if(!cb){\n                        cb = event;\n                    }\n                };\n\n                if (!el.Ref().get('__cake__events')){\n                    el.Ref().set('__cake__events', {});\n                }; \n                let store = el.Ref().get('__cake__events');\n                \n                if (!store[cb]){\n\n                    el.addEventListener(_event, notify(cb, component, isPreventDefault, isStopPropagation), true);\n                    store[cb] = true;\n                    el.Ref().set('__cake__events', store);\n                } else {continue};\n            };\n        };\n    };\n};\n\nComponent.prototype.findTarget = function(){\n    let q = this.$attrib.getEventTarget(this.name);\n    return new Promise((res)=>{\n        for (let item of q){\n            let els = this.html.querySelectorAllIncluded(`[data-event=${item.sel}]`);\n            for (let e = 0; e < els.length; e++){\n                if (!this.targets[item.event]){\n                    this.targets[item.event] = [];\n                };\n                this.targets[item.event].push({el:els[e], ...item});\n            };\n        };\n        res();\n    });\n}; \n\n// Component.prototype.findRouterLink = function(){\n//     let q = this.$attrib.getRouterTarget(this.name);\n//     let e = JSON.parse(JSON.stringify(q));//deep cloning\n\n//     for (let item of e){\n        \n//         item.el = document.querySelector(`[data-event=${item.sel}]`);\n//         if (!item.el.__router){\n//             // item.el.addEventListener('click',(e)=>{\n//             //     e.preventDefault();\n//             //     e.stopPropagation();\n//             //     pushState(item.value, null, e.target.href);\n//             // });\n//             item.el.__router = 1;\n//         };\n//     };\n// }; \n\nComponent.prototype.toggler = function(_this){\n    /*\n        @params\n        {basis} - comparison of elements;\n        {cls} - class to toggle;\n        {mode} - radio/ switch;\n        {sel} - siblings selector;\n        {persist} - bool;\n    */\n    let attrToggle = this.$attrib.getWatchItemsByType(this.name, 'toggle');\n\n    let cl = class{\n        constructor(bind, bases, html, _this){\n            this.toggle = _this.toggle;\n            this.bind = bind;\n            this.bases = bases;\n            this.cache = _this.$cache;\n            this.html = html;\n        }\n        check(bind){\n            let config = this.toggle[bind];\n            // console.log(this.toggle)\n\n            if (!config){ \n                console.error(`${bind} is not found in toggle! choose from ${JSON.stringify(Object.keys(this.toggle))}`);\n            } else {\n                if (attrToggle.length){\n                    // let {ns} = config;\n                    let ns = config.ns;\n                    //toggle is use only for namespacing;\n                    let f = attrToggle.find(item=>{return item.name == `ns-${ns}`});\n                    f && (config.sel = `[data-toggle=${f.sel}]`);\n                };\n                return config;\n            };\n        }\n        _toggle(){\n            let config = this.check(this.bind);\n            if(!config){ return;}\n            // let {basis='data-name', cls='is-active', mode='radio', sel, persist=true} = config;\n\n            let basis = config.basis || 'data-name';\n            let cls = config.cls || 'is-active';\n            let mode = config.mode || 'radio';\n            let sel = config.sel;\n            let persist = config.persist == undefined? true : config.persist;\n\n            let targets = this.html.querySelectorAll(sel);\n            if (!targets.length) { return; };\n\n            let prev, next;\n\n            // console.log(targets);\n\n            if (targets.length == 1){\n                let isbool = typeof this.bases == 'boolean'\n                let isforce =  !!this.bases;\n                let el =  targets[0];\n                // console.log(isbool, isforce)\n                if (persist){\n                    const _forceState = function(el, cls, isforce){\n                        if(isforce){\n                            if (el.classList.contains(cls)){\n                                el.classList.remove(cls);\n                            };\n                        } else {\n                            if (!el.classList.contains(cls)){\n                                el.classList.add(cls);\n                            };\n                        }\n                    };\n                    if (isbool){\n                        if (isforce){\n                            this.cache.createOrUpdate(this.bind, true);\n                            _forceState(el, cls, true);                 \n                        } else {\n                            this.cache.createOrUpdate(this.bind,false);                          \n                            _forceState(el, cls, false);                 \n                        }\n                        el.classList.toggle(cls);\n                    } else {\n                        this.cache.createOrUpdate(this.bind, !el.classList.contains(cls));\n                        el.classList.toggle(cls);\n                    };\n                };\n            } else {\n                for (let t = 0; t < targets.length; t++){\n                    let el = targets[t];\n                    let has = el.classList.contains(cls);\n                    let attr = el.getAttribute(basis);\n                    \n                    if (attr == this.bases){\n                        if (mode == 'switch'){\n                            el.classList.toggle(cls);\n                        } else {\n                            if (!has){ el.classList.add(cls) };\n                        };\n                        if (persist){\n                            this.cache.createOrUpdate(this.bind, attr);\n                        };\n                        next = attr;\n                    } else {\n                        if(has){ \n                            el.classList.remove(cls)\n                            prev = el.getAttribute(basis);\n                        };\n                    };\n                };\n            }\n            return {prev, next};\n        }\n        _recall(){\n            let config = this.check(this.bind);\n            if(!config){ return;}\n            // let {basis='data-name', cls='is-active',  sel} = config;\n\n            let basis = config.basis || 'data-name';\n            let cls = config.cls || 'is-active';\n            let sel = config.sel;\n\n            return this.cache.get(this.bind).then(result=>{\n                if (!result){\n                    return result;\n                };\n                let bases = result;                \n                let targets = this.html.querySelectorAll(sel);\n                if (!targets.length) { return ;};\n                if (targets.length == 1){\n                    let el = targets[0];\n                    // console.log(bases, this.bind);\n                    if (bases){\n                        el.classList.add(cls);\n                    };\n                } else {\n                    for (let t = 0; t < targets.length; t++){\n                        let el = targets[t];\n                        let has = el.classList.contains(cls);\n                        let attr = el.getAttribute(basis);\n                        if (attr == bases){\n                            if (!has){ el.classList.add(cls) };\n                        };\n                    };\n                };\n                return bases;\n            });\n        }\n        _get(){\n            let config = this.check(this.bind);\n            if(!config){ return;}\n            return this.cache.get(this.bind).then(result=>{\n                if (!result){\n                    return result;\n                };\n                return result;\n            });\n        }\n    };\n    let fn = (bind, bases)=>{\n        return new cl(bind, bases, this.html, this)._toggle();\n    };\n    fn.recall = (bind)=>{\n        return new cl(bind, false, this.html, this)._recall();\n    };\n    fn.get = (bind)=>{\n        return new cl(bind, false, this.html, this)._get();\n    };\n    return fn;\n};\n\nComponent.prototype.findContainer = function(){\n\n\n    return new Promise((res)=>{\n        try{\n\n            let containers = this.html.getContainers();\n            for (let c = 0; c < containers.length; c++){\n                let el = containers[c];\n                let name = el.dataset.container;\n                if (name){\n                    this.container[name] = el;\n                };\n            };\n            res();\n        } catch(err){\n            console.log(895, err);\n        }\n    });\n\n    // console.log('must trigger first',containers);\n    // console.log('must trigger first',this.container);\n};\n\n\n\nComponent.prototype._validator = function(name, value){\n    if(this.options.validate){\n        this.validate = this.options.validate;\n        const handler = this.validate[name];\n        if(handler){\n\n        };\n    };\n};\n\n/*\n    this will watch the form input and validate the data,\n    , set it to scope and state as formData;\n*/\nComponent.prototype._watchReactive = function(){\n    if(this.role == 'form' && this.options.watch === true){\n        const validator = this.options.validate;\n        const form = this.$form();\n\n        // console.log(this.name, form);\n\n        if(form && form._reactive){\n            return ;\n        };\n  \n        if(this.state && !this.state.formData){\n            this.state.formData = {};\n        };\n        const component = this;\n        const handler = (e)=>{\n            const target = e.target;\n            const name = target.name || target.id;\n            const value = target.value;\n            let handler = validator[name];\n            if(handler){\n                handler = handler.bind(component);\n                if(handler){\n                    let validated = handler(e);\n                    if(validated){\n                        this.state && (this.state.formData[name] = value);\n                        this.$scope.set(name, value);\n                    };\n                };\n            } else {\n                this.state && (this.state.formData[name] = value);\n                this.$scope.set(name, value);\n            };\n        };\n        form.addEventListener('change',(e)=>{\n            if(!(e.target.tagName == 'INPUT' || e.target.tagName == 'TEXTAREA')){\n                handler(e);\n            };\n        });\n        form.addEventListener('input',(e)=>{\n            if(e.target.tagName == 'INPUT' || e.target.tagName == 'TEXTAREA'){\n                handler(e);\n            };\n        });\n        form._reactive = true;\n    };\n};\n\n\nComponent.prototype.observer = function(subscribe){\n    function callback(name){\n        return this.handler[name]\n    }\n    this.observer = new Observer(this, subscribe, callback.bind(this));\n};\n\nComponent.prototype.variable = function(obj){\n    let vary = Object.keys(obj);\n    let validate = {};\n    let values = [];\n    function invalid(name, test, type){\n        if (!test){\n            validate[name] = `value is not '${type}'`;\n        };\n    };\n    for (let key in obj){\n        if (obj.hasOwnProperty(key)){\n            let config = obj[key];\n            // let {type, value} = config;\n            let type = config.type;\n            let value = config.value;\n            let test;\n            if (['string', 'number'].includes(type)){\n                test = typeof value == type;\n            } else if (value instanceof Array){\n                test = type == 'array';\n            } else {\n                test = type == 'object';\n            }\n            values.push(value);\n            invalid(key, test, type);\n        };\n    };\n    if (Object.keys(validate).length){\n        throw new Error(JSON.stringify(validate));\n    } else {\n        return values;\n    }\n};\n\n\nmodule.exports = Component;","const Utils = require('./utils');\nconst StorageKit = require('./storage')();\nconst ComponentStorage = require('./storage/components-store');\nconst RouterStore = new StorageKit({\n    child:'object',\n    storage:'local',\n    name:`_cake_router_cf`,\n});\nmodule.exports = function(models, component){\n\n    const hooks = [];\n    return class {\n        constructor(routes, options){\n            this.options = options;\n            this.unauthRoute = null;\n            this.componentConf = null;\n            this.authValidRoute = null;\n    \n            this.authConfig = (function(){\n                if(!this.options){return;};\n                const confAuth = this.options.auth;\n                const confComponents = this.options.components;\n                // console.log(29, confComponents);\n                if(confComponents){\n                    this.componentConf = confComponents;\n                };\n                if(confAuth && confAuth.verify){\n                    const verify = confAuth.verify;\n                    this.verifyComponent = verify[0];\n                    this.verifyComponentHandler = verify[1];\n                    this.unauthRoute = confAuth['401'];\n                    // return confAuth;\n                };\n                if(confAuth && confAuth.valid){\n                    this.authValidRoute = confAuth.valid;\n                };\n                return null;\n            }.bind(this))();\n\n\n            this.authRedirectRoute = {};//route to redirect back when the token is still valid;\n            this.route = this.compile(routes);\n            this.prev = null;\n            this.components = ComponentStorage;\n\n\n            this.watch();\n            this.persist();\n            Object.defineProperty(component.prototype, '$router', {\n                configurable:true,\n                get:()=>{\n                    return {\n                        goTo:this.goTo.bind(this),\n                        goBack:this.goBack.bind(this),\n                        auth:this.auth.bind(this),\n                        logout:this.logout.bind(this),\n                        login:this.login.bind(this),\n                        verify:this.verifyAuth.bind(this),\n                        ...this.prev,\n                    };\n                },\n                set(value){\n                    return;\n                },\n            });\n        }\n        getComponent(name, path){\n            if(this.componentConf && this.componentConf[name]){\n                let rerender = this.componentConf[name].rerender;\n\n                if(rerender){\n                    name = rerender.includes(path)?name:null;\n                };\n            };\n            return name ? this.components.get(name): null;\n        }\n        verifyAuth(token){\n            return models.$loaded(this.verifyComponent).then(model=>{\n                return model.fire[this.verifyComponentHandler](token).then(res=>{\n                    this.isauth = (res && res.status == 1);\n                    return res;\n                });\n            });\n        }\n        async authenticate(name){\n\n            \n            /*\n                happens when the current page is in the unAuthRoute\n                usually the login page,\n                when still the token is valid,\n                instead of redirect to unAuthRoute\n                it will redirect to the route declared per role\n                this happens in mobile app, when the app is minimized,\n                the path is reset to '/';\n            */\n\n            const initialize = (this.unauthRoute == name);\n            // const initialize = this.unauthRoute[name];\n\n\n            if(this.unauthRoute){//has 401;\n                try {\n\n\n                    const config = RouterStore.get('role', true) || {};\n\n                    // console.log(config);\n\n                    const token = config.token;\n                    const isverified = await this.verifyAuth(token);\n\n                    \n                    if(isverified.status == 0){\n                        this.logout();\n                    };\n\n                    if(config){\n                        if(initialize){\n                            const role = config.role;\n                            const data = config.data;\n\n                            // console.log(99, this.authRedirectRoute, data, role);\n\n                            const route = this.authRedirectRoute[role];//redirect back to a page;\n                            if(route){\n                                const name = route.name;\n                                this.goTo(name);\n                            };\n                        } else {\n    \n                        }\n                    } else {\n                        if(initialize){\n\n                        } else {\n                            this.logout();\n                        }\n                    };\n                } catch(err){\n                    alert(JSON.stringify(err.message));\n                    if(initialize){\n                    } else {\n                        this.logout();\n\n                    }\n                };\n            };\n            \n        }\n        login(cred, options){\n            let role = cred.role;\n            let token = cred.token;\n            let data = cred.data;\n            let created =RouterStore.createOrUpdate('role',{role,token, data});\n\n            let path = options && options.path;\n            let config = options && options.config;\n\n            // console.log(this.authValidRoute);\n\n            if(!role){\n                throw new Error(`role is not provided in router.login`);\n            };\n            if(!token){\n                throw new Error(`token is not provided in router.login`);\n            };\n            if(!data){\n                throw new Error(`data is not provided in router.login`);\n            };\n            if(path){\n                \n            } else if(this.authValidRoute && this.authValidRoute[role]){\n                path = this.authValidRoute[role];\n            } else {\n                throw new Error('provide route when login is successful');\n            };\n            this.goTo(path, config);\n            // return created\n        }\n        auth(){\n            const auth = RouterStore.get('role', true);\n            if(!auth){\n                // this.logout();\n                return {};\n            };\n            return auth;\n        }\n        logout(){\n            try {\n                RouterStore.remove('role');\n            } catch(err){};\n            this.goTo(this.unauthRoute,{replace:true});\n            // sessionStorage.createOrUpdate('history',[]);\n        }\n        goTo(routeName,config={}){\n            try {\n                let routes = this.route;\n                // let {params={}, replace:isreplace} = config || {};\n\n                let params = config.params || {};\n                let isreplace = config.replace;\n\n\n                let hash = null;\n                const raw = Object.entries(routes);\n\n                // console.log(108, routeName,config,isreplace, raw);\n\n                if(!routeName){\n                    const auth = RouterStore.get('role', true);\n                    const role = auth.role;\n                    const route = this.authRedirectRoute[role];//redirect back to a page;\n                    if(route){\n                        routeName = route.name;\n                    };\n                };\n\n                if(!routeName){\n                    throw new Error(`provide routename`);\n                };\n\n                for (let i = 0; i < raw.length; i++){\n                    // const [route, config] = raw[i];\n                    const route = raw[i][0];\n                    const config = raw[i][1];\n                    // const {name} = config;\n                    const name = config.name;\n\n\n                    if(name == routeName){\n                        hash = route;\n                        break;\n                    };\n                };\n                if(!hash){\n                    throw new Error(`${routeName} is not found in routes`);\n                };\n\n                // console.log(131, hash);\n\n                if(hash == '/'){\n                    if(isreplace){\n                        location.replace(`${location.origin}${location.pathname}`);\n                    } else {\n                        window.location = `${location.origin}${location.pathname}`;\n                    }\n                    return;\n                };\n\n                let path;\n                hash = hash.slice(1);\n                if(params.toString().includes('Object')){\n                    let p = '';\n                    for (let key in params){\n                        p += `${key}=${params[key]}&`;\n                    };\n                    params = p;\n                    path =`!/${hash}?${params}`;\n                } else {\n\n                    path = `!/${hash}`;\n                }\n                if(hash == '/'){\n                    path = \"\";\n                };\n\n                // console.log(159, path);\n\n                // console.log(123, isreplace);\n\n\n                if(isreplace){\n                    let loc = `${location.origin}${location.pathname}#${path}`;\n                    // console.log(180,loc, !Utils.isFirefox());\n                    // console.log(!Utils.isFirefox());\n                    console.log(276, Utils.isChrome() && !Utils.isFirefox(), loc);\n                    Utils.isChrome() && !Utils.isFirefox() && history.replaceState(undefined, undefined, loc);\n                    location.replace(loc);\n                } else {\n                    // console.log(128,path);\n\n                    var a = document.createElement('a');\n                    a.href = `#${path}`;\n                    Utils.isChrome() && !Utils.isFirefox() && history.pushState(undefined, undefined, a.href);\n                    a.click();\n                    // console.log(171,a.href);\n\n                }\n            } catch(err){\n                console.log(err);\n            }\n        }\n        goBack(){\n            \n            // return storage.getAll().then(r=>{\n            //     console.log(94, r);\n            //     const l = r.length;\n            //     if(l && l > 1){\n            //         const prev = r[l-2];\n            //         if(prev){\n            //             this.goTo(prev);\n            //         }\n            //     };\n            // });\n            return new Promise((res, rej)=>{\n                // const prev = this.history[this.history.length-2];\n            \n                // if(prev){\n                //     this.goTo(prev, {replace:true});\n                // };\n                // console.log('hit back');\n                // console.log(prev);\n                window.history.back();\n                res();\n            });\n        }\n        persist(){\n            if (!document.hasRouterPersist){\n                let event = 'DOMContentLoaded';\n                if('deviceready' in document){\n                    event = 'deviceready';\n                };\n                document.addEventListener(event, (e)=>{\n                    this.parse();\n                    this.notify().then(()=>{\n                        return this.navigate(true);\n                    });\n                });\n    \n                document.hasRouterPersist = true;\n            };\n        }\n        watch(){\n            if (!window.hasRouterPop){\n                // console.log('set pop state');\n                window.addEventListener('popstate',(e)=>{\n                    // console.log(236, e);\n                    this.parse();\n                    this.notify().then(()=>{\n                        console.log('notified');\n                        return this.clear().then(()=>{\n                            console.log('cleared');\n                            return this.navigate().then(()=>{\n                                console.log('navigated');\n                            });\n                        });\n                    })\n                });\n\n                window.hasRouterPop = true;\n            } else {\n                this.parse();\n            };\n        }\n        compile(routes){\n            // console.log(167, this);\n            let con = {};\n            for (let key in routes){\n                let config = routes[key];\n                // console.log(281, config);\n                key = String(key);\n                const len = key.length;\n                let regex = key;\n                if(['404'].includes(key)){\n                    //http errors;\n                    const callback = routes[key];//function\n                    \n                    config = {callback, name:key};\n                } else {\n                    regex = regex.slice(1);\n                };\n                \n                regex = regex.split('/');\n                regex = regex.map((item, index)=>{\n                    let param = item.includes(':');\n                    let a = \"\";\n                    (index==0)?(a+=\"^/\"):(a+='/');\n                    (param?a+='(([^/#?]+?))':a+=item);\n                    (index == len-1)?a+='/?$':a+=\"\";\n                    if (param){\n                        const paramKey = item.replace(':',\"\");\n                        if (!con[key]){\n                            con[key] = {};\n                        };\n                        con[key].params = {\n                            [paramKey]:index,\n                        };\n                    };\n                    return a\n                });\n\n                \n\n                if (con[key] && con[key].params){\n                    con[key] = {\n                        params:con[key].params,\n                        regex:new RegExp(regex.join(\"\")),\n                        ...config,\n                    }\n                } else {\n                    con[key] = {\n                        regex:new RegExp(regex.join(\"\")),\n                        ...config,\n                    }\n                };\n                // console.log(key, con[key],config);\n\n\n                if(this.authValidRoute){\n                    Utils.each(this.authValidRoute, function(obj, i){\n                        let key = obj.key;\n                        let value = obj.value;\n\n                        if(value == config.name){\n                            if(this.authRedirectRoute[value]){\n                                this.authRedirectRoute[value] = config;\n                                console.error(`auth ${value} is found in other route`);\n                            } else {\n                                this.authRedirectRoute[value] = config;\n                            };\n                        };\n                    }.bind(this));\n\n                };\n\n            };\n            con.length = Object.keys(routes).length;\n            con.keys = Object.keys(routes);\n\n            return con;\n        }\n        parse(){\n            // console.log(330,this.route);\n            let hash = window.location.hash, scheme, routeName;\n            if(hash){\n                scheme = hash.includes('#!/')?2:hash.includes('#/')?1:null;\n                hash =  hash.slice(scheme);\n            } else {\n                hash = '/';\n                scheme = true;\n            };\n            if (!scheme){\n                return;\n            };\n            const url = new URL(`http://localhost${hash}`);\n            // const {search, pathname:path} = url;\n\n            let search = url.search;\n            let path = url.pathname;\n\n            const keys = this.route.keys;\n            const state = {};\n            if (search){\n                new URLSearchParams(search).forEach((value, key)=>{\n                    state[key] = value;\n                });\n            };\n\n            \n\n            let has = false;\n            for (let i = 0; i < keys.length; i++){\n                const route = this.route[keys[i]];\n\n                const regex = route.regex;\n                const components = route.components;\n                const params = route.params;\n                const name = route.name;\n                const auth = route.auth;\n                const overlay = route.overlay;\n                const display = route.display;\n                const onrender = route.onrender;\n                const controller = route.controller;\n\n                if (params){\n                    let _path = String(path);\n                    _path = _path.slice(1);\n                    _path = _path.split('/');\n                    Object.entries(params).forEach(param=>{\n                        const key = param[0];\n                        const value = param[1];\n\n                        if (_path[value]){\n                            state[key] = _path[value];\n                        };\n                    });\n                };\n                const test = regex.test(path);\n                // console.log(test, path, regex);\n                if (test){\n                    routeName = name;\n                    \n                    if(auth == true){\n                        this.authenticate(routeName);\n                    };\n\n                    this.prev = {components, state,path, name, prev:this.prev, overlay, display, onrender,controller};\n                    has = true;\n                    break;\n                };\n            };\n\n            // console.log(430, has, hash);\n\n            if(!has){\n                // console.log(464, this.route, this.options);\n                // console.log(465, this.route['404']);\n                if(this.route['404']){\n                    let path = this.route['404'].callback();\n                    // const {origin, pathname} = location;\n\n                    // console.log(470,path);\n\n                    let origin = location.origin;\n                    let pathname = location.pathname;\n\n                    if(this.route[path]){\n                        // console.log(1);\n                        if(path == '/'){\n                            path = `${origin}${pathname}`;\n                        } else {\n                            if(pathname.slice(-1) == '/'){\n                                path = `${origin}${pathname}#!${path}`;\n                            } else {\n                                path = `${origin}${pathname}/#!${path}`;\n                            };\n                        };\n                        location.replace(path);\n                    } else if(!!path && !this.route[path]) {\n                        if(origin.slice(-1)=='/'){\n                            if(path[0] == '/'){\n                                path = path.slice(1);\n                            };\n                        };\n                        path = `${origin}${path}`;\n                        location.replace(path);\n                    };\n                };\n            } else {\n                // return await this.log(routeName);\n            }\n        }\n        navigate(ispersist){\n            // console.log('here', this.prev);\n            if (this.prev){\n                // const {components, state, path, name, overlay, onrender={}} = this.prev;\n\n                const components = this.prev.components;\n                const state = this.prev.state;\n                const path = this.prev.path;\n                const name = this.prev.name;\n                const overlay = this.prev.overlay;\n                const onrender = this.prev.onrender || {};\n\n\n                // if(overlay){\n                //     storage.create(name);\n                // };\n\n\n                // console.log(425, components);\n\n                try {\n\n                    // console.log(hooks);\n                    if(components.length){\n                        // return Promise.all(components.map(item=>{                        \n                        //     return this.components[item].render({emit:{route:this.prev}});\n                        // }));\n                        return new Promise((res, rej)=>{\n                            const l = components.length;\n                            let i = 0;\n\n\n                            if(l){\n                                const recur = ()=>{\n                                    let component = components[i];\n\n                                   \n\n                                    if(components.length > i){\n                                        i += 1;\n                                        let componentName = component;\n                                        // component = this.components[component];\n                                        \n                                        let isunload = this.getComponent(component,path);\n                                        component = this.components.get(component);\n\n                                        if(component){\n                                            if(component.isConnected && !isunload){\n                                                if(component.fire.softReload){\n                                                    component.fire.softReload();\n                                                    component.await.softReload && component.await.softReload.then(()=>{\n                                                        recur();\n                                                    });\n                                                } else {\n                                                    recur();\n                                                };\n                                            } else {\n                                                component.render({emit:{route:this.prev},...(onrender[componentName] || {})}).then(()=>{\n                                                    if(component.await.isConnected){\n                                                        component.await.isConnected && component.await.isConnected.then(()=>{\n                                                            recur();\n                                                        });\n                                                    } else {\n                                                        recur();\n                                                    }\n                                                }).catch(err=>{\n                                                    throw err;\n                                                });\n                                            };\n                                        }\n                                        \n\n\n                                        // if(component){\n\n                                        // } else {\n                                        //     recur();\n                                        // }\n\n                                        \n                                        \n                                    } else {\n                                        res()\n                                        // rej(`${component} is not found`);\n                                    };\n                                    \n                                };recur();\n                            } else {\n                                res();\n                            };\n                        });\n                    }\n\n                } catch(err) {\n                    console.log(err);\n                    throw new Error(`some of the component in ${JSON.stringify(components)} in path ${path} of router is not found, make sure the it is created`);\n                }\n            }\n        }\n        static pushState(data, notused, path){\n            console.log(path);\n            window.history.pushState(data, notused, path);\n            let promise = Promise.resolve();\n            if (this.prev){\n                // const {components:_components, state, path, name} = this.prev;\n\n                const _components = this.prev.components;\n                const state = this.prev.state;\n                const path = this.prev.path;\n                const name = this.prev.name;\n\n                promise = new Promise((res, rej)=>{\n                    const l = components.length;\n                    let i = 0;\n                    if(l){\n                        const recur = async ()=>{\n                            let component = components[i];\n                            if(components.length > i){\n                                // component = this.components[component];\n                                component = this.getComponent(component,path);\n\n                                \n                                if(component){\n                                    component.fire.destroy();\n                                    component.await.destroy.then(()=>{\n                                        return recur();\n                                    });\n                                } else {\n                                    await recur();\n                                }\n                            } else {\n                                // rej(`${component} is not found`);\n                                res()\n                            };\n                            \n                            i += 1;\n                        };\n                        recur();\n                    } else {\n                        res();\n                    };\n                });\n\n                // promise = Promise.all(_components.map(item=>{\n                //     return components[item].fire.destroy();\n                // }));\n            };\n            return promise.then(()=>{\n                return this.navigate();\n            })\n        }\n        clear(){\n            let promise = Promise.resolve();\n            \n            \n\n            const overlay = this.prev && this.prev.overlay || undefined;\n            //if overlay prevent in detroying current rendered component;\n            if(overlay){\n                return promise;\n            };\n\n            // console.log('has cleared?', overlay);\n\n            const recur = async function(index, componentNames, sourceComponents, callback){\n                let component = componentNames[index];\n                let componentName = component;\n                let self = recur;               \n                try {\n\n                    if(componentNames.length > index){\n                        index += 1;\n                        // component = sourceComponents[component];\n\n                        component = this.getComponent(component,this.prev.path);\n               \n                        \n\n                        if(component){\n                            if(!component.fire.destroy){\n                                throw new Error(`${componentName} has no destroy handler!`);\n                            };\n    \n                            component.fire.destroy();\n                            component.await.destroy.then(()=>{\n                                return self(index, componentNames, sourceComponents, callback);\n                            });\n                        } else {\n                            await self(index, componentNames, sourceComponents, callback);\n                        };\n\n                    } else {\n                        // rej(`${component} is not found`);\n                        callback()\n                    };\n                    \n                } catch(err){\n                    throw (err);\n                }\n            }.bind(this);\n\n            // console.log(624, this.components);\n\n            if (this.prev && this.prev.prev){\n                // const {components, state, path, name, overlay} = this.prev.prev;\n                let components = this.prev.prev.components;\n                let state = this.prev.prev.state;\n                let path = this.prev.prev.path;\n                let name = this.prev.prev.name;\n                let overlay = this.prev.prev.overlay;\n                let destroyPromise = Promise.resolve();\n                // const components = this.prev.components;\n\n                \n                if(overlay){\n                    destroyPromise = new Promise((res, rej)=>{\n                        \n                        const l = components.length;\n                        \n                        let i = 0;\n                        if(l){\n                            recur(i, components, this.components, res);\n                        } else {\n                            res();\n                        };\n                    });\n                };\n\n                promise = new Promise((res, rej)=>{\n                    \n                    const l = components.length;\n                    // console.log(644, components, l);\n                    let i = 0;\n                    if(l){\n                        recur(i, components, this.components, res);\n                    } else {\n                        res();\n                    };\n                });\n                return destroyPromise.then(()=>{\n                    return promise;\n                });\n            };\n            return promise;\n        }\n        pushState(data, notused, path){\n            window.history.pushState(data, notused, path);\n            let promise = Promise.resolve();\n            this.clear();\n            return promise.then(()=>{\n                return this.navigate();\n            })\n        }\n        static subscribe(fn){\n            if(fn && fn.constructor.name == 'Function'){\n                hooks.push(fn);\n            };\n        }\n        notify(){\n            return Promise.all((false)?[Promise.resolve()]:hooks.map(subscribe=>{\n                return subscribe();\n            }))\n        }\n    }\n};","const StorageKit = require('./storage')();\r\nconst ComponentStorage = require('./storage/components-store');\r\nmodule.exports = class {\r\n    constructor(){\r\n        this.storage = new StorageKit({\r\n            child:'array',\r\n            storage:'session',\r\n            name:'_cake_persistent',\r\n        });\r\n    }\r\n    listen(components){\r\n        components = ComponentStorage;\r\n        let event = 'DOMContentLoaded';\r\n        if('deviceready' in document){\r\n            event = 'deviceready';\r\n        };\r\n        window.addEventListener(event, (e)=>{\r\n            setTimeout(()=>{\r\n                this.storage.getAll().then(result=>{\r\n                    if (!(result && !result.length)) return;\r\n\r\n\r\n                    for (let r = 0; r < result.length; r++){\r\n                        let item = result[r];\r\n                        let component = components.get(item);\r\n                        component.isConnected = false;\r\n\r\n\r\n                        \r\n                        if (component){\r\n                            // console.log(component, !component.isConnected);\r\n                            !component.isConnected && component.render.bind(component)();\r\n                        } else {\r\n                            console.error(`component ${component} is not found!`)\r\n                        }\r\n                    };\r\n                })\r\n            })\r\n        });\r\n    }\r\n    append(name){\r\n        this.storage.create(name);\r\n    }\r\n    remove(name){\r\n        this.storage.remove(name);\r\n    }\r\n};","const stat = {\n    handlers:{},\n    subscribe:{},\n};\n\nwindow.Stat = stat;\n\nfunction set(storage, component, fn){\n\n    if(storage[component] == undefined){\n        storage[component] = {};\n    };\n    if(storage[component][fn] == undefined){\n        storage[component][fn] = 0;\n    } else {\n        storage[component][fn] += 1;\n    };\n    return true;\n}\n\nmodule.exports = {\n    handlers:{\n        set:function(component, fn){\n            return set(stat.handlers,component, fn);\n\n        },\n        get:function(component){\n            if(stat.handlers[component] != undefined){\n                console.table(stat.handlers[component]);\n            } else {\n                console.log(null);\n            };\n        },\n    },\n    subscribe:{\n        set:function(component, fn){\n            return set(stat.subscribe,component, fn);\n        },\n        get:function(component){\n            if(stat.subscribe[component] != undefined){\n                console.table(stat.subscribe[component]);\n            } else {\n                console.log(null);\n            };\n        },\n    },\n}","const Stat = require('./handler-stat');\nconst subscriber = {};\n\nwindow.Subscribe = subscriber;\nmodule.exports = {\n    set:function(subscribe){\n        return new Promise((res, rej)=>{\n            for(component in subscribe){\n                if (subscribe.hasOwnProperty(component)){\n\n                    let events = subscribe[component];\n                    for (let event in events){\n                        if (events.hasOwnProperty(event)){\n                            let handler = events[event];\n    \n                            if(!subscriber[component]){\n                                subscriber[component] = {};\n                            };\n                            if(!subscriber[component][event]){\n                                subscriber[component][event] = [];\n                            };\n                            subscriber[component][event].push(handler);\n\n                            Stat.subscribe.set( component,handler.original);\n                        };\n                    };\n                };\n            };\n            res();\n        });\n    },\n    get:function(component, event){\n        return subscriber[component] && subscriber[component][event];\n    },\n};","const Stat = require('./handler-stat');\nconst handler = {};\n\nwindow.Handler = handler;\n\nmodule.exports = {\n    set:function(handlers, component){\n\n        return new Promise((res)=>{\n            for (let fn in handlers){\n                if (handlers.hasOwnProperty(fn)){\n                    let _handler = handlers[fn];\n                    // Handler[component][fn] = handler;\n        \n\n                    if(!handler[component]){\n                        handler[component] = {};\n                    };\n            \n                    handler[component][_handler.original] = _handler;\n        \n                    Stat.handlers.set( component,_handler.original);\n                };\n            };\n\n            res();\n        });\n    },\n    get:function(component, event){\n        return handler[component] && handler[component][event];\n    },\n};","const Subscriber = require('./storage/subscriber');\nconst Handler = require('./storage/handler');\nconst Stat = require('./storage/handler-stat');\n\nfunction Observer(logger){\n\n    this.logger = logger || false;\n    this.results = {};\n\n}\nObserver.prototype.notify = function(component, /*handler- name/fn*/event, e/*payload */){\n    /*\n        calls by fire or DOM event;\n        DOM Event - string;\n        fire - string || fn;\n    */\n       \n\n    \n\n    let _component = component;\n    let _event = event;\n    let _e = e;\n\n    let handler = Handler.get(_component, _event);  \n    if (!handler) {\n        console.error(`no setup handler for the event ${_event} in ${_component} component`);\n        return;\n    };\n\n    _component = handler.binded;\n\n    //it is able to accept a promise from handlers;\n    let prom = new Promise((res,rej)=>{\n        let e = handler(_e);\n        res(e);\n    });\n\n    Stat.handlers.set( _component,handler.original);\n\n    return prom.then(variable=>{\n        let execs = []; \n        if (!this.results[_component]){\n            this.results[_component] = {};\n        };\n        let subscribe = Subscriber.get(_component, _event);\n\n\n        if (subscribe){\n            for (let s = 0; s < subscribe.length; s++){\n                let fn = subscribe[s];\n\n                Stat.subscribe.set( _component,fn.original);\n\n                execs.push(new Promise((res, rej)=>{\n                    try{\n                        let exec = (()=>{\n                            return fn(variable)\n                        })();\n\n                        if (exec && exec.ObjectType == 'Promise'){\n                             exec.then(result=>{\n                                if (!this.results[_component]){\n                                    this.results[_component] = {};\n                                };\n                                this.results[_component][_event] = result;\n                                res(result);\n                             }).catch(err=>{\n                                rej(err);\n                             });\n                        } else {\n                            this.results[_component][_event] = exec;\n                            res(exec);\n                        }\n                    } catch(e){\n                        console.log(e);\n                        rej(e);\n                    };\n                }));\n            };\n        } else {\n            if (this.logger) {\n                console.info(`no subscriber for (${_event}) event of (${_component}) component`);\n            };\n            \n            this.results[_component][_event] = variable;\n\n        };\n        \n        return Promise.all(execs).then(()=>{\n            variable = null;\n            execs = [];\n            return true;\n        });\n    });\n\n};\n\nmodule.exports = Observer;","module.exports =  function (component){\r\n    // let component = this;\r\n    // console.log(component);\r\n    // if (!component.await.$form){\r\n    //     component.await.$form = {};\r\n    // }\r\n\r\n\r\n    class Options{\r\n        constructor(type){\r\n            this.type = type;\r\n            this.storage = {};\r\n        }\r\n        store(formControl,data){\r\n            this.storage[formControl] = data;\r\n        }\r\n        get options(){\r\n            if(this.type == 'select' || this.type == 'virtual'){\r\n                let a = {};\r\n                for (let key in this.storage){\r\n                    let val = this.storage[key];\r\n                    a[key] = val.options;\r\n                };\r\n                return a;\r\n            };\r\n            return false;\r\n        }\r\n        get value(){\r\n            if(this.type == 'input'){\r\n                let a = \"\";\r\n                for (let key in this.storage){\r\n                    let val = this.storage[key];\r\n                    a = val.options[0];\r\n                };\r\n                return a;\r\n            };\r\n            return false;\r\n        }\r\n\r\n        get query(){\r\n            let a = {};\r\n            for (let key in this.storage){\r\n                let val = this.storage[key];\r\n                a = val.query[0] || null;\r\n            };\r\n            return a;\r\n        }\r\n\r\n        get has(){\r\n            let a = \"\";\r\n            for (let key in this.storage){\r\n                let val = this.storage[key];\r\n                a = val.query[0] || null;\r\n            };\r\n            return a;\r\n        }\r\n    };\r\n\r\n    const form = {};\r\n\r\n    form.options = (obj)=>{\r\n        // console.log(9, obj);\r\n        // let {options, params} = obj;\r\n        let options = obj.options;\r\n        let params = obj.params;\r\n        \r\n        if (!options) { options = [] };\r\n\r\n        // console.log(33, params);\r\n        let isgroup = options.length > 1;\r\n\r\n        let prom = Promise.all(options.map(item=>{\r\n            // let {control, field, tbl, src, schema, type} = item;\r\n\r\n            let control = item.control;\r\n            let field = item.field;\r\n            let tbl = item.tbl;\r\n            let src = item.src;\r\n            let schema = item.schema;\r\n            let type = item.type;\r\n\r\n            // console.log(schema)\r\n            // console.log(15, item);\r\n\r\n            // console.log(40,src, {tbl, field, params});\r\n            // console.trace();\r\n            return component.fire(src, {tbl, field, params}).then((opts)=>{\r\n                // console.log(18, opts);\r\n            \r\n\r\n                opts = opts || [];\r\n                item.query = opts;\r\n                // console.log(18, opts);\r\n                opts = opts.map(item=>{\r\n                    // console.log(18, item);\r\n                    return schema(item);\r\n                });\r\n\r\n                if(type != 'input'){\r\n                    /**appending empty option */\r\n                    let scheme = schema({});\r\n                    for (let key in scheme){\r\n                        if (scheme.hasOwnProperty(key)){\r\n                            scheme[key] = \"\";\r\n                        };\r\n                    };\r\n                    opts.unshift(scheme);\r\n                }\r\n                /**end */\r\n\r\n                // console.log(opts);\r\n                item.options = opts;\r\n                return item;\r\n            }).then((iter)=>{\r\n                // console.log(51, iter);\r\n                // let {type, control} = iter;\r\n                let type = iter.type;\r\n                let control = iter.control;\r\n                if (!type){\r\n                    type = 'others';\r\n                };\r\n                const cls = new Options(type);\r\n                if (isgroup){\r\n                    let o = {};\r\n                    if (!o[control]){\r\n                        o[control] = cls;\r\n                        o[control].store(control, iter);\r\n                    };\r\n                    return o;\r\n                } else {\r\n                    cls.store(control, iter);\r\n                    return cls;\r\n                };\r\n            });\r\n        })).then(res=>{\r\n            if(isgroup){\r\n                return res.reduce((accu, iter)=>{\r\n                    Object.assign(accu, iter);\r\n                    return accu;\r\n                },{});\r\n            } else {\r\n                return res[0];\r\n            }\r\n        }).catch(err=>{\r\n            console.error(err);\r\n        });\r\n\r\n        // component.await.$form.options = prom;\r\n        return prom;\r\n    };\r\n    form.plot = (config)=>{\r\n        // let {data, container} = config;\r\n\r\n        let data = config.data;\r\n        let container = config.container;\r\n\r\n        if (!data && !container) { return };\r\n        const query = (root, selector, callback)=>{\r\n            if (!root){\r\n                console.info('root is not provided!');    \r\n                return ;\r\n            }\r\n            const els = root.querySelectorAll(`${selector}`);\r\n            const len = els.length;\r\n            if (!len){\r\n                callback(null, data);\r\n                return;//exit;\r\n            }\r\n            for (let e = 0; e < len; e++){\r\n                let el = els[e];\r\n                let name = el.name;\r\n                let value = data[name];\r\n\r\n                let r = callback(el, value, e);\r\n                if (r == 'break'){break; };\r\n                if (r == 'continue'){ continue; };\r\n            };\r\n        };\r\n\r\n\r\n\r\n        query(container, 'INPUT.input', function(el, value){\r\n            if (value != undefined){\r\n                if (el.type == 'date'){\r\n                    value = new Date(value) == 'Invalid Date'?\"\":new Date(value).toJSON().split('T')[0];\r\n                    el.value = value;\r\n                } else {\r\n                    el.value = value;\r\n                }\r\n            };\r\n        })\r\n\r\n        setTimeout(()=>{\r\n            query(container, 'SELECT.input:not(.cake-template)', function(select, value){\r\n                // console.log(select);\r\n                query(select, 'OPTION:not(.cake-template)', function(option, _value, index){\r\n                    // console.log(option)\r\n                    if (option){\r\n                        if (option.value == value){\r\n                            select.selectedIndex = index;\r\n                            return 'break';\r\n                        };\r\n                    } else {\r\n                        // console.trace();\r\n                        // console.log(_value);\r\n                        console.log(option, _value, 'provide schema')\r\n                        //provide schema\r\n                    }\r\n                });\r\n            });\r\n        }, 500);\r\n\r\n        return Promise.resolve();\r\n\r\n    };\r\n\r\n    return form;\r\n};","// const mootools = require('./scripts/mootools');\r\nconst env = require('./scripts/env');\r\nconst extensions = require('./scripts/extends');\r\nconst polyfill = require('./scripts/polyfill');\r\nconst utils = require('./scripts/utils');\r\nconst templateExtend = require('./scripts/template-extend');\r\nconst plugin = require('./scripts/plugin');\r\n\r\n// const piece = require('./scripts/piece');\r\n// const observer = require('./scripts/observer');\r\n// const templating = require('./scripts/templating');\r\n// const animate = require('./scripts/animate');\r\n// const persist = require('./scripts/persist');\r\n// const hash = require('./scripts/hash');\r\n// const form = require('./scripts/form');\r\n\r\n\r\n// const storageKit = require('./scripts/storage')();\r\n// const scope = require('./scripts/scope')();\r\n// const router = require('./scripts/router')();\r\n// const attributes = require('./scripts/attributes');\r\n// const component = require('./scripts/component');\r\n\r\nconst cake = require('./scripts/cake');\r\n\r\nwindow.Cake = cake;\r\n\r\n\r\n\r\n"],"names":["$25656dc2b3076b55$var$StorageKit","parcelRequire","module","exports","dependency","_hooks","registerNotifier","fn","this","notify","push","install","session","child","storage","name","notifier","component","obj","value","bind","reactiveData","set","getInputData","type","_component","data","JSON","parse","stringify","key","sanitize","formData","FormData","append","hook","callback","get","quick","pKeys","pkey","Promise","async","res","rej","createOrUpdate","then","all","map","cb1","hooks","callbacks","forEach","cb","removeCache","remove","constructor","replace","match","$g94pC","typeOf","_obj","toLowerCase","ObjectForEach","hasOwnProperty","isNull","d","isObject","src","id","has","i","length","item","Object","keys","hasInArray","_key","undefined","hasInObject","unique","Set","add","Array","from","hasItem","includes","assign","ObjectMerge","arr","filter","contains","some","_value","open","methods","resolve","update","close","arguments","storageType","err","sessionStorage","clear","localStorage","Error","save","cache","recache","init","array","create","object","issave","setItem","instanceID","$bc10e8ca3f08b243$var$global","$bc10e8ca3f08b243$var$TYPES","typeof","ctx","Function","HTMLCollection","NodeList","Element","isArray","isNumber","isString","isHTMLCollection","isNodeList","isElement","isFunction","$bc10e8ca3f08b243$var$LOOP","_each","a","each","index","st","r","reduce","accu","$bc10e8ca3f08b243$var$OBJECT","path","split","p","_p","$bc10e8ca3f08b243$var$STRING","removeWhiteSpace","str","String","join","$bc10e8ca3f08b243$var$OTHERS","perf","console","time","timeEnd","logTest","ops","b","err1","toUrlSearchParams","istrim","searchParams","val","toString","encodeURI","slice","string","exclude","decodeURIComponent","toFormData","form","options","controls","textareas","querySelectorAll","inputs","selects","loop","cont","sort","files","test","closest","classList","err2","getAttribute","o","i1","control","element","nodeType","el","tag","tagName","checked","skipsanitize","json","trim","fd","splitBySpace","toArray","arrayLike","timeOut","setTimeout","location","origin","recurse","l","rec","message","browser","window","_browser","isOpera","opr","addons","opera","navigator","userAgent","indexOf","isFirefox","InstallTrigger","isSafari","HTMLElement","safari","pushNotification","isIE","document","documentMode","isEdge","StyleMedia","isChrome","chrome","webstore","cordova","isBlink","CSS","device","isAndroid","isIOS","isDesktop","escapeRegExp","text","$bc10e8ca3f08b243$var$ARRAY","prop","Loop","UTILS","$bc10e8ca3f08b243$var$iter","global","env","destructure","prototype","ObjectType","caching","toHyphen","_StringCache","cvt","splitted","ss","s","charCodeAt","toProper","first","substring","rest","proper","toUpperCase","removeSpace","toCamelCase","toCamel","querySelectorIncluded","selector","attr","q","querySelector","qu","querySelectorAllIncluded","dataset","HTMLDocument","toggler","dataName","activeClass","t","node","toggle","Ref","n","_cakes_storage","getAll","replaceDataSrc","srcs","setAttribute","removeAttribute","unRequired","keep","rawdirs","dirs","ins","orig","dir","concat","$ca320e7a44056a85$var$self","customElements","define","connectedCallback","subTemplate","ref","template","refEl","getElementsByName","error","temp","content","cloneNode","firstElementChild","attrs","attributes","replaceWith","super","HTMLTemplateElement","replaceSubTemplate","subTemplates","getElementsByTagName","collectContent","cf","fr","createDocumentFragment","styles","appendChild","others","children","style","parseStyle","textContent","splitted1","sp1","_sp1","sel","sp","parseHTML","parent","createElement","other","getContent","isConvert","_collectedContent","query","css","innerHTML","$de7152c6fbc56543$exports","plugins","$47c3a61dfc1e48db$var$Templating","lefttag","righttag","_getTag","RegExp","_bindReplace","pattern","replaceString","_toElement","outerHTML","els","dd","bindData","$47c3a61dfc1e48db$exports","$d42a087fb7e2c7b4$export$44487a86467333c3","$d42a087fb7e2c7b4$export$2eaf9172a83ee9e7","$d42a087fb7e2c7b4$export$c1fdfb880e73617c","$82305c62989d07e3$var$getConfig","newValue","prevValue","$82305c62989d07e3$var$extendConfig","config","configs","cloned1","cl","iter","incrementedSels","ic","cloned","incrementedSel","$82305c62989d07e3$exports","html","hasNegate","testVal","attrkey","attrvalue","incrementId","$892d110a749accc2$var$getConfig","$892d110a749accc2$var$extendConfig","$892d110a749accc2$exports","c","attrHyphen","cls","$ce25537b3a2c3752$var$getConfig","$ce25537b3a2c3752$var$extendConfig","$ce25537b3a2c3752$exports","className","$e939c7f932dc291a$var$Piece","e","getElements","getElement","fg","getContainers","getElementsByDataset","container","getAllElements","appendTo","roots","cleaned","root","TypeError","i2","i3","getElementById","ids","toArra","arg","qe","$e939c7f932dc291a$exports","$17bb585567f68c88$var$getConfig","$17bb585567f68c88$var$updateConfig","$17bb585567f68c88$exports","component1","templating","attrPayload","targets","target","binded","forUpdateBind","forTemplate","removeProperty","dataForIteration","lt","logicalType","logicalHtml","hit","getWatchItemsBySel","_type","insertAdjacentElement","parentElement","selectedIndex","payload","$ae5da6fd299a729b$var$storage","$ae5da6fd299a729b$var$subscribeExternal","original","listenTo","Subscribe","ComponentStorage","$ae5da6fd299a729b$exports","subscribe","lk","setInterval","clearInterval","componentName","$ec163b64c4f0d6b1$var$getConfig","$ec163b64c4f0d6b1$exports","sts","switchConfig","data1","sel1","hasReplaced","increment","key1","conf","rawsel","__sel","for","item1","template1","cases","mapping","switchElement","hitCase","find","item2","_id","create1","cf1","forAutoElement","forAutoBindKey","forAutoBindValue","iteration","forIter","datas","select","$05c674f6bd109a88$var$getConfig","$05c674f6bd109a88$var$extendConfig","$05c674f6bd109a88$exports","testval","_true","_false","trueNotIgnore","falseNotIgnore","trueClasses","falseClasses","$b8fa07144b7d06b9$var$getConfig","$b8fa07144b7d06b9$exports","$35a93c3851099268$var$getConfig","$35a93c3851099268$var$extendConfig","$35a93c3851099268$exports","sub","$8f34343f3ff2fe22$var$ComponentAttribStorage","store","$8f34343f3ff2fe22$exports","$8760e7cf60bc4b7e$var$Attrib","uiid","notifyFor","notifyForUpdate","notifyClass","notifyBind","notifyAttr","notifyIf","notifyModel","notifyToggle","val1","equiv","forUpdate","if","class","hits1","hits","actions","action","vals","v","getEventTarget","evt","getRouterTarget","router","getWatchItems","_st","red","wt","forWt","tst","getWatchItemsByType","getConfig","_activateReactive","_register","f","_static","qs","isStatic","dComponent","_loopElements","gr","_compileEvents","events","event","_compileToggle","toggles","ns","_compileFor","fors","el1","autoBind","forAutoBind","isCleaned","forCleaned","autoBindKey","autoBindValue","display","parentIsFor","parentCf","_compileForUpdate","_compileSwitch","switchs","switch","casesId","_case","caseBind","case","_compileBind","elModels","g","_compileAnimate","anims1","anims","keyframes","animate","_compileIf","ifs","regex","_ifBind","_gr","exp","_sp2","hasRegularLog","ifBind","_compileClass","cls1","bindVal","hasNegateCount","_compileAttr","attrPair","_compileModel","model","inject","apply","$8760e7cf60bc4b7e$exports","$bfaa99e298cb5daa$var$Scope","$f4afc3639a172b9c$exports","moment","velocity","complete","dic","slideOutUp","transform","visibility","opacity","easing","slideOutRight","slideOutLeft","slideOutDown","slideInUp","slideInRight","slideInLeft","slideInDown","disappear","appear","flipInX","offset","backfaceVisibility","duration","$5da7196eaf4d80f2$var$Component","handlers","renderqueue","items","animateOptions","role","isReady","scope","animatecss","formSelector","await","state","originalState","utils","renderQueing","staticComponent","static","compile","_bindHandlers","_bindSubscribe","cloneState","createElementAsync","hasEvent","isConnected","destroyed","isCreated","$state","clearState","handler","$observer","registerSubscribe","Node","originalName","initAwaitHandlers","destroy","animateRemove","handlerName","flattened","components","fns","getHTML","doFor","$attrib","doToggle","doSwitch","notifySwitch","doIf","$animate","ata","da","at","$templating","substr","isTemplate","cake_component","_parseHTML","_isParsed","renderQue","hasqued","date","Date","render","revokeque","emit","DATA","multiple","fire","attrItems","beforeConnected","_animatecss","findContainer","log","findTarget","addEvent","_smoothReset","_watchReactive","setProperty","renderAsync","$persist","_hardReset","reset","options1","isPreventDefault","isStopPropagation","preventDefault","stopPropagation","Cake","Observer","event1","_event","place","addEventListener","_this1","attrToggle","check","_toggle","prev","next","basis","mode","persist","isbool","bases","isforce1","_forceState","isforce","_recall","result","_get","_this","$cache","recall","containers","_validator","validate","watch","validator","$form","_reactive","handler1","$scope","observer","variable","values","invalid","$5da7196eaf4d80f2$exports","$ee963c5dbf15104b$var$RouterStore","$ee963c5dbf15104b$exports","models","getComponent","componentConf","rerender","verifyAuth","token","$loaded","verifyComponent","verifyComponentHandler","isauth","status","initialize","unauthRoute","logout","route","authRedirectRoute","goTo","alert","login","cred","authValidRoute","auth","routeName","routes","params","isreplace","hash","raw","entries","pathname","loc","history","replaceState","href","pushState","click","goBack","back","hasRouterPersist","navigate","hasRouterPop","con","len","param","paramKey","scheme","url","URL","search","URLSearchParams","overlay","onrender","controller","_path","authenticate","ispersist","recur","isunload","softReload","catch","notused","promise","componentNames","sourceComponents","self","destroyPromise","authConfig","confAuth","confComponents","verify","valid","defineProperty","configurable","$b4278f383a0de3b3$var$StorageKit","$b4278f383a0de3b3$exports","listen","$bfaa99e298cb5daa$var$StorageKit","$8af65f58582b8d6c$var$stat","$8af65f58582b8d6c$var$set","Stat","$8af65f58582b8d6c$exports","table","$5808ac588a96f3a2$var$subscriber","$5808ac588a96f3a2$exports","$23b3adc172e1ff36$var$handler","$efbf8a48ea8e6237$var$Observer","logger","results","Handler","$23b3adc172e1ff36$exports","_handler","e1","_e","prom","execs","exec","info","$efbf8a48ea8e6237$exports","$bfaa99e298cb5daa$var$Cake","$3f74a4e4a0e5e9ab$exports","Options","formControl","isgroup","field","tbl","schema","type1","opts","unshift","toJSON","option","app","Components","name1","subscribeExternal","Models","plugin","Attributes","mk","MainMessageChannel","channel","MessageChannel","send","port2","postMessage","receive","port1","onmessage","isTrusted","Utils","scopeTrap","k","scopeNotifier","m","Router","Persistent","Cache","getSubscriber","h","hs","h1","_defineProperty","_globalScope","_universalScope","$universalScope","Hasher","name2","root1","_root","method","fire1","name3","getAttributes","attribute","isBroadcast","trace","addStaticMethod","$bfaa99e298cb5daa$exports"],"version":3,"file":"modern.js.map"}