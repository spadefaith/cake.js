{"mappings":"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","sources":["src/scripts/scope.js","src/scripts/storage.js","src/scripts/utils.js","src/scripts/env.js","src/scripts/extends.js","src/scripts/polyfill.js","src/scripts/template-extend.js","src/scripts/plugin.js","src/scripts/templating.js","src/scripts/storage/router-storage.js","src/scripts/attrib/utils.js","src/scripts/attrib/data-attr.js","src/scripts/attrib/data-bind.js","src/scripts/attrib/data-class.js","src/scripts/attrib/data-for-update.js","src/scripts/piece.js","src/scripts/attrib/data-for.js","src/scripts/storage/components-store.js","src/scripts/attrib/data-if.js","src/scripts/attrib/data-model.js","src/scripts/attrib/data-toggle.js","src/scripts/attrib/data-route.js","src/scripts/storage/AttribConfigStorage.js","src/scripts/attrib/data-switch.js","src/scripts/attributes.js","src/scripts/cake.js","src/scripts/animate.js","src/scripts/component.js","src/scripts/router.js","src/scripts/persist.js","src/scripts/storage/handler-stat.js","src/scripts/storage/subscriber.js","src/scripts/storage/handler.js","src/scripts/observer.js","src/scripts/form.js","src/app.js"],"sourcesContent":["const StorageKit = require('./storage')();\nmodule.exports = function(dependency){\n    // const StorageKit = dependency.StorageKit;\n    const _hooks = {};\n    class Scope {\n        constructor(name){\n\n            this.name = name;\n\n      \n\n            this.reactiveData = {};\n\n            this.notify = [];\n\n            this.install(this.name);\n\n            this.pKeys = {};\n\n            this.sanitize = function(data) {\n                const map = {\n                    '&': '&amp;',\n                    '<': '&lt;',\n                    '>': '&gt;',\n                    '\"': '&quot;',\n                    \"'\": '&#x27;',\n                    \"/\": '&#x2F;',\n                };\n                const reg = /[&<>\"'/]/ig;\n                if (typeof data == 'string'){\n                    return data.replace(reg, (match)=>(map[match] || \"\"));\n                } else {\n                    return data;\n                };\n            };\n        }\n        registerNotifier(fn){\n            this.notify.push(fn);\n        }\n        install(){\n            this.session = new StorageKit({\n                child:'object',\n                storage:'session',\n                name:`_cake_${this.name}_cf`,\n            });\n            // console.log(this.name, this.session);\n            // this.memory = new StorageKit({\n            //     child:'object',\n            //     storage:'object',\n            //     name:`_cake_${this.name}_cf`,\n            // });\n        }\n        notifier(component, obj){\n            //called by usually form input;\n            //reactive input;\n            // const {value, bind} = obj;\n            const value = obj.value;\n            const bind = obj.bind;\n            if (!this.reactiveData[component]){\n                this.reactiveData[component] = {};\n            };\n            this.reactiveData[component][bind] = value;\n\n            return this.set(bind, value);\n\n            // console.log(this.reactiveData[component]);\n        }\n\n\n        getInputData(type='json', _component){\n            let component = _component || this.name;\n\n            // console.log(this.reactiveData);\n\n            let data = JSON.parse(JSON.stringify(this.reactiveData[component]));\n            //reset the reactiveData when after get;\n\n            for (let key in data){\n                let value = data[key];\n                data[key] = this.sanitize(value);\n            };\n\n            if (type == 'json'){\n                return data;\n            } else if (type == 'formdata'){\n                const formData = new FormData;\n                for (let key in data){\n                    let value = data[key];\n\n                    formData.append(key, value);\n                };\n                return formData;\n            };\n        }\n        //a change to get notified when the data of other component is changed;\n        hook(component, bind, callback){\n\n            \n            if (!_hooks[component]){\n                _hooks[component] = {};\n            };\n            if (!_hooks[component][bind]){\n                //callbacks;\n                _hooks[component][bind] = []\n            };\n            _hooks[component][bind].push(callback);\n\n\n            // console.log(component, bind, callback, _hooks);\n        }\n        get(key, quick=false){\n\n            let pkey = this.pKeys[key];\n            // if(this.name == 'globalScope'){\n            //     // console.trace();\n            //     // console.log(106, pkey,key,quick,this.pKeys,pkey)\n            //     console.log(112,this.memory, quick);\n            //     // console.log(113,this.memory.get('key',true));\n            // }\n            // if(!pkey){\n            //     if(quick){\n            //         return `${key} is not found`;\n            //     } else {\n            //         return Promise.reject(`${key} is not found`);\n            //     }\n            // }\n            if (quick){\n                return this.session.get(key, true);\n            } else {\n                return this.session.get(key);\n            };\n        }\n\n        set(key, value){\n            let pkey = `${this.name}-${key}`;\n            let notify = this.notify;\n            let name = this.name;\n            let prevValue = null;\n\n            this.pKeys[key] = pkey;\n\n            return new Promise(async (res, rej)=>{\n                // prevValue = await this.get(key, true);\n                // if(key == 'color'){\n                //     console.log(118,key, prevValue, value);\n                // }\n                if (key != 'password'){\n                    this.session.createOrUpdate(key, value);\n                };\n                res();\n            }).then(async ()=>{\n                // await this.memory.createOrUpdate(key, value);\n\n\n                // if (this.name == 'globalScope'){\n\n                //     console.log(137,this.memory);\n                // };\n\n\n                // console.log(this.memory);\n                // if(key == 'color'){\n                //     console.log(139, this.memory.getAll());\n                // }\n\n                //custom callback for other component;\n\n\n                //callback for html attributes;\n\n                // console.log(notify)\n\n                return Promise.all(notify.map(cb=>{\n                    return cb(key, value, prevValue, name).then(()=>{\n                        // console.log('finish notified in scope');\n\n\n                        const hooks = _hooks[this.name];\n\n                \n                        if (hooks){\n                            const callbacks = hooks[key];\n                            if (callbacks){\n                                callbacks.forEach(cb=>{\n                                    cb(value);\n                                });\n                            };\n                        };\n                    });\n                }));\n            });\n        }\n\n        removeCache(key){\n            return this.session.remove(key);\n        }\n    }\n    \n    return Scope;\n\n}\n\n\n// module.exports = function(dependency){\n//     const StorageKit = dependency.StorageKit;\n\n//     function Scope(parent, options){\n//         this.pKey = options.pKey || '$scope';\n//         this.temp = {};\n//         this.trap = options.trap;\n//         this.notify = [];\n//         this.parent = parent;\n//         this._clone = {};\n//         this._cloneAsync = {};\n//         this.whitelist = ['extend', 'set', 'get'];\n\n//         this.install();\n//     };\n    \n//     Scope.prototype.registerNotifier = function(fn){\n//         this.notify.push(fn);\n//     };\n    \n//     Scope.prototype.notifier = function(obj){\n//         // console.log(obj);\n//         Cake.$scope[obj.bind] = obj.value;\n//     };\n\n//     Scope.prototype.method = function(){\n//         let temp = this.temp;\n//         let trap = this.trap;\n//         let notify = this.notify;\n//         let _this = this.parent;\n//         let whitelist = this.whitelist;\n//         let cloneAsync = this._cloneAsync;\n        \n//         return {\n//             update(keys, fn){\n//                 if (!keys.length) return;\n//                 for (let k = 0; k < keys.length; k++){\n//                     let key = keys[k];\n//                     fn(key);\n//                 };\n//             },\n//             defineProperty(key, cloned){\n//                 Object.defineProperty(temp, key, {\n//                     configurable:true,\n//                     get(){\n//                         let t = trap.bind(_this)(key) || false;\n//                         if (t){\n//                             return t;\n//                         };\n//                         return cloned[key];\n//                     },\n//                     set(newValue){\n//                         if (whitelist.includes(key) || cloneAsync[key]){\n//                         } else {\n//                             let prevValue = this[key];\n//                             for (let n = 0; n < notify.length; n++){\n//                                 let fn = notify[n];\n//                                 fn(key, newValue, prevValue);\n//                             };\n//                             cloned[key] = newValue;\n//                         }\n//                     },\n//                 });\n//             }\n//         };\n//     };\n\n//     Scope.prototype.install = function(){\n//         let {update, defineProperty} = this.method();\n//         let temp = this.temp;\n//         let cloned = this._clone;\n//         let clonedAsync = this._cloneAsync;\n//         Object.defineProperty(this.parent, this.pKey, {\n//             configurable:true,\n//             get(){\n//                 cloned = Object.assign(cloned, temp);\n//                 cloned = Object.assign(cloned, clonedAsync);\n\n//                 let keys = Object.keys(temp);\n//                 update(keys, function(key){\n//                     defineProperty(key, cloned);\n//                 });\n//                 return temp;\n//             },\n//         });\n//     };\n    \n//     Scope.prototype.watch = function(array){\n//         // console.log(array)\n//         // console.trace();\n//         if (!array) return;\n//         let {update, defineProperty} = this.method();\n//         let cloned = this._clone;\n//         update(array, function(key){\n//             defineProperty(key, cloned);\n//         });\n//         return true;\n//     };\n\n//     Scope.prototype.set = function(key, value, cloned){\n//         // console.log(96,key, value);\n//         if (this.whitelist.includes(key)){\n//             return;\n//         };\n\n//         // console.log(102,this._clone);\n\n//         let notify = this.notify || [];\n//         let prevValue = cloned[key];\n//         cloned[key] = value;\n\n//         Object.assign(this.temp, cloned);\n\n//         // console.log(109,notify);\n\n//         return Promise.all(notify.map(cb=>{\n//             return cb(key, value, prevValue);\n//         }));\n//     };\n    \n//     return Scope;\n\n// }\n\n\n\n","const Utils = require('./utils');\nmodule.exports = function(){\n    /**\n     * this class is use to unified the use of storage, in\n     * object for memory and storages for sessionStorage/localStorage;\n     */\n    // const Utils = dependency.Utils;\n    // const appName = deoendenvy.appName;\n\n    function typeOf(_obj){\n        if(!_obj){\n            return null;\n        };\n        return (_obj).constructor.name.toLowerCase();\n    };\n    function ObjectForEach (obj, fn){\n        for (let key in obj){\n            if (obj.hasOwnProperty(key)){\n                \n                fn(obj[key], key);\n            };\n        };\n    };\n    function ObjectMerge (obj, value, key){\n        obj = Object.assign(obj, {[key]:value});\n    };\n    function isNull(d){\n        return d === null;\n    };\n    function isUndefined(d){\n        return d === undefined;\n    };\n    function isArray(_obj){\n        return typeOf(_obj) == 'array';\n    };\n    function isObject(_obj){\n        return typeOf(_obj) == 'object';\n    };\n    var hasInArray = function(src, id){\n        var has = null;\n        for (var i = 0; i < src.length; i++){\n            var item = src[i];\n            if (typeOf(id) == 'object'){\n                var obj = id;\n                var key = Object.keys(id)[0];\n                var value = obj[key];\n                if (typeOf(item) == 'object'){\n                    var test = item[key] == value;\n                    if (test){\n                        has = i;\n                        break;\n                    };\n                };\n            } else if(typeOf(id) != 'array'){\n                var test = id == item;\n                if (test){\n                    has = i;\n                    break;\n                };\n            };\n        };\n        return has;\n    };\n    var hasInObject = function(src, id){\n        var key = null;\n        var type = typeOf(id); \n        if (type == 'object'){\n            var _key = Object.keys(id)[0];\n            if (src[key] != undefined && src[key] == id[_key]){\n                key = _key;\n            };\n        } else if(type == 'string') {\n            key = id;\n        };\n        return key;\n    };\n    var hasItem = function(src, id){\n        var has = null;\n        if (typeOf(src) == 'array'){\n            has = hasInArray(src, id);\n        } else if (typeOf(src) == 'object'){\n            has = hasInObject(src, id);\n        };\n        return has;\n    };\n    var STORAGE = class{\n        constructor(type, name, child){\n            this.type = type;\n            this.name = `${Utils.instanceID()}-${name}`;\n            this.child = child;\n            this.cache = {};\n            if (typeOf(this.child) == 'string'){\n                this.child = child=='array'?[]:child=='object'?{}:false;\n            };\n        }\n        init(save){\n            if (this[this.type]){\n                this[this.type](save);\n                return true;\n            };\n            return false;\n        }\n        open(){\n            if (this.type == 'session'){\n                var decoded = JSON.parse(sessionStorage[this.name]);\n                // if (this.name == '_cake_persistent'){\n                //     console.log(2503,decoded);\n                // };\n                return decoded[this.name];\n            } else if(this.type == 'local'){\n                var decoded = JSON.parse(localStorage[this.name]);\n                return decoded[this.name];\n            } else {\n                // console.log(119,this.type,this.cache);\n                return this.cache[this.name];\n            };\n        }\n        close(storage){\n            this.child = storage;\n            this.recache();\n            // console.log(94,this.name, storage);\n            return this.init(true);\n        }\n        recache(){\n            this.cache[this.name] = this.child;\n        }\n        create(){\n            // console.log(93, this.name, this.cache);\n            this.cache[this.name] = this.child;\n            \n        }\n        array(){\n            this.create();\n        }\n        object(issave){\n            this.create();\n            // console.log(120,this.type,this.cache);\n            // console.trace();\n        }\n        session(save){\n            if(!save){\n                this.recache();\n            };\n            try{\n                if (!sessionStorage[this.name] && !save){\n                    sessionStorage.setItem(this.name, JSON.stringify(this.cache));\n                } else if (save){\n                    sessionStorage.setItem(this.name, JSON.stringify(this.cache));\n                } else {\n\n                };\n            } catch(err){\n                this.recache();\n            };\n        }\n        local(save){\n            // this.verifyLocalStorage();\n            if(!save){\n                this.recache();\n            };\n            try{\n                if (!localStorage[this.name] && !save){\n                    localStorage.setItem(this.name, JSON.stringify(this.cache));\n                } else if (save){\n                    localStorage.setItem(this.name, JSON.stringify(this.cache));\n                } else {\n\n                };\n            } catch(err){\n                this.recache();\n            };\n        }\n        // verifyLocalStorage(){\n        //     if(!sessionStorage.reset){\n        //         sessionStorage.setItem('reset', false);\n        //         localStorage.clear();\n        //     };\n        // }\n    };\n    var methods = {\n        create:function(storage, data){\n\n            if(isArray(storage)){\n                let unique = new Set(storage);\n                if (typeOf(data) == 'array'){\n                    data.forEach(i=>{\n                        unique.add(i);\n                    });\n                } else {\n                    unique.add(data)\n                };\n                storage = Array.from(unique)\n            } else if (isObject(storage)){\n                if (isObject(data)){\n                    ObjectForEach(data, function(value, key){\n                        storage[key] = value;\n                    });\n                } else {\n                    storage[data] = data;\n                };\n            };\n\n            return storage;\n        },\n        createOrUpdate:function(storage, data){\n            var has = hasItem(storage, data);\n            if (typeOf(storage) == 'array'){\n                if (!isNull(has)){\n                    storage[has] = data;\n                } else {\n                   storage.includes(data);\n                }\n            } else if (typeOf(storage) == 'object'){\n                if (isNull(has)){\n                    if (isObject(data)){\n                        ObjectForEach(data, function(value, key){\n                            ObjectMerge(storage, value, key);\n                        });\n                    } else {\n                        storage[data] = data;\n                    };\n                } else {\n                    storage[has] = data;\n                };\n            };\n            return storage;\n        },\n        remove:function(storage, id){\n            if (typeOf(id) == 'string'){\n                var has = hasItem(storage, id);\n                if (typeOf(storage) == 'object'){\n                    delete storage[has];\n                } else if (typeOf(storage) == 'array'){\n                    var arr = [];\n                    for (var i = 0; i < storage.length; i++){\n                        if (i != has){\n                            arr.push(storage[i]);\n                        } else {continue};\n                    };\n                    storage = arr;\n                };\n                return storage;\n            } else if (typeOf(id) == 'object'){\n                return Object.filter(storage, function(value, key){\n                    var test = id[key] != undefined && id[key] == value;\n                    return !test;\n                });\n            } else if (typeOf(id) == 'array'){\n                return Object.filter(storage, function(value, key){\n                    var test = id.contains(key);\n                    return !test;\n                });\n            };\n            if (isNull(has)){\n                return false;\n            };\n        },\n        get:function(storage,id){\n            var type = typeOf(id);\n            if (type == 'string'){\n                var has = hasItem(storage, id);\n\n                if (has == 0 || has){\n                    return storage[has];\n                };\n            } else if (type == 'object'){\n                return Object.filter(storage, function(value, key){\n                    var test = !isUndefined(id[key]) && id[key] == value;\n                    return test;\n                });\n            } else if (type == 'array'){\n                return Object.filter(storage, function(value, key){\n                    var test = id.contains(key);\n                    return test;\n                });\n            }\n            return null;\n        },\n        getNot:function(storage,id){\n            var type = typeOf(id);\n            if (type == 'string'){\n                return Object.filter(storage, function(value, key){\n                    var test = key != id;\n                    return test;\n                });\n            } else if (type == 'object'){\n                return Object.filter(storage, function(value, key){\n                    return Object.some(id,function(_value, _key){\n                        var test = _key == key && _value == value;\n\n                        return !test;\n                    })\n                });\n            } else if (type == 'array'){\n                return Object.filter(storage, function(value, key){\n                    var test = !id.contains(key);\n                    return test;\n                });\n            }\n            return null;\n        },\n        getAll:function(storage){\n            return storage;\n        },\n    };\n    var USB = class{\n        constructor(_obj){\n            this.name = _obj.name;\n            this.storageType = _obj.storage;\n            this.child = _obj.child || 'object';\n            try {\n                if (typeOf(this.child) == 'string'){\n                    this.child = this.child == 'array'?[]:this.child=='object'?{}:null;\n                };\n\n\n\n            } catch(err){\n                if (this.storageType == 'session'){\n                    sessionStorage.clear();\n                } else if (this.storageType == 'local'){\n                    localStorage.clear();\n                };\n\n                if (typeOf(this.child) == 'string'){\n                    this.child = this.child == 'array'?[]:this.child=='object'?{}:null;\n                };\n\n            };\n            if (!['array', 'object'].includes(typeOf(this.child))){\n                throw new Error('the child must be an object or array type.');\n            };\n\n\n            this.storage = new STORAGE(this.storageType, this.name, this.child);\n            this.storage.init();\n        }\n        has(id){\n            var storage = this.storage.open();\n            var has = hasItem(storage, id);\n            return isNull(has)?false:has;\n        }\n        get(id, quick){\n            if(quick){\n                var storage = this.storage.open();\n                \n                return methods.get(storage, id);\n            } else {\n                return new Promise((res, rej)=>{\n                    setTimeout(()=>{\n                        var storage = this.storage.open();\n                        res(storage);\n                    });\n                }).then(storage=>{\n                    // console.log(342, storage)\n                    return methods.get(storage, id);\n                });\n            }\n        }\n        getNot(id){\n            var storage = this.storage.open();\n            return methods.getNot(storage, id);\n        }\n        getAll(){\n            var storage = this.storage.open();\n            return Promise.resolve(storage);\n        }\n        update(id, update){\n            var storage = this.storage.open();\n            var has = hasItem(storage, id);\n            if (has == 0 || has){\n                storage = methods.createOrUpdate(storage, data);\n                return this.storage.close(storage);\n            };\n            return false;\n        }\n        createOrUpdate(data){\n            if (arguments.length > 1){\n                let key = arguments[0];\n                let value = arguments[1];\n                data = {[key]:value};\n            };\n            var storage = this.storage.open();\n            storage = methods.createOrUpdate(storage, data);\n            const close = this.storage.close(storage);\n            // console.log(377, storage);\n\n            return close;\n        }\n        create(data){\n            var storage = this.storage.open();\n            storage = methods.create(storage, data);\n\n\n            return this.storage.close(storage);\n        }\n        remove(id){\n            var storage = this.storage.open();\n            storage = methods.remove(storage, id);\n            return this.storage.close(storage);\n        }\n    };\n    return USB;\n};","var global = {};\nconst TYPES = {\n    typeof: function(ctx){\n        switch(true){\n            case typeof ctx == 'string': return 'string';\n            case typeof ctx == 'number': return 'number';\n            case ctx instanceof Array: return 'array';\n            case ctx instanceof Function: return 'function';\n            case ctx instanceof HTMLCollection: return 'htmlcollection';\n            case ctx instanceof NodeList: return 'htmlnodelist';\n            case ctx instanceof Element: return 'domlement';\n            case ctx instanceof Object: return 'object';\n        };\n    },\n    isArray:function(ctx){\n        return this.typeof(ctx) == 'array';\n    },\n    isObject:function(ctx){\n        return this.typeof(ctx) == 'object';\n    },\n    isNumber:function(ctx){\n        return this.typeof(ctx) == 'number';\n    },\n    isString:function(ctx){\n        return this.typeof(ctx) == 'string';\n    },\n    isHTMLCollection:function(ctx){\n        return this.typeof(ctx) == 'htmlcollection';\n    },\n    isNodeList:function(ctx){\n        return this.typeof(ctx) == 'htmlnodelist';\n    },\n    isElement:function(ctx){\n        return this.typeof(ctx) == 'domlement';\n    },\n    isFunction:function(ctx){\n        return this.typeof(ctx) == 'function';\n    },\n};\n\nconst LOOP = {\n    _each:function(ctx, fn, type){\n        \n        if (type == 'object'){\n            var i = 0;\n            for (var key in ctx){\n                if (ctx.hasOwnProperty(key)){\n                    fn({key, value:ctx[key]}, i);\n                    i = i + 1;\n                };\n            };\n        } else {\n            for (var a = 0; a < ctx.length; a++){\n                fn(ctx[a], a);\n            }\n        };\n    },\n    each:function(ctx, fn){\n        var type = TYPES.isArray(ctx) || ctx.length ? 'array': 'object';\n        this._each(ctx,  function(obj, index){\n            fn(obj, index);\n        },type);\n    },\n    map:function(ctx, fn){\n        var type = TYPES.isArray(ctx) || ctx.length ? 'array': 'object';\n        var st = ctx.length &&  type == 'array'?[]:{};\n        this._each(ctx, function(obj, index){\n            var r = fn(obj, index);\n            if (type == 'object'){\n                st[r.key] = r.value;\n            } else {\n                st.push(r)\n            };\n        }, type);\n        return st;\n    },\n    reduce: function(ctx, accu, fn){\n        var type = TYPES.typeof(ctx);\n        this._each(ctx, function(obj, index){\n            accu = fn(obj,accu, index);\n        }, type);\n        return accu;\n    },\n    filter:function(ctx, fn){\n        var type = TYPES.isArray(ctx) || ctx.length ? 'array': 'object';\n        var st = ctx.length && type == 'array'?[]:{};\n        this._each(ctx, function(obj, index){\n            var r = fn(obj, index);\n            if (r){\n                if (type == 'object'){\n                    st[obj.key] = obj.value;\n                } else {\n                    st.push(obj.value);\n                };\n            };\n        },type);\n        return st;\n    },\n};\n\nconst OBJECT = {\n    dictionary:function(obj,path){\n        if(path){\n            path = path.split('.');\n        };\n        for (let p = 0; p < path.length; p++){\n            let _p = path[p];\n            if(obj[_p]){\n                obj = obj[_p];\n            } else{\n                obj = null;\n                break;\n            };\n        };\n        return obj;\n    }\n};\n\nconst STRING = {\n    removeWhiteSpace(str){\n        return String(str).split(\" \").join(\"\");\n    },\n}\n\nfunction _log(){\n    console.log(...arguments);\n}\n_log.if = function(condition){\n    return condition ? function(){console.log(...arguments)} : ()=>{};\n}\n\nconst OTHERS = {\n    perf:function(fn){\n        console.time('test');\n        fn();\n        console.timeEnd('test');\n    },\n    logTest:function(a, ops, b){\n        try { a = JSON.parse(a)}catch(err){}\n        try { b = JSON.parse(b)}catch(err){}\n        switch (ops) {\n            case '==':{\n                return a == b;\n            };\n            case '!=':{\n                return a != b;\n            };\n            case '<':{\n                return a < b;\n            };\n            case '>':{\n                return a > b;\n            };\n            case '>=':{\n                return a >= b;\n            };\n            case '<=':{\n                return a <= b;\n            };\n        }\n    },\n    toUrlSearchParams:function(obj,istrim=true){\n        let searchParams = \"\";\n        for(let key in obj){\n            if(obj.hasOwnProperty(key)){\n                let val = obj[key];\n                if(val.toString().includes('Object')){\n                    val = JSON.stringify(val);\n                };\n                if(istrim && val){\n                    searchParams += `${encodeURI(key)}=${encodeURI(val)}&`;\n                } else {\n                    searchParams += `${encodeURI(key)}=${encodeURI(val)}&`;\n                };\n            };\n        };\n        return searchParams.slice(0, searchParams.length - 1);\n    },\n    sanitize:function(string, exclude=[]){\n        if(typeof string != 'string'){\n            return string;\n        };\n        // let map = {\n        //     '&': '&amp;',\n        //     '<': '&lt;',\n        //     '>': '&gt;',\n        //     '\"': '&quot;',\n        //     \"'\": '&#x27;',\n        //     \"/\": '&#x2F;',\n        // };\n        // map = Object.keys(map).reduce((accu, key)=>{\n        //     if(!exclude.includes(key)){\n        //         accu[key] = map[key];\n        //     };\n        //     return accu;\n        // },{});\n   \n        // const reg = /[&<>\"'/]/ig;\n        // return string.replace(reg, (match)=>{\n        //     return map[match] || match;\n        // });\n        // return decodeURIComponent(string.replace(/[^a-z0-9áéíóúñü \\.,_-]/gim,\"\"));\n        return decodeURIComponent(string.replace(/<.*>/, \"\"));\n    },\n    toFormData:function(form, options={}){\n        //trim, json, skipsanitize, sanitize = boolean\n\n        const controls = [];\n        const textareas = form.querySelectorAll('TEXTAREA');\n        const inputs = form.querySelectorAll('INPUT');\n        const selects = form.querySelectorAll('SELECT');\n        \n\n        function loop(arr, cont, sort){\n            let files = [];\n            for (let i = 0; i < arr.length; i++){\n                let test = true;\n                \n                try {\n                    test = arr[i].closest('.cake-template');\n                } catch(err){};\n                try {\n                    if(!test){\n                        test = arr[i].classList.includes('cake-template');\n                    };\n                } catch(err){};\n                if(test){} else {\n                    if(arr[i].getAttribute('type') == 'file'){\n                        files.push(arr[i]);\n                    } else {\n                        cont.push(arr[i]);\n                    }\n                };\n            };\n            if(files.length){\n                files.forEach(item=>{\n                    cont.push(item);\n                });\n                files = [];\n            };\n        };\n\n        loop(textareas, controls);\n        loop(selects, controls);\n        loop(inputs, controls, true);\n\n        let o = {};\n\n        for (let i = 0; i < controls.length; i++){\n            let control = controls[i];\n            let key = control.name || control.id;\n\n\n            if(key && [\"{{\",\"((\",\"[[\",\"<<\",\"%%\",\"&&\"].includes(key)){\n\n            } else {\n                let type;\n                let element = form[key];\n\n                \n                if(element){\n\n                    if(element.nodeType){\n\n                    } else if(element.length){\n                        for (let i = 0; i < element.length; i++){\n                            let el =  element[i];\n                            if(el.nodeType == 1){\n                                let test = el.closest('.cake-template');\n                                if(test){\n\n                                } else {\n                                    element = el;\n                                    break;\n                                };\n                            };\n                        };     \n                    };\n\n                    const tag = element.tagName;\n                    \n                    if (tag == 'SELECT'){\n                        value = element.value\n                    }  else if(tag == 'INPUT' && element.getAttribute('type') == 'checkbox'){\n                        value = element.checked;\n                    } else if(tag == 'INPUT' && element.getAttribute('type') == 'file'){\n                        value = element.files;\n                    } else {\n                        if(options.sanitize == false){\n                            value = element.value;\n                        } else {\n                            value = this.sanitize(element.value,options.skipsanitize);\n                        }\n                    };\n                    \n                    if(options.json){\n                        if(options.trim){\n                            if(value != \"\"){\n                                o[key] = value;\n                            };\n                        } else {\n                            o[key] = value;\n                        }; \n                    } else {\n                        o[key] = value;\n                    }\n    \n                };\n            };\n        };\n        \n\n        if(options.json){\n            return o;\n        } else {\n            let fd = new FormData();\n            for (let key in o){\n                if (o.hasOwnProperty(key)){\n                    let value = o[key];\n                    \n                    if(value.constructor.name == \"FileList\"){\n                        LOOP.each(value, function(item, index){\n                            fd.append(key, item, item.name);\n                        });\n                    } else {\n                        fd.append(key, value);\n                    };\n                };\n            };\n            return fd;\n        };\n    },\n    splitBySpace:function(string, fn){\n        if(string){\n            string = string.split(\" \");\n            for (let i = 0; i < string.length; i++){\n                fn(string[i]);\n            };\n        }\n    },\n    toArray(arrayLike){\n        let a = [];\n        if(!arrayLike.length){\n            return a;\n        };\n        for (let i = 0; i < arrayLike.length; i++){\n            a.push(arrayLike[i]);\n        };\n        return a;\n    },\n    timeOut(fn, time=1){\n        setTimeout(()=>{\n            fn();\n        }, time);\n    },\n    instanceID(){\n        //to have unique identifier every web app using this, in sessionStorage or localStorage;\n        return location.origin;\n    },\n    recurse(array, callback){\n        return new Promise((res, rej)=>{\n            try {\n                let l = array.length;\n                let index = 0;\n                const rec = (()=>{\n                    if(l > index){\n                        callback(array[index]);\n                        index += 1;\n                        rec();\n                    } else {\n                        res();\n                    };\n                });rec();\n            } catch(err){\n                rej(err.message);\n            };\n        });\n    },\n    browser(){\n        // Return cached result if avalible, else get result then cache it.\n\n\n        if (window._browser)\n        return window._browser;\n        // Opera 8.0+\n        var isOpera = (!!window.opr && !!opr.addons) || !!window.opera || navigator.userAgent.indexOf(' OPR/') >= 0;\n        // Firefox 1.0+\n        var isFirefox = typeof InstallTrigger !== 'undefined';\n        // Safari 3.0+ \"[object HTMLElementConstructor]\" \n        var isSafari = /constructor/i.test(window.HTMLElement) || (function (p) { return p.toString() === \"[object SafariRemoteNotification]\"; })(!window['safari'] || safari.pushNotification);\n        // Internet Explorer 6-11\n        var isIE = /*@cc_on!@*/false || !!document.documentMode;\n        // Edge 20+\n        var isEdge = !isIE && !!window.StyleMedia;\n        // Chrome 1+\n        var isChrome = !!window.chrome  || !!window.cordova;\n        // Blink engine detection\n        var isBlink = (isChrome || isOpera) && !!window.CSS;\n\n        console.log(394,isChrome);\n\n        return window._browser =\n            isOpera ? 'Opera' :\n            isFirefox ? 'Firefox' :\n            isSafari ? 'Safari' :\n            isChrome ? 'Chrome' :\n            isIE ? 'IE' :\n            isEdge ? 'Edge' :\n            isBlink ? 'Blink' :\n            \"Don't know\";\n    },\n    isOpera(){\n        return this.browser() == 'Opera';\n    },\n    isFirefox(){\n        return this.browser() == 'Firefox';\n    },\n    isSafari(){\n        return this.browser() == 'Safari';\n    },\n    isChrome(){\n        return this.browser() == 'Chrome';\n    },\n    isIE(){\n        return this.browser() == 'IE';\n    },\n    isEdge(){\n        return this.browser() == 'Edge';\n    },\n    isBlink(){\n        return this.browser() == 'Blink';\n    },\n    device(){\n        if(navigator.userAgent.includes('Android')){\n            return 'android';\n        } else if(/iPhone|iPad|iPod/i.test(navigator.userAgent)){\n            return 'IOS'\n        } else {\n            return 'desktop';\n        };\n    },\n    isAndroid(){\n        return this.device() == 'android';\n    },\n    isIOS(){\n        return this.device() == 'ios';\n    },\n    isDesktop(){\n        return this.device() == 'desktop';\n    },\n    escapeRegExp(text) {\n        return text.replace(/[-[\\]{}()*+?.,\\\\^$|#\\s]/g, '\\\\$&');\n    },\n    log:_log,\n};\n\nconst ARRAY = {\n    unique:function(arr, prop){\n        if(Set && TYPES.isArray(arr)){\n            return [...new Set(arr)];\n        } else {\n            let a = {};\n            Loop.each(arr, function(item, index){\n                if(prop && TYPES.isObject(item)){\n                    let p = OBJECT.dictionary(item, prop);\n                    if(p){\n                        a[p] = true;\n                    };\n                } else {\n                    a[item] = true;\n                };\n            });\n            return Object.keys(a);\n        };\n    }\n}\n\ntry {\n    global.UTILS = {...LOOP, ...TYPES, ...OTHERS, ...STRING,...ARRAY};\n} catch (err){\n    global.UTILS = {};\n\n    var iter = LOOP.each;\n    iter(LOOP, function(key, value){\n        global.UTILS[key] = value;\n    });\n    iter(TYPES, function(key, value){\n        global.UTILS[key] = value;\n    });\n    iter(OTHERS, function(key, value){\n        global.UTILS[key] = value;\n    });\n    iter(STRING, function(key, value){\n        global.UTILS[key] = value;\n    });\n};\n\nmodule.exports = global.UTILS;",";(function(global){\n    global.env = {\n        destructure:true,\n    };\n    const env = global.env;\n    // try {let {a} = {a:true};} catch(err){env.destructure = false};\n    Promise.prototype.ObjectType = 'Promise';\n})(window);\n\n\n","(function(global){\n    HTMLCollection.prototype.toArray = function(){\n        let b = [];\n        for (let a = 0; a < this.length ;a++){\n            b[a] = this[a];\n        }\n    \n        return b;\n    };\n    NodeList.prototype.toArray = function(){\n        \n        let b = [];\n        let index = -1;\n        let length = this.length;\n        while(++index < length){\n            b[index] = this[index];\n        };\n        // console.trace();\n        // console.log(b);\n        return b;\n    };\n    Object.cache = Object.create(null);\n\n    Object.caching = (name)=>{\n        const obj = Object.cache;\n        if(!obj[name]){\n            obj[name] = {};\n        };\n\n        return {\n            set(key, value){\n                obj[name][key] = value;\n                return true;\n            },\n            get(key){\n                return obj[name][key];\n            },\n        };\n    };\n    \n    String.prototype.toHyphen = function(){\n        let _StringCache = Object.cache;\n        let cvt = null;\n        let str = this;\n\n        if (!_StringCache.toHyphen){\n            _StringCache.toHyphen = {};\n        };\n        if (_StringCache[str]){\n            cvt = _StringCache[str];\n        };\n\n        if (cvt != undefined){\n            return cvt;\n        };\n        let splitted = str.split('');\n        // console.log(splitted)\n        let ss = \"\", i = -1;\n        while (++i < splitted.length){\n            let s = splitted[i];\n            switch(i){\n                case 0:{\n                    ss += s.toLowerCase();\n                } break;\n                default:{\n                    s.charCodeAt() < 91 && (ss += '-');\n                    ss += s.toLowerCase();\n                }\n            }\n        };\n        _StringCache[str] = ss;\n        cvt = ss;\n\n        \n        return cvt;\n    };\n\n    String.prototype.toProper = function(){\n        let str = this;\n        let cache = Object.caching('toProper').get(str);\n        if(cache){\n            return cache;\n        } else {\n            let first = str.substring(0,1);\n            let rest = str.slice(1);\n            let proper = `${first.toUpperCase()}${rest}`;\n            Object.caching('toProper').set(str, proper);\n            return proper;\n        };\n    };\n    String.prototype.removeSpace = function(){\n        return this.split(\" \").join(\"\");\n    };\n    \n    String.prototype.toCamelCase = function(){\n        let str = this.toLowerCase();\n        let _StringCache = Object.cache;\n\n        let cvt =null;\n\n        if(!_StringCache.toCamel){\n            _StringCache.toCamel = {};\n        };\n        _StringCache = _StringCache.toCamel;\n\n        if(_StringCache[str]){\n            return _StringCache[str];\n        } else {\n            let split = str.split('-');\n            if (split.length == 1){\n                return str;\n            };\n            let join = \"\";\n            let i = -1;\n            let length = split.length;\n            while (++i < length){\n                let str = split[i];\n                switch(i){\n                    case 0:{join += str};break\n                    default:{\n                        let first = str.substring(0,1).toUpperCase();;\n                        let second = str.substring(1);\n                        join += (first+second);\n                    } break;\n                }\n            };\n            _StringCache[str] = join;\n            return join;\n        };\n    };\n    \n    HTMLElement.prototype.querySelectorIncluded = function(selector, attr, val){\n        let q = this.querySelector(selector);\n        return (q)?q:(()=>{\n            switch (true){\n                case !attr && !val:{\n                    let qu = this.closest(selector);\n                    if (qu == this){\n                        q = qu;\n                    };\n                };\n                break;\n                case !!attr && !!val:{\n                    \n                    q = this.getAttribute(attr) == val?this:null;\n                };\n                break;\n                case !!attr && !val:{\n                    q = this.getAttribute(attr)?this:null;\n                }\n                break;\n            };\n            return q;\n        })();\n    };\n\n\n    \n    HTMLElement.prototype.querySelectorAllIncluded = function(selector, attr, val){\n        let q;\n        try {\n            q = this.querySelectorAll(selector);\n            q && (q = q.toArray());\n        } catch(err){\n            q = [];\n        };\n\n        if(selector){\n            q = this.querySelectorAll(selector).toArray();\n        } else if (attr && val){\n            q = this.querySelectorAll(`[${attr}=${val}]`).toArray();\n            if(this.dataset[attr] == val){\n                q.push(this);\n            };\n        } else if (attr && !val){\n            q = this.querySelectorAll(`[${attr}]`).toArray();\n            if(!!this.dataset[attr]){\n                q.push(this);\n            };\n        };\n\n        switch (true){\n            case !attr && !val:{\n                let qu = this.closest(selector);\n                qu == this && q.push(qu);\n            };\n            break;\n            case attr && val:{\n                // this.getAttribute(attr) == val && q.push(this);\n            };\n            break;\n            case attr && !val:{\n                \n                // this.getAttribute(attr) && q.push(this);\n            }\n            break;\n        };\n        return q;\n    };\n    \n    HTMLDocument.prototype.querySelectorIncluded = function(selector){\n        return this.querySelector(selector);\n    };\n    \n    HTMLDocument.prototype.querySelectorAllIncluded = function(selector){\n        return this.querySelectorAll(selector);\n    };\n    \n    \n    \n    Array.prototype.toggler = function(dataName, activeClass){\n        for (let t = 0; t < this.length; t++){\n            let node = this[t];\n            let name = node.dataset.name;\n            if (name == dataName){\n                node.classList.toggle(activeClass);\n            } else {\n                if (node.classList.contains(activeClass)){\n                    node.classList.toggle(activeClass);\n                };\n            };\n        };\n    };\n    \n    HTMLElement.prototype.Ref = function(){\n        let n = '_cakes_storage';\n        !this[n] && (this._cakes_storage = {})\n        let storage = this[n];\n        return {\n            set(key, value){\n                storage[key] = value;\n            },\n            get(key){\n                return storage[key];\n            },\n            getAll(key){\n                return storage;\n            },\n            remove(key){\n                delete storage[key];\n            }\n        }\n    };\n\n    HTMLElement.prototype.replaceDataSrc = function(){\n        let srcs = this.querySelectorAllIncluded(null, 'data-src',null);\n        for (let s = 0; s < srcs.length; s++){\n            let el = srcs[s];\n            if(el.closest && el.closest('.cake-template')){} else {\n                el.setAttribute('src', el.dataset.src);\n                el.removeAttribute('data-src');\n            };\n        };\n    };\n\n    HTMLElement.prototype.unRequired = function(){\n        let srcs = this.querySelectorAll('.cake-template [required]');\n        for (let i = 0; i < srcs.length; i++){\n            let el = srcs[i];\n            \n            if(el){\n                el.removeAttribute('required');\n            };\n        };\n\n    };\n\n\n    Object.keep = function(path, data){\n        let rawdirs = path.split(\".\");\n        let dirs = rawdirs.slice(1);\n        let isArray = data.constructor.name=='Array';\n        let ins = isArray?[]:{};\n\n        const has = function(obj, prop, value){\n            if(!obj[prop]){\n                obj[prop] = value==undefined?{}:value;\n            };\n            return obj[prop];\n        };\n\n        if(rawdirs[0]){\n            has(Object.cache, rawdirs[0], (dirs.length)?{}:data);\n        };\n\n        let orig = Object.cache[rawdirs[0]];\n\n        for (let i = 0; i < dirs.length; i++){\n            let dir = dirs[i];\n            let last = dirs.length -1 == i;\n        \n            if(last){\n                orig = has(orig, dir, ins);\n                if(isArray){\n                    orig = orig.concat(data);\n                } else {\n                    orig = Object.assign(orig, data);\n                };\n            } else {\n                orig = has(orig, dir, {});\n            };\n        };\n        return Object.cache[rawdirs[0]];\n    };\n    \n})(window);","const UTILS = require('./utils');\nconst self = window || {};\nmodule.exports = {\n  Set:function(data){\n    if(self.Set){\n      return new Set(data);\n    } else {\n      return UTILS.unique(data);\n    };\n  }\n}",";(function(){\n    customElements.define('sub-template',\n  class extends HTMLElement {\n    constructor() {\n      super();\n  \t}\n    connectedCallback(){\n        this.replace(this);\n    }\n    replace(subTemplate){\n        let ref = subTemplate.dataset.template;\n        let refEl = document.getElementsByName(ref);\n        \n        \n        if (refEl.length > 1){\n            console.error(`template with name ${ref} has more than one reference.`)\n            return ;\n        };\n        if (!refEl){\n            subTemplate.remove();\n            throw new Error(`${ref} is not found!`);\n\n        };\n        if (refEl[0]){\n            let temp = refEl[0];\n            if (temp.constructor.name == \"HTMLTemplateElement\"){\n                temp = temp.content.cloneNode(true).firstElementChild;\n                if (!temp) {return;};\n                let attrs = subTemplate.attributes;\n                for (let a = 0; a < attrs.length ;a++){\n                    let attr = attrs[a];\n                    if (attr.name != 'data-template'){\n                        temp.setAttribute(attr.name, attr.value);\n                    };\n                };\n                // console.log(temp);\n                subTemplate.replaceWith(temp);\n            } else {\n                throw new Error(`${ref} is not referred to a Template Element!`);\n            };\n        };\n    }\n});\nHTMLTemplateElement.prototype.replaceSubTemplate = function(el){\n    let subTemplates = el.getElementsByTagName('sub-template');\n    if (subTemplates){\n        subTemplates = subTemplates.toArray();\n        for (let s = 0; s < subTemplates.length; s++){\n            let subTemplate = subTemplates[s];\n            customElements.get('sub-template').prototype.replace(subTemplate);\n        };\n    };\n}\nHTMLTemplateElement.prototype.collectContent = function(){\n    let template = this;\n    let cf = null;\n    let temp =template.cloneNode(true);\n    let fr = document.createDocumentFragment();\n    let styles = temp.content.querySelector('style');\n    if (styles){\n        fr.appendChild(styles);\n    }\n    let others = [];\n    for (let o = 0; o < temp.content.children.length; o++){\n        let el = temp.content.children[0];\n        this.replaceSubTemplate(el);\n        others.push(el);\n    }\n    cf = {style:fr.children[0], others}\n    return cf; \n};\nHTMLTemplateElement.prototype.parseStyle = function(style){\n    if (!style) return false;\n    var styles = style.textContent.trim();\n    if (!styles.length) { return;}\n    let obj = {};\n\n    let sel = \"\";\n    let splitted = styles.split(\"}\");\n    for (let sp = 0; sp < splitted.length; sp++){\n        let item = splitted[sp];\n        let _sp1 = item.split(\"{\");\n        let sel = _sp1[0];\n        let style = _sp1[1];\n        // let [sel, style] = item.split(\"{\");\n        if(!!sel){\n            obj[sel.trim()] = (()=>{\n                let n = false;\n                let s = \"\";\n                let splitted = style.split(\"\");\n                for (let sp = 0; sp < splitted.length; sp++){\n                    let item = splitted[sp];\n                    if(item == \"\\n\"){\n                        n = true;\n                    } else if (item == \" \"){\n                        if(n){\n\n                        } else {\n                            s += item;\n                        };\n                    } else {\n                        n = false;\n                        s += item;\n                    };\n                };\n                return s;\n            })();\n        };\n    };\n\n\n    return obj;\n};\n\nHTMLTemplateElement.prototype.parseHTML = function(others){\n    if (others){\n        var parent = document.createElement('HTML');\n        for (let o = 0; o < others.length; o++){\n            let other = others[o];\n            parent.append(other);\n        };\n    };\n    return parent || false;\n};\n\nHTMLTemplateElement.prototype.getContent = function(isConvert){\n    let _collectedContent = this.collectContent();\n    // let {style, others} = this.collectContent();\n    let style = _collectedContent.style;\n    let others = _collectedContent.others;\n    \n    let styles = this.parseStyle(style);\n    let element = this.parseHTML(others);\n\n    \n    for (let selector in styles){\n        if (styles.hasOwnProperty(selector)){\n            // console.log(element.outerHTML)\n            let query = element.querySelectorAll(selector);\n            let css = styles[selector];\n            for (let q= 0; q < query.length; q++){\n                let item = query[q];\n                // console.log(item, css)\n                item.setAttribute('style', css);\n                // console.log(item);\n            };\n        }\n    };\n    element = (isConvert)?element.children.toArray():element.innerHTML;\n    return (element.length == 1)?element[0]:element;\n};\n})();","\nconst Utils = require('./utils');\nmodule.exports = (function(){\n    Object.caching('plugins').set('plugin', {});\n    return function(key, value){\n        if(Utils.isObject(key) && !value){\n            const plugins = Object.caching('plugins').get('plugin');\n            Object.caching('plugins').set('plugin', Object.assign(plugins, key));\n        } else if(Utils.isString(key) && value != undefined){\n            const plugins = Object.caching('plugins').get('plugin');\n            plugins[key] = value;\n            Object.caching('plugins').set('plugin', plugins);\n        } else if(Utils.isString(key) && value == undefined) {\n            return Object.caching('plugins').get('plugin')[key] || {};\n        };\n    };\n})();","const Utils = require('./utils');\n// escapeRegExp\n\nfunction Templating(options){\n    this.options = options;\n    this.tag = ((this.options && this.options.tag) || \"{{ }}\").split(\" \");\n    this.lefttag = Utils.escapeRegExp(this.tag[0]);\n    this.righttag = Utils.escapeRegExp(this.tag[1]); \n};\nTemplating.prototype._getTag = function(template){\n    //get the tag in < h1>;\n    try {\n        return template.match(new RegExp('(?<=<)|([^/s]+)(?=\\>)', 'g'))[2];\n    } catch(err){\n        throw new Error(`template of ${template} is empty.`);\n    }\n};\nTemplating.prototype._bindReplace = function(obj,string){\n    for (let key in obj){\n        if (obj.hasOwnProperty(key)){\n\n            let pattern = new RegExp(`${this.lefttag}${key}${this.righttag}`, 'g');\n            pattern && (string = string.replace(pattern, `${obj[key]}`));\n        };\n    };\n    return string;\n};\nTemplating.prototype.replaceString = function(obj, string){\n    return this._bindReplace(obj, string);\n}\nTemplating.prototype._toElement = function(template, tag){\n    let fr = document.createElement('template');\n    fr.innerHTML = template;\n    return fr.content.children[0];\n};\nTemplating.prototype.createElement = function(data,template,  isConvert){\n    // let template = this.template;\n    // let data = this.data;\n    // let isConvert = this.isConvert;\n\n\n    if (data){\n        if (data instanceof Array){\n            let isString = typeof template == 'string';\n            let tag = (isString)?this._getTag(template): template.tagName;\n            template = (isString)?template:template.outerHTML;\n\n            let els = [];\n            for (let d = 0; d < data.length; d++){\n                let dd = data[d];\n                let bindData = this._bindReplace(dd, template);\n\n                // console.log(42, dd, bindData);\n\n                let element = this._toElement(bindData, tag);\n                if (isConvert){\n                    element = element.outerHTML;\n                };\n                els.push(element);\n            };\n            return els;\n        } else if (data instanceof Object){\n            // console.log(template)\n            let isString = typeof template == 'string';\n            let tag = (isString)?this._getTag(template): template.tagName;\n            template = (isString)?template:template.outerHTML;\n\n\n            let bindData = this._bindReplace(data, template);\n\n            // console.log(60, this.tag);\n            // console.log(61, bindData);\n\n\n            let element = this._toElement(bindData, tag);\n            if (isConvert){\n                element = element.outerHTML;\n            };\n            return element;\n        }\n    } else {\n        let isString = typeof template == 'string';\n        let tag = (isString)?this._getTag(template): template.tagName;\n        return this._toElement(template, tag);\n    };\n};\nmodule.exports = Templating;","const routerStorage = {};\nmodule.exports = {\n    set:function(path, config){\n        let name = config.name;\n        config.path = path;\n        routerStorage[name] = config;\n\n        return true;\n    },\n    get:function(name){\n\n        return routerStorage[name];\n    },\n};","exports.getConfig = function(st, prop, newValue, prevValue, component){\n    /*\n        newValue is null, when emptying the scope;\n    */\n    if (newValue == null) {return []};\n    if (newValue == prevValue && type != 'bind'){ return [];};\n    return (()=>{\n        let ctx = [];\n        let s = st;\n        if (s && s.length){\n            for (let i = 0; i < s.length; i++){\n                let item = s[i];\n                // console.log(item.bind, prop, item);\n                if (item.bind == prop){\n                    // console.log(type, item);\n                    ctx.push({...item, component});\n                };\n            };\n        };\n        return ctx;\n    })();\n};\n\nexports.updateConfig = function(st, type, prop, newValue, prevValue, component, update,sel){\n    if (newValue == null) {return };\n    if (newValue == prevValue && type != 'bind'){ return };\n    // if(update.incrementedSels){\n    //     console.debug(121,sel, update);\n    // };\n    var st = (()=>{\n        let config = (st[component] && st[component][type]);\n        if(config && config.length){\n            let ctx = [];\n            for (let i = 0; i < config.length; i++){\n                let item = config[i];\n                let test = item.bind == prop && ((sel)?item.sel == sel:true);\n                if(test){\n                    Object.assign(item, update);\n                } else {\n\n                };\n            };\n            return ctx;\n        } else {\n            return [];\n        };\n    })();\n    return st;\n};\n\n\n\nexports.extendConfig = function(configs){\n    /**\n     * add config dynanucakky since\n     * every element has unique identifier.\n     * everytime it is created either in swith or forUpdate;\n     */\n    const cloned = [];\n\n    for (let i = 0; i < configs.length; i++){\n        const cl = {};\n        const item = configs[i];\n        for (let key in item){\n            cl[key] = item[key];\n        };\n        cloned.push(cl);\n    };\n\n    return cloned.reduce((accu, iter)=>{\n        // let {incrementedSels} = iter;\n        let incrementedSels = iter.incrementedSels;\n        if(incrementedSels && incrementedSels.length){\n            incrementedSels.forEach(ic=>{\n                let cloned = {...iter};\n                cloned.incrementedSel = ic;\n\n                accu.push(cloned);\n            });\n        } else {\n            accu.push(iter);\n        };\n        return accu;\n    }, []);\n};","const Utils = require('../utils');\nconst _utils = require('./utils');\nconst getConfig =_utils.getConfig\nconst updateConfig =_utils.updateConfig\nconst extendConfig =_utils.extendConfig\nmodule.exports = (async function(prop, newValue, prevValue, component, html){\n    html = html || document;\n    let st = this.storage.get(component, 'attr');\n    let configs = getConfig(st, prop, newValue, prevValue, component);\n    if (!configs.length) return;\n\n    // console.log(834, newValue);\n    // if(!(newValue).toString().includes('Object')){\n    //     console.log(852, configs);\n    // };\n    configs = extendConfig(configs);\n    // if(!(newValue).toString().includes('Object')){\n    //     console.table(854, configs);\n    // };\n\n    return Promise.all(configs.map(config=>{\n        let  data;\n        // let {hasNegate, bind, testVal,attr, ops, sel, attrkey, attrvalue, incrementedSel,incrementId} = config;\n\n        let hasNegate = config.hasNegate;\n        let bind = config.bind;\n        let testVal = config.testVal;\n        let attr = config.attr;\n        let ops = config.ops;\n        let sel = config.sel;\n        let attrkey = config.attrkey;\n        let attrvalue = config.attrvalue;\n        let incrementedSel = config.incrementedSel;\n        let incrementId = config.incrementId;\n\n        bind = Utils.removeWhiteSpace(bind);\n        attr = Utils.removeWhiteSpace(attr);\n\n        incrementedSel = newValue.incrementedSel || incrementedSel;\n\n        // console.log(850,incrementedSel);\n\n        if(!!newValue.incrementedSel){\n            // console.log(229, newValue, bind);\n            data = newValue[bind];\n        } else {\n            data = newValue;\n        };\n\n        \n        // console.log(39, data);\n        \n        if (prop == bind){\n\n            let els = html.querySelectorAll(`[data-attr=${incrementedSel || sel}]:not(.cake-template)`);\n            // console.log(839, els, `[data-attr=${incrementedSel || sel}]:not(.cake-template)`);\n            // console.log(865,sel,incrementedSel,els);\n\n            // console.log(572, prop, bind, data, sel, els);\n            \n            return Promise.all([...els].map(el=>{\n                // console.log(869,el);\n                \n                let test = false;\n                if (ops){\n                    test = Utils.logTest(data, ops, testVal);\n                    hasNegate && (test = !test);\n                } else if (hasNegate){\n                    test = !data;\n                } else {\n                    test = !!data;\n                };\n\n                // console.log(el, prop, data);\n                \n\n                \n                if (test){\n                    if(attrvalue){\n                        el.setAttribute(attrkey, attrvalue);\n                    } else {\n                        el.setAttribute(attrkey);\n                    };\n                } else {\n                    el.removeAttribute(attrkey);\n                };\n            }));\n        };\n\n        newValue = null;\n    }));\n});","const Utils = require('../utils');\nconst _utils = require('./utils');\nconst getConfig =_utils.getConfig\nconst updateConfig =_utils.updateConfig\nconst extendConfig =_utils.extendConfig\n\n\nmodule.exports = (async function(prop, newValue, prevValue, component, html){\n    html = html || document;\n    let st = this.storage.get(component, 'bind');\n    let configs = getConfig(st,prop, newValue, prevValue, component);\n\n\n    if (!configs.length) return;\n\n\n    configs = extendConfig(configs);\n\n\n    for (let c = 0; c < configs.length; c++){\n        let config = configs[c], data;\n        // let {attr, bind, sel, incrementedSel,incrementId, incrementedSels} = config;\n\n        let attr = config.attr;\n        let bind = config.bind;\n        let sel = config.sel;\n        let incrementedSel = config.incrementedSel;\n        let incrementId = config.incrementId;\n        let incrementedSels = config.incrementedSels;\n\n        \n        incrementedSel = newValue.incrementedSel || incrementedSel;\n\n        \n\n\n        if(!!newValue.incrementedSel){\n            // console.log(229, newValue, bind);\n            data = newValue[bind];\n        } else {\n            data = newValue;\n        };\n        let attrHyphen = attr.toHyphen();\n        if (prop == bind){\n            let els = html.querySelectorAll(`[data-bind=${incrementedSel || sel}]`);\n            // console.log(incrementedSel, els);\n\n            for (let p = 0; p < els.length; p++){\n                let el = els[p];\n\n                \n                if (attr == 'class' || attr == 'className'){\n\n                    if (el.classList.length){\n                        // console.log(prevValue);\n                        Utils.splitBySpace(prevValue, function(cls){\n                            el.classList.remove(cls);\n                        });\n                        Utils.splitBySpace(data, function(cls){\n                            el.classList.add(cls);\n                        });\n                    } else {\n                        Utils.splitBySpace(data, function(cls){\n                            el.classList.add(cls);\n                        });\n                    };\n\n                } else {\n\n                    // if(prop == 'current_balance'){\n                    //     console.log(262, el, attrHyphen, data,)\n                    //     console.log(263, config.incrementedSel, newValue.incrementedSel);\n                    //     console.log(264, newValue, data);\n                    // };\n\n                    if(data != undefined || data != null){\n                        \n \n\n                        el.setAttribute(attrHyphen, data);\n                        el[attr] = data;\n                    };\n\n                };\n            };\n        };\n    };\n\n    newValue = null;\n});","const Utils = require('../utils');\nconst _utils = require('./utils');\nconst getConfig =_utils.getConfig\nconst updateConfig =_utils.updateConfig\nconst extendConfig =_utils.extendConfig\n\nmodule.exports = (async function(prop, newValue, prevValue, component, html){\n\n    // console.log(477,prop, newValue, component);\n\n    let st = this.storage.get(component, 'class');\n    html = html || document;\n    let configs = getConfig(st,prop, newValue, prevValue, component);\n\n    // console.log(478, configs);\n\n    if (!configs.length) return;\n\n    let cache = {};\n\n    configs = extendConfig(configs);\n\n    // console.log(731, configs);\n\n    for (let c = 0; c < configs.length; c++){\n        let config = configs[c], data;\n        // let {hasNegate, bind, testVal,className, ops, sel,  incrementedSel,incrementId} = config;\n\n        let hasNegate = config.hasNegate;\n        let bind = config.bind;\n        let testVal = config.testVal;\n        let className = config.className;\n        let ops = config.ops;\n        let sel = config.sel;\n        let incrementedSel = config.incrementedSel;\n        let incrementId = config.incrementId;\n\n        bind = Utils.removeWhiteSpace(bind);\n\n        incrementedSel = newValue.incrementedSel || incrementedSel;\n\n        if(!!newValue.incrementedSel){\n            // console.log(229, newValue, bind);\n            data = newValue[bind];\n        } else {\n            data = newValue;\n        };\n        \n        if (prop == bind){\n            if (!cache[incrementedSel || sel]){\n                cache[incrementedSel || sel] = html.querySelectorAll(`[data-class=${incrementedSel || sel}]:not(.cake-template)`);//just to convert iterable;\n            }\n            let els = cache[incrementedSel || sel];\n\n            // component == 'header1' && console.log(759, data,  component);\n\n            for (let p = 0; p < els.length; p++){\n                let el = els[p];\n                let test = false;\n                if (ops){\n                    test = Utils.logTest(data, ops, testVal);\n                    hasNegate && (test = !test);\n                } else if (hasNegate){\n                    // test = !data;\n                    test = data == testVal;\n                } else {\n                    test = !!data;\n                };\n\n                // component == 'header1' && console.log(503, {data}, {testVal}, {test}, {el}, {className});\n\n                if (test){\n                    // console.log('add ',className);\n                    Utils.splitBySpace(className, function(cls){\n                        // console.log(519, data,  ops, testVal, test);\n                        const classList = Utils.toArray(el.classList);\n                        if (!classList.includes(cls)){\n                           setTimeout(()=>{\n                                el.classList.add(cls);\n                           });\n                        };\n                    });\n                } else {\n                    // console.log('remove ',className);\n                    Utils.splitBySpace(className, function(cls){\n                        const classList = Utils.toArray(el.classList);\n\n                        if (classList.includes(cls)){\n                            setTimeout(()=>{\n                                el.classList.remove(cls);\n                            });\n                        };\n                    });\n\n                };\n            };\n        };\n    };\n\n    newValue = null;\n});","const Utils = require('../utils');\nconst Piece = require('../piece');\nconst Templating = require('../templating');\nconst Plugin = require('../plugin');\n\nconst _utils = require('./utils');\nconst getConfig =_utils.getConfig\nconst updateConfig =_utils.updateConfig\nconst extendConfig =_utils.extendConfig\n\n\nmodule.exports = (async function(prop, newValue, prevValue, component, html){\n    html = html || document;\n\n    let st = this.storage.get(component, 'forUpdate');\n\n    let configs = getConfig(st, prop, newValue, prevValue, component);\n    if (!configs.length) return;\n\n    let templating = new Templating(Plugin('templating'));\n    // console.log(configs)\n\n    // console.log(206, prop, newValue, component);\n\n\n    // console.log(23, this.sts);\n\n    const attrPayload = [];\n    for (let c = 0; c < configs.length; c++){\n        // let {bind, sel, iter, ins, targets} = configs[c];\n        let bind = configs[c].bind;\n        let sel = configs[c].sel;\n        let iter = configs[c].iter;\n        let ins = configs[c].ins;\n        let targets = configs[c].targets;\n        // let index = -1;\n\n        for (let o in newValue){\n            if (newValue.hasOwnProperty(o)){\n                let targets = document.querySelectorAll(`[data-for-update-bind=${o}]`);\n\n  \n\n                // console.log(467, targets);\n                // const row = newValue[o];\n                // index += 1;\n\n                for (let t = 0; t < targets.length; t++){\n                    \n                    let target = targets[t];\n                    let binded = target.dataset.forUpdateBind;\n\n         \n\n                    // console.log({binded})\n                    // console.log({target})\n\n                    if (!target.dataset.forTemplate){\n                        target.remove();\n                    } else {\n                        let template = target.cloneNode(true);\n                        template.style.removeProperty('display');\n                        template.classList.remove('cake-template');\n                        let dataForIteration = newValue[binded];\n\n     \n\n                        let i = -1; l = dataForIteration.length;\n                        while(++i < l){\n                            let item = dataForIteration[i];\n                            let index = i;\n                            // console.log(71, item, index, t, o);\n                            \n                            for (let lt = 0; lt < this.logicalType.length; lt++){\n                                let type = this.logicalType[lt];\n                                const logicalHtml = new Piece(target).querySelectorAllIncluded(`[data-${type}]`)\n     \n                                for (let l = 0; l < logicalHtml.length; l++){\n                                    const hit = logicalHtml[l];\n                                    // console.log(550, hit, hit.dataset[type]);\n                                    if (hit.dataset[type]){\n                                        let sel = hit.dataset[type];\n                                        let incrementedSel = `${sel}-${o}-${index}`;\n                                        // console.log(83, incrementedSel);\n                                        template.dataset[type] = incrementedSel;\n                                        let bind = this.getWatchItemsBySel(component,type,sel).bind;\n                                        if (bind.includes('.')){\n                                            let split = bind.split('.');\n                                            binded = split[0];\n                                            for (let key in item){\n                                                let value = item[key];\n                                                let _key = `${binded}.${key}`;\n                                                item[_key] = value;\n                                            };\n                                        };\n                                       \n                                        \n                                        \n                                        if (sel){\n                 \n                                            \n                                            attrPayload.push({_type:type, ...item, incrementedSel,sel, bind, incrementId:index, component});\n                                        };\n                                    };\n                                };\n                            };\n    \n                              \n                            let create = templating.createElement(item, template, false);\n\n                            create.classList.remove('cake-template');\n                            create.removeAttribute('data-for-template');\n                            target.insertAdjacentElement('beforebegin', create);\n                            if (target.parentElement.tagName == 'SELECT'){\n                                target.parentElement.selectedIndex = 0;\n                            };\n                        };\n                    };\n                };\n            };\n        };\n    };\n\n    newValue = null;\n\n    // console.log(attrPayload);\n    // console.log(185, attrPayload);\n    return Promise.all(attrPayload.map(payload=>{\n        // const {bind, _type, component, incrementedSel, sel} = payload;\n        const bind = payload.bind;\n        const _type = payload._type;\n        const component = payload.component;\n        const incrementedSel = payload.incrementedSel;\n        const sel = payload.sel;\n        const name = `notify${_type.toProper()}`;\n\n\n        // console.log(665, {incrementedSel});\n        updateConfig(_type, bind, payload, null, component, {incrementedSel}, sel);\n\n\n        return this[name](bind, payload, null,component);\n    })).then(()=>{\n        // console.log('finish setting attribute', component);\n    });\n});","const UTILS = require('./utils');\nfunction Piece(el){\n    this.el = Piece.toArray(el);\n};\nPiece.toArray = function(el){\n    let r = [];\n    switch(true){\n        case (el instanceof Array):{\n            r = el;\n        } break;\n        case (el.length && (el.tagName && el.tagName != 'FORM') && !(el instanceof Array)):{\n            for (let e = 0; e < el.length; e++){\n                r.push(el[e]);\n            };\n        } break;\n        case !(el instanceof Array):{\n            r = [el];\n        } break;\n    };\n    return r;\n};\nPiece.prototype.loop = function(callback){\n    try {\n        let i = -1, length = this.el.length;\n        while(++i < length){\n            let el = this.el[i];\n            callback(i, el);\n        };\n        return true;\n    } catch(err){\n        console.error(err);\n        return false;\n    };\n\n}\nPiece.prototype.getElements = function(){\n    return this.el;\n};\nPiece.prototype.getElement = function(index=0){\n    return this.el[index];\n};\nPiece.prototype.remove = function(){\n    let i = -1, length = this.el.length;\n    let fg = document.createDocumentFragment();\n    while(++i < length){\n        let el = this.el[i];\n        el  && (fg.appendChild(el));\n        // el  && el.remove();\n    };\n    fg = null;\n    return true;\n};\n\nPiece.prototype.unRequired = function(){\n\n    return this.loop(function(index, el){\n        el.unRequired();\n    });\n};\n\nPiece.prototype.replaceDataSrc = function(){\n\n    return this.loop(function(index, el){\n        el.replaceDataSrc();\n    });\n};\n\nPiece.cloneNode = function(el){\n    el = (el instanceof Array)?el:this.toArray(el);\n    let a = [];\n    for (let e = 0; e < el.length; e++){\n        a.push(el[e].cloneNode(true));\n    };\n    return new Piece(a);\n};\nPiece.prototype.dataset = function(data, cb){\n    let l = this.el.length;\n    let i = -1;\n\n    while(++i < l){\n        if (this.el[i].dataset[data]){\n            let exec = cb(this.el[i]);\n            if (exec == 'break'){\n                break;\n            };\n        };\n    };\n    return true;\n};\nPiece.prototype.getContainers = function(){\n    // console.log('111111');\n    let container = this.getElementsByDataset('container').container;\n    return container\n};\nPiece.prototype.cloneNode = function(el){\n    el = this.el;\n    return Piece.cloneNode(el);\n};\nPiece.prototype.getAllElements = function(){\n    let length = this.el.length;\n    let r = [];\n    switch(true){\n        case length == 1:{\n            r = this.el[0].getElementsByTagName('*').toArray();\n        } break;\n        case length > 1:{\n            let i = -1;\n            while(++i < length){\n                let el = this.el[i];\n                let q = el.getElementsByTagName('*');\n                if (q){\n                    for (let i = 0; i < q.length; i++){\n                        r.push(q[i]);\n                    };\n                };\n            };\n        } break;\n    };\n    return r;\n};\n\nPiece.prototype.css = function(obj){\n    for (let key in obj){\n        if(obj.hasOwnProperty(key)){\n            let hasSelector = UTILS.isObject(obj[key]);\n            if(hasSelector){\n                let selector = key;\n                let css = obj[key];\n                for(let key in css){\n                    if(css.hasOwnProperty(key)){\n                        let val = css[key];\n                        this.el.forEach(el=>{\n                            let target = el.querySelectorIncluded(selector);\n                            target.style[key] = val;\n                        });\n                    };\n                }\n            } else {\n                let val = obj[key];\n                this.el.forEach(el=>{\n                    el.style[key] = val;\n                });\n            }\n        };\n    };\n\n    if(arguments.length == 1){\n        let val = arguments[0];\n        let isObject = UTILS.isObject(val);\n        if(isObject){\n            this.el.forEach(el=>{\n                for(let key in val){\n                    if(val.hasOwnProperty(key)){\n                        el.style[key] = val[key];\n                    };\n                };\n            });\n        }\n    } else if (arguments.length == 2){\n\n    };\n};\n\nPiece.prototype.appendTo = function(roots, cleaned){\n\n    if(roots.nodeType == 1){\n        roots = [roots];\n    };\n\n\n    for (let i = 0; i < roots.length; i++){\n        let root = roots[i];\n        if (!root && !root.attributes){\n            throw new TypeError(`the ${root} is not an instance of Element`);\n        };\n    \n        // console.log(root);\n    \n        cleaned && (root.innerHTML = \"\");\n    \n    \n        for (let i = 0; i < this.el.length; i++){\n            let el = this.el[i];\n            root.appendChild(el);\n        };\n    }\n};\nPiece.prototype.getElementsByTagName = function(tag){\n    let length = this.el.length;\n    let r = [];\n    switch(true){\n        case length == 1:{\n            r = this.el[0].getElementsByTagName(id).toArray();\n        } break;\n        case length > 1:{\n            let i = -1;\n            while(++i < length){\n                let el = this.el[i];\n                let q = el.getElementsByTagName(selector);\n                if (q){\n                    for (let i = 0; i < q.length; i++){\n                        r.push(q[i]);\n                    };\n                };\n            };\n        } break;\n    };\n    return r;\n};\n\nPiece.prototype.getElementById = function(ids){\n    let length = this.el.length;\n    let r = [];\n    switch(true){\n        case length == 1:{\n            r = this.el[0].getElementById(id);\n        } break;\n        case length > 1:{\n            let i = -1;\n            while(++i < length){\n                let el = this.el[i];\n                let q = el.querySelector(selector);\n                if (q){\n                    r.push(q);\n                };\n            };\n        } break;\n    };\n    return r;\n}\n\nPiece.prototype.querySelectorAll = function(selector){\n    let length = this.el.length;\n    let r = [];\n    switch(true){\n        case length == 1:{\n            r = this.el[0].querySelectorAll(selector);\n        } break;\n        case length > 1:{\n            let els = [];\n            let i = -1;\n            while(++i < length){\n                let el = this.el[i];\n                let q = el.querySelectorAll(selector);\n                q && (r = r.concat(q.toArra()));\n            };\n        } break;\n        default:{\n            r = [];\n        }\n    };\n    return r;\n};\n\nPiece.prototype.querySelector = function(selector){\n    let length = this.el.length;\n    let r = [];\n    switch(true){\n        case length == 1:{\n            r = this.el[0].querySelector(selector);\n        } break;\n        case length > 1:{\n            let i = -1;\n            while(++i < length){\n                let el = this.el[i];\n                let q = el.querySelector(selector);\n                if (q){\n                    r.push(q);\n                };\n            };\n        } break;\n    };\n    return r;\n};\n\nPiece.prototype.querySelectorIncluded = function(selector, attr, val){\n    let length = this.el.length;\n    let r = [];\n    switch(true){\n        case length == 1:{\n            r = this.el[0].querySelectorIncluded(selector, attr, val);\n        } break;\n        case length > 1:{\n            let i = -1;\n            while(++i < length){\n                let el = this.el[i];\n                let q = el.querySelectorIncluded(selector, attr, val);\n                q && (r.push(q))\n            };\n        } break;\n    };\n    return r;\n};\n\n\nPiece.prototype.querySelectorAllIncluded = function(selector, attr, val){\n    let length = this.el.length;\n    let r = [];\n    switch(true){\n        case length == 1:{\n            r = this.el[0].querySelectorAllIncluded(selector, attr,val);\n        } break;\n        case length > 1:{\n            let i = -1;\n            while(++i < length){\n                let el = this.el[i];\n                let q = el.querySelectorAllIncluded(selector, attr, val);\n                q && (r = r.concat(q.toArra()));\n            };\n        } break;\n    };\n    return r;\n};\n\nPiece.prototype.contains = function(el){\n    let length = this.el.length, test = false;\n    switch(length == 1){\n        case true:{\n            test = this.el[0].contains(el);\n        } break;\n        case false:{\n           let index = -1;\n           while(++index < length){\n               let _el = this.el[index];\n               if (_el.contains(el)){\n                test = true;\n                break;\n               };\n           };\n        } break;\n    }\n    return test;\n};\nPiece.prototype.getElementsByDataset = function(){\n    let arg, sel, i, a, el, query;\n    arg = arguments;\n    o = {};\n    length = arg.length;\n    i = -1;\n    a = -1;\n\n    // console.log(292, this.el);\n    while(++i < this.el.length){\n        el = this.el[i];\n        while(++a < length){\n            sel = arg[a];\n            if (el.getAttribute(`data-${sel}`)){\n                o[sel] = [el];\n            } else {\n                o[sel] = [];\n            }\n            let query = el.querySelectorAll(`[data-${sel}]`);\n            if (query.length){\n                for (let q = 0; q < query.length; q++){\n                    let qe = query[q];\n                    let istemp = qe.closest('.cake-template');\n                    if(!istemp){\n                        o[sel].push(qe);\n                    };\n                };\n            };\n        };\n    };\n    return o;\n}\n\nmodule.exports = Piece;","const Utils = require('../utils');\nconst Templating = require('../templating');\nconst Plugin = require('../plugin');\nconst ComponentStorage = require('../storage/components-store');\nconst RouterStorage = require('../storage/router-storage');\nconst _utils = require('./utils');\nconst getConfig =_utils.getConfig\nconst updateConfig =_utils.updateConfig\nconst extendConfig =_utils.extendConfig;\n\n\n\nconst forCached = {\n    targets:{},\n    parents:{},\n};\n\nconst forAutoCached = {\n    targets:{},\n    parents:{},\n};\n\nmodule.exports = (async function(prop, newValue, prevValue, component, html){\n        \n\n\n    let condition = component == 'kyc_view' && prop == 'actions';\n\n    let sts = this.storage.get(component);\n    let templating = new Templating(Plugin('templating'));\n\n    // let filteredSts = {};\n    // filteredSts.for = sts.for;\n\n    // for(let key in sts){\n    //     if(sts.hasOwnProperty(key)){\n    //         let item = sts[key];\n    //         let has = false;\n    //         for (let i = 0; i < item.length; i++){\n    //             let conf = item[i];\n\n    //             let bind = conf.bind;\n    //             if(key == 'evt'){\n    //                 bind = conf.cb;\n    //             };\n                \n    //             if(bind && bind.includes(templating.tag[0])){\n    //                 bind = bind.split(\"{{\").join(\"\").split(\"}}\").join(\"\");\n    //             };\n\n    //             if(Utils.isArray(newValue)){\n    //                 has = newValue.some(item=>{\n    //                     if(Utils.isObject(item)){\n    //                         return item[bind] != undefined;\n    //                     } else {\n    //                         return true;\n    //                     };\n    //                 });\n                \n    //             } else if(Utils.isObject(newValue)){\n    //                 has = newValue[bind] != undefined;\n    //             } else {\n    //                 has = true;\n    //             };\n    //         };\n    //         if(has){\n    //             filteredSts[key] = item;\n    //         };\n    //     };\n    // };\n\n    // // sts = filteredSts;\n\n    return new Promise((res, rej)=>{\n        try {\n            let configs = getConfig(this.storage.get(component,'for'), prop, newValue, prevValue, component);\n            let switchConfig = this.storage.get(component,'switch');\n\n\n            // console.log(141,this.storage.get(component,'switch'), prop, newValue, prevValue, component);\n            \n            if (!configs.length) return;\n\n            let data = newValue.reduce((accu, item)=>{\n                accu.push(item);\n                return accu;\n            }, []);\n\n            newValue = null;\n\n\n\n            for (let c = 0; c < configs.length; c++){\n\n                // let {bind, sel, iter, ins, component, cleaned} = configs[c];\n                let islast = configs.length -1 == c;\n                let bind = configs[c].bind;\n                let sel = configs[c].sel;\n                let iter = configs[c].iter;\n                let ins = configs[c].ins;\n                let component = configs[c].component;\n                let cleaned = configs[c].cleaned;\n                const children = configs[c].children;\n        \n                // html = Cake.Components[component].html;\n                html = ComponentStorage.get(component).html;\n\n                \n                let target = html.querySelectorIncluded(`[data-for-template=${sel}]`);\n                if(target){\n                    forCached.targets[sel] = target;\n                } else {\n                    forCached.parents[sel].appendChild(forCached.targets[sel]);\n                    target = html.querySelectorIncluded(`[data-for-template=${sel}]`);\n                };\n\n\n\n                //manipulate data;\n                ;(()=>{\n                    data = data.map(item=>{\n                        for (let key in item){\n\n\n                            // console.log(64, key, item[key]);\n\n                            if (item.hasOwnProperty(key)){\n                                item[`${iter}.${key}`] = item[key];\n                            };\n                        };\n                        return item;\n                    });\n                })();\n\n\n                let hasReplaced = [];\n                //update other\n                ;(()=>{\n                    let stat = {};\n                    let increment = 0;\n                    Object.keys(sts).forEach((key,index)=>{\n\n                        if(!['for','evt','animate','switch'].includes(key)){\n                            let conf = JSON.parse(JSON.stringify(sts[key]));\n\n     \n                            conf.forEach(temp=>{\n                                let bind = temp && temp.bind || undefined;\n\n\n                                if(bind && bind.match(new RegExp(templating.lefttag),'g')){\n                                    \n                                    data.forEach((item, index)=>{\n                                        let o = {};\n                                        o.bind =  templating.replaceString(item, bind);\n                                        // o.sel = `${temp.sel}-${increment}-${new Date().getTime()}-${Math.ceil(Math.random()*10)}`;\n                                        o.sel = `${temp.sel}-${increment}-${index}`;\n                                        o.rawsel = temp.sel;\n                                        increment += 1;\n\n                                        \n                                        //data binding to the element selector;\n\n                                        if(!data[index].__sel){\n                                            data[index].__sel = [];\n                                        };\n                                        data[index].__sel.push(o.sel);\n                                        \n                                        // Utils.log.if(condition)(103,prop,index,bind, o.bind);\n\n                                        for (let key in temp){\n                                            if (temp.hasOwnProperty(key)){\n                                                if(!o[key]){\n                                                    o[key] = temp[key];\n                                                };\n                                            };\n                                        };\n                                        conf.push(o);\n                                        \n                                    });\n                                    hasReplaced.push(key);\n                                    \n                                    stat[`${component}-${key}`] = (stat[`${component}-${key}`] || 0) + 1; \n                                };\n                            });\n\n                            sts[key] = conf;\n                            \n                            \n                        };\n                    });\n                    // console.log(stat);\n\n                })();\n\n                ;(()=>{\n                    if (cleaned){\n                        let parent = target.parentElement;\n                        if(parent){\n                            forCached.parents[sel] = parent;\n                        } else {\n                            parent = forCached.parents[sel]\n                        };\n                        parent.children.toArray().forEach(child=>{\n                            if(child.dataset.for && child.dataset.for == sel && !child.classList.contains('cake-template')){\n                                child.remove();\n                            };\n                        });\n                    };\n\n                    let i = -1; l = data.length;\n                    let routeElements = [];\n                    for (let d = 0; d < data.length; d++){\n                        let item = data[d];\n                        let index = d;\n\n                        let cloned = target.cloneNode(true);\n                        let template = target.cloneNode(true);\n                        // console.log(154,template);\n\n\n                        //switch;\n                        (()=>{\n                            if(!(switchConfig && switchConfig.length)){return};\n                            let config = switchConfig.find(item=>{\n                                return item.parentForSel == sel;\n                            });\n                            if(!config){return};\n                            let bind = config.bind;\n                            let ssel = config.sel;\n                            let cases = config.cases;\n                            const mapping = item[bind];\n                            const switchElement = template.querySelector(`[data-switch=${ssel}]`);\n                            let hitCase = cases.find(item=>{\n                                let _id = item._id;\n                                let caseBind = item.bind;\n                                if(caseBind.includes('|')){\n                                    return caseBind.split('|').map(item=>item.trim()).some(item=>item==mapping);\n                                } else {\n                                    return caseBind == mapping;\n                                };\n                            });\n\n                            if(hitCase){\n                                const find = cloned.querySelector(`[data-case=${ssel}-${hitCase._id}]`);\n                                find.classList.remove('cake-template');\n\n\n                                // let clonseSwitch = switchElement.cloneNode();\n\n                                switchElement.parentNode.replaceChild(find, switchElement);\n\n                                // switchElement.parentNode.innerHTML = find.outerHTML.replace('<script',\"\");\n\n                                // find && switchElement.parentNode.replaceChild(find,switchElement);\n\n                            } else {\n                                switchElement.remove();\n                            };\n\n                        })();\n\n\n                        let create = templating.createElement(item, template, false);\n                        \n                        //replace the templated data-*;\n                        ;(()=>{\n                            Object.keys(sts).forEach(key=>{\n                                if(hasReplaced.includes(key)){\n                                    let conf = sts[key];\n\n\n                                    item.__sel && item.__sel.forEach && item.__sel.forEach(i=>{\n\n                                        let cf = conf.find(cf=>{\n                                            return i == cf.sel;\n                                        });\n                                        if(cf){\n                                            let rawsel = cf.rawsel;\n                                            if(rawsel){\n                                                let get = create.querySelector(`[data-${key}=${rawsel}]`);\n\n                                                if(!get && create && create.dataset[key] == rawsel){\n                                                    get = create;\n                                                };\n\n                                                // Utils.log.if(condition)(231, item.__sel, cf, get,`[data-${key}=${rawsel}]`,create.outerHTML,create);\n\n\n                                                get && (get.dataset[key] = cf.sel);\n                                            };\n                                        }\n                                    })\n\n                                };\n                            });\n    \n                        })();\n                        //for\n                        ;(()=>{\n                            // create.style.display = 'block';\n                            create.style.removeProperty('display');\n                            create.classList.remove('cake-template');\n                            create.removeAttribute('data-for-template');\n                            target.insertAdjacentElement('beforebegin', create);\n                        })();\n                        //auto\n                        ;(()=>{\n                            if(!children) return;\n                            children.forEach(child=>{\n                                let config = (sts && sts.for || []).find(item=>item.sel == child);\n                                // console.log(228,config);\n                                const forAutoElement = create.querySelector(`[data-for=${child}]`);\n\n                                if(forAutoElement){\n\n                                    // const iteration = forAutoElement.dataset.forIter;\n                                    // const splitted = forAutoElement.dataset.for.split(\" \");\n                                    // const iter = splitted[1];\n                                    // const iteration = splitted[2];\n\n                                    // console.log(242,children);\n                                    // console.log(239,item);\n                                    let datas = item[config.bind];\n\n                                    if(datas){\n                                        //manipulate data;\n                                        ;(()=>{\n                                            datas = datas.map(item=>{\n                                                for (let key in item){\n\n                                                    if (item.hasOwnProperty(key)){\n                                                        item[`${config.iter}.${key}`] = item[key];\n                                                    };\n                                                };\n                                                return item;\n                                            });\n                                        })();\n\n                                        for (let d = 0; d < datas.length; d++){\n                                            let data = datas[d];\n                                            let islast = datas.length -1 == d;\n                                            // console.log(261,data);\n\n                                            let template = forAutoElement.cloneNode(true);\n\n                                            let create = templating.createElement(data, template, false);\n                                            create.style.removeProperty('display');\n                                            create.classList.remove('cake-template');\n                                            create.removeAttribute('data-for-template');\n                                            forAutoElement.insertAdjacentElement('beforebegin', create);\n\n                                            if(islast){\n                                                forAutoElement.remove();\n                                            };\n                                        };\n                                    };\n\n                                    const select = forAutoElement.closest('SELECT');\n                                    if (select){\n                                        select.selectedIndex = 0;\n                                    };\n                                };\n                            });\n                        })();\n\n                        //route;\n                        (()=>{\n                            let routeConfig = this.storage.get(component,'route');\n\n                            if(routeConfig && !routeConfig.length)return;\n                            \n                            for (let r = 0; r < routeConfig.length; r++){\n                                let rconfig = routeConfig[r];\n                                let bind = rconfig.bind;\n                                let sel = rconfig.sel;\n                                let isFor = rconfig.for;\n                                if(!isFor){\n                                    continue;\n                                };\n                                let routeElement = create.querySelector(`[data-route=${sel}]`);\n\n                                if(!routeElement && create && create.dataset.route == sel){\n                                    routeElement = create;\n                                };\n\n\n                                if(routeElement){\n                                    let state = null;\n                                    if(bind.includes(\"?\")){\n                                        let split = bind.split(\"?\");\n                                        bind = split[0];\n                                        state = split[1];\n                                    };\n                                    const routes = RouterStorage.get(bind);\n\n                                    if(routes){\n                                        let href = routes.path;\n                                        if(state){\n                                            routeElement.href = `#!${href}?${state}`;\n                                        } else {\n                                            routeElement.href = `#!${href}`;\n                                        };\n                                    };\n                                } else {\n                                    continue;\n                                }\n                            };\n\n                        })();\n\n                        create.replaceDataSrc();\n                    };\n                    res()\n                })();\n                (()=>{\n                    const isoption = target.tagName == 'OPTION';\n                    if(isoption){\n                        const select = target.closest('SELECT') ||  target.closest('DATALIST');\n                        select && (select.selectedIndex = 0);\n                    };\n                })();\n\n                //requery the data-container after loop;\n                (async ()=>{\n                    let _component = ComponentStorage.get(component);\n                    _component && _component.findContainer()\n                })();\n\n                if(islast){\n                    target.remove();\n                };\n            };\n\n            html.unRequired();\n \n            data= null;\n        } catch(err){\n            rej(err);\n        }\n    });\n});","const storage = {};\n\nfunction subscribeExternal(){\n    let component = storage[name];\n    \n    if (component){\n        if (cb instanceof Function){\n            let name = cb.name;\n            if (ctx){\n                cb = cb.bind(ctx)\n            }\n            cb.binded = 'external';\n            cb.original = name;\n            cb.listenTo = component.name;\n            component.Subscribe(cb);\n        }\n    } else {\n    };\n};\n\nwindow.ComponentStorage = storage;\n\nmodule.exports = {\n    subscribe(cb, ctx){\n\n        return new Promise((res, rej)=>{\n\n            let lk = setInterval(()=>{\n                if (storage[name]){\n                    \n                    subscribeExternal();\n                    clearInterval(lk);\n                    res();\n                };\n            });\n        })\n    },\n    set(componentName, component){\n        storage[componentName] = component;\n        return true;\n    },\n    get(componentName){\n        return storage[componentName];\n    }\n};","const Utils = require('../utils');\nconst _utils = require('./utils');\nconst getConfig =_utils.getConfig\nconst updateConfig =_utils.updateConfig\nconst extendConfig =_utils.extendConfig\n\nmodule.exports = (async function(prop, newValue, prevValue, component, html){\n    html = html || document;\n    // console.log(605,prop, newValue);\n\n    let st = this.storage.get(component, 'if');\n\n    let configs = getConfig(st, prop, newValue, prevValue, component);\n    // console.log(603, configs);\n\n    if (!configs.length) return;\n\n    configs = extendConfig(configs);\n\n    let cache = {};\n\n    // console.log(610, configs);\n    for (let c = 0; c < configs.length; c++){\n        let config = configs[c];\n        /**\n         * the incremetedSel is not null when this is called within a loop or data-for;\n         */\n        // let {attr, bind, sel, testval, _true, _false, ops, hasNegate, incrementedSel,incrementId} = config;\n\n        let attr = config.attr;\n        let bind = config.bind;\n        let sel = config.sel;\n        let testval = config.testval;\n        let _true = config._true;\n        let _false = config._false;\n        let ops = config.ops;\n        let hasNegate = config.hasNegate;\n        let incrementedSel = config.incrementedSel;\n        let incrementId = config.incrementId;\n\n\n\n\n        let attrHyphen = attr.toHyphen();\n        let trueNotIgnore = _true != 'null';\n        let falseNotIgnore = _false != 'null';\n\n        if (prop == bind){\n            if (!cache[sel]){\n                // console.log(incrementedSel, sel,`[data-if=${incrementedSel || sel}]:not(.cake-template)`);\n                cache[sel] = html.querySelectorAll(`[data-if=${incrementedSel || sel}]:not(.cake-template)`);//just to convert iterable;\n            }\n            let els = cache[sel];\n            // console.log(624,els, newValue);\n\n            for (let p = 0; p < els.length; p++){\n                let el = els[p];\n\n                let data = newValue; //it can accept, el with data-if-bind and none;\n\n                let test;\n                if(testval){\n                    test = Utils.logTest(testval, ops, data);\n                } else {\n                    test = (hasNegate)?!data:!!data;\n                };\n\n                if(test){\n                    if(trueNotIgnore){\n                        if(attr == 'class'){\n                            let trueClasses = _true.split(' ');\n                            if(falseNotIgnore){\n                                let falseClasses = _false.split(' ');\n                                falseClasses.forEach(cls=>{\n                                    el.classList.remove(cls);\n                                });\n                                trueClasses.forEach(cls=>{\n                                    el.classList.add(cls);\n                                });\n                            } else {\n                                trueClasses.forEach(cls=>{\n                                    if(!el.classList.contains(cls)){\n                                        el.classList.add(cls);\n                                    };\n                                });\n                            };\n                            \n                        } else {\n                            if(data[_true]){\n                                el.setAttribute(attr, data[_true]);\n                            }\n                        };\n                    }\n                } else {\n                    if(falseNotIgnore){\n                        if(attr == 'class'){\n                            let falseClasses = _false.split(' ');\n                            if(trueNotIgnore){\n                                let trueClasses = _true.split(' ');\n                                trueClasses.forEach(cls=>{\n                                    el.classList.remove(cls);\n                                });\n                                falseClasses.forEach(cls=>{\n                                    el.classList.add(cls);\n                                });\n                            } else {\n                                trueClasses.forEach(cls=>{\n                                    if(!el.classList.contains(cls)){\n                                        el.classList.add(cls);\n                                    };\n                                });\n                            };\n                            \n                        } else {\n                            el.setAttribute(attr, _false);\n                        };\n                    }\n                };\n            };\n        };\n    };\n\n    newValue = null;\n});","const Utils = require('../utils');\n\nconst _utils = require('./utils');\nconst getConfig =_utils.getConfig\nconst updateConfig =_utils.updateConfig\nconst extendConfig =_utils.extendConfig\n\nmodule.exports = (async function(prop, newValue, prevValue, component, html){\n    html = html || document;\n\n\n    let st =this.storage.get(component, 'model');\n\n    let configs = getConfig(st,  prop, newValue, prevValue, component);\n    if (!configs.length) return;\n    for (let c = 0; c < configs.length; c++){\n        let config = configs[c];\n        // let {attr, bind, sel} = config;\n\n        let attr = config.attr;\n        let bind = config.bind;\n        let sel = config.sel;\n\n        let attrHyphen = attr.toHyphen();\n        if (prop == bind){\n            let els = html.querySelectorAll(`[data-model=${sel}]`);\n            for (let p = 0; p < els.length; p++){\n                let el = els[p];\n                if (attr == 'className'){\n                    if (prevValue){\n                        if (newValue){\n                            el.classList.replace(prevValue, newValue);\n                        } else {\n                            el.classList.remove(prevValue);\n                        };\n                    } else {\n                        el.classList.add(newValue);\n                    };\n                } else {\n                    el.setAttribute(attrHyphen, newValue);\n                    el[attr] = newValue;\n                };\n            };\n        };\n    };\n\n    newValue = null;\n});","const Utils = require('../utils');\nconst _utils = require('./utils');\nconst getConfig =_utils.getConfig\nconst updateConfig =_utils.updateConfig\nconst extendConfig =_utils.extendConfig\n\nmodule.exports = (async function(prop, newValue, prevValue, component, html){\n    html = html || document;\n    let st = this.storage.get(component, 'toggle');\n    // console.log(8, this.sts);\n    let configs = getConfig(st,prop, newValue, prevValue);\n    // if (!configs.length) return;\n    if (!configs){return ;};\n\n    configs = extendConfig(configs);\n\n    html = html || document;\n    for (let s = 0; s < configs.length; s++){\n        let sub = configs[s];\n        if (!sub) continue;\n        // let {sel, bind, value, ops} = sub;\n\n        let sel = sub.sel;\n        let bind = sub.bind;\n        let value = sub.value;\n        let ops = sub.ops;\n\n        let el = html.querySelector(`[data-toggle=${sel}]`);\n\n\n        //TODO\n        if (value == prevValue){\n            el && el.classList.remove('is-active');\n        }  \n        if (value == newValue){\n            if (el){\n                if (el.classList.contains('is-active')){\n                    el.classList.remove('is-active');\n                };\n                el && el.classList.add('is-active');\n            };\n        };\n    };\n\n    newValue = null;\n});","const Utils = require('../utils');\nconst _utils = require('./utils');\nconst getConfig =_utils.getConfig\nconst updateConfig =_utils.updateConfig\nconst extendConfig =_utils.extendConfig\n\nmodule.exports = (async function(prop, newValue, prevValue, component, html){\n    html = html || document;\n    let st = this.storage.get(component, 'route');\n    // console.log(8, this.sts);\n    let configs = getConfig(st,prop, newValue, prevValue);\n    // if (!configs.length) return;\n    if (!configs){return ;};\n\n    configs = extendConfig(configs);\n\n    html = html || document;\n    for (let s = 0; s < configs.length; s++){\n        let sub = configs[s];\n        if (!sub) continue;\n        // let {sel, bind, value, ops} = sub;\n\n        let sel = sub.sel;\n        let bind = sub.bind;\n        let value = sub.value;\n        let ops = sub.ops;\n\n        let el = html.querySelector(`[data-route=${sel}]`);\n\n\n        console.log(31, el);\n    };\n\n    newValue = null;\n});","function ComponentAttribStorage(){\n    this.store = {};\n\n};\n\nComponentAttribStorage.prototype.set = function(component, type, obj){\n    let store = this.store;\n    switch(true){\n        case (!store[component]):{store[component] = {}};\n        case (!store[component][type]):{store[component][type] = []};\n        default:{store[component][type].push(obj)};\n        break;\n    };\n    return true;\n};\n\nComponentAttribStorage.prototype.get = function(component, attr){\n    let store = this.store;\n    if(component && attr){\n        return store[component] && store[component][attr] || [];\n    };\n    if(component && !attr){\n        return store[component] || {};\n    }\n};\n\n\n\n\nmodule.exports = ComponentAttribStorage;","const Utils = require('../utils');\nconst _utils = require('./utils');\nconst getConfig =_utils.getConfig\nconst updateConfig =_utils.updateConfig\nconst extendConfig =_utils.extendConfig\n\n\nmodule.exports = (async function(prop, newValue, prevValue, component, html){\n    html = html || document;\n    let st = this.storage.get(component, 'switch');\n    let configs = getConfig(st,prop, newValue, prevValue, component);\n\n\n    if (!configs.length) return;\n\n\n\n    for (let c = 0; c < configs.length; c++){\n        let config = configs[c], data;\n        // let {attr, bind, sel, incrementedSel,incrementId, incrementedSels} = config;\n\n        let parentFor = config.parentFor;\n\n        if(parentFor){return;};\n\n        if(!!newValue.incrementedSel){\n            data = newValue[bind];\n        } else {\n            data = newValue;\n        };\n\n        let bind = config.bind;\n        let sel = config.sel;\n        let cases = config.cases;\n        const mapping = data;\n\n        if (prop != bind){return};\n\n        let els = html.querySelectorAll(`[data-switch=${sel}]`);\n\n        for (let p = 0; p < els.length; p++){\n            let switchElement = els[p];\n\n            let hitCase = cases.find(item=>{\n                let _id = item._id;\n                let caseBind = item.bind;\n\n                if(caseBind.includes('|')){\n                    return caseBind.split('|').map(item=>item.trim()).some(item=>item==mapping);\n                } else {\n                    return caseBind == mapping\n                };\n            });\n\n            if(!hitCase){return};\n\n            const find = switchElement.querySelector(`[data-case=${sel}-${hitCase._id}]`);\n            find.classList.remove('cake-template');\n            \n            switchElement.style.removeProperty('display');\n            switchElement.classList.remove('cake-template');\n\n            switchElement.innerHTML = find.outerHTML;\n        };\n    };\n\n    newValue = null;\n});","\nconst Templating = require('./templating');\n\nconst RouterStorage = require('./storage/router-storage');\n\n\nconst notifyAttr = require('./attrib/data-attr');\nconst notifyBind = require('./attrib/data-bind');\nconst notifyClass = require('./attrib/data-class');\nconst notifyForUpdate = require('./attrib/data-for-update');\nconst notifyFor = require('./attrib/data-for');\nconst notifyIf = require('./attrib/data-if');\nconst notifyModel = require('./attrib/data-model');\nconst notifyToggle = require('./attrib/data-toggle');\nconst notifyRoute = require('./attrib/data-route');\nconst AttribConfigStorage = require('./storage/AttribConfigStorage');\nconst UTILS = require('./utils');\n// const notifyForAuto = require('./attrib/data-for-auto');\nconst notifySwitch = require('./attrib/data-switch');\n\n// const st = {};\n// \nfunction Attrib(){\n\n    this.uiid = 0;\n    this.notify = {};\n    this.sts = {};\n    this.storage = new AttribConfigStorage();\n    this.logicalType = ['if', 'bind', 'switch', 'toggle', 'class', 'attr'];\n};\n\nAttrib.prototype.notifyFor = notifyFor;\nAttrib.prototype.notifyForUpdate = notifyForUpdate;\n\nAttrib.prototype.notifySwitch = notifySwitch;\nAttrib.prototype.notifyClass = notifyClass;\nAttrib.prototype.notifyBind = notifyBind;\nAttrib.prototype.notifyAttr = notifyAttr;\nAttrib.prototype.notifyIf = notifyIf;\nAttrib.prototype.notifyModel = notifyModel;\nAttrib.prototype.notifyToggle = notifyToggle;\nAttrib.prototype.notifyRoute = notifyRoute;\n\n/*\n    watch for the (name) which is registered to the scope\n    get all attribute with that name,\n    get all component holding that (name),\n    and notify them;\n*/\n\nAttrib.prototype.notifier = function(prop, newValue, prevValue, component){\n    // console.time('attr');\n\n    // console.log(47, newValue);\n\n    if(newValue == undefined){\n        return Promise.resolve();\n    };\n\n    let val = JSON.parse(JSON.stringify(newValue));\n    // if(Utils.isObject(val)){\n    //     val = JSON.parse(JSON.stringify(newValue));\n    // };\n    const equiv = {\n        for:'For',\n        forUpdate:'ForUpdate',\n        switch:'Switch',\n        // toggle:'Toggle',\n        bind:'Bind',\n        // model:'Model',\n        if:'If',\n        class:'Class',\n        attr:'Attr',\n        route:'Route',\n\n        // disabled:'Disabled',\n        // readonly:'Readonly',\n        // checked:'Checked',\n    };\n\n    let hits = Object.caching('AttribProp').get(prop) || \n    (()=>{\n        let hits = {};\n        const actions = Object.keys(equiv);\n        // const configs = this.sts[component];\n        const configs = this.storage.get(component);\n        if(!configs){\n            return [];\n        };\n        for (let a = 0; a < actions.length; a++){\n            const action = actions[a];\n            const vals = configs[action];\n\n            if(vals){\n\n                for (let v = 0; v < vals.length; v++){\n                    const val = vals[v];\n                    // const {bind} = val;\n                    const bind = val.bind;\n\n\n\n                    if(bind == prop){\n                        hits[action] = true;\n                    };\n                };\n            };\n        };\n        hits = Object.keys(hits);\n\n        Object.caching('AttribProp').set(prop, hits);\n        return hits;\n    })();\n\n   \n\n    return new Promise((res, rej)=>{\n        try {\n            let l = hits.length;\n            let index = 0;\n            const rec = (()=>{\n                if(l > index){\n                    let attr = hits[index];\n                    const name = equiv[attr];\n\n                  \n\n                    index += 1;\n                    this[`notify${name}`](prop, val, prevValue, component).then(()=>{\n                        rec();\n                    });\n                } else {\n                    res();\n                };\n            });rec();\n        } catch(err){\n            rej(err.message);\n        };\n    });\n};\n\nAttrib.prototype.registerNotifier = function(component, fn){\n\n    if (!this.notify[component]){\n        this.notify[component] = [];\n    };\n    this.notify[component].push(fn);\n};\n\nAttrib.prototype.getEventTarget = function(component){\n    let id = `${component}`;\n    let target = Object.caching('getEventTarget').get(id);\n    if (!target){\n        let cf = this.storage.get(component);\n        target = (cf && cf.evt)?cf.evt:[];\n        Object.caching('getEventTarget').set(id, target);\n    };\n    return target;\n};\n\nAttrib.prototype.getRouterTarget = function(component){\n    let id = `${component}`;\n    let target =  Object.caching('getRouterTarget').get(id);\n    if(!target){\n        let cf = this.storage.get(component);\n        target = (cf && cf.route)?cf.route:[];\n        Object.caching('getRouterTarget').set(id, target);\n    };\n    return target;\n};\n\nAttrib.prototype.getWatchItems = function(component){ \n    let id = `${component}`;\n    let target =  Object.caching('getWatchItems').get(id);\n    if(!target){\n        let _st = this.storage.get(component);\n        let red = UTILS.reduce(_st,{wt:[], forWt:[]}, function(obj, accu, index){\n            let type = obj.key;\n            let tst = obj.value;\n            UTILS.each(tst, function(item, index){\n                let bind = item.bind;\n                if(bind){\n                    if(type == 'for'){\n                        accu.forWt.push(bind);\n                    } else {\n                        accu.wt.push(bind);\n                    };\n                };\n            });\n            return accu;\n        });\n        let wt = UTILS.unique(red.wt);\n        let forWt = UTILS.unique(red.forWt);\n        //make the for first;\n        target = forWt.concat(wt);\n        Object.caching('getWatchItems').set(id, target);\n    };\n    return target;\n};\n\nAttrib.prototype.getWatchItemsByType = function(component, type){\n    let id = `${component}-${type}`;\n    let target =  Object.caching('getWatchItemsByType').get(id);\n    \n    if (!target){\n        let _st = this.storage.get(component);\n\n        // console.log(219, component, _st);\n  \n\n        let tst = _st[type] || [];\n        let wt = new Set();\n\n        if(type == 'animate' || type == 'toggle'){\n            wt = [];\n        };\n\n        for (let t = 0; t < tst.length; t++){\n\n            let item = tst[t];\n            // let {bind} = item;\n            let bind = item.bind;\n            \n\n\n            if(type == 'animate' || type == 'toggle'){\n                wt.push(item);\n            } else {\n                !!bind && wt.add(bind);\n            };\n        };\n        target = [...wt];\n        Object.caching('getWatchItemsByType').set(id, target);\n    };\n\n    return target;\n};\n\nAttrib.prototype.getWatchItemsBySel = function(component, type, sel){\n    let id = `${component}-${type}-${sel}`\n    let target =  Object.caching('watchItemsBySel').get(id);\n    if (!target){\n        // let array = this.sts[component][type];\n        let array = this.storage.get(component, type);;\n        let find = array.find(item=>{return item.sel == sel});\n        target = (find)?find:false;\n        Object.caching('watchItemsBySel').set(id, target);\n    };\n    return target;\n};\nAttrib.prototype.getConfig = function(component){\n    return this.storage.get(component);\n};\n\nAttrib.prototype._activateReactive = (component)=>{\n\n};\n\nAttrib.prototype._register = function(f, s, obj){\n    return this.storage.set(f, s, obj);\n};\n\nAttrib.prototype._static = function(component){\n    return function(qs, isStatic){\n        let els = [];\n\n        // console.log(component, qs, isStatic)\n        for(let t = 0; t < qs.length; t++){\n            let el = qs[t];\n            // console.log(el);\n            switch(isStatic){\n                case false:{\n                    els.push(el);\n                };\n                break;\n                case true:{\n                    let dComponent = el.closest('[data-component]');\n                    // console.log(dComponent ,component);\n                    dComponent = dComponent && dComponent.dataset.component;\n                    switch(dComponent == component){\n                        case true:{\n                            els.push(el);\n                        } break;\n                    };\n                }\n                break;\n                default:{continue;}\n            };\n        };\n        // console.log(els, component);\n        return els;\n    }\n};\n\nAttrib.prototype._loopElements = function(attr, els, component, isStatic,cb){\n    if (!els.length) {return false;};\n    els = this._static(component)(els, isStatic);\n\n    if (!els.length){return false;};\n    for (let i = 0; i < els.length; i++){\n        let el = els[i];\n        let id = `ckm${this.uiid}`;\n        let target, gr;\n        if(attr.includes(',')){\n            let attrs = attr.split(',');\n            target = {}, gr = {};\n            for (let a = 0; a < attrs.length; a++){\n                let attr = attrs[a];\n                target[attr] = el.dataset[attr];\n                gr[attr] = target.split(',');\n            };\n        } else {\n            target = el.dataset[attr];\n            gr = target.split(',');\n        }\n        cb(el, id, target, gr, i);\n    };\n    return true;\n};\n\nAttrib.prototype._compileEvents = function(events,component, isStatic){\n    return new Promise((res)=>{\n\n        this._loopElements('event',events, component, isStatic, (function(el, id, target, gr, index){\n            let splitted = gr;\n            for (let s = 0; s < splitted.length ; s++){\n                let _sp1 = splitted[s].split(':');\n                let event = _sp1[0];\n                let cb = _sp1[1];\n                event = event.trim();\n                cb = cb ? cb.trim(): cb;\n                this._register(component, 'evt', {event, sel:id,bind:cb, cb});\n                el.dataset.event = id;\n                this.uiid++;\n            }\n        }).bind(this));\n\n        res();\n    });\n};\n\nAttrib.prototype._compileToggle = function(toggles, component, isStatic){\n    return new Promise((res)=>{\n        let c = {};\n        this._loopElements('toggle',toggles, component, isStatic, (function(el, id, target, gr, index){\n            let ns = target;\n            if (c[ns]){\n                id = c[ns];\n            };\n            this._register(component, 'toggle', {sel:id, name:'ns-'+ns});\n            el.dataset.toggle = id;\n            this.uiid++;\n            c[ns] = id;\n        }).bind(this));\n        c = {};\n        res();\n    });\n};\nAttrib.prototype._compileFor = function(fors, component, isStatic, el){\n    return new Promise((res)=>{\n        let target = el;\n        if (!fors.length) {res();return;};\n        let els = this._static(component)(fors, isStatic);\n        if (!els.length){res();return;}\n\n        let o = {};\n        for (let f = 0; f < els.length; f++){\n            let id = `ckf${this.uiid}`;\n\n            o[id] = {};\n\n            let el = els[f];\n            let fr = el.dataset.for;\n            let isCleaned = el.dataset.forCleaned==undefined || el.dataset.forCleaned==\"true\"; \n            // let [a, b, c] = fr.split(\" \");\n            let _sp1 = fr.split(\" \");\n            let a = _sp1[0];\n            let b = _sp1[1];\n            let c = _sp1[2];\n\n            el.style.display  = 'none';\n            el.classList.add('cake-template');\n            el.dataset.for = id;\n            el.dataset.forTemplate = id;\n\n\n            o[id] = Object.assign(o[id], {bind:c, sel:id, iter:a, ins: b, cleaned:isCleaned});\n\n            ++this.uiid;\n            if (f != 0){\n                let parent = el.parentElement && el.parentElement.closest('[data-for]');\n                // console.log(409,parent);\n                if (!parent) { continue}\n                let parentIsFor = !!parent.dataset.for;\n                if (target.contains(parent) && parentIsFor){\n                    let parentId = parent.dataset.for;\n                    let parentCf = o[parentId];\n                    if (parentCf && !parentCf.children){\n                        parentCf.children = [id];\n                    } else if (parentCf){\n                        parentCf.children.push(id);\n                    };\n                }\n                \n            };\n        };\n        for (let key in o){\n            if (o.hasOwnProperty(key)){\n                this._register(component, 'for', o[key]);\n            };\n        };\n        res();\n    });\n};\n\nAttrib.prototype._compileForUpdate = function(fors, component, isStatic){\n    return new Promise((res)=>{\n        this._loopElements('forUpdate',fors, component, isStatic, (function(el, id, target, gr, index){\n\n            el.style.display  = 'none';\n            el.classList.add('cake-template');\n            el.dataset.forUpdate = id;\n\n            if (!el.dataset.for){\n                el.dataset.forTemplate = id;\n            }\n            let _sp1 = target.split(\" \");\n            let a = _sp1[0];\n            let b = _sp1[1];\n            let c = _sp1[2];\n\n            this._register(component, 'forUpdate', {bind:c, sel:id, iter:a,ins: b});\n            this.uiid++;\n        }).bind(this));\n\n        res();\n    });\n};\n\nAttrib.prototype._compileSwitch = function(switchs, component, isStatic){\n    return new Promise((res)=>{\n        this._loopElements('switch',switchs, component, isStatic, (function(el, id, target, gr, index){\n            let parentFor = el.closest('[data-for]');\n\n            if(!parentFor){\n                el.style.display  = 'none';\n                el.classList.add('cake-template');\n                console.log('compiling switch');\n            }\n\n            let bind = el.dataset.switch, map='def';\n            if (bind.includes('.')){\n                const _sp1 = el.dataset.switch.split('.');\n                bind = _sp1[0];\n                map = _sp1[1];\n            };\n            el.dataset.switch = id;\n            let cases = el.querySelectorAll('[data-case]');\n            let casesId = [];\n            for (let c = 0; c < cases.length; c++){\n                let _case = cases[c];\n                let closest = _case.closest(`[data-switch=${id}]`);\n                _case.classList.add('cake-template');\n                if (closest){\n                    let caseBind = _case.dataset.case;\n                    let _id = `cksc${this.uiid}`\n                    _case.dataset.case = `${id}-${_id}`;\n                    casesId.push({_id, bind:caseBind});\n                    this.uiid++;\n                };\n            };\n            let cnf = {bind, sel:id, map, cases:casesId};\n            if(!!parentFor){\n                cnf.parentFor = !!parentFor;\n                cnf.parentForSel = parentFor.dataset.for;\n            };\n            this._register(component, 'switch', cnf);\n            this.uiid++;\n        }).bind(this));\n        res()\n    });\n};\n\nAttrib.prototype._compileBind = function(elModels, component, isStatic){\n    return new Promise((res)=>{\n        this._loopElements('bind',elModels, component, isStatic, (function(el, id, target, gr, index){\n            for (let g = 0; g < gr.length; g++){\n                let val = gr[g].split(\" \").join(\"\");\n                if (val.includes(':')){\n                    const _sp1 = val.split(\":\");\n                    var attr = _sp1[0];\n                    var bind = _sp1[1];\n                } else {\n                    var bind = val;\n                    var attr = el.value == undefined?'textContent':'value';\n                };\n                this._register(component, 'bind', {attr, bind, sel:id});\n            }\n            this.uiid++;\n            el.dataset.bind = id;\n        }).bind(this));\n        res();\n    });\n};\n\nAttrib.prototype._compileAnimate = function(anims, component, isStatic){\n    return new Promise((res)=>{\n        this._loopElements('animate',anims, component, isStatic,(function(el, id, target, gr, index){\n            let o = {};\n            for (let a = 0; a < gr.length; a++){\n                let item = gr[a];\n                let _sp1 = item.split(':');\n                let ctx = _sp1[0];\n                let anims = _sp1[1];\n                if (ctx == 'ns'){\n                    o.ns = anims;\n                    break;\n                } else {\n                    o[ctx] = {keyframes:anims.split('-')};\n                };\n            };\n            o.selector = {attr:'data-animate', val:id};\n            this._register(component, 'animate', o);\n            this.uiid++;\n            el.dataset.animate = id;\n        }).bind(this));\n        res();\n    });\n};\n\n\nAttrib.prototype._compileIf = function(ifs, component, isStatic){\n    return new Promise((res)=>{\n        const regex = new RegExp('<|>|===|==|!==|!=');\n        this._loopElements('if,ifBind',ifs, component, isStatic,(function(el, id, target, gr, index){\n            let _if = target['if'];\n            let _ifBind = target['ifBind'];\n            let _gr = gr['if'];\n            \n            for (let g = 0; g < _gr.length; g++){\n                let val = gr[g];\n                let attr = val.substring(0,val.indexOf('='));\n                let exp = val.substring(val.indexOf('=')+1, val.length);\n                exp = exp.split(new RegExp('[()]')).join(\"\");\n                let _sp2 = exp.split('?');\n                let test = _sp2[0];\n                let r = _sp2[1];\n\n                let hasNegate = test[0] == '!';\n                hasRegularLog = test.match(regex);\n\n                let bind, testVal, ops;\n                if(hasRegularLog){\n                    let splitted = test.split(regex);\n                    bind = splitted[0].trim();\n                    testVal = splitted[1].trim();\n                    ops = hasRegularLog[0];\n                } else {\n                    bind = test;\n                };\n\n                if(hasNegate){\n                    bind = bind.slice(1);\n                };\n                \n                let _sp1 = r.split(':');\n                let _true = _sp1[0];\n                let _false = _sp1[1];\n                this._register(component, 'if', {hasNegate, attr, ops, bind, testval:testVal || null, _true, _false, sel:id, ifBind:_ifBind});\n            }\n            this.uiid++;\n            el.dataset.if = id;\n\n        }).bind(this));\n\n        res();\n    });\n};\n\nAttrib.prototype._compileClass = function(cls, component, isStatic){\n    return new Promise((res)=>{\n        let regex = new RegExp('<|>|===|==|!==|!=');\n        this._loopElements('class',cls, component, isStatic, (function(el, id, target, gr, index){\n            let hasRegularLog, hasNegate, bindVal, ops, testVal, hasNegateCount;\n            let cls = gr;\n            for (let c = 0; c < cls.length; c++){\n                let clItem = cls[c];\n                let _sp1 = clItem.split('&&');\n                // let [test, className] = clItem.split('&&');\n                let test = _sp1[0];\n                let className = _sp1[1];\n\n                test = test.trim();\n                className = className.trim();\n    \n                \n    \n                hasRegularLog = test.match(regex);\n    \n    \n                if(test.substring(0,2).includes('!')){\n                    hasNegate = true;\n                    hasNegateCount = (test.substring(0,2) == '!!')?2:(test.substring(0,1)=='!')?1:0;\n                } else {\n                    hasNegate = false;\n                    hasNegateCount = 0;\n                };\n    \n                \n                if(hasRegularLog){\n                    let splitted = test.split(regex);\n                \n                    bindVal = splitted[0].trim();\n                    testVal = splitted[1].trim();\n                    ops = hasRegularLog[0].trim();\n                } else {\n                    \n                    !hasNegate && (bindVal = test);\n                    if(hasNegate){\n                        bindVal = test.substring(hasNegateCount);\n                        testVal = hasNegateCount == 2;\n                    };\n                };\n    \n                \n                // if(component == 'header1'){\n                //     console.log(1534, bindVal, test, testVal, hasNegateCount);\n                // }\n    \n                this._register(component, 'class', {hasNegate, bind:bindVal, testVal,className, ops, sel:id});\n            }\n\n\n\n            this.uiid++;\n            el.dataset.class = id;\n        }).bind(this));\n\n        res();\n    });\n};\n\nAttrib.prototype._compileAttr = function(attrs, component, isStatic){\n    return new Promise((res)=>{\n        let regex = new RegExp('<|>|===|==|!==|!=');\n        this._loopElements('attr',attrs, component, isStatic, (function(el, id, target, gr, index){\n            let hasRegularLog, hasNegate, bindVal, ops, testVal;\n            let _sp2 = target.split('&&');\n            let test = _sp2[0];\n            let attrPair = _sp2[1];\n            attrPair = attrPair.trim();\n        \n            let _sp1 = attrPair.split('=');\n            let attrkey = _sp1[0];\n            let attrvalue = _sp1[1];\n\n            test = test.trim();\n            \n            hasRegularLog = test.match(regex);\n            hasNegate = test[0] == '!';\n            if(hasRegularLog){\n                let splitted = test.split(regex);\n            \n                bind = splitted[0];\n                testVal = splitted[1];\n                ops = hasRegularLog[0];\n            } else {\n                bind = test;\n            };\n\n            if(hasNegate){\n                hasNegate && (bind = bind.slice(1));\n            };\n\n            this._register(component, 'attr', {hasNegate, bind, testVal,attrkey, attrvalue, ops, sel:id});\n            this.uiid++;\n            el.dataset.attr = id;\n        }).bind(this));\n\n        res();\n    });\n};\n\nAttrib.prototype._compileModel = function(elModels, component, isStatic){\n    return new Promise((res)=>{\n\n        this._loopElements('model',elModels, component, isStatic, (function(el, id, target, gr, index){\n            let nodeType = el.tagName;\n\n            for (let g = 0; g < gr.length; g++){\n                let val = gr[g].split(\" \").join(\"\");\n                if (val.includes(':')){\n                    // var [attr, bind] = val.split(\":\");\n                    var splitted = val.split(':');\n                    var attr = splitted[0];\n                    var bind = splitted[1];\n\n                } else {\n                    var bind = val;\n                    var attr = 'value';\n                };\n                this._register(component, 'model', {attr, bind, sel:id,nodeType});\n            };\n            this.uiid++;\n            el.dataset.model = id;\n        }).bind(this));\n\n        res();\n    });\n}\n\nAttrib.prototype._compileRoute = function(elRoutes, component, isStatic){\n    return new Promise((res)=>{\n\n        this._loopElements('route',elRoutes, component, isStatic, (function(el, id, target, gr, index){\n            for (let g = 0; g < gr.length; g++){\n                let val = gr[g].split(\" \").join(\"\");\n                let isFromFor = el.closest('[data-for]');\n\n\n                this._register(component, 'route', {bind:val,sel:id,for:!!isFromFor});\n            };\n            this.uiid++;\n            el.dataset.route = id;\n        }).bind(this));\n\n        res();\n    });\n};\n\nAttrib.prototype.inject = function(el, component, isStatic=false){\n    return new Promise((res)=>{\n        let query = el.getElementsByDataset('bind', 'for', 'for-update', 'switch', 'toggle', 'event', 'animate','if','class','attr','route');\n        res(query);\n    }).then((query)=>{\n        let r = [];\n        let map = {\n            'bind':this._compileBind,//logical\n            'switch':this._compileSwitch,//logical\n            'toggle':this._compileToggle,//logical\n            'if':this._compileIf,//logical\n            'class':this._compileClass,//logical\n            'attr':this._compileAttr,//logical\n            'for':this._compileFor,\n            'for-update':this._compileForUpdate,\n            'event':this._compileEvents,\n            'animate':this._compileAnimate,\n            'route':this._compileRoute,\n            // 'model':this._compileModel,\n\n            // 'model':\"\",\n            // 'validator':\"\",\n        };\n\n        for (let q in query){\n            if (query.hasOwnProperty(q)){\n                if (query[q].length){\n                    r.push(map[q].apply(this, [query[q], component, isStatic, el]));\n                };\n            };\n        };\n        \n        // console.timeEnd(component);\n        \n        return Promise.all(r.length?r:[r]);\n    }).then(()=>{\n        \n        // return this.store.createOrUpdate(component, this.st[component]);\n        return Promise.resolve();\n    });\n    \n};\n\n\nmodule.exports = Attrib;","const Attrib = require('./attributes');\nconst Scope = require('./scope')();\nconst Component = require('./component');\n// const Hasher = require('./hash');\nconst Router = require('./router');\nconst Persistent = require('./persist');\nconst StorageKit = require('./storage')();\nconst Observer = require('./observer');\nconst Formy = require('./form');\nconst Utils = require('./utils');\nconst Templating = require('./templating');\nconst Plugin = require('./plugin');\nconst Subscriber = require('./storage/subscriber');\nconst Handler = require('./storage/handler');\nconst ComponentStorage = require('./storage/components-store');\n\n\nfunction Cake(name){\n    this.componentName = name;\n    this.components = {};\n};\n\nCake.app = function (config){\n    this.name = config.name || \"\";\n};\n\nCake.Components = function(name){\n    return {\n        subscribe(cb, ctx){\n            function subscribeExternal(){\n                let component = Cake.Components[name];\n                \n                if (component){\n                    if (cb instanceof Function){\n                        let name = cb.name;\n                        if (ctx){\n                            cb = cb.bind(ctx)\n                        }\n                        cb.binded = 'external';\n                        cb.original = name;\n                        cb.listenTo = component.name;\n                        component.Subscribe(cb);\n                    }\n                } else {\n                };\n            };\n            return new Promise((res, rej)=>{\n\n                let lk = setInterval(()=>{\n                    if (Cake.Components[name]){\n                        \n                        subscribeExternal();\n                        clearInterval(lk);\n                        res();\n                    };\n                });\n            })\n        },\n    };\n};\n\nCake.Models = {};\n\nCake.plugin = Plugin;\n\nCake.Attributes = new Attrib();\n\nCake.Models.$loaded = function(name){\n    return new Promise((res, rej)=>{\n        let mk = setInterval(()=>{\n            if (Cake.Models[name]){\n                clearInterval(mk);\n                res(Cake.Models[name]);\n            };\n        });\n        setTimeout(()=>{\n            if(!Cake.Models[name]){\n                clearInterval(mk);\n                rej(name);\n            }\n        }, 10000);\n    })\n};\n\nCake.MainMessageChannel = (function(){\n    let channel = new MessageChannel();\n    return {\n        send(data){\n            // console.log(data);\n            channel.port2.postMessage(data);\n        },\n        receive(fn){\n            channel.port1.onmessage = function(payload){\n                // let {isTrusted, data} = payload || {isTrusted:false};\n                let data = payload.data;\n                let isTrusted = payload.isTrusted == undefined?false:payload.isTrusted;\n\n\n                if (isTrusted){\n                    fn({status:1, data});\n                } else {\n                    fn({status:0, err:'not trusted!'});\n                };\n            };\n        },\n    };\n})();\n\nCake.Utils = {\n    scopeTrap(k){\n        return false;\n    },\n    scopeNotifier(m){\n        return m;\n    },\n};\n\nCake.create = function(name, template, options){\n    let group = new Cake(name, template, options);\n    // console.log(group);\n    group.create(name, template, options);\n};\n\n\nCake.init = function(name){\n    return new Component(name);\n};\n\n\n\n// Cake.Hasher = new Hasher(Cake.Components); \n// Cake.Hasher.listen();\n\n\nCake.Router = Router(Cake.Models, Component);\n\n\n\n\n\nCake.Persistent = new Persistent;\n\nCake.Persistent.listen(Cake.Components);\n\nCake.Cache = new StorageKit({\n    name:'cache',\n    storage:'session',\n    child:'object',\n});\n\nCake.getSubscriber = function(component, handler){\n    // let subscribe = Cake.Subscribe;\n    let subscribe = Subscriber;\n    let obj = {};\n    for (let c in subscribe){\n        if (subscribe.hasOwnProperty(c)){\n            let handlers = subscribe[c];\n            // console.log(handlers);\n            for (let h in handlers){\n                if (handlers.hasOwnProperty(h)){\n                    let hs = handlers[h];\n                \n                    for (let h of hs){\n                        let _handler = h;\n                        let original = _handler.original;\n                        let binded = _handler.binded;\n                        let listenTo = _handler.listenTo;\n\n                        if (listenTo == component){\n                            // console.log(original, handler, original==handler);\n                            if (original == handler){\n                                if (!obj[binded]){\n                                    obj[binded] = handler;\n                                } else {\n                                    let v = obj[binded] instanceof Array?obj[binded]:[obj[binded]];\n                                    obj[binded] = v.concat(handler);\n                                };\n                            } else if(!handler) {\n                                // console.log(h);\n                                if (!obj[binded]){\n                                    obj[binded] = original;\n                                } else {\n                                    let v = obj[binded] instanceof Array?obj[binded]:[obj[binded]];\n                                    obj[binded] = v.concat(original);\n                                };\n                            }\n                        };\n\n                    };\n                };\n            };\n        }\n    };\n    return obj;\n};\n\nCake.Observer = new Observer();\n\nCake.prototype._defineProperty = function(component, prop, get, set){\n    Object.defineProperty(component, prop, {\n        configurable:true,\n        get(){\n            return get();\n        },\n        set(value){\n            if (set){\n                set(value);\n            } else {\n                // throw new Error(`unable to set property in (${prop})`);\n            }\n        },\n    });\n};\n\nCake.prototype._defineProperty(Component.prototype, '$observer', function(){\n    return Cake.Observer;\n});\n\n//global scope\nCake._globalScope = new Scope('globalScope');\nCake.prototype._defineProperty(Component.prototype, '$globalScope', function(){\n    const scope = Cake._globalScope;\n    return scope;\n});\nCake._universalScope = new Scope('universalScope');\n\nCake.$universalScope = (function(){\n    const scope = Cake._universalScope;\n    return scope;\n});\n\n//attributes\nCake.prototype._defineProperty(Component.prototype, '$attrib', function(){\n    return Cake.Attributes;\n});\n//persistent ui using sessionStorage\nCake.prototype._defineProperty(Component.prototype, '$persist', function(){\n    return Cake.Persistent;\n});\n//caching data;\nCake.prototype._defineProperty(Component.prototype, '$cache', function(){\n    return Cake.Cache;\n});\n//hash\nCake.prototype._defineProperty(Component.prototype, '$hash', function(){\n    return Cake.Hasher;\n});\n\nCake.prototype.create = function(name, template, options){\n    // console.time(name);\n    //observer\n    // console.time(name);\n    let component = new Component(name, template, options);\n    //after it has been pass to Cakem t ws assumed that the fn are binded to component holder;\n    const scope = new Scope(name);\n    component.scope && (()=>{\n    \n        for (let _component in component.scope){\n\n\n            if(component.scope.hasOwnProperty(_component)){\n                const handlers = component.scope[_component];\n                for(let key in handlers){\n                    if(handlers.hasOwnProperty(key)){\n                        let handler = handlers[key];\n                        const bind = handler.name;\n                        handler = handler.bind(component);\n                        scope.hook(_component, bind, handler);\n                    };\n                };\n            };\n        };\n    })();\n\n    //register a notifier;\n    scope.registerNotifier(function(prop, newValue, prevValue, component){\n        return Cake.Attributes.notifier(prop, newValue, prevValue, component);\n    });\n\n    Cake.Attributes.registerNotifier(name, function(name, obj){\n        return scope.notifier(name, obj);\n    });\n\n\n    component.compile.then(()=>{\n        // let { subscribe, root, html, handlers, role, state} = component;\n\n        let subscribe = component.subscribe;\n        let root = component.root;\n        let html = component.html;\n        let handlers = component.handlers;\n        let role = component.role;\n        let state = component.state;\n\n\n\n        // console.log(role == 'form');\n\n        // console.log(284, component.name, subscribe);\n        // return Cake.Observer.registerSubscribe(subscribe).then(()=>{\n        //     return {root, handlers}\n        // });\n        return Subscriber.set(subscribe).then(()=>{\n            return {root, handlers};\n        });\n\n        //subscribe and handlers are binded to its componnt\n        \n    }).then((_obj)=>{\n        // const {handlers,root}\n        const handlers = _obj.handlers;\n        const root = _obj.root;\n        // Cake.Observer.registerHandlers(handlers, component.name);\n\n        // console.log(root);\n\n        Handler.set(handlers, component.name);\n\n\n        this._defineProperty(component, 'root', function(){\n            // console.log(281,component);\n            if (component._root){\n                return component._root;\n            }else {\n                let selector = root || '#app';\n                let query = document.querySelectorAll(selector);\n                if (query){\n                    return query;\n                }\n            };\n            throw new Error(`the selector '${root}' as container of component '${component.name}' is not found!`);\n        },function(value){\n            Object.assign(component, {_root:value})\n        });\n\n        //scope\n        this._defineProperty(component, '$scope', function(){\n            return scope;\n        });\n\n\n        component.role == 'form' && (()=>{\n            // console.log(component;\n            const methods = Formy(component);\n\n            // let has = !!component.root.querySelector('FORM');\n            const form = ()=>{\n\n                if(component.root.length){\n                    let root = component.root[0];\n\n                    let sel = `${(component.formSelector || 'FORM')}:not(.cake-template)`;\n                    return root.querySelector(sel);\n                } else {\n                    let form = component.html.querySelector(component.formSelector || 'FORM');\n                    return form;\n                };\n                return null;\n            };\n\n            for (let method in methods){\n                if(methods.hasOwnProperty(method)){\n                    Object.defineProperty(form, method, {\n                        get(){\n                            return methods[method];\n                        }\n                    })\n                };\n            };\n\n            // console.log(this._defineProperty);\n            this._defineProperty(component, '$form', function(){\n                return form;\n            });\n\n        })();\n\n    }).then(()=>{\n        component.fire = (function(){\n            function fire(name, variable){\n                /**\n                 * the static fn of fire are those declared in handlers;\n                 * fire is also a function that accepts handler fn, that is not declared in handlers;\n                 * these are commonly refers to quick functions;\n                 * the usage of fire is to manually run the notify, it tells notify what handler has been fired;\n                 * so that the notify will make a variable from it, to be feed to subscriber to that;\n                 */\n\n\n\n                variable = !variable?null:typeof variable == 'function'?variable.bind(component)():(function(){return variable}).bind(component)();\n\n                let o = {\n                    [name]:()=>{\n                        return variable;\n                    }\n                };\n                fn = o[name].bind(component);\n                if (typeof fn == 'function'){\n                    fn.name = name;\n                    fn.original = name;\n                    fn.binded = component.name;\n\n                    Handler.set({[name]: fn}, component.name);\n\n                    // const awaitNotify = Cake.Observer.notify(component.name, name, {});\n                    // component.await[name] = awaitNotify;\n                    // return awaitNotify;\n\n                    let payload = variable;\n                    // console.log(payload);\n\n                    function getAttributes(element){\n                        let o = {};\n                        if (!element){\n                            return o;\n                        };\n                        let attributes = element.attributes;\n                        if (attributes){\n                            for (let i = 0; i < attributes.length; i++){\n                                let attribute = attributes[i];\n                                let name = attribute.name;\n                                let value = attribute.value;\n                                o[name] = value;\n                            };\n                        };\n                        return o;\n                    };\n\n\n                    if (variable && (variable.element || variable.root || variable.container)){\n                        const element = getAttributes(variable.element);\n                        const root = getAttributes(variable.root);\n                        const container = getAttributes(variable.container);\n                        payload = {status:0, attributes:{element, root, container}};\n                    };\n\n                    // console.log(392, {component:component.name, event:name, payload});\n\n                    // Cake.MainMessageChannel.send({component:component.name, event:name, payload});\n\n                    const notify = Cake.Observer.notify(component.name, name, {}).then(()=>{\n                        return Cake.Observer.results[component.name][name];\n                    });\n                    component.await[name] = notify;\n\n                    return component.await[name];\n                };\n                console.error(`the param in fire is not an instance of function`);\n            };\n            \n            function addStaticMethod(fire, handlers){\n                for (let h in handlers){\n                    if (handlers.hasOwnProperty(h)){\n                        let handler = handlers[h];\n\n                        let event = handler.original;\n                        let fn = {\n                            [event]:function (variable, isBroadcast){\n                                //automatic broadcast if the event is destroy;\n                                if (isBroadcast != undefined){\n                                    isBroadcast = isBroadcast;\n                                };\n\n\n                                if (isBroadcast == undefined && event == 'destroy'){\n                                    //force to broadcast is destroy event;\n                                    isBroadcast = true;\n                                };\n\n                                if (isBroadcast == undefined){\n                                    isBroadcast = false;\n                                };\n\n                                // console.log(461, component.name, event, isBroadcast);\n\n                                if (isBroadcast){\n                                    /**\n                                     * async\n                                     */\n                                    component.await[event] = new Promise((res)=>{\n                                        //without setTimeout, there will be a problem;\n                                        //i think setTimeout, helps the promise to call resolve;\n                                        //as it commands the promise to resolve on the next clock tick;\n                                        setTimeout(()=>{\n                                            let payload = variable || {};\n\n                                            Cake.Observer.notify(component.name, event, payload).then(()=>{\n                                                return Cake.Observer.results[component.name][event];\n                                            }).then(r=>{\n                                                res(r);\n                                            }).catch(err=>{\n                                                console.log(447,err);\n                                                console.log(448, component.name, event, payload);\n                                                console.trace();\n                                                console.error(err);\n                                            });\n                                            \n                                        });\n                                    });\n                                    return component.await[event];\n                                } else {\n                                    return handler(variable);\n                                };\n                            }\n                        };\n                        // console.log(412, event, fn);\n                        fn[event] = fn[event].bind(component);\n                        fn[event].originalName = event;\n                        fn[event].binded = component.name;\n\n                        fire[event] = fn[event];\n                        fire.component = component.name;\n                    };\n                };\n            }\n            addStaticMethod(fire, component.handlers);\n\n            return fire;\n        })()\n    }).then(()=>{\n\n        if (component.type == 'view'){\n            component.toggler = component.toggler(component);\n            // Cake.Components[name] = component;\n            ComponentStorage.set(name, component);\n        };\n    }).then(()=>{\n        //update the binding of data, trigger, and utils option of component;\n        component.options.router && Cake.Router.subscribe(component.options.router.bind(component));\n        component.options.data && component.options.data.bind(component.data)(component);\n        component.options.utils && component.options.utils.bind(component.utils)(component);\n        component.options.init && component.options.init.bind(component)();\n\n    }).then(()=>{\n\n\n\n        if (component.type == 'model'){\n            Cake.Models[name] = component;\n        }\n        if (component.isStatic && component.type == 'view'){\n            component.render();\n        } else {\n            \n        };\n    });\n};\n\n\n\n\n\nmodule.exports = Cake;","module.exports = class {\n    constructor(config=[],html){\n        this.html = html || document;\n        this.cf = config;\n        this.duration = 300;\n    }\n    animate(moment){\n        this.config = this.parse(this.cf);\n\n        let element = this.config[0].element;\n        let config = this.config[0][moment];\n\n        if(!config){\n            return Promise.resolve();\n        };\n\n        // console.log(16, element);\n\n\n        return new Promise((res, rej)=>{\n            element.velocity(config.velocity,{\n                complete:function(){\n                    res();\n                }\n            })\n        })\n    }\n    // animate(moment){\n    //     this.config = this.parse(this.cf);\n\n    //     return new Promise((res)=>{\n    //         for (let i = 0; i < this.config.length; i++){\n    //             let cf = this.config[i];\n    //             // console.log(cf)\n\n    //             let element = cf.element;\n    //             //when there is no config for certain moment, render || remove\n    //             //safekeep\n    //             if (!cf[moment]){ res();break;};\n    //             let config = cf[moment];\n    //             if (!config.options && !(config.options && config.options.duration)){\n    //                 config.options = {duration : this.duration};\n    //             };\n    //             if (!config.keyframes && !element){continue;}\n\n    //             let keyframes = config.keyframes;\n    //             let index = 0;\n    //             let fr = [];\n    //             for (let k = 0; k < keyframes.length; k++){\n    //                 let kk = keyframes[k];\n    //                 switch(true){\n    //                     case typeof kk == 'string':{\n    //                         fr.push(this.dic(kk));\n    //                     } break;\n    //                     case (kk instanceof Object):{\n    //                         //maybe the offset is declared along with the keyframes;\n    //                         //name - refers to default animation\n    //                         // let {name, offset} = kk;\n    //                         let name = kk.name;\n    //                         let offset = kk.offset;\n    //                         if (name && offset){\n    //                             //support for element.animation - offset, equivalent to 10%-100% css @keyframes;\n    //                             let def = this.dic(name);\n    //                             def[def.length-1].offset = offset;\n    //                             fr.push(def);\n    //                         } else {\n    //                             fr.push(kk)\n    //                         }\n    //                     }\n    //                 };\n    //             }\n    //             keyframes = fr;\n    //             fr = null;\n    //             //to series calls of animation, one after the another;\n    //             // console.log(element, keyframes, config);\n    //             let recurseCall= ()=>{\n    //                 let kf = keyframes[index];\n    //                 let animate = element.animate(kf, (config.options || this.duration));\n    //                 // console.log(animate);\n    //                 if(animate.finished){\n    //                     animate.finished.then(()=>{\n    //                         if (index < keyframes.length -1){\n    //                             index += 1;\n    //                             recurseCall()\n    //                         } else {\n    //                             keyframes = [];\n    //                             // console.log(index, keyframes.length)\n    //                             res();\n    //                         }\n    //                     });\n    //                 } else {\n    //                     animate.onfinish =()=>{\n    //                         if (index < keyframes.length -1){\n    //                             index += 1;\n    //                             recurseCall()\n    //                         } else {\n    //                             keyframes = [];\n    //                             // console.log(index, keyframes.length)\n    //                             res();\n    //                         }\n    //                     };\n    //                 };\n\n\n    //             }; recurseCall();\n    //         };\n    //     });\n    // }\n    parse(config){\n        let configs = [], length = config.length, i = -1;\n        // console.log(config);\n        while(++i < length){\n            let cf = config[i];\n            let selector = cf.selector, el;\n            \n            switch(true){\n                case !!(selector.val && selector.attr):{\n                    el = this.html.querySelectorIncluded(`[${selector.attr}=${selector.val}]`, selector.attr, selector.val);\n                } break;\n                case !!(selector.val && !selector.attr):{\n                    let attr = selector.val.match(new RegExp(`^[.]`))?'class':\n                    selector.val.match(new RegExp(`^[#]`))?'id':null;\n                    let val = (attr)?selector.val.slice(1):null;\n                    el = this.html.querySelectorIncluded(selector.val, attr, val);\n                } break;\n            };\n            cf.element = el;\n            configs.push(cf);\n        };\n        // console.log(configs);\n        return configs;\n    }\n    dic(name){\n        let coll = {\n            slideOutUp:[{\n                transform: \"translate3d(0,0,0)\",\n                visibility: \"visible\",\n                opacity: \"1\",\n                easing: 'ease-out',\n            },{\n                transform: \"translate3d(0,100%,0)\",\n                visibility: \"hidden\",\n                opacity: \"0\",\n                easing: 'ease-out',\n            }],\n            slideOutRight:[{\n                transform: \"translate3d(0,0,0)\",\n                visibility: \"visible\",\n                opacity: \"1\"\n            },{\n                transform: \"translate3d(100%,0,0)\",\n                visibility: \"hidden\",\n                opacity: \"0\"\n            }],\n            slideOutLeft:[{\n                transform: \"translate3d(0,0,0)\",\n                visibility: \"visible\",\n                opacity: \"1\"\n            },{\n                transform: \"translate3d(-100%,0,0)\",\n                visibility: \"hidden\",\n                opacity: \"0\"\n            }],\n            slideOutDown:[{\n                transform: \"translate3d(0,0,0)\",\n                visibility: \"visible\",\n                opacity: \"1\",\n                easing: 'ease-out'\n            },{\n                transform: \"translate3d(0,-100%,0)\",\n                visibility: \"hidden\",\n                opacity: \"0\",\n                easing: 'ease-out',\n            }],\n            slideInUp:[\n                {\n                    transform: \"translate3d(0,100%,0)\",\n                    visibility: \"hidden\",\n                    opacity: \"0\",\n                    easing: 'ease-out',\n                },\n                {\n                    transform: \"translate3d(0,0,0)\",\n                    visibility: \"visible\",\n                    opacity: \"1\",\n                    easing: 'ease'\n                },\n            ],\n            slideInRight:[{\n                transform: \"translate3d(100%,0,0)\",\n                visibility: \"hidden\",\n                opacity: \"0\"\n            },{\n                transform: \"translate3d(0,0,0)\",\n                visibility: \"visible\",\n                opacity: \"1\"\n            }],\n            slideInLeft:[{\n                transform: \"translate3d(-100%,0,0)\",\n                visibility: \"hidden\",\n                opacity: \"0\",\n                easing:'ease-out',\n            },{\n                transform: \"translate3d(0,0,0)\",\n                visibility: \"visible\",\n                opacity: \"1\"\n            }],\n            slideInDown:[{\n                transform: \"translate3d(0,-100%,0)\",\n                visibility: \"hidden\",\n                opacity: \"0\",\n                easing: 'ease-out',\n            },{\n                transform: \"translate3d(0,0,0)\",\n                visibility: \"visible\",\n                opacity: \"1\",\n                easing: 'ease-out',\n            }],\n            disappear:[{\n                opacity: \"1\"\n            },{\n                opacity: \"0\"\n            }],\n            appear:[{\n                opacity: \"0\"\n            },{\n                opacity: \"1\"\n            }],\n            flipInX:[\n                ,{offset:0, backfaceVisibility: \"visible\"}\n                ,{transform: \"perspective(400px) rotate3d(1,0,0,90deg)\",opacity: \"0\", offset:0}\n                ,{transform: \"perspective(400px) rotate3d(1,0,0,-20deg)\", offset: 0.4,easing:'ease-in'}\n                ,{offset:0.6,  opacity: \"1\",transform: \"perspective(400px) rotate3d(1,0,0,10deg)\"}\n                ,{transform: \"perspective(400px) rotate3d(1,0,0,-5deg)\", offset:0.8}\n                ,{offset:1, backfaceVisibility: \"visible\",transform: \"perspective(400px) rotate3d(1,0,0,0)\"}\n            ],\n        };\n        return coll[name.trim()] || [];\n    }\n};","const Mo = require('./animate');\nconst Piece = require('./piece');\nconst Utils = require('./utils');\nconst Templating = require('./templating');\nconst Plugin = require('./plugin');\nconst RouterStorage = require('./storage/router-storage');\n// const {pushState} = require('./router')();\n\nfunction Component(name, template, options){\n    this.name = name;\n    this.template = template;\n    this.options = options;\n    this.handlers = options.handlers;\n    this.subscribe = options.subscribe;\n    this.renderqueue = options.renderqueue;\n    this.data = {};\n    this.root = options.root?`${options.root}:not(.cake-template)`:options.root;\n\n    this.items = false;\n    this.type = options.type || 'view';\n    this.toggle = options.toggle;\n    this.targets = {};\n    this.animateOptions = options.animate;\n    this.role = options.role;\n    this.isReady = false;\n    this.scope = options.scope;\n\n\n\n    this.animatecss = this.options.animatecss;\n\n    this.formSelector = options.form;\n\n    this.await = {};//storage of async handlers\n    \n    this.state = options.state;\n    this.originalState = {};\n\n    \n\n    this.utils = Utils;\n\n    this.renderQueing = [];\n\n    if(!this.handlers){\n        console.error(`${this.name} has no handlers`);\n    };\n    if(!this.subscribe){\n        console.error(`${this.name} has no subscribe`);\n    };\n\n\n\n    // options.data && options.data.bind(this.data)(this);\n    ((name == 'app') || (options.role == 'app')) && (()=>{ this.staticComponent = options.static || [];})();\n    // options.trigger && options.trigger.bind(this)();\n    // options.utils && options.utils.bind(this.utils)(this);\n\n    this.container = {};\n\n\n    this.compile = new Promise((res)=>{\n\n        this._bindHandlers();\n        res();\n    }).then(()=>{\n\n        return this._bindSubscribe();\n    }).then(()=>{\n        return this.cloneState();\n    }).then(()=>{\n        switch(this.type == 'view' && !!this.template){\n            case true:\n                return this.createElementAsync();\n            default:\n                this.isStatic = false;\n                break\n        };\n    });\n\n};\n\nComponent.prototype.isStatic = false;\nComponent.prototype.hasEvent = false;\nComponent.prototype.isConnected = false;\nComponent.prototype.destroyed = false;\nComponent.prototype.isCreated = false;\n\n\n\nComponent.prototype.cloneState = function(){\n    if(!this.state){\n        return;\n    };\n    for (let key in this.state){\n        if(this.state.hasOwnProperty(key)){\n            this.originalState[key] = this.state[key];\n        };\n    };\n    this.$state = (()=>{\n        return this.state;\n    })();\n\n};\n\n\n\nComponent.prototype.clearState = function(){\n    if(!this.state){\n        return;\n    };\n    this.state = JSON.parse(JSON.stringify(this.originalState));\n    \n\n    this.$state = (()=>{\n        return this.state;\n    })();\n};\n\nComponent.prototype.Subscribe = function(handler){\n    this.$observer.registerSubscribe({\n        [handler.listenTo]:{\n            [handler.original]:[handler],\n        }\n    })\n};\n\nComponent.prototype.Node = function(el){\n    const piece = new Piece(el);;\n    return piece;\n};\n\nComponent.prototype._bindHandlers = function(){\n    for (let key in this.handlers){\n        if (this.handlers.hasOwnProperty(key)){\n            let fn = this.handlers[key];\n            let originalName = fn.name;\n            fn = fn.bind(this);\n            fn.original = originalName;\n            fn.binded = this.name;\n            this.handlers[originalName] = fn;\n    \n            this.initAwaitHandlers(key);\n        };\n    };\n    if (!this.await.destroy){\n        this.await.destroy = Promise.resolve();\n    }\n    if (!this.await.animateRemove){\n        this.await.animateRemove = Promise.resolve();\n    }\n};\n\nComponent.prototype.initAwaitHandlers = function(handlerName){\n    //initializing awaits for handlers;\n    this.await[handlerName] = Promise.resolve();\n};\n\nComponent.prototype._bindSubscribe = function(){\n    //binding the subscribe to component;\n    let flattened = {};\n    for (let component in this.subscribe){\n        if (this.subscribe.hasOwnProperty(component)){\n            subscribe = this.subscribe[component];\n\n            if(!!subscribe.components && !subscribe.handler){\n                throw new Error(`there is no handler in format many of subscribe in event ${component}`);\n            } else if (!subscribe.components && !!subscribe.handler){\n                throw new Error(`there is no components in format many of subscribe in event ${component}`);\n            };\n\n            let isMany = !!subscribe.components && !!subscribe.handler;\n            \n            if (isMany){\n    \n                /**\n                 * multiple components triggering the same event;\n                 * this component is listening to that one event;\n                    event :{\n                        components:[],\n                        handler(){},\n                    }\n                 */\n                let event = component;\n                // let {components, handler} = subscribe;\n\n                let components = subscribe.components;\n                let handler = subscribe.handler;\n\n                handler =  handler.bind(this);\n                handler.binded = this.name;\n                handler.original = event;\n                for (let c = 0; c < components.length; c++){\n                    let component = components[c];\n      \n                    if (!flattened[component]){\n                        flattened[component] = {};\n                    };\n                    if (!flattened[component][event]){\n                        // flattened[component][event] = [];\n                        flattened[component][event] = {};\n                    }\n                    handler.listenTo = component;\n                    // flattened[component][event].push(handler);\n                    flattened[component][event] = handler;\n                };\n    \n            } else {\n                \n                if (!flattened[component]){\n                    flattened[component] = {};\n                };\n                /**\n                single event is triggerd by a component;\n                    component:{\n                        event:{\n                            handler(){},\n                        }\n                    }\n                 */\n                 let fns = subscribe;//object\n       \n                 for (let fn in fns){\n                    if (fns.hasOwnProperty(fn)){\n                        let handler = fns[fn];\n                        let original = handler.name;\n\n                        // console.log(component, handler);\n                        try{\n                            handler = handler.bind(this);\n                        } catch(err){}\n                        handler.original = original;\n                        handler.binded = this.name;\n                        handler.listenTo = component;\n       \n                        if (!flattened[component][original]){\n                           flattened[component][original] = {};\n                        //    flattened[component][original] = [];\n                        };\n                        \n                        // flattened[component][original].push(handler);\n                        flattened[component][original] = handler;\n                    };\n    \n                 };\n            };\n        };\n    };\n    this.subscribe = flattened;\n};\n\nComponent.prototype.getHTML = function(){\n    return this.html;\n}\n\nComponent.prototype.doFor = function(prop, newValue){\n\n    if (newValue == null) return;\n    return this.$attrib.notifyFor(prop, newValue, null, this.name, this.getHTML());\n};\n\nComponent.prototype.doToggle = function(prop, newValue){\n    this.$attrib.notifyToggle(prop, newValue, null, this.name, this.html);\n};\nComponent.prototype.doSwitch = function(prop, newValue){\n    this.$attrib.notifySwitch(prop, newValue, null, this.name, this.html);\n};\nComponent.prototype.doIf = function(prop, newValue){\n    this.$attrib.notifyIf(prop, newValue, null, this.name, this.html);\n};\nComponent.prototype.$animate = function(moment){\n    //normalize the two sourse, attr, and component declaration;\n    let ata = this.$attrib.getWatchItemsByType(this.name, 'animate');\n    let da = this.animateOptions;\n    let arr = [];\n    \n    ;(()=>{\n        if ((!ata.length && !(ata instanceof Array)) || !da){return;}\n        for (let a = 0; a < ata.length; a++){\n            let at = ata[a];\n            // let {ns:name, selector} = at;\n\n            let name = at.ns;\n            let selector = at.selector;\n\n            //declare name space in html, mapped to component animation declaration\n            if (at.ns){\n                if (da[name]){\n                    let ns = da[name];\n                    Object.assign(at, da[name]);\n                    delete da[name];\n                };\n            } else {\n                //declared animation in html, using animation name;\n                arr.push(ata);\n            };\n        };\n    })();\n    if (!ata.length) {return false}\n    //tweak component declared animation;\n    ;(()=>{\n        let obj = {};\n        let selector = {};\n        for (let key in da){\n            if (da.hasOwnProperty(key)){\n                selector.val = key;\n                obj.selector = selector;\n                Object.assign(obj, da[key]);\n                ata.push(obj);\n                //reset;\n                obj = {};\n                selector = {};\n            };\n        };\n    })();\n\n    // console.log(ata);\n\n    \n    return new Mo(ata, this.html).animate(moment);\n    // return Promise.resolve();\n};\n\nComponent.prototype.$templating = function(data, t, isConvert){\n    let template = t || this.template;\n    return new Templating(Plugin('templating')).createElement(data, template, isConvert);\n};\n\nComponent.prototype.createElement = function(){\n    let isSelector = this.template.substring(0,1) == '#';\n    if (!isSelector) return;\n    let selector =  this.template.substr(1);\n    let query = document.getElementById(selector);\n    let isTemplate = this.isTemplate = query && query.toString().includes('Template');\n\n\n\n    if (!query){\n        throw new Error(`the template for ${this.name} is not found with.`);\n    };\n\n    return new Promise((res)=>{\n        switch(isTemplate){\n            //template html\n            case true:{\n                // console.time(this.name)\n                let element = query.getContent(true);\n                if (!element){\n                    throw new Error(`it might be theres no template in component - ${this.name}`);\n                }\n                element.cake_component = this.name;\n                // console.timeEnd(this.name)\n                this.html = this.Node(element);\n                // console.log(274,this.html);\n                this._parseHTML(this.isStatic).then(()=>{\n                    res();\n                })\n            } break;\n            case null:{\n                res();\n            }\n            break;\n            //static html\n            default:{\n                let element = query;\n                if (!element){\n                    throw new Error(`it might be theres no template in component - ${this.name}`);\n                }\n                element.cake_component = this.name;\n                this.html = this.Node(element);\n                // console.log(290,this.html);\n                this.isStatic = true;\n\n                this._parseHTML(this.isStatic).then(()=>{\n                    res();\n                })\n            };\n        };\n    })\n};\n\nComponent.prototype.createElementAsync = function(){\n\n    return new Promise((res)=>{\n        this.createElement().then(()=>{\n            res();\n        });\n    }).then(()=>{\n        // console.log(`${this.name} is rendered async`)\n        this.isReady = true;\n    });\n    // console.log(`${this.name} is creating async el`)\n};\n\nComponent.prototype._isParsed = false;\n\nComponent.prototype._parseHTML = function(isStatic=false){\n    return this.$attrib.inject(this.html, this.name, isStatic).then(()=>{\n        // console.log(this.html, this.name)\n        this.original = this.html.cloneNode();\n        this._isParsed = true;\n    });\n};\n\nComponent.prototype.renderQue = function(options={}){\n    let hasNoId = options.id == undefined && options.id != null;\n    if(hasNoId){\n        throw new Error(`renderQue method requires an id.`);\n    };\n    let id = options.id;\n    if(id){\n        options.hasqued = true;\n        this.renderQueing.push({date:new Date().toString(), id, options});\n    };\n    return this.render(options);\n};\n\nComponent.prototype.initialize = function(){\n    if(this.type == 'model'){\n        return this.fire.initialize();\n    };\n    throw new Error('initialize handler is for type model.');\n};\n\nComponent.prototype.render = function(options={}){\n    let multiple = this.options.multiple;\n    if(options.hasqued){\n        // console.log(`rendering ${this.name} has been queued`);\n    } else {\n\n        if(this.isConnected && !multiple){\n            // console.log('is connected');\n            // console.trace();\n            console.error(`${this.name} is already rendered and connected to the DOM`);\n        };\n    };\n\n    if(options.revokeque){\n        //TODO why the this.wait.destroy is hanging when renderQue\n        this.await.destroy = Promise.resolve();\n    };\n\n    \n\n\n    if(this.isConnected && !multiple){\n\n        return Promise.resolve();\n    };\n\n\n\n\n    // let {root, cleaned, emit={}, data={}} = options || {};\n\n    let root = options.root || this.root;\n    let cleaned = options.cleaned;\n    let emit = options.emit || {};\n    let DATA = options.data || {};\n    let CSS = options.css;\n\n\n    if(this.options.onRender \n        && this.options.onRender.constructor \n        && [\"Function\",\"AsyncFunction\"].includes(this.options.onRender.constructor.name)){\n        this.onRenderConfig = this.options.onRender.bind(this)(this);\n\n        let data = this.onRenderConfig.data;\n        if(data){\n            DATA = Object.assign(DATA, data);\n        };\n    };\n\n    if(typeof root == 'string'){\n        let sel = `${root}:not(.cake-template)`;\n        root = [document.querySelector(sel)];\n    };\n    \n    let state = this.state || {};\n\n    let payload = {emit};\n\n\n    this.isConnected = true;\n    return new Promise((res, rej)=>{\n\n\n        // (!!root) && (this.root = root);\n        \n\n        // console.log(423, 'render', !this.isReady);\n        if (!this.isReady){\n  \n            this.createElement().then(()=>{\n                \n                // (hashed === true) && this.$hash.add(this.name);\n\n                return (!this.template) && this.fire.isConnected && this.fire.isConnected(payload, true);\n\n            }).then(()=>{\n                this.isReady = true;\n                res();\n            });\n        } else {\n            res();\n        };\n    }).then(()=>{\n\n        return this.await.destroy.then(()=>{\n\n            return this.await.animateRemove;\n        }).then(()=>{\n            return new Promise((res, rej)=>{\n                //html restructure base on data;\n                //by mutation;\n    \n                // let forItems = this.$attrib.getWatchItemsByType(this.name, 'for');\n                let attrItems = this.$attrib.getWatchItems(this.name);\n                // for (let i = 0; i < forItems.length; i++){\n                //     let nv = getValue(forItems[i]);\n                //     this.doFor(forItems[i], nv);\n                // };\n\n                // this.$attrib.notifier(prop, newValue, null, this.name, this.getHTML());\n\n\n                Promise.all(attrItems.map(item=>{\n                    if(DATA[item]){\n                        return this.$attrib.notifier(item, DATA[item], null, this.name);\n                    }\n                    // console.log(453, item)\n                    // return this.doFor(item, value);\n                })).then(()=>{\n                    // console.log(405, this.name, this.html);\n\n\n\n\n                    CSS && this.html.css(CSS);\n\n                    res(this.html);\n\n                });\n\n\n\n            }).then((element)=>{\n                payload = {element, emit};\n\n  \n                \n                return new Promise((res, rej)=>{\n                    try {\n                        this.fire.beforeConnected && this.fire.beforeConnected(payload, true);\n                        res(element);\n                    } catch(err){\n                        rej(err);\n                    };\n                });\n            }).then((element)=>{\n                if (this.isStatic){\n                    //static component, those already attached to DOM;\n                } else {\n                    //replace the mustache here;\n                    let prom = (!DATA)?Promise.resolve():(()=>{\n                        return new Promise((res)=>{\n                            let el = element.getElement();\n                            el = this.$templating(DATA, el);\n                            this.html = element = this.Node(el);\n                            this.html.replaceDataSrc();\n                            \n                            DATA = null;\n                            res();\n                        })\n                    })();\n\n                    \n                    \n\n                    return prom.then(()=>{\n                        return this._animatecss('render');\n                    }).then(()=>{\n                        element.appendTo(root, cleaned);\n                        \n                        return true;\n                    });\n                }\n            })\n            .then(()=>{\n                return this.findRouterLink();\n            }).\n            then(()=>{\n                //switch\n                // let switchItems = this.$attrib.getWatchItemsByType(this.name, 'switch');\n    \n                // for (let i = 0; i < switchItems.length; i++){\n                //     this.doSwitch(switchItems[i], getValue(switchItems[i]));\n                // };\n            }).then(()=>{\n                \n                return this.findContainer();\n                \n            }).then(()=>{\n                try {\n                    // console.log('setting attributes', this.name);\n                    return  this.fire.isConnected && this.fire.isConnected(payload, true);\n                }catch(err){\n                    console.log(440,err);\n                }\n            }).then(()=>{\n                // console.log(532, this.name, this.html);\n                return this.findTarget();\n            }).then(()=>{\n                // console.log(this.container);\n                // console.log('this containers must have el',this.name, this.container);\n                // return this.addEvent(static, multiple);\n                return this.addEvent();\n            }).then(()=>{\n                // console.log('start animation', this.name);\n                return this.$animate('render');\n            }).then(()=>{\n                (multiple) && this._smoothReset();\n                return new Promise((res, rej)=>{\n                    setTimeout(()=>{\n                        this._watchReactive();\n                        res();\n                    },100);\n                });\n            });\n    \n        })\n    })\n};\n\nComponent.prototype._animatecss = function(moment){\n    try {\n        if (!this.animatecss){\n            return Promise.resolve();\n        };\n        let conf = this.animatecss[moment];\n        if(conf){\n            \n            return Promise.all(Object.keys(conf).map(key=>{\n                \n                \n                let value = 'animate__animated,';\n                value += conf[key];\n\n                let els = this.html.querySelectorAllIncluded(null,'data-animatecss',key);\n                if(els){\n                    //clear\n                    return Promise.all(els.map(el=>{\n                        let classList = el.classList;\n                        for (let c = 0; c < classList; c++){\n                            let cl = classList[c];\n                            if(cl.includes('animate_')){\n                                el.classList.remove(cl);\n                            };\n                        };\n\n                        //reapply\n                        value.split(',').forEach(item=>{\n                            el.classList.add(item.trim());\n                        });\n\n                        el.style.setProperty('--animate-duration', '0.3s');\n\n                        return new Promise((res, rej)=>{\n                            setTimeout(()=>{\n                                res();\n                            },500);\n                        });\n\n                    }));\n                } ;\n                return Promise.resolve();\n            }));\n        };\n        return Promise.resolve();\n    } catch(err){\n        console.error(err);\n        return Promise.resolve();\n    };\n};\n\nComponent.prototype.renderAsync = function(options){\n    this.render(options).then(()=>{\n        this.$persist.append(this.name);\n    });\n};\n\nComponent.prototype._smoothReset = function(){\n    this.html = this.original.cloneNode();\n};\n\nComponent.prototype._hardReset = function(name){\n    this.$persist.remove(name);\n    //remove the element first;\n    //clone the element;\n    this.html = this.original.cloneNode();\n    return true;\n};\n\nComponent.prototype.reset = function(options={}){\n    let hasNoId = options.id == undefined && options.id != null;\n    if(hasNoId){\n        throw new Error(`renderQue method requires an id.`);\n    };\n    let id = options.id, conf;\n    if(id){\n        conf = this.renderQueing.filter(item=>{\n            return item.id == id;\n        });\n        this.renderQueing = JSON.parse(JSON.stringify(this.renderQueing)).filter(item=>{\n            return item.id != id;\n        });\n    };\n\n    let animate = this.$animate('remove');\n\n    if (animate instanceof Promise){\n        return this.await.animateRemove = new Promise((res)=>{\n            animate.then(()=>{\n                //it is very important to remove first the component\n                //before hard reset;\n                return this.html.remove();\n            }).then(()=>{\n                this.container = {};\n            }).then(()=>{\n                return this.clearState();\n            }).then(()=>{\n                return this._hardReset(this.name);\n            }).then(()=>{\n                res();\n            }).then(()=>{\n                this.isConnected = false;\n                if(this.renderQueing && this.renderQueing.length){\n                    if(conf){\n                        let options = conf.options;\n                        if(!options){\n                            options = {};\n                        };\n                        options.revokeque = true;\n                        return this.render(options);\n                    };\n                };\n            });\n        });\n    } else {\n        return new Promise((res)=>{\n            this.html.remove(this.name);\n            this.clearState();\n            this.container = {};\n            this._hardReset(this.name);\n            this.isConnected = false;\n            res();\n        }).then(()=>{\n            if(this.renderQueing && this.renderQueing.length){\n                if(conf){\n                    let options = conf.options;\n                    if(!options){\n                        options = {};\n                    };\n                    options.revokeque = true;\n                    return this.render(options);\n                };\n            };\n        });\n    }\n};\n\nComponent.prototype.addEvent = function (static, multiple){\n    // let isStatic = !!static;\n    // let isMultiple = !!multiple;\n    // if (isMultiple && isStatic){\n    //     return false;\n    // };\n    let component = this.name;\n    function notify(event, component,  isPreventDefault, isStopPropagation){\n        return function(e){ \n            // console.log(512,e);\n            // console.log(509,!isPreventDefault, component,event)\n            if (!isPreventDefault){\n                e.preventDefault();\n            };\n            if (isStopPropagation){\n                e.stopPropagation();\n            };\n\n            Cake.Observer.notify(component, event, e);\n        };\n    };\n    if (!this.targets) return;\n    for (let event in this.targets){\n        if (this.targets.hasOwnProperty(event)){\n            // let cf = JSON.parse(JSON.stringify(this.targets[event]));\n            let cf = this.targets[event];\n            // if(this.name == 'sidebar'){\n            //     console.log(527, cf);\n            // };\n  \n            for (let item of cf){\n                // let {sel, el, cb} = item;\n\n                let sel = item.sel;\n                let el = item.el;\n                let cb = item.cb;\n\n                let _event = event;\n                \n                let place = event.substring(0,2);\n                let isPreventDefault = place.includes('~');//default to true;\n                let isStopPropagation = place.includes('^');//default to false;\n\n                // console.log(542,isPreventDefault);\n\n                if(isPreventDefault || isStopPropagation){\n                    _event = event.slice(1);\n                    cb = cb || _event;\n                } else {\n                    if(!cb){\n                        cb = event;\n                    }\n                };\n\n                if (!el.Ref().get('__cake__events')){\n                    el.Ref().set('__cake__events', {});\n                }; \n                let store = el.Ref().get('__cake__events');\n                \n                if (!store[cb]){\n\n                    el.addEventListener(_event, notify(cb, component, isPreventDefault, isStopPropagation), true);\n                    store[cb] = true;\n                    el.Ref().set('__cake__events', store);\n                } else {continue};\n            };\n        };\n    };\n};\n\nComponent.prototype.findTarget = function(){\n    let q = this.$attrib.getEventTarget(this.name);\n\n    return new Promise((res)=>{\n        for (let item of q){\n            let els = this.html.querySelectorAllIncluded(`[data-event=${item.sel}]`);\n            for (let e = 0; e < els.length; e++){\n                if (!this.targets[item.event]){\n                    this.targets[item.event] = [];\n                };\n                this.targets[item.event].push({el:els[e], ...item});\n            };\n        };\n        res();\n    });\n}; \n\nComponent.prototype.findRouterLink = function(){\n    let q = this.$attrib.getRouterTarget(this.name);\n    \n    if(q && q.length){\n        for (let a = 0; a < q.length; a++){\n            let item = q[a];\n            if(item.for == false){\n                let sel = item.sel;\n                let bind = item.bind;\n                let rconfig = RouterStorage.get(bind);\n                if(rconfig){\n                    let el = this.html.querySelector(`[data-route=${sel}]`);\n                    if(el){\n                        el.href = `#!${rconfig.path}`;\n                    };\n                };\n                continue;\n            } else {continue};\n        };\n\n    };\n\n\n    // let e = JSON.parse(JSON.stringify(q));//deep cloning\n\n    // for (let item of e){\n        \n    //     item.el = document.querySelector(`[data-event=${item.sel}]`);\n    //     if (!item.el.__router){\n    //         // item.el.addEventListener('click',(e)=>{\n    //         //     e.preventDefault();\n    //         //     e.stopPropagation();\n    //         //     pushState(item.value, null, e.target.href);\n    //         // });\n    //         item.el.__router = 1;\n    //     };\n    // };\n}; \n\nComponent.prototype.toggler = function(_this){\n    /*\n        @params\n        {basis} - comparison of elements;\n        {cls} - class to toggle;\n        {mode} - radio/ switch;\n        {sel} - siblings selector;\n        {persist} - bool;\n    */\n    let attrToggle = this.$attrib.getWatchItemsByType(this.name, 'toggle');\n\n    let cl = class{\n        constructor(bind, bases, html, _this){\n            this.toggle = _this.toggle;\n            this.bind = bind;\n            this.bases = bases;\n            this.cache = _this.$cache;\n            this.html = html;\n        }\n        check(bind){\n            let config = this.toggle[bind];\n            // console.log(this.toggle)\n\n            if (!config){ \n                console.error(`${bind} is not found in toggle! choose from ${JSON.stringify(Object.keys(this.toggle))}`);\n            } else {\n                if (attrToggle.length){\n                    // let {ns} = config;\n                    let ns = config.ns;\n                    //toggle is use only for namespacing;\n                    let f = attrToggle.find(item=>{return item.name == `ns-${ns}`});\n                    f && (config.sel = `[data-toggle=${f.sel}]`);\n                };\n                return config;\n            };\n        }\n        _toggle(){\n            let config = this.check(this.bind);\n            if(!config){ return;}\n            // let {basis='data-name', cls='is-active', mode='radio', sel, persist=true} = config;\n\n            let basis = config.basis || 'data-name';\n            let cls = config.cls || 'is-active';\n            let mode = config.mode || 'radio';\n            let sel = config.sel;\n            let persist = config.persist == undefined? true : config.persist;\n\n            let targets = this.html.querySelectorAll(sel);\n            if (!targets.length) { return; };\n\n            let prev, next;\n\n            // console.log(targets);\n\n            if (targets.length == 1){\n                let isbool = typeof this.bases == 'boolean'\n                let isforce =  !!this.bases;\n                let el =  targets[0];\n                // console.log(isbool, isforce)\n                if (persist){\n                    const _forceState = function(el, cls, isforce){\n                        if(isforce){\n                            if (el.classList.contains(cls)){\n                                el.classList.remove(cls);\n                            };\n                        } else {\n                            if (!el.classList.contains(cls)){\n                                el.classList.add(cls);\n                            };\n                        }\n                    };\n                    if (isbool){\n                        if (isforce){\n                            this.cache.createOrUpdate(this.bind, true);\n                            _forceState(el, cls, true);                 \n                        } else {\n                            this.cache.createOrUpdate(this.bind,false);                          \n                            _forceState(el, cls, false);                 \n                        }\n                        el.classList.toggle(cls);\n                    } else {\n                        this.cache.createOrUpdate(this.bind, !el.classList.contains(cls));\n                        el.classList.toggle(cls);\n                    };\n                };\n            } else {\n                for (let t = 0; t < targets.length; t++){\n                    let el = targets[t];\n                    let has = el.classList.contains(cls);\n                    let attr = el.getAttribute(basis);\n                    \n                    if (attr == this.bases){\n                        if (mode == 'switch'){\n                            el.classList.toggle(cls);\n                        } else {\n                            if (!has){ el.classList.add(cls) };\n                        };\n                        if (persist){\n                            this.cache.createOrUpdate(this.bind, attr);\n                        };\n                        next = attr;\n                    } else {\n                        if(has){ \n                            el.classList.remove(cls)\n                            prev = el.getAttribute(basis);\n                        };\n                    };\n                };\n            }\n            return {prev, next};\n        }\n        _recall(){\n            let config = this.check(this.bind);\n            if(!config){ return;}\n            // let {basis='data-name', cls='is-active',  sel} = config;\n\n            let basis = config.basis || 'data-name';\n            let cls = config.cls || 'is-active';\n            let sel = config.sel;\n\n            return this.cache.get(this.bind).then(result=>{\n                if (!result){\n                    return result;\n                };\n                let bases = result;                \n                let targets = this.html.querySelectorAll(sel);\n                if (!targets.length) { return ;};\n                if (targets.length == 1){\n                    let el = targets[0];\n                    // console.log(bases, this.bind);\n                    if (bases){\n                        el.classList.add(cls);\n                    };\n                } else {\n                    for (let t = 0; t < targets.length; t++){\n                        let el = targets[t];\n                        let has = el.classList.contains(cls);\n                        let attr = el.getAttribute(basis);\n                        if (attr == bases){\n                            if (!has){ el.classList.add(cls) };\n                        };\n                    };\n                };\n                return bases;\n            });\n        }\n        _get(){\n            let config = this.check(this.bind);\n            if(!config){ return;}\n            return this.cache.get(this.bind).then(result=>{\n                if (!result){\n                    return result;\n                };\n                return result;\n            });\n        }\n    };\n    let fn = (bind, bases)=>{\n        return new cl(bind, bases, this.html, this)._toggle();\n    };\n    fn.recall = (bind)=>{\n        return new cl(bind, false, this.html, this)._recall();\n    };\n    fn.get = (bind)=>{\n        return new cl(bind, false, this.html, this)._get();\n    };\n    return fn;\n};\n\nComponent.prototype.findContainer = function(){\n\n\n    return new Promise((res)=>{\n        try{\n\n            let containers = this.html.getContainers();\n            for (let c = 0; c < containers.length; c++){\n                let el = containers[c];\n                let name = el.dataset.container;\n                if (name){\n                    if(this.container[name]){\n                        if(Utils.isArray(this.container[name])){\n                            this.container[name].push(el);\n                        } else {\n                            this.container[name] = [this.container[name],el];\n                        };\n\n                    } else {\n                        this.container[name] = el;\n                    };\n                };\n            };\n            res();\n        } catch(err){\n            console.log(895, err);\n        }\n    });\n\n    // console.log('must trigger first',containers);\n    // console.log('must trigger first',this.container);\n};\n\n\n\nComponent.prototype._validator = function(name, value){\n    if(this.options.validate){\n        this.validate = this.options.validate;\n        const handler = this.validate[name];\n        if(handler){\n\n        };\n    };\n};\n\n/*\n    this will watch the form input and validate the data,\n    , set it to scope and state as formData;\n*/\nComponent.prototype._watchReactive = function(){\n    if(this.role == 'form' && this.options.watch === true){\n        const validator = this.options.validate;\n        const form = this.$form();\n\n        // console.log(this.name, form);\n\n        if(!form){\n            return;\n        }\n\n        if(form && form._reactive){\n            return ;\n        };\n  \n        if(this.state && !this.state.formData){\n            this.state.formData = {};\n        };\n        const component = this;\n        const handler = (e)=>{\n            const target = e.target;\n            const name = target.name || target.id;\n            const value = target.value;\n            let handler = validator[name];\n            if(handler){\n                handler = handler.bind(component);\n                if(handler){\n                    let validated = handler(e);\n                    if(validated){\n                        this.state && (this.state.formData[name] = value);\n                        this.$scope.set(name, value);\n                    };\n                };\n            } else {\n                this.state && (this.state.formData[name] = value);\n                this.$scope.set(name, value);\n            };\n        };\n        form.addEventListener('change',(e)=>{\n            if(!(e.target.tagName == 'INPUT' || e.target.tagName == 'TEXTAREA')){\n                handler(e);\n            };\n        });\n        form.addEventListener('input',(e)=>{\n            if(e.target.tagName == 'INPUT' || e.target.tagName == 'TEXTAREA'){\n                handler(e);\n            };\n        });\n        form._reactive = true;\n    };\n};\n\n\nComponent.prototype.observer = function(subscribe){\n    function callback(name){\n        return this.handler[name]\n    }\n    this.observer = new Observer(this, subscribe, callback.bind(this));\n};\n\nComponent.prototype.variable = function(obj){\n    let vary = Object.keys(obj);\n    let validate = {};\n    let values = [];\n    function invalid(name, test, type){\n        if (!test){\n            validate[name] = `value is not '${type}'`;\n        };\n    };\n    for (let key in obj){\n        if (obj.hasOwnProperty(key)){\n            let config = obj[key];\n            // let {type, value} = config;\n            let type = config.type;\n            let value = config.value;\n            let test;\n            if (['string', 'number'].includes(type)){\n                test = typeof value == type;\n            } else if (value instanceof Array){\n                test = type == 'array';\n            } else {\n                test = type == 'object';\n            }\n            values.push(value);\n            invalid(key, test, type);\n        };\n    };\n    if (Object.keys(validate).length){\n        throw new Error(JSON.stringify(validate));\n    } else {\n        return values;\n    }\n};\n\n\nmodule.exports = Component;","const Utils = require('./utils');\nconst StorageKit = require('./storage')();\nconst RouterStorage = require('./storage/router-storage');\nconst ComponentStorage = require('./storage/components-store');\nconst RouterStore = new StorageKit({\n    child:'object',\n    storage:'local',\n    name:`_cake_router_cf`,\n});\nmodule.exports = function(models, component){\n  \n    const hooks = [];\n    return class {\n        constructor(routes, options){\n            this.options = options;\n            this.unauthRoute = null;\n            this.componentConf = null;\n            this.authValidRoute = null;\n            this.loaderOptions = options.loader;\n\n    \n            this.authConfig = (function(){\n                if(!this.options){return;};\n                const confAuth = this.options.auth;\n                const confComponents = this.options.components;\n                // console.log(29, confComponents);\n                if(confComponents){\n                    this.componentConf = confComponents;\n                };\n                if(confAuth && confAuth.verify){\n                    const verify = confAuth.verify;\n                    this.verifyComponent = verify[0];\n                    this.verifyComponentHandler = verify[1];\n                    this.unauthRoute = confAuth['401'];\n                    // return confAuth;\n                };\n                \n                if(confAuth && confAuth.valid){\n                    this.authValidRoute = confAuth.valid;\n                };\n\n                return null;\n            }.bind(this))();\n\n\n            this.authRedirectRoute = {};//route to redirect back when the token is still valid;\n            this.route = this.compile(routes);\n            this.prev = null;\n            this.components = ComponentStorage;\n\n            \n\n            this.watch();\n            this.persist();\n            Object.defineProperty(component.prototype, '$router', {\n                configurable:true,\n                get:()=>{\n                    return {\n                        goTo:this.goTo.bind(this),\n                        goBack:this.goBack.bind(this),\n                        auth:this.auth.bind(this),\n                        logout:this.logout.bind(this),\n                        login:this.login.bind(this),\n                        verify:this.verifyAuth.bind(this),\n                        ...this.prev,\n                    };\n                },\n                set(value){\n                    return;\n                },\n            });\n        }\n        getComponent(name, path){\n            if(this.componentConf && this.componentConf[name]){\n                let rerender = this.componentConf[name].rerender;\n\n                if(rerender){\n                    name = rerender.includes(path)?name:null;\n                };\n            };\n            return name ? this.components.get(name): null;\n        }\n        verifyAuth(token){\n            return models.$loaded(this.verifyComponent).then(model=>{\n                return model.fire[this.verifyComponentHandler](token).then(res=>{\n                    this.isauth = (res && res.status == 1);\n                    return res;\n                });\n            });\n        }\n        async authenticate(name,isauth){\n            let authUser = Utils.isArray(isauth) && isauth.length && isauth || null; \n\n            // console.log(name, isauth, authUser, this.unauthRoute);\n\n            if(!(isauth == true || authUser)){\n                return;\n            };\n            /*\n                happens when the current page is in the unAuthRoute\n                usually the login page,\n                when still the token is valid,\n                instead of redirect to unAuthRoute\n                it will redirect to the route declared per role\n                this happens in mobile app, when the app is minimized,\n                the path is reset to '/';\n            */\n\n                // console.log(103, this.unauthRoute , name);\n\n            const initialize = (this.unauthRoute == name);\n            // const initialize = this.unauthRoute[name];\n\n\n            if(this.unauthRoute){//has 401;\n                try {\n\n\n                    const config = RouterStore.get('role', true) || {};\n                    const role = config.role;\n                    const token = config.token;\n\n\n                    if(authUser){\n                        if(!authUser.includes(config.role)){\n                            // this.redirect401(null);\n                            let result = this.goTo(this.unauthRoute,{replace:true});\n\n                            if(result && result.isredirected){\n\n                            } else {\n                                location.reload();\n                            };\n                            return;\n                        };\n                    };\n\n\n                    const isverified = await this.verifyAuth(token);\n\n                    \n                    if(isverified.status == 0){\n                        this.logout();\n                        location.reload();\n                    };\n\n                    if(config){\n                        if(initialize){\n\n         \n                            const role = config.role;\n                            const data = config.data;\n\n                            // console.log(99, this.authRedirectRoute, data, role);\n\n                            const route = this.authRedirectRoute[role];//redirect back to a page;\n                            if(route){\n                                const name = route.name;\n                                this.goTo(name);\n                            };\n                        } else {\n    \n                        }\n                    } else {\n                        \n                        if(initialize){\n\n                        } else {\n                            this.logout();\n                        }\n                    };\n                } catch(err){\n                    alert(JSON.stringify(err.message || err));\n \n                    if(initialize){\n                    } else {\n                        this.logout();\n\n                    }\n                };\n            };\n            \n        }\n        login(cred, options){\n            let role = cred.role;\n            let token = cred.token;\n            let data = cred.data;\n            let created =RouterStore.createOrUpdate('role',{role,token, data});\n\n            let path = options && options.path;\n            let config = options && options.config;\n\n            // console.log(this.authValidRoute);\n\n            if(!role){\n                throw new Error(`role is not provided in router.login`);\n            };\n            if(!token){\n                throw new Error(`token is not provided in router.login`);\n            };\n            if(!data){\n                throw new Error(`data is not provided in router.login`);\n            };\n            if(path){\n                \n            } else if(this.authValidRoute && this.authValidRoute[role]){\n                path = this.authValidRoute[role];\n            } else {\n                throw new Error('provide route when login is successful');\n            };\n            this.goTo(path, config);\n            // return created\n        }\n        auth(){\n            const auth = RouterStore.get('role', true);\n            if(!auth){\n                // this.logout();\n                return {};\n            };\n            return auth;\n        }\n        logout(isredirect){\n            try {\n                RouterStore.remove('role');\n            } catch(err){};\n\n            // alert(this.unauthRoute);\n            if(isredirect){\n\n            } else {\n                setTimeout(()=>{\n                    this.goTo(this.unauthRoute,{replace:true});\n                },200);\n            }\n            // sessionStorage.createOrUpdate('history',[]);\n        }\n        goTo(routeName,config={}){\n            try {\n                let routes = this.route;\n                // let {params={}, replace:isreplace} = config || {};\n\n                let params = config.params || {};\n                let isreplace = config.replace;\n\n\n                let hash = null;\n                const raw = Object.entries(routes);\n\n                if(!routeName){\n                    const auth = RouterStore.get('role', true);\n                    const role = auth.role;\n                    const route = this.authValidRoute[role];//redirect back to a page;\n                    if(route){\n                        routeName = route.name || route;\n                    };\n                };\n\n                if(!routeName){\n                    throw new Error(`provide routename`);\n                };\n\n                for (let i = 0; i < raw.length; i++){\n                    // const [route, config] = raw[i];\n                    const route = raw[i][0];\n                    const config = raw[i][1];\n                    // const {name} = config;\n                    const name = config.name;\n\n\n\n                    if(name == routeName){\n                        hash = route;\n                        break;\n                    };\n                };\n                if(!hash){\n\n\n\n                    if(routeName && routeName.includes('://')){\n                        location.href =  routeName;\n                        return {isredirected:true};\n                    };\n\n                    throw new Error(`${routeName} is not found in routes`);\n                };\n\n                // console.log(131, hash);\n\n                if(hash == '/'){\n                    if(isreplace){\n                        location.replace(`${location.origin}${location.pathname}`);\n                    } else {\n                        window.location = `${location.origin}${location.pathname}`;\n                    }\n                    return;\n                };\n\n                let path;\n                hash = hash.slice(1);\n                if(params.toString().includes('Object')){\n                    let p = '';\n                    for (let key in params){\n                        p += `${key}=${params[key]}&`;\n                    };\n                    params = p;\n                    path =`!/${hash}?${params}`;\n                } else {\n\n                    path = `!/${hash}`;\n                }\n                if(hash == '/'){\n                    path = \"\";\n                };\n\n                // console.log(159, path);\n\n                // console.log(123, isreplace);\n\n\n                if(isreplace){\n                    let loc = `${location.origin}${location.pathname}#${path}`;\n                    // console.log(180,loc, !Utils.isFirefox());\n                    // console.log(!Utils.isFirefox());\n                    console.log(276, Utils.isChrome() && !Utils.isFirefox(), loc);\n                    Utils.isChrome() && !Utils.isFirefox() && history.replaceState(undefined, undefined, loc);\n                    location.replace(loc);\n                } else {\n                    // console.log(128,path);\n\n                    var a = document.createElement('a');\n                    a.href = `#${path}`;\n                    Utils.isChrome() && !Utils.isFirefox() && history.pushState(undefined, undefined, a.href);\n                    a.click();\n                    // console.log(171,a.href);\n\n                }\n            } catch(err){\n                console.log(err);\n            }\n        }\n        goBack(){\n            \n            // return storage.getAll().then(r=>{\n            //     console.log(94, r);\n            //     const l = r.length;\n            //     if(l && l > 1){\n            //         const prev = r[l-2];\n            //         if(prev){\n            //             this.goTo(prev);\n            //         }\n            //     };\n            // });\n            return new Promise((res, rej)=>{\n                // const prev = this.history[this.history.length-2];\n            \n                // if(prev){\n                //     this.goTo(prev, {replace:true});\n                // };\n                // console.log('hit back');\n                // console.log(prev);\n                window.history.back();\n                res();\n            });\n        }\n        persist(){\n            if (!document.hasRouterPersist){\n                let event = 'DOMContentLoaded';\n                if('deviceready' in document){\n                    event = 'deviceready';\n                };\n                document.addEventListener(event, (e)=>{\n                    // console.log('is ready');\n                    // console.trace();\n                    this.parse();\n                    this.notify().then(()=>{\n                        return this.navigate(true);\n                    });\n                });\n    \n                document.hasRouterPersist = true;\n            };\n        }\n        watch(){\n            if (!window.hasRouterPop){\n                // console.log('set pop state');\n                window.addEventListener('popstate',(e)=>{\n                    // console.log(236, e);\n                    this.parse();\n                    this.notify().then(()=>{\n                        // console.log('notified');\n                        return this.clear().then(()=>{\n                            // console.log('cleared');\n                            return this.navigate().then(()=>{\n                                // console.log('navigated');\n                            });\n                        });\n                    })\n                });\n\n                window.hasRouterPop = true;\n            } else {\n                this.parse();\n            };\n        }\n        compile(routes){\n            // console.log(167, this);\n            let con = {};\n            for (let key in routes){\n                \n                let config = routes[key];\n                // console.log(281, config);\n                key = String(key);\n                const len = key.length;\n                let regex = key;\n                if(['404'].includes(key)){\n                    //http errors;\n                    const callback = routes[key];//function\n                    \n                    config = {callback, name:key};\n                } else {\n                    regex = regex.slice(1);\n                };\n                \n                regex = regex.split('/');\n                regex = regex.map((item, index)=>{\n                    let param = item.includes(':');\n                    let a = \"\";\n                    (index==0)?(a+=\"^/\"):(a+='/');\n                    (param?a+='(([^/#?]+?))':a+=item);\n                    (index == len-1)?a+='/?$':a+=\"\";\n                    if (param){\n                        const paramKey = item.replace(':',\"\");\n                        if (!con[key]){\n                            con[key] = {};\n                        };\n                        con[key].params = {\n                            [paramKey]:index,\n                        };\n                    };\n                    return a\n                });\n\n                \n\n                if (con[key] && con[key].params){\n                    con[key] = {\n                        params:con[key].params,\n                        regex:new RegExp(regex.join(\"\")),\n                        ...config,\n                    }\n                } else {\n                    con[key] = {\n                        regex:new RegExp(regex.join(\"\")),\n                        ...config,\n                    }\n                };\n\n                if(this.authValidRoute){\n                    Utils.each(this.authValidRoute, function(obj, i){\n                        let key = obj.key;\n                        let value = obj.value;\n\n                        if(value == config.name){\n                            if(this.authRedirectRoute[value]){\n                                this.authRedirectRoute[value] = config;\n                                console.error(`auth ${value} is found in other route`);\n                            } else {\n                                this.authRedirectRoute[value] = config;\n                            };\n                        };\n                    }.bind(this));\n\n                };\n\n                RouterStorage.set(key,con[key]);\n\n            };\n            con.length = Object.keys(routes).length;\n            con.keys = Object.keys(routes);\n\n            return con;\n        }\n        parse(){\n            // console.log(330,this.route);\n            let hash = window.location.hash, scheme, routeName;\n            if(hash){\n                let test1 = hash.includes('#!/');\n                let test2 = hash.includes('#/');\n                if(test1 || test2){\n                    scheme = true;\n                    if(test1){\n                        hash = hash.split('#!').join(\"\");\n                    } else if(test2){\n                        scheme = true;\n                        hash = hash.split('#').join(\"\");\n                    };\n                    let h = \"\";\n                    let p = \"\";\n                    for (let i = 0; i < hash.length; i++){\n                        let v = hash[i];\n\n                        if(v == '/' && p == '/'){\n                            continue;\n                        };\n                        if(v == '/'&& !p){\n                            p = '/'\n                            h += '/';\n                        };\n                        if(v && v != '/'){\n                            h += v;\n                            p = \"\";\n                        };\n                    };\n                    hash = h;\n                    h = \"\";\n                };\n            } else {\n                hash = '/';\n                scheme = true;\n            };\n            if (!scheme){\n                return;\n            };\n            const url = new URL(`http://localhost${hash}`);\n            // const {search, pathname:path} = url;\n\n            let search = url.search;\n            let path = url.pathname;\n\n            const keys = this.route.keys;\n            const state = {};\n            const PARAMS ={};\n            if (search){\n                new URLSearchParams(search).forEach((value, key)=>{\n                    state[key] = value;\n                });\n            };\n\n\n            let has = false;\n            for (let i = 0; i < keys.length; i++){\n                const route = this.route[keys[i]];\n\n                // console.log(522, route);\n\n                const regex = route.regex;\n                const components = route.components;\n                const params = route.params;\n                const name = route.name;\n                const auth = route.auth;\n                // const entry = route.entry;\n                const overlay = route.overlay;\n                const display = route.display;\n                const onrender = route.onrender;\n                const controller = route.controller;\n\n\n\n\n                if (params){\n                    let _path = String(path);\n                    _path = _path.slice(1);\n                    _path = _path.split('/');\n                    Object.entries(params).forEach(param=>{\n                        const key = param[0];\n                        const value = param[1];\n\n                        if (_path[value]){\n                            PARAMS[key] = _path[value];\n                        };\n                    });\n                };\n\n                \n                const test = regex.test(path);\n\n                // alert(1);\n                if (test){\n                    routeName = name;\n                    \n                    this.authenticate(routeName,auth);\n                    if(auth){\n                        // console.log('check if still logged in');\n                        // const config = RouterStore.get('role', true) || {};\n                        // const role = config.role;\n                        // const token = config.token;\n\n\n                        // if(token){\n                        //     this.verifyAuth(token).then(res=>{\n                        //         if(res && res.status){\n                        //             // console.log(563, token, config);\n                        //             this.goTo();\n                        //             window.location.reload && window.location.reload();\n                        //         } else {\n                        //             this.logout();\n                        //         };\n                        //     });\n                        // } else {\n\n                        // };\n\n\n                    };\n\n                    this.prev = {components, params:PARAMS,state,path, name, prev:this.prev, overlay, display, onrender,controller};\n                    has = true;\n                    break;\n                };\n            };\n\n            this.redirect404(has);\n        }\n        redirect404(has){\n            // console.log(\"redirect404\", !has);\n            if(!has){\n                // console.log(464, this.route, this.options);\n                // console.log(465, this.route['404']);\n                if(this.route['404']){\n                    let path = this.route['404'].callback();\n                    // const {origin, pathname} = location;\n\n                    // console.log(470,path);\n\n                    let origin = location.origin;\n                    let pathname = location.pathname;\n\n                    if(this.route[path]){\n                        // console.log(1);\n                        if(path == '/'){\n                            path = `${origin}${pathname}`;\n                        } else {\n                            if(pathname.slice(-1) == '/'){\n                                path = `${origin}${pathname}#!${path}`;\n                            } else {\n                                path = `${origin}${pathname}/#!${path}`;\n                            };\n                        };\n                        location.replace(path);\n                    } else if(!!path && !this.route[path]) {\n                        if(origin.slice(-1)=='/'){\n                            if(path[0] == '/'){\n                                path = path.slice(1);\n                            };\n                        };\n                        path = `${origin}${path}`;\n                        location.replace(path);\n                    };\n                };\n            } else {\n                // return await this.log(routeName);\n            }\n        }\n        async navigate(ispersist){\n            // console.log('here', this.prev);\n            if (this.prev){\n                // const {components, state, path, name, overlay, onrender={}} = this.prev;\n\n                const components = [...this.prev.components];\n                const state = this.prev.state;\n                const path = this.prev.path;\n                const name = this.prev.name;\n                const overlay = this.prev.overlay;\n                const onrender = this.prev.onrender || {};\n\n\n                // if(overlay){\n                //     storage.create(name);\n                // };\n\n                //TODO - insert before and after the Loader and the LoaderOut\n                //TODO - exception can be found in loader:{except:[]}\n                if(this.loaderOptions && this.loaderOptions.except){\n                    if(!this.loaderOptions.except.includes(name)){\n                        let loaderin = this.loaderOptions.in;\n                        let loaderout = this.loaderOptions.out;\n                        if(typeof loaderin == 'string' && typeof loaderout == 'string'){\n                            components.unshift(loaderin);\n                            components.push(loaderout);\n                        };\n                    };\n                };\n\n\n                // console.log(425, 'components to render',components);\n\n                try {\n\n                    // console.log(hooks);\n                    if(components.length){\n                        // return Promise.all(components.map(item=>{                        \n                        //     return this.components[item].render({emit:{route:this.prev}});\n                        // }));\n                        return new Promise((res, rej)=>{\n                            const l = components.length;\n                            let i = 0;\n\n                            \n                            if(l){\n                                const recur = ()=>{\n                                    let component = components[i];\n\n                                   \n\n                                    if(components.length > i){\n                                        i += 1;\n                                        let componentName = component;\n                                        // component = this.components[component];\n                                        \n                                        let isunload = this.getComponent(component,path);\n                                        \n\n\n\n                                        new Promise((res=>{\n                                            let _component = this.components.get(component);\n\n\n                                            if(_component && _component.isConnected != undefined){\n                                                res(_component);\n                                            } else {\n                                                setTimeout(()=>{\n                                                    res(this.components.get(component));\n                                                }, 50);\n                                            };\n                                        })).then((component)=>{\n    \n                                            //TODO - look to model?\n                                            if(!component){\n                                                component = models[componentName];\n                                            };\n    \n    \n                                            \n    \n                                            if(component){\n                                                // console.log(638,component);\n                                                if(component.isConnected && !isunload){\n                                                    if(component.fire.softReload){\n                                                        component.fire.softReload();\n                                                        component.await.softReload && component.await.softReload.then(()=>{\n                                                            recur();\n                                                        });\n                                                    } else {\n                                                        recur();\n                                                    };\n                                                } else if(component.type == 'model'){\n                                                    component.initialize().then(()=>{\n                                                        recur();\n                                                    }).catch(err=>{\n                                                        throw err;\n                                                    });\n                                                } else {\n                                                    let fromRouter = onrender[componentName] || {};\n                                                    let fromComponent = component.onRenderConfig || {};\n    \n                                                    if(!Utils.isObject(fromComponent)){\n                                                        fromComponent = {};\n                                                    };\n                                                    if(!Utils.isObject(fromRouter)){\n                                                        fromRouter = {};\n                                                    };\n    \n                                                    component.render({emit:{route:this.prev},...fromRouter, ...fromComponent}).then(()=>{\n                                                        if(component.await.isConnected){\n                                                            component.await.isConnected && component.await.isConnected.then(()=>{\n                                                                recur();\n                                                            });\n                                                        } else {\n                                                            recur();\n                                                        }\n                                                    }).catch(err=>{\n                                                        throw err;\n                                                    });\n                                                };\n                                            }\n                                            \n                                        })\n\n                                        \n\n\n                                        // if(component){\n\n                                        // } else {\n                                        //     recur();\n                                        // }\n\n                                        \n                                        \n                                    } else {\n                                        res()\n                                        // rej(`${component} is not found`);\n                                    };\n                                    \n                                };recur();\n                            } else {\n                                res();\n                            };\n                        });\n                    }\n\n                } catch(err) {\n                    console.log(err);\n                    throw new Error(`some of the component in ${JSON.stringify(components)} in path ${path} of router is not found, make sure the it is created`);\n                }\n            }\n        }\n        static pushState(data, notused, path){\n            // console.log(path);\n            window.history.pushState(data, notused, path);\n            let promise = Promise.resolve();\n            if (this.prev){\n                // const {components:_components, state, path, name} = this.prev;\n\n                const _components = this.prev.components;\n                const state = this.prev.state;\n                const path = this.prev.path;\n                const name = this.prev.name;\n\n                promise = new Promise((res, rej)=>{\n                    const l = components.length;\n                    let i = 0;\n                    if(l){\n                        const recur = async ()=>{\n                            let component = components[i];\n                            if(components.length > i){\n                                // component = this.components[component];\n                                component = this.getComponent(component,path);\n\n                                \n                                if(component){\n                                    component.fire.destroy();\n                                    component.await.destroy.then(()=>{\n                                        return recur();\n                                    });\n                                } else {\n                                    await recur();\n                                }\n                            } else {\n                                // rej(`${component} is not found`);\n                                res()\n                            };\n                            \n                            i += 1;\n                        };\n                        recur();\n                    } else {\n                        res();\n                    };\n                });\n\n                // promise = Promise.all(_components.map(item=>{\n                //     return components[item].fire.destroy();\n                // }));\n            };\n            return promise.then(()=>{\n                return this.navigate();\n            })\n        }\n        clear(){\n            let promise = Promise.resolve();\n            \n            \n\n            const overlay = this.prev && this.prev.overlay || undefined;\n            //if overlay prevent in detroying current rendered component;\n            if(overlay){\n                return promise;\n            };\n\n            // console.log('has cleared?', overlay);\n\n            const recur = async function(index, componentNames, sourceComponents, callback){\n                let component = componentNames[index];\n                let componentName = component;\n                let self = recur;               \n                try {\n\n                    if(componentNames.length > index){\n                        index += 1;\n                        // component = sourceComponents[component];\n\n                        component = this.getComponent(component,this.prev.path);\n               \n                        \n\n                        if(component){\n                            if(!component.fire.destroy){\n                                throw new Error(`${componentName} has no destroy handler!`);\n                            };\n    \n                            component.fire.destroy();\n                            component.await.destroy.then(()=>{\n                                return self(index, componentNames, sourceComponents, callback);\n                            });\n                        } else {\n                            await self(index, componentNames, sourceComponents, callback);\n                        };\n\n                    } else {\n                        // rej(`${component} is not found`);\n                        callback()\n                    };\n                    \n                } catch(err){\n                    throw (err);\n                }\n            }.bind(this);\n\n            // console.log(624, this.components);\n\n            if (this.prev && this.prev.prev){\n                // const {components, state, path, name, overlay} = this.prev.prev;\n                let components = this.prev.prev.components;\n                let state = this.prev.prev.state;\n                let path = this.prev.prev.path;\n                let name = this.prev.prev.name;\n                let overlay = this.prev.prev.overlay;\n                let destroyPromise = Promise.resolve();\n                // const components = this.prev.components;\n\n                \n                if(overlay){\n                    destroyPromise = new Promise((res, rej)=>{\n                        \n                        const l = components.length;\n                        \n                        let i = 0;\n                        if(l){\n                            recur(i, components, this.components, res);\n                        } else {\n                            res();\n                        };\n                    });\n                };\n\n                promise = new Promise((res, rej)=>{\n                    \n                    const l = components.length;\n                    // console.log(644, components, l);\n                    let i = 0;\n                    if(l){\n                        recur(i, components, this.components, res);\n                    } else {\n                        res();\n                    };\n                });\n                return destroyPromise.then(()=>{\n                    return promise;\n                });\n            };\n            return promise;\n        }\n        pushState(data, notused, path){\n            window.history.pushState(data, notused, path);\n            let promise = Promise.resolve();\n            this.clear();\n            return promise.then(()=>{\n                return this.navigate();\n            })\n        }\n        static subscribe(fn){\n            if(fn && fn.constructor.name == 'Function'){\n                hooks.push(fn);\n            };\n        }\n        notify(){\n            return Promise.all((false)?[Promise.resolve()]:hooks.map(subscribe=>{\n                return subscribe();\n            }))\n        }\n    }\n};","const StorageKit = require('./storage')();\nconst ComponentStorage = require('./storage/components-store');\nmodule.exports = class {\n    constructor(){\n        this.storage = new StorageKit({\n            child:'array',\n            storage:'session',\n            name:'_cake_persistent',\n        });\n    }\n    listen(components){\n        components = ComponentStorage;\n        let event = 'DOMContentLoaded';\n        if('deviceready' in document){\n            event = 'deviceready';\n        };\n        window.addEventListener(event, (e)=>{\n            setTimeout(()=>{\n                this.storage.getAll().then(result=>{\n                    if (!(result && !result.length)) return;\n\n\n                    for (let r = 0; r < result.length; r++){\n                        let item = result[r];\n                        let component = components.get(item);\n                        component.isConnected = false;\n\n\n                        \n                        if (component){\n                            // console.log(component, !component.isConnected);\n                            !component.isConnected && component.render.bind(component)();\n                        } else {\n                            console.error(`component ${component} is not found!`)\n                        }\n                    };\n                })\n            })\n        });\n    }\n    append(name){\n        this.storage.create(name);\n    }\n    remove(name){\n        this.storage.remove(name);\n    }\n};","const stat = {\n    handlers:{},\n    subscribe:{},\n};\n\nwindow.Stat = stat;\n\nfunction set(storage, component, fn){\n\n    if(storage[component] == undefined){\n        storage[component] = {};\n    };\n    if(storage[component][fn] == undefined){\n        storage[component][fn] = 0;\n    } else {\n        storage[component][fn] += 1;\n    };\n    return true;\n}\n\nmodule.exports = {\n    handlers:{\n        set:function(component, fn){\n            return set(stat.handlers,component, fn);\n\n        },\n        get:function(component){\n            if(stat.handlers[component] != undefined){\n                console.table(stat.handlers[component]);\n            } else {\n                console.log(null);\n            };\n        },\n    },\n    subscribe:{\n        set:function(component, fn){\n            return set(stat.subscribe,component, fn);\n        },\n        get:function(component){\n            if(stat.subscribe[component] != undefined){\n                console.table(stat.subscribe[component]);\n            } else {\n                console.log(null);\n            };\n        },\n    },\n}","const Stat = require('./handler-stat');\nconst subscriber = {};\n\nwindow.Subscribe = subscriber;\nmodule.exports = {\n    set:function(subscribe){\n        return new Promise((res, rej)=>{\n            for(component in subscribe){\n                if (subscribe.hasOwnProperty(component)){\n\n                    let events = subscribe[component];\n                    for (let event in events){\n                        if (events.hasOwnProperty(event)){\n                            let handler = events[event];\n    \n                            if(!subscriber[component]){\n                                subscriber[component] = {};\n                            };\n                            if(!subscriber[component][event]){\n                                subscriber[component][event] = [];\n                            };\n                            subscriber[component][event].push(handler);\n\n                            Stat.subscribe.set( component,handler.original);\n                        };\n                    };\n                };\n            };\n            res();\n        });\n    },\n    get:function(component, event){\n        return subscriber[component] && subscriber[component][event];\n    },\n};","const Stat = require('./handler-stat');\nconst handler = {};\n\nwindow.Handler = handler;\n\nmodule.exports = {\n    set:function(handlers, component){\n\n        return new Promise((res)=>{\n            for (let fn in handlers){\n                if (handlers.hasOwnProperty(fn)){\n                    let _handler = handlers[fn];\n                    // Handler[component][fn] = handler;\n        \n\n                    if(!handler[component]){\n                        handler[component] = {};\n                    };\n            \n                    handler[component][_handler.original] = _handler;\n        \n                    Stat.handlers.set( component,_handler.original);\n                };\n            };\n\n            res();\n        });\n    },\n    get:function(component, event){\n        return handler[component] && handler[component][event];\n    },\n};","const Subscriber = require('./storage/subscriber');\nconst Handler = require('./storage/handler');\nconst Stat = require('./storage/handler-stat');\n\nfunction Observer(logger){\n\n    this.logger = logger || false;\n    this.results = {};\n\n}\nObserver.prototype.notify = function(component, /*handler- name/fn*/event, e/*payload */){\n    /*\n        calls by fire or DOM event;\n        DOM Event - string;\n        fire - string || fn;\n    */\n       \n\n    \n\n    let _component = component;\n    let _event = event;\n    let _e = e;\n\n    let handler = Handler.get(_component, _event);  \n    if (!handler) {\n        console.error(`no setup handler for the event ${_event} in ${_component} component`);\n        return;\n    };\n\n    _component = handler.binded;\n\n    //it is able to accept a promise from handlers;\n    let prom = new Promise((res,rej)=>{\n        let e = handler(_e);\n        res(e);\n    });\n\n    Stat.handlers.set( _component,handler.original);\n\n    return prom.then(variable=>{\n        let execs = []; \n        if (!this.results[_component]){\n            this.results[_component] = {};\n        };\n        let subscribe = Subscriber.get(_component, _event);\n\n\n        if (subscribe){\n            for (let s = 0; s < subscribe.length; s++){\n                let fn = subscribe[s];\n\n                Stat.subscribe.set( _component,fn.original);\n\n                execs.push(new Promise((res, rej)=>{\n                    try{\n                        let exec = (()=>{\n                            return fn(variable)\n                        })();\n\n                        if (exec && exec.ObjectType == 'Promise'){\n                             exec.then(result=>{\n                                if (!this.results[_component]){\n                                    this.results[_component] = {};\n                                };\n                                this.results[_component][_event] = result;\n                                res(result);\n                             }).catch(err=>{\n                                rej(err);\n                             });\n                        } else {\n                            this.results[_component][_event] = exec;\n                            res(exec);\n                        }\n                    } catch(e){\n                        console.log(e);\n                        rej(e);\n                    };\n                }));\n            };\n        } else {\n            if (this.logger) {\n                console.info(`no subscriber for (${_event}) event of (${_component}) component`);\n            };\n            \n            this.results[_component][_event] = variable;\n\n        };\n        \n        return Promise.all(execs).then(()=>{\n            variable = null;\n            execs = [];\n            return true;\n        });\n    });\n\n};\n\nmodule.exports = Observer;","module.exports =  function (component){\n    // let component = this;\n    // console.log(component);\n    // if (!component.await.$form){\n    //     component.await.$form = {};\n    // }\n\n\n    class Options{\n        constructor(type){\n            this.type = type;\n            this.storage = {};\n        }\n        store(formControl,data){\n            this.storage[formControl] = data;\n        }\n        get options(){\n            if(this.type == 'select' || this.type == 'virtual'){\n                let a = {};\n                for (let key in this.storage){\n                    let val = this.storage[key];\n                    a[key] = val.options;\n                };\n                return a;\n            };\n            return false;\n        }\n        get value(){\n            if(this.type == 'input'){\n                let a = \"\";\n                for (let key in this.storage){\n                    let val = this.storage[key];\n                    a = val.options[0];\n                };\n                return a;\n            };\n            return false;\n        }\n\n        get query(){\n            let a = {};\n            for (let key in this.storage){\n                let val = this.storage[key];\n                a = val.query[0] || null;\n            };\n            return a;\n        }\n\n        get has(){\n            let a = \"\";\n            for (let key in this.storage){\n                let val = this.storage[key];\n                a = val.query[0] || null;\n            };\n            return a;\n        }\n    };\n\n    const form = {};\n\n    form.options = (obj)=>{\n        // console.log(9, obj);\n        // let {options, params} = obj;\n        let options = obj.options;\n        let params = obj.params;\n        \n        if (!options) { options = [] };\n\n        // console.log(33, params);\n        let isgroup = options.length > 1;\n\n        let prom = Promise.all(options.map(item=>{\n            // let {control, field, tbl, src, schema, type} = item;\n\n            let control = item.control;\n            let field = item.field;\n            let tbl = item.tbl;\n            let src = item.src;\n            let schema = item.schema;\n            let type = item.type;\n\n            // console.log(schema)\n            // console.log(15, item);\n\n            // console.log(40,src, {tbl, field, params});\n            // console.trace();\n            return component.fire(src, {tbl, field, params}).then((opts)=>{\n                // console.log(18, opts);\n            \n\n                opts = opts || [];\n                item.query = opts;\n                // console.log(18, opts);\n                opts = opts.map(item=>{\n                    // console.log(18, item);\n                    return schema(item);\n                });\n\n                if(type != 'input'){\n                    /**appending empty option */\n                    let scheme = schema({});\n                    for (let key in scheme){\n                        if (scheme.hasOwnProperty(key)){\n                            scheme[key] = \"\";\n                        };\n                    };\n                    opts.unshift(scheme);\n                }\n                /**end */\n\n                // console.log(opts);\n                item.options = opts;\n                return item;\n            }).then((iter)=>{\n                // console.log(51, iter);\n                // let {type, control} = iter;\n                let type = iter.type;\n                let control = iter.control;\n                if (!type){\n                    type = 'others';\n                };\n                const cls = new Options(type);\n                if (isgroup){\n                    let o = {};\n                    if (!o[control]){\n                        o[control] = cls;\n                        o[control].store(control, iter);\n                    };\n                    return o;\n                } else {\n                    cls.store(control, iter);\n                    return cls;\n                };\n            });\n        })).then(res=>{\n            if(isgroup){\n                return res.reduce((accu, iter)=>{\n                    Object.assign(accu, iter);\n                    return accu;\n                },{});\n            } else {\n                return res[0];\n            }\n        }).catch(err=>{\n            console.error(err);\n        });\n\n        // component.await.$form.options = prom;\n        return prom;\n    };\n    form.plot = (config)=>{\n        // let {data, container} = config;\n\n        let data = config.data;\n        let container = config.container;\n\n        if (!data && !container) { return };\n        const query = (root, selector, callback)=>{\n            if (!root){\n                console.info('root is not provided!');    \n                return ;\n            }\n            const els = root.querySelectorAll(`${selector}`);\n            const len = els.length;\n            if (!len){\n                callback(null, data);\n                return;//exit;\n            }\n            for (let e = 0; e < len; e++){\n                let el = els[e];\n                let name = el.name;\n                let value = data[name];\n\n                let r = callback(el, value, e);\n                if (r == 'break'){break; };\n                if (r == 'continue'){ continue; };\n            };\n        };\n\n\n\n        query(container, 'INPUT.input', function(el, value){\n            if(!el){\n                return;\n            }\n            if (value != undefined){\n                if (el.type == 'date'){\n                    value = new Date(value) == 'Invalid Date'?\"\":new Date(value).toJSON().split('T')[0];\n                    el.value = value;\n                } else {\n                    el.value = value;\n                }\n            };\n        });\n\n        query(container, 'TEXTAREA.input', function(el, value){\n            if(!el){\n                return;\n            }\n            if (value != undefined){\n                el.value = value;\n            };\n        });\n\n        setTimeout(()=>{\n            query(container, 'SELECT.input:not(.cake-template)', function(select, value){\n                if(!select){\n                    return;\n                }\n                // console.log(select);\n                query(select, 'OPTION:not(.cake-template)', function(option, _value, index){\n                    // console.log(option)\n                    if (option){\n                        if (option.value == value){\n                            select.selectedIndex = index;\n                            return 'break';\n                        };\n                    } else {\n                        // console.trace();\n                        // console.log(_value);\n                        console.log(option, _value, 'provide schema')\n                        //provide schema\n                    }\n                });\n            });\n        }, 500);\n\n        return Promise.resolve();\n\n    };\n\n    return form;\n};","// const mootools = require('./scripts/mootools');\nconst env = require('./scripts/env');\nconst extensions = require('./scripts/extends');\nconst polyfill = require('./scripts/polyfill');\nconst utils = require('./scripts/utils');\nconst templateExtend = require('./scripts/template-extend');\nconst plugin = require('./scripts/plugin');\n\n// const piece = require('./scripts/piece');\n// const observer = require('./scripts/observer');\n// const templating = require('./scripts/templating');\n// const animate = require('./scripts/animate');\n// const persist = require('./scripts/persist');\n// const hash = require('./scripts/hash');\n// const form = require('./scripts/form');\n\n\n// const storageKit = require('./scripts/storage')();\n// const scope = require('./scripts/scope')();\n// const router = require('./scripts/router')();\n// const attributes = require('./scripts/attributes');\n// const component = require('./scripts/component');\n\nconst cake = require('./scripts/cake');\n\nwindow.Cake = cake;\n\n\n\n"],"names":["$d7758967142135df$var$StorageKit","parcelRequire","module","exports","dependency","_hooks","registerNotifier","fn","this","notify","push","install","session","child","storage","name","notifier","component","obj","value","bind","reactiveData","set","getInputData","type","_component","data","JSON","parse","stringify","key","sanitize","formData","FormData","append","hook","callback","get","quick","pKeys","pkey","Promise","async","res","rej","createOrUpdate","then","all","map","cb1","hooks","callbacks","forEach","cb","removeCache","remove","constructor","replace","match","$1WNVd","typeOf","_obj","toLowerCase","ObjectForEach","hasOwnProperty","isNull","d","isObject","hasItem","src","id","has","i","length","item","Object","keys","hasInArray","_key","undefined","hasInObject","methods","unique","Set","add","Array","from","includes","assign","ObjectMerge","arr","filter","contains","some","_value","open","setTimeout","getNot","getAll","resolve","update","close","arguments","create","storageType","err","sessionStorage","clear","localStorage","Error","init","save","cache","recache","array","object","issave","setItem","local","instanceID","$16b1eeabfc2fdd52$var$global","$16b1eeabfc2fdd52$var$TYPES","typeof","ctx","Function","HTMLCollection","NodeList","Element","isArray","isNumber","isString","isHTMLCollection","isNodeList","isElement","isFunction","$16b1eeabfc2fdd52$var$LOOP","_each","a","each","index","st","r","reduce","accu","$16b1eeabfc2fdd52$var$OBJECT","path","split","p","_p","$16b1eeabfc2fdd52$var$STRING","removeWhiteSpace","str","String","join","$16b1eeabfc2fdd52$var$_log","console","log","if","condition","$16b1eeabfc2fdd52$var$OTHERS","perf","time","timeEnd","logTest","ops","b","err1","toUrlSearchParams","istrim","searchParams","val","toString","encodeURI","slice","string","exclude","decodeURIComponent","toFormData","form","options","controls","textareas","querySelectorAll","inputs","selects","loop","cont","sort","files","test","closest","classList","err2","getAttribute","o","i1","control","element","nodeType","el","tag","tagName","checked","skipsanitize","json","trim","fd","splitBySpace","toArray","arrayLike","timeOut","location","origin","recurse","l","rec","message","browser","window","_browser","isOpera","opr","addons","opera","navigator","userAgent","indexOf","isFirefox","InstallTrigger","isSafari","HTMLElement","safari","pushNotification","isIE","document","documentMode","isEdge","StyleMedia","isChrome","chrome","cordova","isBlink","CSS","device","isAndroid","isIOS","isDesktop","escapeRegExp","text","$16b1eeabfc2fdd52$var$ARRAY","prop","Loop","UTILS","$16b1eeabfc2fdd52$var$iter","global","env","destructure","prototype","ObjectType","caching","toHyphen","_StringCache","cvt","splitted","ss","s","charCodeAt","toProper","first","substring","rest","proper","toUpperCase","removeSpace","toCamelCase","toCamel","querySelectorIncluded","selector","attr","q","querySelector","qu","querySelectorAllIncluded","dataset","HTMLDocument","toggler","dataName","activeClass","t","node","toggle","Ref","n","_cakes_storage","replaceDataSrc","srcs","setAttribute","removeAttribute","unRequired","keep","rawdirs","dirs","ins","orig","dir","concat","$3e00c1aa00b08aef$var$self","customElements","define","connectedCallback","subTemplate","ref","template","refEl","getElementsByName","error","temp","content","cloneNode","firstElementChild","attrs","attributes","replaceWith","super","HTMLTemplateElement","replaceSubTemplate","subTemplates","getElementsByTagName","collectContent","cf","fr","createDocumentFragment","styles","appendChild","others","children","style","parseStyle","textContent","splitted1","sp1","_sp1","sel","sp","parseHTML","parent","createElement","other","getContent","isConvert","_collectedContent","query","css","innerHTML","$e8efa9d873f4c98a$exports","plugins","$e4e3bcea9141e7be$var$Templating","lefttag","righttag","_getTag","RegExp","_bindReplace","pattern","replaceString","_toElement","outerHTML","els","dd","bindData","$e4e3bcea9141e7be$exports","$4a06ba8bf35ea5cf$var$routerStorage","$4a06ba8bf35ea5cf$exports","config","$d170d8d28ae23e0a$export$44487a86467333c3","$d170d8d28ae23e0a$export$2eaf9172a83ee9e7","$d170d8d28ae23e0a$export$c1fdfb880e73617c","$19890ed1a37f32ff$var$getConfig","newValue","prevValue","$19890ed1a37f32ff$var$extendConfig","configs","cloned1","cl","iter","incrementedSels","ic","cloned","incrementedSel","$19890ed1a37f32ff$exports","html","hasNegate","testVal","attrkey","attrvalue","incrementId","$e127365f17ceac8f$var$getConfig","$e127365f17ceac8f$var$extendConfig","$e127365f17ceac8f$exports","c","attrHyphen","cls","$e019f840284bab1f$var$getConfig","$e019f840284bab1f$var$extendConfig","$e019f840284bab1f$exports","className","$1cd061ad38aed443$var$Piece","e","getElements","getElement","fg","getContainers","getElementsByDataset","container","getAllElements","key3","key1","appendTo","roots","cleaned","root","TypeError","i2","i3","getElementById","ids","toArra","arg","qe","$1cd061ad38aed443$exports","$50d2aa611c5f5975$var$getConfig","$50d2aa611c5f5975$var$updateConfig","$50d2aa611c5f5975$exports","component1","templating","attrPayload","targets","target","binded","forUpdateBind","forTemplate","removeProperty","dataForIteration","lt","logicalType","logicalHtml","hit","getWatchItemsBySel","_type","insertAdjacentElement","parentElement","selectedIndex","payload","$74d37c3f5c6e33cb$var$storage","$74d37c3f5c6e33cb$var$subscribeExternal","original","listenTo","Subscribe","ComponentStorage","$74d37c3f5c6e33cb$exports","subscribe","lk","setInterval","clearInterval","componentName","$effc8144b5d48cd2$var$getConfig","$effc8144b5d48cd2$var$forCached","parents","$effc8144b5d48cd2$exports","sts","switchConfig","data1","islast1","sel1","hasReplaced","stat","increment","index1","conf","rawsel","__sel","for","d1","item1","template1","find","parentForSel","ssel","cases","mapping","switchElement","hitCase","item3","_id","caseBind","parentNode","replaceChild","create1","cf1","forAutoElement","datas","islast","select","routeConfig","rconfig","routeElement","route","state","routes","href","findContainer","$a28476c7bd95ef24$var$getConfig","$a28476c7bd95ef24$var$extendConfig","$a28476c7bd95ef24$exports","testval","_true","_false","trueNotIgnore","falseNotIgnore","trueClasses","falseClasses","$d2faf39ec83170cc$var$getConfig","$d2faf39ec83170cc$exports","$569f2a2d2aca3611$var$getConfig","$569f2a2d2aca3611$var$extendConfig","$569f2a2d2aca3611$exports","sub","$35decf1e39f8f4dc$var$getConfig","$35decf1e39f8f4dc$var$extendConfig","$35decf1e39f8f4dc$exports","$59398e9301d469db$var$ComponentAttribStorage","store","$59398e9301d469db$exports","$6d9897cee73fdfae$var$getConfig","$1ef46649a3970bae$var$Attrib","uiid","$6d9897cee73fdfae$exports","parentFor","notifyFor","notifyForUpdate","notifySwitch","notifyClass","notifyBind","notifyAttr","notifyIf","notifyModel","notifyToggle","notifyRoute","val1","equiv","forUpdate","switch","class","hits1","hits","actions","action","vals","v","getEventTarget","evt","getRouterTarget","getWatchItems","_st","red","wt","forWt","tst","getWatchItemsByType","getConfig","_activateReactive","_register","f","_static","qs","isStatic","dComponent","_loopElements","gr","_compileEvents","events","event","_compileToggle","toggles","ns","_compileFor","fors","el1","isCleaned","forCleaned","display","parentIsFor","parentCf","_compileForUpdate","_compileSwitch","switchs","casesId","_case","case","cnf","_compileBind","elModels","g","_compileAnimate","anims1","anims","keyframes","animate","_compileIf","ifs","regex","_ifBind","_gr","exp","_sp2","hasRegularLog","ifBind","_compileClass","cls1","bindVal","hasNegateCount","_compileAttr","attrPair","_compileModel","model","_compileRoute","elRoutes","isFromFor","inject","apply","$1ef46649a3970bae$exports","$25526fe6c3b9a722$var$Scope","$c2d1cc5270cb95b7$exports","moment","velocity","complete","dic","slideOutUp","transform","visibility","opacity","easing","slideOutRight","slideOutLeft","slideOutDown","slideInUp","slideInRight","slideInLeft","slideInDown","disappear","appear","flipInX","offset","backfaceVisibility","duration","$e439d2088f42ffff$var$Component","handlers","renderqueue","items","animateOptions","role","isReady","scope","animatecss","formSelector","await","originalState","utils","renderQueing","staticComponent","static","compile","_bindHandlers","_bindSubscribe","cloneState","createElementAsync","hasEvent","isConnected","destroyed","isCreated","$state","clearState","handler","$observer","registerSubscribe","Node","originalName","initAwaitHandlers","destroy","animateRemove","handlerName","flattened","components","fns","getHTML","doFor","$attrib","doToggle","doSwitch","doIf","$animate","ata","da","at","$templating","substr","isTemplate","cake_component","_parseHTML","_isParsed","renderQue","hasqued","date","Date","render","initialize","fire","multiple","revokeque","emit","DATA","onRender","onRenderConfig","attrItems","beforeConnected","_animatecss","findRouterLink","findTarget","addEvent","_smoothReset","_watchReactive","setProperty","renderAsync","$persist","_hardReset","reset","options1","isPreventDefault","isStopPropagation","preventDefault","stopPropagation","Cake","Observer","event1","_event","place","addEventListener","_this1","attrToggle","check","_toggle","prev","next","basis","mode","persist","isbool","bases","isforce1","_forceState","isforce","_recall","result","_get","_this","$cache","recall","containers","_validator","validate","watch","validator","$form","_reactive","handler1","$scope","observer","variable","values","invalid","$e439d2088f42ffff$exports","$0752b544bf73338d$var$RouterStore","$0752b544bf73338d$exports","models","getComponent","componentConf","rerender","verifyAuth","token","$loaded","verifyComponent","verifyComponentHandler","isauth","status","authUser","unauthRoute","goTo","isredirected","reload","logout","authRedirectRoute","alert","login","cred","authValidRoute","auth","isredirect","routeName","params","isreplace","hash","raw","entries","pathname","loc","history","replaceState","pushState","click","goBack","back","hasRouterPersist","navigate","hasRouterPop","con","len","param","paramKey","scheme","test1","test2","h","url","URL","search","PARAMS","URLSearchParams","overlay","onrender","controller","_path","authenticate","redirect404","ispersist","loaderOptions","except","loaderin","in","loaderout","out","unshift","res1","recur","component2","isunload","softReload","catch","fromRouter","fromComponent","notused","promise","componentNames","sourceComponents","self","destroyPromise","loader","authConfig","confAuth","confComponents","verify","valid","defineProperty","configurable","$b8063b61204a51e8$var$StorageKit","$b8063b61204a51e8$exports","listen","$25526fe6c3b9a722$var$StorageKit","$88f3b5dce7641a58$var$stat","$88f3b5dce7641a58$var$set","Stat","$88f3b5dce7641a58$exports","table","$90dadc59606fa8e8$var$subscriber","$90dadc59606fa8e8$exports","$eb32c36106f5c8b9$var$handler","$b2e5d65a3827f768$var$Observer","logger","results","Handler","$eb32c36106f5c8b9$exports","_handler","e1","_e","prom","execs","exec","info","$b2e5d65a3827f768$exports","$25526fe6c3b9a722$var$Cake","$3a0f37ddbd7ed7a6$exports","Options","formControl","isgroup","field","tbl","schema","type1","opts","toJSON","option","app","Components","name1","subscribeExternal","Models","plugin","Attributes","mk","MainMessageChannel","channel","MessageChannel","send","port2","postMessage","receive","port1","onmessage","isTrusted","Utils","scopeTrap","k","scopeNotifier","m","Router","Persistent","Cache","getSubscriber","hs","h1","_defineProperty","_globalScope","_universalScope","$universalScope","Hasher","name2","root1","_root","form1","method","fire1","name3","getAttributes","attribute","isBroadcast","trace","addStaticMethod","router","$25526fe6c3b9a722$exports"],"version":3,"file":"legacy.js.map"}