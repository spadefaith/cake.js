!function(){var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},e={},n={},i=t.parcelRequire2002;null==i&&((i=function(t){if(t in e)return e[t].exports;if(t in n){var i=n[t];delete n[t];var r={id:t,exports:{}};return e[t]=r,i.call(r.exports,r,r.exports),r.exports}var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(t,e){n[t]=e},t.parcelRequire2002=i),i.register("iuSND",(function(t,e){const n=i("jU2nf")();t.exports=function(t){const e={};return class{registerNotifier(t){this.notify.push(t)}install(){this.session=new n({child:"object",storage:"session",name:`_cake_${this.name}_cf`})}notifier(t,e){const n=e.value,i=e.bind;return this.reactiveData[t]||(this.reactiveData[t]={}),this.reactiveData[t][i]=n,this.set(i,n)}getInputData(t="json",e){let n=e||this.name,i=JSON.parse(JSON.stringify(this.reactiveData[n]));for(let t in i){let e=i[t];i[t]=this.sanitize(e)}if("json"==t)return i;if("formdata"==t){const t=new FormData;for(let e in i){let n=i[e];t.append(e,n)}return t}}hook(t,n,i){e[t]||(e[t]={}),e[t][n]||(e[t][n]=[]),e[t][n].push(i)}get(t,e=!1){this.pKeys[t];return e?this.session.get(t,!0):this.session.get(t)}set(t,n){let i=`${this.name}-${t}`,r=this.notify,s=this.name;return this.pKeys[t]=i,new Promise((async(e,i)=>{"password"!=t&&this.session.createOrUpdate(t,n),e()})).then((async()=>Promise.all(r.map((i=>i(t,n,null,s).then((()=>{const i=e[this.name];if(i){const e=i[t];e&&e.forEach((t=>{t(n)}))}})))))))}constructor(t){this.name=t,this.reactiveData={},this.notify=[],this.install(this.name),this.pKeys={},this.sanitize=function(t){const e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};return"string"==typeof t?t.replace(/[&<>"'/]/gi,(t=>e[t]||"")):t}}}}})),i.register("jU2nf",(function(t,e){var n=i("1WNVd");t.exports=function(){function t(t){return t?t.constructor.name.toLowerCase():null}function e(t,e){for(let n in t)t.hasOwnProperty(n)&&e(t[n],n)}function i(t){return null===t}function r(e){return"object"==t(e)}var s=function(e,n){var i=null;return"array"==t(e)?i=function(e,n){for(var i=null,r=0;r<e.length;r++){var s=e[r];if("object"==t(n)){var o=n,l=Object.keys(n)[0],a=o[l];if("object"==t(s)&&s[l]==a){i=r;break}}else if("array"!=t(n)&&n==s){i=r;break}}return i}(e,n):"object"==t(e)&&(i=function(e,n){var i=null,r=t(n);if("object"==r){var s=Object.keys(n)[0];null!=e[i]&&e[i]==n[s]&&(i=s)}else"string"==r&&(i=n);return i}(e,n)),i},o=function(n,i){if("array"==t(n)){let e=new Set(n);"array"==t(i)?i.forEach((t=>{e.add(t)})):e.add(i),n=Array.from(e)}else r(n)&&(r(i)?e(i,(function(t,e){n[e]=t})):n[i]=i);return n},l=function(n,o){var l=s(n,o);return"array"==t(n)?i(l)?n.includes(o):n[l]=o:"object"==t(n)&&(i(l)?r(o)?e(o,(function(t,e){!function(t,e,n){t=Object.assign(t,{[n]:e})}(n,t,e)})):n[o]=o:n[l]=o),n},a=function(e,n){if("string"==t(n)){var r=s(e,n);if("object"==t(e))delete e[r];else if("array"==t(e)){for(var o=[],l=0;l<e.length;l++)l!=r&&o.push(e[l]);e=o}return e}return"object"==t(n)?Object.filter(e,(function(t,e){return!(null!=n[e]&&n[e]==t)})):"array"==t(n)?Object.filter(e,(function(t,e){return!n.contains(e)})):!i(r)&&void 0},c=function(e,n){var i=t(n);if("string"==i){var r=s(e,n);if(0==r||r)return e[r]}else{if("object"==i)return Object.filter(e,(function(t,e){var i;return!(i=n[e],void 0===i||n[e]!=t)}));if("array"==i)return Object.filter(e,(function(t,e){return n.contains(e)}))}return null},h=function(e,n){var i=t(n);return"string"==i?Object.filter(e,(function(t,e){return e!=n})):"object"==i?Object.filter(e,(function(t,e){return Object.some(n,(function(n,i){return!(i==e&&n==t)}))})):"array"==i?Object.filter(e,(function(t,e){return!n.contains(e)})):null};return class{has(t){var e=this.storage.open(),n=s(e,t);return!i(n)&&n}get(t,e){if(e){var n=this.storage.open();return c(n,t)}return new Promise(((t,e)=>{setTimeout((()=>{var e=this.storage.open();t(e)}))})).then((e=>c(e,t)))}getNot(t){var e=this.storage.open();return h(e,t)}getAll(){var t=this.storage.open();return Promise.resolve(t)}update(t,e){var n=this.storage.open(),i=s(n,t);return!(0!=i&&!i)&&(n=l(n,data),this.storage.close(n))}createOrUpdate(t){if(arguments.length>1){t={[arguments[0]]:arguments[1]}}var e=this.storage.open();e=l(e,t);return this.storage.close(e)}create(t){var e=this.storage.open();return e=o(e,t),this.storage.close(e)}remove(t){var e=this.storage.open();return e=a(e,t),this.storage.close(e)}constructor(e){this.name=e.name,this.storageType=e.storage,this.child=e.child||"object";try{"string"==t(this.child)&&(this.child="array"==this.child?[]:"object"==this.child?{}:null)}catch(e){"session"==this.storageType?sessionStorage.clear():"local"==this.storageType&&localStorage.clear(),"string"==t(this.child)&&(this.child="array"==this.child?[]:"object"==this.child?{}:null)}if(!["array","object"].includes(t(this.child)))throw new Error("the child must be an object or array type.");this.storage=new class{init(t){return!!this[this.type]&&(this[this.type](t),!0)}open(){return"session"==this.type?JSON.parse(sessionStorage[this.name])[this.name]:"local"==this.type?JSON.parse(localStorage[this.name])[this.name]:this.cache[this.name]}close(t){return this.child=t,this.recache(),this.init(!0)}recache(){this.cache[this.name]=this.child}create(){this.cache[this.name]=this.child}array(){this.create()}object(t){this.create()}session(t){t||this.recache();try{sessionStorage[this.name]||t?t&&sessionStorage.setItem(this.name,JSON.stringify(this.cache)):sessionStorage.setItem(this.name,JSON.stringify(this.cache))}catch(t){this.recache()}}local(t){t||this.recache();try{localStorage[this.name]||t?t&&localStorage.setItem(this.name,JSON.stringify(this.cache)):localStorage.setItem(this.name,JSON.stringify(this.cache))}catch(t){this.recache()}}constructor(e,i,r){this.type=e,this.name=`${n.instanceID()}-${i}`,this.child=r,this.cache={},"string"==t(this.child)&&(this.child="array"==r?[]:"object"==r&&{})}}(this.storageType,this.name,this.child),this.storage.init()}}}})),i.register("1WNVd",(function(t,e){var n={};const i={typeof:function(t){switch(!0){case"string"==typeof t:return"string";case"number"==typeof t:return"number";case t instanceof Array:return"array";case t instanceof Function:return"function";case t instanceof HTMLCollection:return"htmlcollection";case t instanceof NodeList:return"htmlnodelist";case t instanceof Element:return"domlement";case t instanceof Object:return"object"}},isArray:function(t){return"array"==this.typeof(t)},isObject:function(t){return"object"==this.typeof(t)},isNumber:function(t){return"number"==this.typeof(t)},isString:function(t){return"string"==this.typeof(t)},isHTMLCollection:function(t){return"htmlcollection"==this.typeof(t)},isNodeList:function(t){return"htmlnodelist"==this.typeof(t)},isElement:function(t){return"domlement"==this.typeof(t)},isFunction:function(t){return"function"==this.typeof(t)}},r={each:function(t,e,n){if("object"==n){var i=0;for(var r in t)t.hasOwnProperty(r)&&(e({key:r,value:t[r]},i),i+=1)}else for(var s=0;s<t.length;s++)e(t[s],s)},map:function(t,e){var n=i.isArray(t)||t.length?"array":"object",r=t.length&&"array"==n?[]:{};return this.each(t,(function(t,i){var s=e(t,i);"object"==n?r[s.key]=s.value:r.push(s)}),n),r},reduce:function(t,e,n){var r=i.typeof(t);return this.each(t,(function(t,i){e=n(t,e,i)}),r),e},filter:function(t,e){var n=i.isArray(t)||t.length?"array":"object",r=t.length&&"array"==n?[]:{};return this.each(t,(function(t,i){e(t,i)&&("object"==n?r[t.key]=t.value:r.push(t.value))}),n),r}},s={removeWhiteSpace:t=>String(t).split(" ").join("")},o={perf:function(t){console.time("test"),t(),console.timeEnd("test")},logTest:function(t,e,n){try{t=JSON.parse(t)}catch(t){}try{n=JSON.parse(n)}catch(t){}switch(e){case"==":return t==n;case"!=":return t!=n;case"<":return t<n;case">":return t>n;case">=":return t>=n;case"<=":return t<=n}},toUrlSearchParams:function(t,e=!0){let n="";for(let e in t)if(t.hasOwnProperty(e)){let i=t[e];i.toString().includes("Object")&&(i=JSON.stringify(i)),n+=`${encodeURI(e)}=${encodeURI(i)}&`}return n.slice(0,n.length-1)},sanitize:function(t,e=[]){if("string"!=typeof t)return t;let n={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};n=Object.keys(n).reduce(((t,i)=>(e.includes(i)||(t[i]=n[i]),t)),{});return t.replace(/[&<>"'/]/gi,(t=>n[t]||t))},toFormData:function(t,e={}){const n=[],i=t.querySelectorAll("TEXTAREA"),r=t.querySelectorAll("INPUT"),s=t.querySelectorAll("SELECT");function o(t,e){for(let n=0;n<t.length;n++)e.push(t[n])}o(i,n),o(r,n),o(s,n);let l={};for(let i=0;i<n.length;i++){let r=n[i],s=r.name||r.id;if(s&&["{{","((","[[","<<","%%","&&"].includes(s));else{const n=t[s];if(n&&n.closest&&!n.closest(".cake-template")){"INPUT"==n.tagName&&"checkbox"==n.getAttribute("type")?value=n.checked:value=this.sanitize(n.value,e.sanitize),e.json?e.trim?""!=value&&(l[s]=value):l[s]=value:fd.append(s,value)}}}if(e.json)return l;{let t=new FormData;for(let e in l)l.hasOwnProperty(e)&&t.append(e,l[e]);return t}},splitBySpace:function(t,e){if(t&&(t=t.split(" "),i.isArray(t)))for(let n=0;n<t.length;n++)e(t[n])},toArray(t){let e=[];if(!t.length)return e;for(let n=0;n<t.length;n++)e.push(t[n]);return e},timeOut(t,e=1){setTimeout((()=>{t()}),e)},instanceID:()=>location.origin,recurse:(t,e)=>new Promise(((n,i)=>{try{let i=t.length,r=0;const s=()=>{i>r?(e(t[r]),r+=1,s()):n()};s()}catch(t){i(t.message)}})),browser(){if(window._browser)return window._browser;var t=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,e="undefined"!=typeof InstallTrigger,n=/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||safari.pushNotification).toString(),i=!!document.documentMode,r=!i&&!!window.StyleMedia,s=!!window.chrome&&!!window.chrome.webstore,o=(s||t)&&!!window.CSS;return window._browser=t?"Opera":e?"Firefox":n?"Safari":s?"Chrome":i?"IE":r?"Edge":o?"Blink":"Don't know"},isOpera(){return"Opera"==this.browser},isFirefox(){return"Firefox"==this.browser()},isSafari(){return"Safari"==this.browser},isChrome(){return"Chrome"==this.browser},isIE(){return"IE"==this.browser},isEdge(){return"Edge"==this.browser},isBlink(){return"Blink"==this.browser},device:()=>navigator.userAgent.includes("Android")?"android":/iPhone|iPad|iPod/i.test(navigator.userAgent)?"IOS":"desktop",isAndroid(){return"android"==this.device()},isIOS(){return"ios"==this.device()},isDesktop(){return"desktop"==this.device()},escapeRegExp:t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")};try{n.UTILS={...r,...i,...o,...s}}catch(t){n.UTILS={};var l=r.each;l(r,(function(t,e){n.UTILS[t]=e})),l(i,(function(t,e){n.UTILS[t]=e})),l(o,(function(t,e){n.UTILS[t]=e})),l(s,(function(t,e){n.UTILS[t]=e}))}t.exports=n.UTILS})),function(t){t.env={destructure:!0};t.env;Promise.prototype.ObjectType="Promise"}(window),window,HTMLCollection.prototype.toArray=function(){let t=[];for(let e=0;e<this.length;e++)t[e]=this[e];return t},NodeList.prototype.toArray=function(){let t=[],e=-1,n=this.length;for(;++e<n;)t[e]=this[e];return t},Object.cache=Object.create(null),Object.caching=t=>{const e=Object.cache;return e[t]||(e[t]={}),{set:(n,i)=>(e[t][n]=i,!0),get:n=>e[t][n]}},String.prototype.toHyphen=function(){let t=Object.cache,e=null,n=this;if(t.toHyphen||(t.toHyphen={}),t[n]&&(e=t[n]),null!=e)return e;let i=n.split(""),r="",s=-1;for(;++s<i.length;){let t=i[s];0===s||t.charCodeAt()<91&&(r+="-"),r+=t.toLowerCase()}return t[n]=r,e=r,e},String.prototype.toProper=function(){let t=this,e=Object.caching("toProper").get(t);if(e)return e;{let e=t.substring(0,1),n=t.slice(1),i=`${e.toUpperCase()}${n}`;return Object.caching("toProper").set(t,i),i}},String.prototype.removeSpace=function(){return this.split(" ").join("")},String.prototype.toCamelCase=function(){let t=this.toLowerCase(),e=Object.cache;if(e.toCamel||(e.toCamel={}),e=e.toCamel,e[t])return e[t];{let n=t.split("-");if(1==n.length)return t;let i="",r=-1,s=n.length;for(;++r<s;){let t=n[r];i+=0===r?t:t.substring(0,1).toUpperCase()+t.substring(1)}return e[t]=i,i}},HTMLElement.prototype.querySelectorIncluded=function(t,e,n){let i=this.querySelector(t);return i||(()=>{switch(!0){case!e&&!n:{let e=this.closest(t);e==this&&(i=e)}break;case!!e&&!!n:i=this.getAttribute(e)==n?this:null;break;case!!e&&!n:i=this.getAttribute(e)?this:null}return i})()},HTMLElement.prototype.querySelectorAllIncluded=function(t,e,n){let i;try{i=this.querySelectorAll(t),i&&(i=i.toArray())}catch(t){i=[]}if(t?i=this.querySelectorAll(t).toArray():e&&n?(i=this.querySelectorAll(`[${e}=${n}]`).toArray(),this.dataset[e]==n&&i.push(this)):e&&!n&&(i=this.querySelectorAll(`[${e}]`).toArray(),this.dataset[e]&&i.push(this)),1==(!e&&!n)){let e=this.closest(t);e==this&&i.push(e)}return i},HTMLDocument.prototype.querySelectorIncluded=function(t){return this.querySelector(t)},HTMLDocument.prototype.querySelectorAllIncluded=function(t){return this.querySelectorAll(t)},Array.prototype.toggler=function(t,e){for(let n=0;n<this.length;n++){let i=this[n];(i.dataset.name==t||i.classList.contains(e))&&i.classList.toggle(e)}},HTMLElement.prototype.Ref=function(){let t="_cakes_storage";!this[t]&&(this._cakes_storage={});let e=this[t];return{set(t,n){e[t]=n},get:t=>e[t],getAll:t=>e,remove(t){delete e[t]}}},HTMLElement.prototype.replaceDataSrc=function(){let t=this.querySelectorAllIncluded(null,"data-src",null);for(let e=0;e<t.length;e++){let n=t[e];n.setAttribute("src",n.dataset.src),n.removeAttribute("data-src")}},Object.keep=function(t,e){let n=t.split("."),i=n.slice(1),r="Array"==e.constructor.name,s=r?[]:{};const o=function(t,e,n){return t[e]||(t[e]=null==n?{}:n),t[e]};n[0]&&o(Object.cache,n[0],i.length?{}:e);let l=Object.cache[n[0]];for(let t=0;t<i.length;t++){let n=i[t];i.length-1==t?(l=o(l,n,s),l=r?l.concat(e):Object.assign(l[n],e)):l=o(l,n,{})}return Object.cache[n[0]]},Object.keys||(Object.keys=function(t){var e=[];for(var n in t)t.hasOwnProperty(n)&&e.push(n);return e}),i("1WNVd"),customElements.define("sub-template",class extends HTMLElement{connectedCallback(){this.replace(this)}replace(t){let e=t.dataset.template,n=document.getElementsByName(e);if(n.length>1)console.error(`template with name ${e} has more than one reference.`);else{if(!n)throw t.remove(),new Error(`${e} is not found!`);if(n[0]){let i=n[0];if("HTMLTemplateElement"!=i.constructor.name)throw new Error(`${e} is not referred to a Template Element!`);{if(i=i.content.cloneNode(!0).firstElementChild,!i)return;let e=t.attributes;for(let t=0;t<e.length;t++){let n=e[t];"data-template"!=n.name&&i.setAttribute(n.name,n.value)}t.replaceWith(i)}}}}constructor(){super()}}),HTMLTemplateElement.prototype.replaceSubTemplate=function(t){let e=t.getElementsByTagName("sub-template");if(e){e=e.toArray();for(let t=0;t<e.length;t++){let n=e[t];customElements.get("sub-template").prototype.replace(n)}}},HTMLTemplateElement.prototype.collectContent=function(){let t=null,e=this.cloneNode(!0),n=document.createDocumentFragment(),i=e.content.querySelector("style");i&&n.appendChild(i);let r=[];for(let t=0;t<e.content.children.length;t++){let t=e.content.children[0];this.replaceSubTemplate(t),r.push(t)}return t={style:n.children[0],others:r},t},HTMLTemplateElement.prototype.parseStyle=function(t){if(!t)return!1;var e=t.textContent.trim();if(!e.length)return;let n={},i=e.split("}");for(let t=0;t<i.length;t++){let e=i[t].split("{"),r=e[0],s=e[1];r&&(n[r.trim()]=(()=>{let t=!1,e="",n=s.split("");for(let i=0;i<n.length;i++){let r=n[i];"\n"==r?t=!0:" "==r?t||(e+=r):(t=!1,e+=r)}return e})())}return n},HTMLTemplateElement.prototype.parseHTML=function(t){if(t){var e=document.createElement("HTML");for(let n=0;n<t.length;n++){let i=t[n];e.append(i)}}return e||!1},HTMLTemplateElement.prototype.getContent=function(t){let e=this.collectContent(),n=e.style,i=e.others,r=this.parseStyle(n),s=this.parseHTML(i);for(let t in r)if(r.hasOwnProperty(t)){let e=s.querySelectorAll(t),n=r[t];for(let t=0;t<e.length;t++)e[t].setAttribute("style",n)}return s=t?s.children.toArray():s.innerHTML,1==s.length?s[0]:s};var r={},s=i("1WNVd");Object.caching("plugins").set("plugin",{}),r=function(t,e){if(s.isObject(t)&&!e){const e=Object.caching("plugins").get("plugin");Object.caching("plugins").set("plugin",Object.assign(e,t))}else if(s.isString(t)&&null!=e){const n=Object.caching("plugins").get("plugin");n[t]=e,Object.caching("plugins").set("plugin",n)}else if(s.isString(t)&&null==e)return Object.caching("plugins").get("plugin")[t]||{}};var a,c={};i("1WNVd");var h={};s=i("1WNVd");function u(t){this.options=t,this.tag=(this.options&&this.options.tag||"{{ }}").split(" "),this.lefttag=s.escapeRegExp(this.tag[0]),this.righttag=s.escapeRegExp(this.tag[1])}u.prototype._getTag=function(t){return t.match(new RegExp("(?<=<)|([^/s]+)(?=>)","g"))[2]},u.prototype._bindReplace=function(t,e){for(let n in t)if(t.hasOwnProperty(n)){let i=new RegExp(`${this.lefttag}${n}${this.righttag}`,"g");i&&(e=e.replace(i,`${t[n]}`))}return e},u.prototype.replaceString=function(t,e){return this._bindReplace(t,e)},u.prototype._toElement=function(t,e){let n=document.createElement("template");return n.innerHTML=t,n.content.children[0]},u.prototype.createElement=function(t,e,n){if(!t){let t="string"==typeof e?this._getTag(e):e.tagName;return this._toElement(e,t)}if(t instanceof Array){let i="string"==typeof e,r=i?this._getTag(e):e.tagName;e=i?e:e.outerHTML;let s=[];for(let i=0;i<t.length;i++){let o=t[i],l=this._bindReplace(o,e),a=this._toElement(l,r);n&&(a=a.outerHTML),s.push(a)}return s}if(t instanceof Object){let i="string"==typeof e,r=i?this._getTag(e):e.tagName;e=i?e:e.outerHTML;let s=this._bindReplace(t,e),o=this._toElement(s,r);return n&&(o=o.outerHTML),o}},h=u;var p,f,d,g;s=i("1WNVd");const m=f=function(t,e,n,i,r){return null==n||n==i&&"bind"!=type?[]:(()=>{let n=[],i=t;if(i&&i.length)for(let t=0;t<i.length;t++){let s=i[t];s.bind==e&&n.push({...s,component:r})}return n})()},y=(d=function(t,e,n,i,r,s,o,l){if(null!=i&&(i!=r||"bind"==e))return t=(()=>{let i=t[s]&&t[s][e];if(i&&i.length){let t=[];for(let t=0;t<i.length;t++){let e=i[t];e.bind==n&&(!l||e.sel==l)&&Object.assign(e,o)}return t}return[]})()},g=function(t){const e=[];for(let n=0;n<t.length;n++){const i={},r=t[n];for(let t in r)i[t]=r[t];e.push(i)}return e.reduce(((t,e)=>{let n=e.incrementedSels;return n&&n.length?n.forEach((n=>{let i={...e};i.incrementedSel=n,t.push(i)})):t.push(e),t}),[])});p=async function(t,e,n,i,r){r=r||document;let o=this.storage.get(i,"attr"),l=m(o,t,e,n,i);if(l.length)return l=y(l),Promise.all(l.map((n=>{let i,o=n.hasNegate,l=n.bind,a=n.testVal,c=n.attr,h=n.ops,u=n.sel,p=n.attrkey,f=n.attrvalue,d=n.incrementedSel;n.incrementId;if(l=s.removeWhiteSpace(l),c=s.removeWhiteSpace(c),d=e.incrementedSel||d,i=e.incrementedSel?e[l]:e,t==l){let t=r.querySelectorAll(`[data-attr=${d||u}]:not(.cake-template)`);return Promise.all([...t].map((t=>{let e=!1;h?(e=s.logTest(i,h,a),o&&(e=!e)):e=o?!i:!!i,e?f?t.setAttribute(p,f):t.setAttribute(p):t.removeAttribute(p)})))}e=null})))};var b;s=i("1WNVd");const v=f,w=g;b=async function(t,e,n,i,r){r=r||document;let o=this.storage.get(i,"bind"),l=v(o,t,e,n,i);if(l.length){l=w(l);for(let i=0;i<l.length;i++){let o,a=l[i],c=a.attr,h=a.bind,u=a.sel,p=a.incrementedSel;a.incrementId,a.incrementedSels;p=e.incrementedSel||p,o=e.incrementedSel?e[h]:e;let f=c.toHyphen();if(t==h){let t=r.querySelectorAll(`[data-bind=${p||u}]`);for(let e=0;e<t.length;e++){let i=t[e];"class"==c||"className"==c?i.classList.length?(s.splitBySpace(n,(function(t){i.classList.remove(t)})),s.splitBySpace(o,(function(t){i.classList.add(t)}))):s.splitBySpace(o,(function(t){i.classList.add(t)})):null==o&&null==o||(i.setAttribute(f,o),i[c]=o)}}}e=null}};var S;s=i("1WNVd");const O=f,$=g;S=async function(t,e,n,i,r){let o=this.storage.get(i,"class");r=r||document;let l=O(o,t,e,n,i);if(!l.length)return;let a={};l=$(l);for(let n=0;n<l.length;n++){let i,o=l[n],c=o.hasNegate,h=o.bind,u=o.testVal,p=o.className,f=o.ops,d=o.sel,g=o.incrementedSel;o.incrementId;if(h=s.removeWhiteSpace(h),g=e.incrementedSel||g,i=e.incrementedSel?e[h]:e,t==h){a[g||d]||(a[g||d]=r.querySelectorAll(`[data-class=${g||d}]:not(.cake-template)`));let t=a[g||d];for(let e=0;e<t.length;e++){let n=t[e],r=!1;f?(r=s.logTest(i,f,u),c&&(r=!r)):r=c?i==u:!!i,r?s.splitBySpace(p,(function(t){s.toArray(n.classList).includes(t)||setTimeout((()=>{n.classList.add(t)}))})):s.splitBySpace(p,(function(t){s.toArray(n.classList).includes(t)&&setTimeout((()=>{n.classList.remove(t)}))}))}}}e=null};var E;i("1WNVd");var _={};function T(t){this.el=T.toArray(t)}T.toArray=function(t){let e=[];switch(!0){case t instanceof Array:e=t;break;case t.length&&t.tagName&&"FORM"!=t.tagName&&!(t instanceof Array):for(let n=0;n<t.length;n++)e.push(t[n]);break;case!(t instanceof Array):e=[t]}return e},T.prototype.loop=function(t){try{let e=-1,n=this.el.length;for(;++e<n;){t(e,this.el[e])}return!0}catch(t){return console.error(t),!1}},T.prototype.getElements=function(){return this.el},T.prototype.getElement=function(t=0){return this.el[t]},T.prototype.remove=function(){let t=-1,e=this.el.length,n=document.createDocumentFragment();for(;++t<e;){let e=this.el[t];e&&n.appendChild(e)}return n=null,!0},T.prototype.replaceDataSrc=function(){return this.loop((function(t,e){e.replaceDataSrc()}))},T.cloneNode=function(t){t=t instanceof Array?t:this.toArray(t);let e=[];for(let n=0;n<t.length;n++)e.push(t[n].cloneNode(!0));return new T(e)},T.prototype.dataset=function(t,e){let n=this.el.length,i=-1;for(;++i<n;)if(this.el[i].dataset[t]){if("break"==e(this.el[i]))break}return!0},T.prototype.getContainers=function(){return this.getElementsByDataset("container").container},T.prototype.cloneNode=function(t){return t=this.el,T.cloneNode(t)},T.prototype.getAllElements=function(){let t=this.el.length,e=[];switch(!0){case 1==t:e=this.el[0].getElementsByTagName("*").toArray();break;case t>1:{let n=-1;for(;++n<t;){let t=this.el[n].getElementsByTagName("*");if(t)for(let n=0;n<t.length;n++)e.push(t[n])}}}return e},T.prototype.appendTo=function(t,e){if(!t&&!t.attributes)throw new TypeError(`the ${t} is not an instance of Element`);e&&(t.innerHTML="");for(let e=0;e<this.el.length;e++){let n=this.el[e];t.appendChild(n)}},T.prototype.getElementsByTagName=function(t){let e=this.el.length,n=[];switch(!0){case 1==e:n=this.el[0].getElementsByTagName(id).toArray();break;case e>1:{let t=-1;for(;++t<e;){let e=this.el[t].getElementsByTagName(selector);if(e)for(let t=0;t<e.length;t++)n.push(e[t])}}}return n},T.prototype.getElementById=function(t){let e=this.el.length,n=[];switch(!0){case 1==e:n=this.el[0].getElementById(id);break;case e>1:{let t=-1;for(;++t<e;){let e=this.el[t].querySelector(selector);e&&n.push(e)}}}return n},T.prototype.querySelectorAll=function(t){let e=this.el.length,n=[];switch(!0){case 1==e:n=this.el[0].querySelectorAll(t);break;case e>1:{let i=-1;for(;++i<e;){let e=this.el[i].querySelectorAll(t);e&&(n=n.concat(e.toArra()))}}break;default:n=[]}return n},T.prototype.querySelector=function(t){let e=this.el.length,n=[];switch(!0){case 1==e:n=this.el[0].querySelector(t);break;case e>1:{let i=-1;for(;++i<e;){let e=this.el[i].querySelector(t);e&&n.push(e)}}}return n},T.prototype.querySelectorIncluded=function(t,e,n){let i=this.el.length,r=[];switch(!0){case 1==i:r=this.el[0].querySelectorIncluded(t,e,n);break;case i>1:{let s=-1;for(;++s<i;){let i=this.el[s].querySelectorIncluded(t,e,n);i&&r.push(i)}}}return r},T.prototype.querySelectorAllIncluded=function(t,e,n){let i=this.el.length,r=[];switch(!0){case 1==i:r=this.el[0].querySelectorAllIncluded(t,e,n);break;case i>1:{let s=-1;for(;++s<i;){let i=this.el[s].querySelectorAllIncluded(t,e,n);i&&(r=r.concat(i.toArra()))}}}return r},T.prototype.contains=function(t){let e=this.el.length,n=!1;switch(1==e){case!0:n=this.el[0].contains(t);break;case!1:{let i=-1;for(;++i<e;){if(this.el[i].contains(t)){n=!0;break}}}}return n},T.prototype.getElementsByDataset=function(){let t,e,n,i,r,s;for(t=arguments,o={},length=t.length,n=-1,i=-1;++n<this.el.length;)for(r=this.el[n];++i<length;)e=t[i],r.getAttribute(`data-${e}`)?o[e]=[r]:o[e]=[],s=r.querySelectorAll(`[data-${e}]`),s.length&&(o[e]=o[e].concat([...s]));return o},_=T;const P=f,A=d;E=async function(t,e,n,i,s){s=s||document;let o=this.storage.get(i,"forUpdate"),a=P(o,t,e,n,i);if(!a.length)return;let c=new h(r("templating"));const u=[];for(let t=0;t<a.length;t++){a[t].bind,a[t].sel,a[t].iter,a[t].ins,a[t].targets;for(let t in e)if(e.hasOwnProperty(t)){let n=document.querySelectorAll(`[data-for-update-bind=${t}]`);for(let t=0;t<n.length;t++){let r=n[t],s=r.dataset.forUpdateBind;if(r.dataset.forTemplate){let t=r.cloneNode(!0);t.style.removeProperty("display"),t.classList.remove("cake-template");let n=e[s],o=-1;for(l=n.length;++o<l;){let e=n[o],l=o;for(let n=0;n<this.logicalType.length;n++){let o=this.logicalType[n];const a=new _(r).querySelectorAllIncluded(`[data-${o}]`);for(let n=0;n<a.length;n++){const r=a[n];if(r.dataset[o]){let n=r.dataset[o],a=`${n}-${l}`;t.dataset[o]=a;let c=this.getWatchItemsBySel(i,o,n).bind;if(c.includes(".")){s=c.split(".")[0];for(let t in e){let n=e[t];e[`${s}.${t}`]=n}}n&&u.push({_type:o,...e,incrementedSel:a,sel:n,bind:c,incrementId:l,component:i})}}}let a=c.createElement(e,t,!1);a.classList.remove("cake-template"),a.removeAttribute("data-for-template"),r.insertAdjacentElement("beforebegin",a),"SELECT"==r.parentElement.tagName&&(r.parentElement.selectedIndex=0)}}else r.remove()}}}return e=null,Promise.all(u.map((t=>{const e=t.bind,n=t._type,i=t.component,r=t.incrementedSel,s=t.sel,o=`notify${n.toProper()}`;return A(n,e,t,null,i,{incrementedSel:r},s),this[o](e,t,null,i)}))).then((()=>{}))};var j;i("1WNVd");var k={};const L={};function N(){let t=L[name];if(t&&cb instanceof Function){let e=cb.name;ctx&&(cb=cb.bind(ctx)),cb.binded="external",cb.original=e,cb.listenTo=t.name,t.Subscribe(cb)}}window.ComponentStorage=L,k={subscribe:(t,e)=>new Promise(((t,e)=>{let n=setInterval((()=>{L[name]&&(N(),clearInterval(n),t())}))})),set:(t,e)=>(L[t]=e,!0),get:t=>L[t]};const I=f;j=async function(t,e,n,i,s){let o=this.storage.get(i),a=new h(r("templating"));return new Promise(((r,s)=>{try{let s=I(this.storage.get(i,"for"),t,e,n,i),c=I(this.storage.get(i,"switch"),t,e,n,i);if(!s.length)return;let h=e.reduce(((t,e)=>(t.push(e),t)),[]);e=null;for(let t=0;t<s.length;t++){s[t].bind;let e=s[t].sel,n=s[t].iter,i=(s[t].ins,s[t].component),u=s[t].cleaned,p=k.get(i).html.querySelectorIncluded(`[data-for-template=${e}]`),f=p.cloneNode(!0);h=h.map((t=>{for(let e in t)t.hasOwnProperty(e)&&(t[`${n}.${e}`]=t[e]);return t}));let d=[];(()=>{let t=0;Object.keys(o).forEach((e=>{if(!["for","evt","animate","switch"].includes(e)){let n=o[e],i=n[0],r=i&&i.bind||void 0;r&&r.match(new RegExp(a.lefttag),"g")&&(h.forEach(((e,s)=>{let o={};o.bind=a.replaceString(e,r),o.sel=`${i.sel}-${t}`,o.rawsel=i.sel,t+=1,h[s].__sel=o.sel;for(let t in i)i.hasOwnProperty(t)&&(o[t]||(o[t]=i[t]));n.push(o)})),d.push(e))}}))})(),(()=>{if(u){p.parentElement.children.toArray().forEach((t=>{t.dataset.for&&!t.classList.contains("cake-template")&&t.remove()}))}l=h.length,h.forEach(((t,e)=>{let n=p.cloneNode(!0);(()=>{if(c&&!c.length)return;c[0].bind;let e=c[0].map,i=c[0].sel,r=c[0].cases;const s=t[e],o=n.querySelector(`[data-switch=${i}]`);let l=r.find((t=>{t._id;let e=t.bind;return e.includes("|")?e.split("|").map((t=>t.trim())).some((t=>t==s)):e==s}));const a=f.querySelector(`[data-case=${i}-${l._id}]`);a.classList.remove("cake-template"),o.innerHTML=a.outerHTML})();let i=a.createElement(t,n,!1);Object.keys(o).forEach((e=>{if(d.includes(e)){let n=o[e].find((e=>e.sel==t.__sel));if(n){let t=n.rawsel;t&&(i.querySelector(`[data-${e}=${t}]`).dataset[e]=n.sel)}}})),i.style.removeProperty("display"),i.classList.remove("cake-template"),i.removeAttribute("data-for-template"),p.insertAdjacentElement("beforebegin",i),(()=>{const e=s[0]&&s[0].children;e&&e.forEach((e=>{const n=i.querySelector(`[data-for=${e}]`);if(n){n.dataset.forAutoBindKey,n.dataset.forAutoBindValue;const e=n.dataset.forIter,i=t[e];if(i)for(let t=0;t<i.length;t++){let e=i[t],r=n.cloneNode(!0),s=a.createElement(e,r,!1);s.style.removeProperty("display"),s.classList.remove("cake-template"),s.removeAttribute("data-for-template"),n.insertAdjacentElement("beforebegin",s)}const r=n.closest("SELECT");r&&(r.selectedIndex=0)}}))})(),i.replaceDataSrc()})),r()})()}h=null}catch(t){s(t)}}))};var C;s=i("1WNVd");const R=f,q=g;C=async function(t,e,n,i,r){r=r||document;let o=this.storage.get(i,"if"),l=R(o,t,e,n,i);if(!l.length)return;l=q(l);let a={};for(let n=0;n<l.length;n++){let i=l[n],o=i.attr,c=i.bind,h=i.sel,u=i.testval,p=i._true,f=i._false,d=i.ops,g=i.hasNegate,m=i.incrementedSel,y=(i.incrementId,o.toHyphen(),"null"!=p),b="null"!=f;if(t==c){a[h]||(a[h]=r.querySelectorAll(`[data-if=${m||h}]:not(.cake-template)`));let t=a[h];for(let n=0;n<t.length;n++){let i,r=t[n],l=e;if(i=u?s.logTest(u,d,l):g?!l:!!l,i){if(y)if("class"==o){let t=p.split(" ");if(b){f.split(" ").forEach((t=>{r.classList.remove(t)})),t.forEach((t=>{r.classList.add(t)}))}else t.forEach((t=>{r.classList.contains(t)||r.classList.add(t)}))}else l[p]&&r.setAttribute(o,l[p])}else if(b)if("class"==o){let t=f.split(" ");if(y){p.split(" ").forEach((t=>{r.classList.remove(t)})),t.forEach((t=>{r.classList.add(t)}))}else trueClasses.forEach((t=>{r.classList.contains(t)||r.classList.add(t)}))}else r.setAttribute(o,f)}}}e=null};var x;i("1WNVd");const M=f;x=async function(t,e,n,i,r){r=r||document;let s=this.storage.get(i,"model"),o=M(s,t,e,n,i);if(o.length){for(let i=0;i<o.length;i++){let s=o[i],l=s.attr,a=s.bind,c=s.sel,h=l.toHyphen();if(t==a){let t=r.querySelectorAll(`[data-model=${c}]`);for(let i=0;i<t.length;i++){let r=t[i];"className"==l?n?e?r.classList.replace(n,e):r.classList.remove(n):r.classList.add(e):(r.setAttribute(h,e),r[l]=e)}}}e=null}};var B;i("1WNVd");const U=f,H=g;B=async function(t,e,n,i,r){r=r||document;let s=this.storage.get(i,"toggle"),o=U(s,t,e,n);if(o){o=H(o),r=r||document;for(let t=0;t<o.length;t++){let i=o[t];if(!i)continue;let s=i.sel,l=(i.bind,i.value),a=(i.ops,r.querySelector(`[data-toggle=${s}]`));l==n&&a&&a.classList.remove("is-active"),l==e&&a&&(a.classList.contains("is-active")&&a.classList.remove("is-active"),a&&a.classList.add("is-active"))}e=null}};var D={};function W(){this.store={}}function F(){this.uiid=0,this.notify={},this.sts={},this.storage=new D,this.logicalType=["if","bind","switch","toggle","class","attr"]}W.prototype.set=function(t,e,n){let i=this.store;switch(!0){case!i[t]:i[t]={};case!i[t][e]:i[t][e]=[];default:i[t][e].push(n)}},W.prototype.get=function(t,e){let n=this.store;return t&&e?n[t]&&n[t][e]||[]:t&&!e?n[t]||{}:void 0},D=W,F.prototype.notifyFor=j,F.prototype.notifyForUpdate=E,F.prototype.notifyClass=S,F.prototype.notifyBind=b,F.prototype.notifyAttr=p,F.prototype.notifyIf=C,F.prototype.notifyModel=x,F.prototype.notifyToggle=B,F.prototype.notifier=function(t,e,n,i){if(null==e)return Promise.resolve();let r=JSON.parse(JSON.stringify(e));const s={for:"For",forUpdate:"ForUpdate",toggle:"Toggle",bind:"Bind",if:"If",class:"Class",attr:"Attr"};let o=Object.caching("AttribProp").get(t)||(()=>{let e={};const n=Object.keys(s),r=this.storage.get(i);if(!r)return[];for(let i=0;i<n.length;i++){const s=n[i],o=r[s];if(o)for(let n=0;n<o.length;n++){o[n].bind==t&&(e[s]=!0)}}return e=Object.keys(e),Object.caching("AttribProp").set(t,e),e})();return new Promise(((e,l)=>{try{let l=o.length,a=0;const c=()=>{if(l>a){let e=o[a];a+=1,this[`notify${s[e]}`](t,r,n,i).then((()=>{c()}))}else e()};c()}catch(t){l(t.message)}}))},F.prototype.registerNotifier=function(t,e){this.notify[t]||(this.notify[t]=[]),this.notify[t].push(e)},F.prototype.getEventTarget=function(t){let e=`${t}`,n=Object.caching("getEventTarget").get(e);if(!n){let i=this.storage.get(t);n=i&&i.evt?i.evt:[],Object.caching("getEventTarget").set(e,n)}return n},F.prototype.getRouterTarget=function(t){let e=`${t}`,n=Object.caching("getRouterTarget").get(e);if(!n){let i=this.storage.get(t);n=i&&i.router?i.router:[],Object.caching("getRouterTarget").set(e,n)}return n},F.prototype.getWatchItems=function(t){let e=`${t}`,n=Object.caching("getWatchItems").get(e);if(!n){let i=this.storage.get(t),r=new Set;for(let t in i)if(i.hasOwnProperty(t)){let e=i[t];for(let t=0;t<e.length;t++){let n=e[t].bind;n&&r.add(n)}}n=[...r],Object.caching("getWatchItems").set(e,n)}return n},F.prototype.getConfig=function(t){return this.storage.get(t)},F.prototype.getWatchItemsByType=function(t,e){let n=`${t}-${e}`,i=Object.caching("getWatchItemsByType").get(n);if(!i){let r=this.storage.get(t)[e]||[],s=new Set;for(let t=0;t<r.length;t++){let n=r[t],i=n.bind;if(!0==!!i)s.add(i);else if(!0==("animate"==e||"toggle"==e))s.constructor.name="Set",s=[],s.push(n)}i=[...s],Object.caching("getWatchItemsByType").set(n,i)}return i},F.prototype.getWatchItemsBySel=function(t,e,n){let i=`${t}-${e}-${n}`,r=Object.caching("watchItemsBySel").get(i);if(!r){let s=this.storage.get(t,e).find((t=>t.sel==n));r=s||!1,Object.caching("watchItemsBySel").set(i,r)}return r},F.prototype._activateReactive=t=>{},F.prototype._register=function(t,e,n){return this.storage.set(t,e,n)},F.prototype._static=function(t){return function(e,n){let i=[];for(let r=0;r<e.length;r++){let s=e[r];switch(n){case!1:i.push(s);break;case!0:{let e=s.closest("[data-component]");if(e=e&&e.dataset.component,e==t==!0)i.push(s)}break;default:continue}}return i}},F.prototype._compileEvents=function(t,e,n){return new Promise((i=>{if(!t.length)return void i();let r=this._static(e)(t,n);if(r.length){for(let t=0;t<r.length;t++){let n=`cke${this.uiid}`,i=r[t],s=i.dataset.event.removeSpace().split(",");for(let t=0;t<s.length;t++){let r=s[t].split(":"),o=r[0],l=r[1];this._register(e,"evt",{event:o,sel:n,cb:l}),i.dataset.event=n,this.uiid++}}i()}else i()}))},F.prototype._compileToggle=function(t,e,n){return new Promise((i=>{if(!t.length)return void i();if(!this._static(e)(t,n).length)return void i();let r={};for(let n=0;n<t.length;n++){let i=`ckt${this.uiid}`,s=t[n],o=s.dataset.toggle;r[o]&&(i=r[o]),this._register(e,"toggle",{sel:i,name:"ns-"+o}),s.dataset.toggle=i,this.uiid++,r[o]=i}r={},i()}))},F.prototype._compileFor=function(t,e,n,i){return new Promise((r=>{let s=i;if(!t.length)return void r();let o=this._static(e)(t,n);if(!o.length)return void r();let l={};for(let t=0;t<o.length;t++){let e=`ckf${this.uiid}`;l[e]={};let n=o[t],i=n.dataset.for,r=n.dataset.forAutoBind,a=null==n.dataset.forCleaned||"true"==n.dataset.forCleaned,c=i.split(" "),h=c[0],u=c[1],p=c[2];if(r){let t=n.dataset.forIter,i=r.split(":"),s=i[0]&&i[0].trim(),o=i[1]&&i[1].trim();l[e]={iteration:t},n.dataset.forAutoBindKey=s,n.dataset.forAutoBindValue=o,n.removeAttribute("data-for-auto-bind")}if(n.style.display="none",n.classList.add("cake-template"),n.dataset.for=e,n.dataset.forTemplate=e,l[e]=Object.assign(l[e],{bind:p,sel:e,iter:h,ins:u,cleaned:a}),++this.uiid,0!=t){let t=n.parentElement&&n.parentElement.closest("[data-for]");if(!t)continue;let i=!!t.dataset.for;if(s.contains(t)&&i){let n=l[t.dataset.for];n&&!n.children?n.children=[e]:n&&n.children.push(e)}}}for(let t in l)l.hasOwnProperty(t)&&this._register(e,"for",l[t]);r()}))},F.prototype._compileForUpdate=function(t,e,n){return new Promise((i=>{if(!t.length)return void i();let r=this._static(e)(t,n);if(r.length){for(let t=0;t<r.length;t++){let n=`ckfu${this.uiid}`,i=r[t],s=i.dataset.forUpdate;i.style.display="none",i.classList.add("cake-template"),i.dataset.forUpdate=n,i.dataset.for||(i.dataset.forTemplate=n);let o=s.split(" "),l=o[0],a=o[1],c=o[2];this._register(e,"forUpdate",{bind:c,sel:n,iter:l,ins:a}),this.uiid++}i()}else i()}))},F.prototype._compileSwitch=function(t,e,n){return new Promise((i=>{if(!t.length)return void i();let r=this._static(e)(t,n);if(r.length){for(let t=0;t<r.length;t++){let n=`cks${this.uiid}`,i=r[t],s=i.dataset.switch,o="def";if(s.includes(".")){const t=i.dataset.switch.split(".");s=t[0],o=t[1]}i.dataset.switch=n;let l=i.querySelectorAll("[data-case]"),a=[];for(let t=0;t<l.length;t++){let e=l[t],i=e.closest(`[data-switch=${n}]`);if(e.classList.add("cake-template"),i){let t=e.dataset.case,i=`cksc${this.uiid}`;e.dataset.case=`${n}-${i}`,a.push({_id:i,bind:t}),this.uiid++}}this._register(e,"switch",{bind:s,sel:n,map:o,cases:a}),this.uiid++}i()}else i()}))},F.prototype._compileBind=function(t,e,n){return new Promise((i=>{if(!t.length)return void i();let r=this._static(e)(t,n);if(r.length){for(let t=0;t<r.length;t++){let n=`ckm${this.uiid}`,i=r[t],l=i.dataset.bind.split(",");for(let t=0;t<l.length;t++){let i=l[t].split(" ").join("");if(i.includes(":")){const t=i.split(":");var s=t[0],o=t[1]}else o=i,s="value";this._register(e,"bind",{attr:s,bind:o,sel:n})}this.uiid++,i.dataset.bind=n}i()}else i()}))},F.prototype._compileAnimate=function(t,e,n){return new Promise((i=>{if(!t.length)return void i();let r=this._static(e)(t,n);if(r.length){for(let t=0;t<r.length;t++){let n=`cka${this.uiid}`,i=r[t],s=i.dataset.animate;s=s.split(" ").join("");let o={},l=s.split(",");for(let t=0;t<l.length;t++){let e=l[t].split(":"),n=e[0],i=e[1];if("ns"==n){o.ns=i;break}o[n]={keyframes:i.split("-")}}o.selector={attr:"data-animate",val:n},this._register(e,"animate",o),this.uiid++,i.dataset.animate=n}i()}else i()}))},F.prototype._compileIf=function(t,e,n){return new Promise((i=>{if(!t.length)return void i();let r=this._static(e)(t,n);if(!r.length)return void i();const s=new RegExp("<|>|===|==|!==|!=");for(let t=0;t<r.length;t++){let n=`ci${this.uiid}`,i=r[t],o=i.dataset.if,l=i.dataset.ifBind,a=o.split(",");for(let t=0;t<a.length;t++){let i=a[t],r=i.substring(0,i.indexOf("=")),o=i.substring(i.indexOf("=")+1,i.length);o=o.split(new RegExp("[()]")).join("");let c,h,u,p=o.split("?"),f=p[0],d=p[1],g="!"==f[0];if(hasRegularLog=f.match(s),hasRegularLog){let t=f.split(s);c=t[0].trim(),h=t[1].trim(),u=hasRegularLog[0]}else c=f;g&&(c=c.slice(1));let m=d.split(":"),y=m[0],b=m[1];this._register(e,"if",{hasNegate:g,attr:r,ops:u,bind:c,testval:h||null,_true:y,_false:b,sel:n,ifBind:l})}this.uiid++,i.dataset.if=n}i()}))},F.prototype._compileClass=function(t,e,n){return new Promise((i=>{if(!t.length)return void i();let r=this._static(e)(t,n);if(!r.length)return void i();let s=new RegExp("<|>|===|==|!==|!=");for(let t=0;t<r.length;t++){let n,i,o,l,a,c,h,u,p;n=`cc${this.uiid}`,i=r[t],o=i.dataset.class;let f=o.split(",");for(let t=0;t<f.length;t++){let i=f[t].split("&&"),r=i[0],o=i[1];if(r=r.trim(),o=o.trim(),l=r.match(s),r.substring(0,2).includes("!")?(a=!0,p="!!"==r.substring(0,2)?2:"!"==r.substring(0,1)?1:0):(a=!1,p=0),l){let t=r.split(s);c=t[0].trim(),u=t[1].trim(),h=l[0].trim()}else!a&&(c=r),a&&(c=r.substring(p),u=2==p);this._register(e,"class",{hasNegate:a,bind:c,testVal:u,className:o,ops:h,sel:n})}this.uiid++,i.dataset.class=n}i()}))},F.prototype._compileAttr=function(t,e,n){return new Promise((i=>{if(!t.length)return void i();let r=this._static(e)(t,n);if(!r.length)return void i();let s=new RegExp("<|>|===|==|!==|!=");for(let t=0;t<r.length;t++){let n,i,o,l,a,c,h;n=`cre${this.uiid}`,i=r[t],o=i.dataset.attr;let u=o.split("&&"),p=u[0],f=u[1];f=f.trim();let d=f.split("="),g=d[0],m=d[1];if(p=p.trim(),l=p.match(s),a="!"==p[0],l){let t=p.split(s);bind=t[0],h=t[1],c=l[0]}else bind=p;a&&a&&(bind=bind.slice(1)),this._register(e,"attr",{hasNegate:a,bind:bind,testVal:h,attrkey:g,attrvalue:m,ops:c,sel:n}),this.uiid++,i.dataset.attr=n}i()}))},F.prototype._compileModel=function(t,e,n){return new Promise((i=>{if(!t.length)return void i();let r=this._static(e)(t,n);if(r.length){for(let t=0;t<r.length;t++){let n=`cknt${this.uiid}`,i=r[t],a=i.tagName,c=i.dataset.model.split(",");for(let t=0;t<c.length;t++){let i=c[t].split(" ").join("");if(i.includes(":"))var s=i.split(":"),o=s[0],l=s[1];else l=i,o="value";this._register(e,"model",{attr:o,bind:l,sel:n,nodeType:a})}this.uiid++,i.dataset.model=n}i()}else i()}))},F.prototype.inject=function(t,e,n=!1){return new Promise((e=>{e(t.getElementsByDataset("bind","for","for-update","switch","toggle","event","animate","if","class","attr"))})).then((i=>{let r=[],s={bind:this._compileBind,switch:this._compileSwitch,toggle:this._compileToggle,if:this._compileIf,class:this._compileClass,attr:this._compileAttr,for:this._compileFor,"for-update":this._compileForUpdate,event:this._compileEvents,animate:this._compileAnimate};for(let o in i)i.hasOwnProperty(o)&&i[o].length&&r.push(s[o].apply(this,[i[o],e,n,t]));return console.timeEnd(e),Promise.all(r.length?r:[r])})).then((()=>Promise.resolve()))},c=F;const V=i("iuSND")();var J,z={};J=class{animate(t){return this.config=this.parse(this.cf),new Promise((e=>{for(let n=0;n<this.config.length;n++){let i=this.config[n],r=i.element;if(!i[t]){e();break}let s=i[t];if(s.options||s.options&&s.options.duration||(s.options={duration:this.duration}),!s.keyframes&&!r)continue;let o=s.keyframes,l=0,a=[];for(let t=0;t<o.length;t++){let e=o[t];switch(!0){case"string"==typeof e:a.push(this.dic(e));break;case e instanceof Object:{let t=e.name,n=e.offset;if(t&&n){let e=this.dic(t);e[e.length-1].offset=n,a.push(e)}else a.push(e)}}}o=a,a=null;let c=()=>{let t=o[l],n=r.animate(t,s.options||this.duration);n.finished?n.finished.then((()=>{l<o.length-1?(l+=1,c()):(o=[],e())})):n.onfinish=()=>{l<o.length-1?(l+=1,c()):(o=[],e())}};c()}}))}parse(t){let e=[],n=t.length,i=-1;for(;++i<n;){let n,r=t[i],s=r.selector;switch(!0){case!(!s.val||!s.attr):n=this.html.querySelectorIncluded(`[${s.attr}=${s.val}]`,s.attr,s.val);break;case!(!s.val||s.attr):{let t=s.val.match(new RegExp("^[.]"))?"class":s.val.match(new RegExp("^[#]"))?"id":null,e=t?s.val.slice(1):null;n=this.html.querySelectorIncluded(s.val,t,e)}}r.element=n,e.push(r)}return e}dic(t){return{slideOutUp:[{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1",easing:"ease-out"},{transform:"translate3d(0,100%,0)",visibility:"hidden",opacity:"0",easing:"ease-out"}],slideOutRight:[{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"},{transform:"translate3d(100%,0,0)",visibility:"hidden",opacity:"0"}],slideOutLeft:[{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"},{transform:"translate3d(-100%,0,0)",visibility:"hidden",opacity:"0"}],slideOutDown:[{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1",easing:"ease-out"},{transform:"translate3d(0,-100%,0)",visibility:"hidden",opacity:"0",easing:"ease-out"}],slideInUp:[{transform:"translate3d(0,100%,0)",visibility:"hidden",opacity:"0",easing:"ease-out"},{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1",easing:"ease"}],slideInRight:[{transform:"translate3d(100%,0,0)",visibility:"hidden",opacity:"0"},{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"}],slideInLeft:[{transform:"translate3d(-100%,0,0)",visibility:"hidden",opacity:"0",easing:"ease-out"},{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"}],slideInDown:[{transform:"translate3d(0,-100%,0)",visibility:"hidden",opacity:"0",easing:"ease-out"},{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1",easing:"ease-out"}],disappear:[{opacity:"1"},{opacity:"0"}],appear:[{opacity:"0"},{opacity:"1"}],flipInX:[,{offset:0,backfaceVisibility:"visible"},{transform:"perspective(400px) rotate3d(1,0,0,90deg)",opacity:"0",offset:0},{transform:"perspective(400px) rotate3d(1,0,0,-20deg)",offset:.4,easing:"ease-in"},{offset:.6,opacity:"1",transform:"perspective(400px) rotate3d(1,0,0,10deg)"},{transform:"perspective(400px) rotate3d(1,0,0,-5deg)",offset:.8},{offset:1,backfaceVisibility:"visible",transform:"perspective(400px) rotate3d(1,0,0,0)"}]}[t.trim()]||[]}constructor(t=[],e){this.html=e||document,this.cf=t,this.duration=300}};s=i("1WNVd");function K(t,e,n){this.name=t,this.template=e,this.options=n,this.handlers=n.handlers,this.subscribe=n.subscribe,this.data={},this.root=n.root,this.items=!1,this.type=n.type||"view",this.toggle=n.toggle,this.targets={},this.animateOptions=n.animate,this.role=n.role,this.isReady=!1,this.scope=n.scope,this.formSelector=n.form,this.await={},this.state=n.state,this.originalState={},this.utils=s,("app"==t||"app"==n.role)&&(()=>{this.staticComponent=n.static||[]})(),this.container={},this.compile=new Promise((t=>{this._bindHandlers(),t()})).then((()=>this._bindSubscribe())).then((()=>this.cloneState())).then((()=>{if(!0==("view"==this.type&&!!this.template))return this.createElementAsync();this.isStatic=!1}))}K.prototype.isStatic=!1,K.prototype.hasEvent=!1,K.prototype.isConnected=!1,K.prototype.destroyed=!1,K.prototype.isCreated=!1,K.prototype.cloneState=function(){if(this.state){for(let t in this.state)this.state.hasOwnProperty(t)&&(this.originalState[t]=this.state[t]);this.$state=(()=>this.state)()}},K.prototype.clearState=function(){this.state&&(this.state=JSON.parse(JSON.stringify(this.originalState)),this.$state=(()=>this.state)())},K.prototype.Subscribe=function(t){this.$observer.registerSubscribe({[t.listenTo]:{[t.original]:[t]}})},K.prototype.Node=function(t){return new _(t)},K.prototype._bindHandlers=function(){for(let t in this.handlers)if(this.handlers.hasOwnProperty(t)){let e=this.handlers[t],n=e.name;e=e.bind(this),e.original=n,e.binded=this.name,this.handlers[n]=e,this.initAwaitHandlers(t)}this.await.destroy||(this.await.destroy=Promise.resolve()),this.await.animateRemove||(this.await.animateRemove=Promise.resolve())},K.prototype.initAwaitHandlers=function(t){this.await[t]=Promise.resolve()},K.prototype._bindSubscribe=function(){let t={};for(let e in this.subscribe)if(this.subscribe.hasOwnProperty(e)){if(subscribe=this.subscribe[e],subscribe.components&&!subscribe.handler)throw new Error(`there is no handler in format many of subscribe in event ${e}`);if(!subscribe.components&&subscribe.handler)throw new Error(`there is no components in format many of subscribe in event ${e}`);if(!!subscribe.components&&!!subscribe.handler){let n=e,i=subscribe.components,r=subscribe.handler;r=r.bind(this),r.binded=this.name,r.original=n;for(let e=0;e<i.length;e++){let s=i[e];t[s]||(t[s]={}),t[s][n]||(t[s][n]={}),r.listenTo=s,t[s][n]=r}}else{t[e]||(t[e]={});let n=subscribe;for(let i in n)if(n.hasOwnProperty(i)){let r=n[i],s=r.name;try{r=r.bind(this)}catch(t){}r.original=s,r.binded=this.name,r.listenTo=e,t[e][s]||(t[e][s]={}),t[e][s]=r}}}this.subscribe=t},K.prototype.doFor=function(t,e){if(null!=e)return this.$attrib.notifyFor(t,e,null,this.name,(()=>this.html)())},K.prototype.doToggle=function(t,e){this.$attrib.notifyToggle(t,e,null,this.name,this.html)},K.prototype.doSwitch=function(t,e){this.$attrib.notifySwitch(t,e,null,this.name,this.html)},K.prototype.doIf=function(t,e){this.$attrib.notifyIf(t,e,null,this.name,this.html)},K.prototype.$animate=function(t){let e=this.$attrib.getWatchItemsByType(this.name,"animate"),n=this.animateOptions,i=[];return(()=>{if((e.length||e instanceof Array)&&n)for(let t=0;t<e.length;t++){let r=e[t],s=r.ns;r.selector;if(r.ns){if(n[s]){n[s];Object.assign(r,n[s]),delete n[s]}}else i.push(e)}})(),!!e.length&&((()=>{let t={},i={};for(let r in n)n.hasOwnProperty(r)&&(i.val=r,t.selector=i,Object.assign(t,n[r]),e.push(t),t={},i={})})(),new J(e,this.html).animate(t))},K.prototype.$templating=function(t,e,n){let i=e||this.template;return new h(r("templating")).createElement(t,i,n)},K.prototype.createElement=function(){if(!("#"==this.template.substring(0,1)))return;let t=this.template.substr(1),e=document.getElementById(t),n=this.isTemplate=e&&e.toString().includes("Template");if(!e)throw new Error(`the template for ${this.name} is not found with.`);return new Promise((t=>{switch(n){case!0:{let n=e.getContent(!0);if(!n)throw new Error(`it might be theres no template in component - ${this.name}`);n.cake_component=this.name,this.html=this.Node(n),this._parseHTML(this.isStatic).then((()=>{t()}))}break;case null:t();break;default:{let n=e;if(!n)throw new Error(`it might be theres no template in component - ${this.name}`);n.cake_component=this.name,this.html=this.Node(n),this.isStatic=!0,this._parseHTML(this.isStatic).then((()=>{t()}))}}}))},K.prototype.createElementAsync=function(){return new Promise((t=>{this.createElement().then((()=>{t()}))})).then((()=>{this.isReady=!0}))},K.prototype._isParsed=!1,K.prototype._parseHTML=function(t=!1){return this.$attrib.inject(this.html,this.name,t).then((()=>{this.original=this.html.cloneNode(),this._isParsed=!0}))},K.prototype.render=function(t={}){if(this.isConnected)return console.error(`${this.name} is already rendered and connected to the DOM`),Promise.resolve();let e=t.root,n=t.cleaned,i=t.emit||{},r=t.data||{},s=this.options.multiple,o=this.state||{},l={emit:i};return new Promise(((t,n)=>{e&&(this.root=e),this.isReady?t():this.createElement().then((()=>!this.template&&this.fire.isConnected&&this.fire.isConnected(l,!0))).then((()=>{this.isReady=!0,t()}))})).then((()=>this.await.destroy.then((()=>this.await.animateRemove)).then((()=>new Promise(((t,e)=>{let n=this.$attrib.getWatchItemsByType(this.name,"for");Promise.all(n.map((t=>this.doFor(t,(t=>({...o,...r}[t]||null))(t))))).then((()=>{t(this.html)}))})).then((t=>(l={element:t,emit:i},new Promise(((e,n)=>{try{this.fire.beforeConnected&&this.fire.beforeConnected(l,!0),e(t)}catch(t){n(t)}}))))).then((t=>{if(!this.isStatic){return(r?(()=>new Promise((e=>{let n=t.getElement();n=this.$templating(r,n),this.html=t=this.Node(n),this.html.replaceDataSrc(),r=null,e()})))():Promise.resolve()).then((()=>{t.appendTo(this.root,n),this.isConnected=!0}))}})).then((()=>{})).then((()=>this.findContainer())).then((()=>{try{return this.fire.isConnected&&this.fire.isConnected(l,!0)}catch(t){console.log(440,t)}})).then((()=>this.findTarget())).then((()=>this.addEvent())).then((()=>this.$animate("render"))).then((()=>(s&&this._smoothReset(),new Promise(((t,e)=>{setTimeout((()=>{this._watchReactive(),t()}),100)})))))))))},K.prototype.renderAsync=function(t){this.render(t).then((()=>{this.$persist.append(this.name)}))},K.prototype._smoothReset=function(){this.isConnected=!1,this.html=this.original.cloneNode()},K.prototype._hardReset=function(t){return this.isConnected=!1,this.$persist.remove(t),this.html=this.original.cloneNode(),!0},K.prototype.reset=function(){let t=this.$animate("remove");return t instanceof Promise?this.await.animateRemove=new Promise((e=>{t.then((()=>this.html.remove())).then((()=>{this.container={}})).then((()=>this.clearState())).then((()=>this._hardReset(this.name))).then((()=>{e()}))})):new Promise((t=>{this.html.remove(this.name),this.clearState(),this.container={},this._hardReset(this.name),t()}))},K.prototype.addEvent=function(t,e){let n=this.name;function i(t,e,n,i){return function(r){n||r.preventDefault(),i&&r.stopPropagation(),Cake.Observer.notify(e,t,r)}}if(this.targets)for(let t in this.targets)if(this.targets.hasOwnProperty(t)){let e=this.targets[t];for(let r of e){r.sel;let e=r.el,s=r.cb,o=t,l=t.substring(0,2),a=l.includes("~"),c=l.includes("^");a||c?(o=t.slice(1),s=s||o):s||(s=t),e.Ref().get("__cake__events")||e.Ref().set("__cake__events",{});let h=e.Ref().get("__cake__events");h[s]||(e.addEventListener(o,i(s,n,a,c),!0),h[s]=!0,e.Ref().set("__cake__events",h))}}},K.prototype.findTarget=function(){let t=this.$attrib.getEventTarget(this.name);return new Promise((e=>{for(let e of t){let t=this.html.querySelectorAllIncluded(`[data-event=${e.sel}]`);for(let n=0;n<t.length;n++)this.targets[e.event]||(this.targets[e.event]=[]),this.targets[e.event].push({el:t[n],...e})}e()}))},K.prototype.toggler=function(t){let e=this.$attrib.getWatchItemsByType(this.name,"toggle"),n=class{check(t){let n=this.toggle[t];if(n){if(e.length){let t=n.ns,i=e.find((e=>e.name==`ns-${t}`));i&&(n.sel=`[data-toggle=${i.sel}]`)}return n}console.error(`${t} is not found in toggle! choose from ${JSON.stringify(Object.keys(this.toggle))}`)}_toggle(){let t=this.check(this.bind);if(!t)return;let e,n,i=t.basis||"data-name",r=t.cls||"is-active",s=t.mode||"radio",o=t.sel,l=null==t.persist||t.persist,a=this.html.querySelectorAll(o);if(a.length){if(1==a.length){let t="boolean"==typeof this.bases,e=!!this.bases,n=a[0];if(l){const i=function(t,e,n){n?t.classList.contains(e)&&t.classList.remove(e):t.classList.contains(e)||t.classList.add(e)};t?(e?(this.cache.createOrUpdate(this.bind,!0),i(n,r,!0)):(this.cache.createOrUpdate(this.bind,!1),i(n,r,!1)),n.classList.toggle(r)):(this.cache.createOrUpdate(this.bind,!n.classList.contains(r)),n.classList.toggle(r))}}else for(let t=0;t<a.length;t++){let o=a[t],c=o.classList.contains(r),h=o.getAttribute(i);h==this.bases?("switch"==s?o.classList.toggle(r):c||o.classList.add(r),l&&this.cache.createOrUpdate(this.bind,h),n=h):c&&(o.classList.remove(r),e=o.getAttribute(i))}return{prev:e,next:n}}}_recall(){let t=this.check(this.bind);if(!t)return;let e=t.basis||"data-name",n=t.cls||"is-active",i=t.sel;return this.cache.get(this.bind).then((t=>{if(!t)return t;let r=t,s=this.html.querySelectorAll(i);if(s.length){if(1==s.length){let t=s[0];r&&t.classList.add(n)}else for(let t=0;t<s.length;t++){let i=s[t],o=i.classList.contains(n);i.getAttribute(e)==r&&(o||i.classList.add(n))}return r}}))}constructor(t,e,n,i){this.toggle=i.toggle,this.bind=t,this.bases=e,this.cache=i.$cache,this.html=n}},i=(t,e)=>new n(t,e,this.html,this)._toggle();return i.recall=t=>new n(t,!1,this.html,this)._recall(),i},K.prototype.findContainer=function(){return new Promise((t=>{let e=this.html.getContainers();for(let t=0;t<e.length;t++){let n=e[t],i=n.dataset.container;i&&(this.container[i]=n)}t()}))},K.prototype._validator=function(t,e){if(this.options.validate){this.validate=this.options.validate;this.validate[t]}},K.prototype._watchReactive=function(){if("form"==this.role&&!0===this.options.watch){const t=this.options.validate,e=this.$form();if(e._reactive)return;this.state&&!this.state.formData&&(this.state.formData={});const n=this,i=e=>{const i=e.target,r=i.name||i.id,s=i.value;let o=t[r];if(o){if(o=o.bind(n),o){o(e)&&(this.state&&(this.state.formData[r]=s),this.$scope.set(r,s))}}else this.state&&(this.state.formData[r]=s),this.$scope.set(r,s)};e.addEventListener("change",(t=>{"INPUT"!=t.target.tagName&&"TEXTAREA"!=t.target.tagName&&i(t)})),e.addEventListener("input",(t=>{"INPUT"!=t.target.tagName&&"TEXTAREA"!=t.target.tagName||i(t)})),e._reactive=!0}},K.prototype.observer=function(t){this.observer=new Observer(this,t,function(t){return this.handler[t]}.bind(this))},K.prototype.variable=function(t){Object.keys(t);let e={},n=[];function i(t,n,i){n||(e[t]=`value is not '${i}'`)}for(let e in t)if(t.hasOwnProperty(e)){let r,s=t[e],o=s.type,l=s.value;r=["string","number"].includes(o)?typeof l==o:l instanceof Array?"array"==o:"object"==o,n.push(l),i(e,r,o)}if(Object.keys(e).length)throw new Error(JSON.stringify(e));return n},z=K;var X;s=i("1WNVd");const G=new(i("jU2nf")())({child:"object",storage:"local",name:"_cake_router_cf"});X=function(t,e){const n=[];return class{authenticate(t){if(this.unauthRoute)try{const e=G.get("role",!0);if(e){if(t){const t=e.role,n=(e.data,this.authRoute[t]);if(n){const t=n.name;this.goTo(t)}}}else t||this.logout()}catch(e){t||this.logout()}}auth(t){if(!t){const t=G.get("role",!0);if(t){let e={};return t&&(e=t),e.data&&(e=e.data),e.user&&(e=e.user),e.token=t.token,e}return"token"}{let e=t.role,n=t.token,i=t.data;G.createOrUpdate("role",{role:e,token:n,data:i})}}logout(){try{G.remove("role")}catch(t){}this.goTo(this.unauthRoute,{replace:!0})}goTo(t,e){try{let i=this.route,r=e.params||{},o=e.replace,l=null;const a=Object.entries(i);for(let e=0;e<a.length;e++){const n=a[e][0],i=a[e][1];if(i.name==t){l=n;break}}if(!l)throw new Error(`${t} is not found in routes`);if("/"==l)return void(o?location.replace(`${location.origin}${location.pathname}`):window.location=`${location.origin}${location.pathname}`);let c;if(l=l.slice(1),r.toString().includes("Object")){let t="";for(let e in r)t+=`${e}=${r[e]}&`;r=t,c=`!/${l}?${r}`}else c=`!/${l}`;if("/"==l&&(c=""),o){let t=`${location.origin}${location.pathname}#${c}`;s.isChrome()&&!s.isFirefox()&&history.replaceState(void 0,void 0,t),location.replace(t)}else{var n=document.createElement("a");n.href=`#${c}`,s.isChrome()&&!s.isFirefox()&&history.pushState(void 0,void 0,n.href),n.click()}}catch(t){console.log(t)}}goBack(){return new Promise(((t,e)=>{window.history.back(),t()}))}persist(){if(!document.hasRouterPersist){let t="DOMContentLoaded";"deviceready"in document&&(t="deviceready"),document.addEventListener(t,(t=>{this.parse(),this.notify().then((()=>this.navigate(!0)))})),document.hasRouterPersist=!0}}watch(){window.hasRouterPop?this.parse():(window.addEventListener("popstate",(t=>{this.parse(),this.notify().then((()=>(console.log("notified"),this.clear().then((()=>(console.log("cleared"),this.navigate().then((()=>{console.log("navigated")}))))))))})),window.hasRouterPop=!0)}compile(t){let e={};for(let n in t){let i=t[n];n=String(n);const r=n.length;let s=n;if(["404"].includes(n)){const e=t[n];t[n]={callback:e,name:n}}else s=s.slice(1);s=s.split("/"),s=s.map(((t,i)=>{let s=t.includes(":"),o="";if(o+=0==i?"^/":"/",o+=s?"(([^/#?]+?))":t,o+=i==r-1?"/?$":"",s){const r=t.replace(":","");e[n]||(e[n]={}),e[n].params={[r]:i}}return o})),e[n]&&e[n].params?e[n]={params:e[n].params,regex:new RegExp(s.join("")),...i}:e[n]={regex:new RegExp(s.join("")),...i};let o=i.auth;if(o){if(this.authRoute[o])throw new Error(`auth ${o} is found in other route`);this.authRoute[o]=i}}return e.length=Object.keys(t).length,e.keys=Object.keys(t),e}parse(){let t,e,n=window.location.hash;if(n?(t=n.includes("#!/")?2:n.includes("#/")?1:null,n=n.slice(t)):(n="/",t=!0),!t)return;const i=new URL(`http://localhost${n}`);let r=i.search,s=i.pathname;const o=this.route.keys,l={};r&&new URLSearchParams(r).forEach(((t,e)=>{l[e]=t}));let a=!1;for(let t=0;t<o.length;t++){const n=this.route[o[t]],i=n.regex,r=n.components,c=n.params,h=n.name,u=n.overlay,p=n.display,f=n.onrender;if(c){let t=String(s);t=t.slice(1),t=t.split("/"),Object.entries(c).forEach((e=>{const n=e[0],i=e[1];t[i]&&(l[n]=t[i])}))}if(i.test(s)){e=h,this.unauthRoute!=h?this.authenticate():this.authenticate(!0),this.prev={components:r,state:l,path:s,name:h,prev:this.prev,overlay:u,display:p,onrender:f},a=!0;break}}if(!a&&this.route[404]){let t=this.route[404].callback(),e=location.origin,n=location.pathname;this.route[t]?(t="/"==t?`${e}${n}`:"/"==n.slice(-1)?`${e}${n}#!${t}`:`${e}${n}/#!${t}`,location.replace(t)):t&&!this.route[t]&&("/"==e.slice(-1)&&"/"==t[0]&&(t=t.slice(1)),t=`${e}${t}`,location.replace(t))}}navigate(t){if(this.prev){const t=this.prev.components,e=(this.prev.state,this.prev.path),n=(this.prev.name,this.prev.overlay,this.prev.onrender||{});try{if(t.length)return new Promise(((e,i)=>{const r=t.length;let s=0;if(r){const i=()=>{let r=t[s];if(t.length>s){let t=r;r=this.components.get(r),r.render({emit:{route:this.prev},...n[t]||{}}).then((()=>{r.await.isConnected?r.await.isConnected&&r.await.isConnected.then((()=>{i()})):i()})).catch((t=>{throw t})),s+=1}else e()};i()}else e()}))}catch(n){throw console.log(n),new Error(`some of the component in ${JSON.stringify(t)} in path ${e} of router is not found, make sure the it is created`)}}}static pushState(e,n,i){window.history.pushState(e,n,i);let r=Promise.resolve();if(this.prev){this.prev.components,this.prev.state,this.prev.path,this.prev.name;r=new Promise(((e,n)=>{const i=t.length;let r=0;if(i){const n=()=>{let i=t[r];t.length>r?(i=this.components.get(i),i.fire.destroy(),i.await.destroy.then((()=>{n()}))):e(),r+=1};n()}else e()}))}return r.then((()=>this.navigate()))}clear(){let t=Promise.resolve();if(this.prev&&this.prev.overlay||void 0)return t;const e=function(t,n,i,r){let s=n[t],o=s,l=e;try{if(n.length>t){if(s=i.get(s),!s.fire.destroy)throw new Error(`${o} has no destroy handler!`);s.fire.destroy(),s.await.destroy.then((()=>{l(t,n,i,r)}))}else r();t+=1}catch(t){throw t}};if(this.prev&&this.prev.prev){let n=this.prev.prev.components,i=(this.prev.prev.state,this.prev.prev.path,this.prev.prev.name,this.prev.prev.overlay),r=Promise.resolve();return i&&(r=new Promise(((t,i)=>{n.length?e(0,n,this.components,t):t()}))),t=new Promise(((t,i)=>{n.length?e(0,n,this.components,t):t()})),r.then((()=>t))}return t}pushState(t,e,n){window.history.pushState(t,e,n);let i=Promise.resolve();return this.clear(),i.then((()=>this.navigate()))}static subscribe(t){t&&"Function"==t.constructor.name&&n.push(t)}notify(){return Promise.all(n.map((t=>t())))}constructor(t,n){this.unauthRoute=n&&n[401]||null,this.authRoute={},this.route=this.compile(t),this.prev=null,this.components=k,this.watch(),this.persist(),Object.defineProperty(e.prototype,"$router",{configurable:!0,get:()=>({goTo:this.goTo.bind(this),goBack:this.goBack.bind(this),auth:this.auth.bind(this),logout:this.logout.bind(this),...this.prev}),set(t){}})}}};var Q;const Y=i("jU2nf")();Q=class{listen(t){t=k;let e="DOMContentLoaded";"deviceready"in document&&(e="deviceready"),window.addEventListener(e,(e=>{setTimeout((()=>{this.storage.getAll().then((e=>{if(e&&!e.length)for(let n=0;n<e.length;n++){let i=e[n],r=t.get(i);r.isConnected=!1,r?!r.isConnected&&r.render.bind(r)():console.error(`component ${r} is not found!`)}}))}))}))}append(t){this.storage.create(t)}remove(t){this.storage.remove(t)}constructor(){this.storage=new Y({child:"array",storage:"session",name:"_cake_persistent"})}};const Z=i("jU2nf")();var tt,et,nt={};const it={handlers:{},subscribe:{}};function rt(t,e,n){return null==t[e]&&(t[e]={}),null==t[e][n]?t[e][n]=0:t[e][n]+=1,!0}window.Stat=it,et={handlers:{set:function(t,e){return rt(it.handlers,t,e)},get:function(t){null!=it.handlers[t]?console.table(it.handlers[t]):console.log(null)}},subscribe:{set:function(t,e){return rt(it.subscribe,t,e)},get:function(t){null!=it.subscribe[t]?console.table(it.subscribe[t]):console.log(null)}}};const st={};window.Subscribe=st,tt={set:function(t){return new Promise(((e,n)=>{for(component in t)if(t.hasOwnProperty(component)){let e=t[component];for(let t in e)if(e.hasOwnProperty(t)){let n=e[t];st[component]||(st[component]={}),st[component][t]||(st[component][t]=[]),st[component][t].push(n),et.subscribe.set(component,n.original)}}e()}))},get:function(t,e){return st[t]&&st[t][e]}};var ot;const lt={};function at(t){this.logger=t||!1,this.results={}}window.Handler=lt,ot={set:function(t,e){return new Promise((n=>{for(let n in t)if(t.hasOwnProperty(n)){let i=t[n];lt[e]||(lt[e]={}),lt[e][i.original]=i,et.handlers.set(e,i.original)}n()}))},get:function(t,e){return lt[t]&&lt[t][e]}},at.prototype.notify=function(t,e,n){let i=t,r=e,s=n,o=ot.get(i,r);if(!o)return void console.error(`no setup handler for the event ${r} in ${i} component`);i=o.binded;let l=new Promise(((t,e)=>{t(o(s))}));return et.handlers.set(i,o.original),l.then((t=>{let e=[];this.results[i]||(this.results[i]={});let n=tt.get(i,r);if(n)for(let s=0;s<n.length;s++){let o=n[s];et.subscribe.set(i,o.original),e.push(new Promise(((e,n)=>{try{let s=o(t);s&&"Promise"==s.ObjectType?s.then((t=>{this.results[i]||(this.results[i]={}),this.results[i][r]=t,e(t)})).catch((t=>{n(t)})):(this.results[i][r]=s,e(s))}catch(t){console.log(t),n(t)}})))}else this.logger&&console.info(`no subscriber for (${r}) event of (${i}) component`),this.results[i][r]=t;return Promise.all(e).then((()=>(t=null,e=[],!0)))}))},nt=at;var ct;function ht(t){this.componentName=t,this.components={}}ct=function(t){class e{store(t,e){this.storage[t]=e}get options(){if("select"==this.type||"virtual"==this.type){let t={};for(let e in this.storage){let n=this.storage[e];t[e]=n.options}return t}return!1}get value(){if("input"==this.type){let t="";for(let e in this.storage){t=this.storage[e].options[0]}return t}return!1}get query(){let t={};for(let e in this.storage){t=this.storage[e].query[0]||null}return t}get has(){let t="";for(let e in this.storage){t=this.storage[e].query[0]||null}return t}constructor(t){this.type=t,this.storage={}}}const n={options:n=>{let i=n.options,r=n.params;i||(i=[]);let s=i.length>1;return Promise.all(i.map((n=>{n.control;let i=n.field,o=n.tbl,l=n.src,a=n.schema,c=n.type;return t.fire(l,{tbl:o,field:i,params:r}).then((t=>{if(t=t||[],n.query=t,t=t.map((t=>a(t))),"input"!=c){let e=a({});for(let t in e)e.hasOwnProperty(t)&&(e[t]="");t.unshift(e)}return n.options=t,n})).then((t=>{let n=t.type,i=t.control;n||(n="others");const r=new e(n);if(s){let e={};return e[i]||(e[i]=r,e[i].store(i,t)),e}return r.store(i,t),r}))}))).then((t=>s?t.reduce(((t,e)=>(Object.assign(t,e),t)),{}):t[0])).catch((t=>{console.error(t)}))},plot:t=>{let e=t.data,n=t.container;if(!e&&!n)return;const i=(t,n,i)=>{if(!t)return void console.info("root is not provided!");const r=t.querySelectorAll(`${n}`),s=r.length;if(s)for(let t=0;t<s;t++){let n=r[t],s=n.name,o=i(n,e[s],t);if("break"==o)break}else i(null,e)};return i(n,"INPUT.input",(function(t,e){null!=e&&("date"==t.type?(e="Invalid Date"==new Date(e)?"":new Date(e).toJSON().split("T")[0],t.value=e):t.value=e)})),setTimeout((()=>{i(n,"SELECT.input:not(.cake-template)",(function(t,e){i(t,"OPTION:not(.cake-template)",(function(n,i,r){if(n){if(n.value==e)return t.selectedIndex=r,"break"}else console.log(n,i,"provide schema")}))}))}),500),Promise.resolve()}};return n},i("1WNVd"),ht.app=function(t){this.name=t.name||""},ht.Components=function(t){return{subscribe:(e,n)=>new Promise(((i,r)=>{let s=setInterval((()=>{ht.Components[t]&&(!function(){let i=ht.Components[t];if(i&&e instanceof Function){let t=e.name;n&&(e=e.bind(n)),e.binded="external",e.original=t,e.listenTo=i.name,i.Subscribe(e)}}(),clearInterval(s),i())}))}))}},ht.Models={},ht.plugin=r,ht.Attributes=new c,ht.Models.$loaded=function(t){return new Promise(((e,n)=>{let i=setInterval((()=>{ht.Models[t]&&(clearInterval(i),e(ht.Models[t]))}));setTimeout((()=>{ht.Models[t]||(clearInterval(i),n(t))}),1e4)}))},ht.MainMessageChannel=function(){let t=new MessageChannel;return{send(e){t.port2.postMessage(e)},receive(e){t.port1.onmessage=function(t){let n=t.data,i=null!=t.isTrusted&&t.isTrusted;e(i?{status:1,data:n}:{status:0,err:"not trusted!"})}}}}(),ht.Utils={scopeTrap:t=>!1,scopeNotifier:t=>t},ht.create=function(t,e,n){new ht(t,e,n).create(t,e,n)},ht.init=function(t){return new z(t)},ht.Router=X(ht.Components,z),ht.Persistent=new Q,ht.Persistent.listen(ht.Components),ht.Cache=new Z({name:"cache",storage:"session",child:"object"}),ht.getSubscriber=function(t,e){let n=tt,i={};for(let r in n)if(n.hasOwnProperty(r)){let s=n[r];for(let n in s)if(s.hasOwnProperty(n)){let r=s[n];for(let n of r){let r=n,s=r.original,o=r.binded;if(r.listenTo==t)if(s==e)if(i[o]){let t=i[o]instanceof Array?i[o]:[i[o]];i[o]=t.concat(e)}else i[o]=e;else if(!e)if(i[o]){let t=i[o]instanceof Array?i[o]:[i[o]];i[o]=t.concat(s)}else i[o]=s}}}return i},ht.Observer=new nt,ht.prototype._defineProperty=function(t,e,n,i){Object.defineProperty(t,e,{configurable:!0,get:()=>n(),set(t){i&&i(t)}})},ht.prototype._defineProperty(z.prototype,"$observer",(function(){return ht.Observer})),ht._globalScope=new V("globalScope"),ht.prototype._defineProperty(z.prototype,"$globalScope",(function(){return ht._globalScope})),ht._universalScope=new V("universalScope"),ht.$universalScope=function(){return ht._universalScope},ht.prototype._defineProperty(z.prototype,"$attrib",(function(){return ht.Attributes})),ht.prototype._defineProperty(z.prototype,"$persist",(function(){return ht.Persistent})),ht.prototype._defineProperty(z.prototype,"$cache",(function(){return ht.Cache})),ht.prototype._defineProperty(z.prototype,"$hash",(function(){return ht.Hasher})),ht.prototype.create=function(t,e,n){console.time(t);let i=new z(t,e,n);const r=new V(t);i.scope&&(()=>{for(let t in i.scope)if(i.scope.hasOwnProperty(t)){const e=i.scope[t];for(let n in e)if(e.hasOwnProperty(n)){let s=e[n];const o=s.name;s=s.bind(i),r.hook(t,o,s)}}})(),r.registerNotifier((function(t,e,n,i){return ht.Attributes.notifier(t,e,n,i)})),ht.Attributes.registerNotifier(t,(function(t,e){return r.notifier(t,e)})),i.compile.then((()=>{let t=i.subscribe,e=i.root,n=(i.html,i.handlers);i.role,i.state;return tt.set(t).then((()=>({root:e,handlers:n})))})).then((t=>{const e=t.handlers,n=t.root;ot.set(e,i.name),this._defineProperty(i,"root",(function(){if(i._root)return i._root;{let t=n||"#app",e=document.querySelector(t);if(e)return e}throw new Error(`the selector '${n}' as container of component '${i.name}' is not found!`)}),(function(t){Object.assign(i,{_root:t})})),this._defineProperty(i,"$scope",(function(){return r})),"form"==i.role&&(()=>{const t=ct(i),e=()=>i.root.querySelector(i.formSelector||"FORM");for(let n in t)t.hasOwnProperty(n)&&Object.defineProperty(e,n,{get:()=>t[n]});this._defineProperty(i,"$form",(function(){return e}))})()})).then((()=>{i.fire=function(){function t(t,e){if(e=e?"function"==typeof e?e.bind(i)():function(){return e}.bind(i)():null,fn={[t]:()=>e}[t].bind(i),"function"==typeof fn){fn.name=t,fn.original=t,fn.binded=i.name,ot.set({[t]:fn},i.name);let r=e;function n(t){let e={};if(!t)return e;let n=t.attributes;if(n)for(let t=0;t<n.length;t++){let i=n[t],r=i.name,s=i.value;e[r]=s}return e}if(e&&(e.element||e.root||e.container)){r={status:0,attributes:{element:n(e.element),root:n(e.root),container:n(e.container)}}}const s=ht.Observer.notify(i.name,t,{}).then((()=>ht.Observer.results[i.name][t]));return i.await[t]=s,i.await[t]}console.error("the param in fire is not an instance of function")}return function(t,e){for(let n in e)if(e.hasOwnProperty(n)){let r=e[n],s=r.original,o={[s]:function(t,e){return null==e&&"destroy"==s&&(e=!0),null==e&&(e=!1),e?(i.await[s]=new Promise((e=>{setTimeout((()=>{let n=t||{};ht.Observer.notify(i.name,s,n).then((()=>ht.Observer.results[i.name][s])).then((t=>{e(t)})).catch((t=>{console.log(448,i.name,s,n),console.trace(),console.error(t)}))}))})),i.await[s]):r(t)}};o[s]=o[s].bind(i),o[s].originalName=s,o[s].binded=i.name,t[s]=o[s],t.component=i.name}}(t,i.handlers),t}()})).then((()=>{"view"==i.type&&(i.toggler=i.toggler(i),k.set(t,i))})).then((()=>{i.options.router&&ht.Router.subscribe(i.options.router.bind(i)),i.options.data&&i.options.data.bind(i.data)(i),i.options.init&&i.options.init.bind(i)(),i.options.utils&&i.options.utils.bind(i.utils)(i)})).then((()=>{"model"==i.type&&(ht.Models[t]=i),i.isStatic&&"view"==i.type&&i.render()}))},a=ht,window.Cake=a}();
//# sourceMappingURL=legacy.js.map
