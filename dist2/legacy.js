!function(){var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},e={},n={},i=t.parcelRequire2002;null==i&&((i=function(t){if(t in e)return e[t].exports;if(t in n){var i=n[t];delete n[t];var r={id:t,exports:{}};return e[t]=r,i.call(r.exports,r,r.exports),r.exports}var s=new Error("Cannot find module '"+t+"'");throw s.code="MODULE_NOT_FOUND",s}).register=function(t,e){n[t]=e},t.parcelRequire2002=i),i.register("iuSND",(function(t,e){const n=i("jU2nf")();t.exports=function(t){const e={};return class{registerNotifier(t){this.notify.push(t)}install(){this.session=new n({child:"object",storage:"session",name:`_cake_${this.name}_cf`})}notifier(t,e){const n=e.value,i=e.bind;return this.reactiveData[t]||(this.reactiveData[t]={}),this.reactiveData[t][i]=n,this.set(i,n)}getInputData(t="json",e){let n=e||this.name,i=JSON.parse(JSON.stringify(this.reactiveData[n]));for(let r in i){let t=i[r];i[r]=this.sanitize(t)}if("json"==t)return i;if("formdata"==t){const t=new FormData;for(let e in i){let n=i[e];t.append(e,n)}return t}}hook(t,n,i){e[t]||(e[t]={}),e[t][n]||(e[t][n]=[]),e[t][n].push(i)}get(t,e=!1){this.pKeys[t];return e?this.session.get(t,!0):this.session.get(t)}set(t,n){let i=`${this.name}-${t}`,r=this.notify,s=this.name;return this.pKeys[t]=i,new Promise((async(e,i)=>{"password"!=t&&this.session.createOrUpdate(t,n),e()})).then((async()=>Promise.all(r.map((i=>i(t,n,null,s).then((()=>{const i=e[this.name];if(i){const e=i[t];e&&e.forEach((t=>{t(n)}))}})))))))}removeCache(t){return this.session.remove(t)}constructor(t){this.name=t,this.reactiveData={},this.notify=[],this.install(this.name),this.pKeys={},this.sanitize=function(t){const e={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","/":"&#x2F;"};return"string"==typeof t?t.replace(/[&<>"'/]/gi,(t=>e[t]||"")):t}}}}})),i.register("jU2nf",(function(t,e){var n=i("1WNVd");t.exports=function(){function t(t){return t?t.constructor.name.toLowerCase():null}function e(t,e){for(let n in t)t.hasOwnProperty(n)&&e(t[n],n)}function i(t){return null===t}function r(e){return"object"==t(e)}var s=function(e,n){var i=null;return"array"==t(e)?i=function(e,n){for(var i=null,r=0;r<e.length;r++){var s=e[r];if("object"==t(n)){var o=n,a=Object.keys(n)[0],l=o[a];if("object"==t(s)&&s[a]==l){i=r;break}}else if("array"!=t(n)&&n==s){i=r;break}}return i}(e,n):"object"==t(e)&&(i=function(e,n){var i=null,r=t(n);if("object"==r){var s=Object.keys(n)[0];e[i]!=undefined&&e[i]==n[s]&&(i=s)}else"string"==r&&(i=n);return i}(e,n)),i},o=function(n,i){if("array"==t(n)){let e=new Set(n);"array"==t(i)?i.forEach((t=>{e.add(t)})):e.add(i),n=Array.from(e)}else r(n)&&(r(i)?e(i,(function(t,e){n[e]=t})):n[i]=i);return n},a=function(n,o){var a=s(n,o);return"array"==t(n)?i(a)?n.includes(o):n[a]=o:"object"==t(n)&&(i(a)?r(o)?e(o,(function(t,e){!function(t,e,n){t=Object.assign(t,{[n]:e})}(n,t,e)})):n[o]=o:n[a]=o),n},l=function(e,n){if("string"==t(n)){var r=s(e,n);if("object"==t(e))delete e[r];else if("array"==t(e)){for(var o=[],a=0;a<e.length;a++)a!=r&&o.push(e[a]);e=o}return e}return"object"==t(n)?Object.filter(e,(function(t,e){return!(n[e]!=undefined&&n[e]==t)})):"array"==t(n)?Object.filter(e,(function(t,e){return!n.contains(e)})):!i(r)&&void 0},c=function(e,n){var i=t(n);if("string"==i){var r=s(e,n);if(0==r||r)return e[r]}else{if("object"==i)return Object.filter(e,(function(t,e){var i;return!(i=n[e],i===undefined||n[e]!=t)}));if("array"==i)return Object.filter(e,(function(t,e){return n.contains(e)}))}return null},h=function(e,n){var i=t(n);return"string"==i?Object.filter(e,(function(t,e){return e!=n})):"object"==i?Object.filter(e,(function(t,e){return Object.some(n,(function(n,i){return!(i==e&&n==t)}))})):"array"==i?Object.filter(e,(function(t,e){return!n.contains(e)})):null};return class{has(t){var e=this.storage.open(),n=s(e,t);return!i(n)&&n}get(t,e){if(e){var n=this.storage.open();return c(n,t)}return new Promise(((t,e)=>{setTimeout((()=>{var e=this.storage.open();t(e)}))})).then((e=>c(e,t)))}getNot(t){var e=this.storage.open();return h(e,t)}getAll(){var t=this.storage.open();return Promise.resolve(t)}update(t,e){var n=this.storage.open(),i=s(n,t);return!(0!=i&&!i)&&(n=a(n,data),this.storage.close(n))}createOrUpdate(t){if(arguments.length>1){t={[arguments[0]]:arguments[1]}}var e=this.storage.open();e=a(e,t);return this.storage.close(e)}create(t){var e=this.storage.open();return e=o(e,t),this.storage.close(e)}remove(t){var e=this.storage.open();return e=l(e,t),this.storage.close(e)}constructor(e){this.name=e.name,this.storageType=e.storage,this.child=e.child||"object";try{"string"==t(this.child)&&(this.child="array"==this.child?[]:"object"==this.child?{}:null)}catch(i){"session"==this.storageType?sessionStorage.clear():"local"==this.storageType&&localStorage.clear(),"string"==t(this.child)&&(this.child="array"==this.child?[]:"object"==this.child?{}:null)}if(!["array","object"].includes(t(this.child)))throw new Error("the child must be an object or array type.");this.storage=new class{init(t){return!!this[this.type]&&(this[this.type](t),!0)}open(){return"session"==this.type?JSON.parse(sessionStorage[this.name])[this.name]:"local"==this.type?JSON.parse(localStorage[this.name])[this.name]:this.cache[this.name]}close(t){return this.child=t,this.recache(),this.init(!0)}recache(){this.cache[this.name]=this.child}create(){this.cache[this.name]=this.child}array(){this.create()}object(t){this.create()}session(t){t||this.recache();try{sessionStorage[this.name]||t?t&&sessionStorage.setItem(this.name,JSON.stringify(this.cache)):sessionStorage.setItem(this.name,JSON.stringify(this.cache))}catch(i){this.recache()}}local(t){t||this.recache();try{localStorage[this.name]||t?t&&localStorage.setItem(this.name,JSON.stringify(this.cache)):localStorage.setItem(this.name,JSON.stringify(this.cache))}catch(i){this.recache()}}constructor(e,i,r){this.type=e,this.name=`${n.instanceID()}-${i}`,this.child=r,this.cache={},"string"==t(this.child)&&(this.child="array"==r?[]:"object"==r&&{})}}(this.storageType,this.name,this.child),this.storage.init()}}}})),i.register("1WNVd",(function(t,e){var n={};const i={"typeof":function(t){switch(!0){case"string"==typeof t:return"string";case"number"==typeof t:return"number";case t instanceof Array:return"array";case t instanceof Function:return"function";case t instanceof HTMLCollection:return"htmlcollection";case t instanceof NodeList:return"htmlnodelist";case t instanceof Element:return"domlement";case t instanceof Object:return"object"}},isArray:function(t){return"array"==this["typeof"](t)},isObject:function(t){return"object"==this["typeof"](t)},isNumber:function(t){return"number"==this["typeof"](t)},isString:function(t){return"string"==this["typeof"](t)},isHTMLCollection:function(t){return"htmlcollection"==this["typeof"](t)},isNodeList:function(t){return"htmlnodelist"==this["typeof"](t)},isElement:function(t){return"domlement"==this["typeof"](t)},isFunction:function(t){return"function"==this["typeof"](t)}},r={_each:function(t,e,n){if("object"==n){var i=0;for(var r in t)t.hasOwnProperty(r)&&(e({key:r,value:t[r]},i),i+=1)}else for(var s=0;s<t.length;s++)e(t[s],s)},each:function(t,e){var n=i.isArray(t)||t.length?"array":"object";this._each(t,(function(t,n){e(t,n)}),n)},map:function(t,e){var n=i.isArray(t)||t.length?"array":"object",r=t.length&&"array"==n?[]:{};return this._each(t,(function(t,i){var s=e(t,i);"object"==n?r[s.key]=s.value:r.push(s)}),n),r},reduce:function(t,e,n){var r=i["typeof"](t);return this._each(t,(function(t,i){e=n(t,e,i)}),r),e},filter:function(t,e){var n=i.isArray(t)||t.length?"array":"object",r=t.length&&"array"==n?[]:{};return this._each(t,(function(t,i){e(t,i)&&("object"==n?r[t.key]=t.value:r.push(t.value))}),n),r}},s=function(t,e){e&&(e=e.split("."));for(let n=0;n<e.length;n++){let i=e[n];if(!t[i]){t=null;break}t=t[i]}return t},o={removeWhiteSpace:t=>String(t).split(" ").join("")},a={perf:function(t){console.time("test"),t(),console.timeEnd("test")},logTest:function(t,e,n){try{t=JSON.parse(t)}catch(i){}try{n=JSON.parse(n)}catch(r){}switch(e){case"==":return t==n;case"!=":return t!=n;case"<":return t<n;case">":return t>n;case">=":return t>=n;case"<=":return t<=n}},toUrlSearchParams:function(t,e=!0){let n="";for(let i in t)if(t.hasOwnProperty(i)){let e=t[i];e.toString().includes("Object")&&(e=JSON.stringify(e)),n+=`${encodeURI(i)}=${encodeURI(e)}&`}return n.slice(0,n.length-1)},sanitize:function(t,e=[]){return"string"!=typeof t?t:decodeURIComponent(t.replace(/<.*>/,""))},toFormData:function(t,e={}){const n=[],i=t.querySelectorAll("TEXTAREA"),s=t.querySelectorAll("INPUT"),o=t.querySelectorAll("SELECT");function a(t,e,n){let i=[];for(let o=0;o<t.length;o++){let n=!0;try{n=t[o].closest(".cake-template")}catch(r){}try{n||(n=t[o].classList.includes("cake-template"))}catch(s){}n||("file"==t[o].getAttribute("type")?i.push(t[o]):e.push(t[o]))}i.length&&(i.forEach((t=>{e.push(t)})),i=[])}a(i,n),a(o,n),a(s,n);let l={};for(let r=0;r<n.length;r++){let i=n[r],s=i.name||i.id;if(s&&["{{","((","[[","<<","%%","&&"].includes(s));else{let n=t[s];if(n){if(n.nodeType);else if(n.length)for(let e=0;e<n.length;e++){let t=n[e];if(1==t.nodeType){if(!t.closest(".cake-template")){n=t;break}}}const t=n.tagName;"SELECT"==t?value=n.value:"INPUT"==t&&"checkbox"==n.getAttribute("type")?value=n.checked:"INPUT"==t&&"file"==n.getAttribute("type")?value=n.files:0==e.sanitize?value=n.value:value=this.sanitize(n.value,e.skipsanitize),e.json&&e.trim?""!=value&&(l[s]=value):l[s]=value}}}if(e.json)return l;{let t=new FormData;for(let e in l)if(l.hasOwnProperty(e)){let n=l[e];"FileList"==n.constructor.name?r.each(n,(function(n,i){t.append(e,n,n.name)})):t.append(e,n)}return t}},splitBySpace:function(t,e){if(t&&(t=t.split(" "),i.isArray(t)))for(let n=0;n<t.length;n++)e(t[n])},toArray(t){let e=[];if(!t.length)return e;for(let n=0;n<t.length;n++)e.push(t[n]);return e},timeOut(t,e=1){setTimeout((()=>{t()}),e)},instanceID:()=>location.origin,recurse:(t,e)=>new Promise(((n,i)=>{try{let i=t.length,r=0;const s=()=>{i>r?(e(t[r]),r+=1,s()):n()};s()}catch(r){i(r.message)}})),browser(){if(window._browser)return window._browser;var t=!!window.opr&&!!opr.addons||!!window.opera||navigator.userAgent.indexOf(" OPR/")>=0,e="undefined"!=typeof InstallTrigger,n=/constructor/i.test(window.HTMLElement)||"[object SafariRemoteNotification]"===(!window.safari||safari.pushNotification).toString(),i=!!document.documentMode,r=!i&&!!window.StyleMedia,s=!!window.chrome&&!!window.chrome.webstore||!!window.cordova,o=(s||t)&&!!window.CSS;return window._browser=t?"Opera":e?"Firefox":n?"Safari":s?"Chrome":i?"IE":r?"Edge":o?"Blink":"Don't know"},isOpera(){return"Opera"==this.browser},isFirefox(){return"Firefox"==this.browser()},isSafari(){return"Safari"==this.browser},isChrome(){return"Chrome"==this.browser},isIE(){return"IE"==this.browser},isEdge(){return"Edge"==this.browser},isBlink(){return"Blink"==this.browser},device:()=>navigator.userAgent.includes("Android")?"android":/iPhone|iPad|iPod/i.test(navigator.userAgent)?"IOS":"desktop",isAndroid(){return"android"==this.device()},isIOS(){return"ios"==this.device()},isDesktop(){return"desktop"==this.device()},escapeRegExp:t=>t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")},l={unique:function(t,e){if(Set&&i.isArray(t))return[...new Set(t)];{let n={};return Loop.each(t,(function(t,r){if(e&&i.isObject(t)){let i=s(t,e);i&&(n[i]=!0)}else n[t]=!0})),Object.keys(n)}}};try{n.UTILS={...r,...i,...a,...o,...l}}catch(h){n.UTILS={};var c=r.each;c(r,(function(t,e){n.UTILS[t]=e})),c(i,(function(t,e){n.UTILS[t]=e})),c(a,(function(t,e){n.UTILS[t]=e})),c(o,(function(t,e){n.UTILS[t]=e}))}t.exports=n.UTILS})),function(t){t.env={destructure:!0};t.env;Promise.prototype.ObjectType="Promise"}(window),window,HTMLCollection.prototype.toArray=function(){let t=[];for(let e=0;e<this.length;e++)t[e]=this[e];return t},NodeList.prototype.toArray=function(){let t=[],e=-1,n=this.length;for(;++e<n;)t[e]=this[e];return t},Object.cache=Object.create(null),Object.caching=t=>{const e=Object.cache;return e[t]||(e[t]={}),{set:(n,i)=>(e[t][n]=i,!0),get:n=>e[t][n]}},String.prototype.toHyphen=function(){let t=Object.cache,e=null,n=this;if(t.toHyphen||(t.toHyphen={}),t[n]&&(e=t[n]),e!=undefined)return e;let i=n.split(""),r="",s=-1;for(;++s<i.length;){let t=i[s];0===s||t.charCodeAt()<91&&(r+="-"),r+=t.toLowerCase()}return t[n]=r,e=r,e},String.prototype.toProper=function(){let t=this,e=Object.caching("toProper").get(t);if(e)return e;{let e=t.substring(0,1),n=t.slice(1),i=`${e.toUpperCase()}${n}`;return Object.caching("toProper").set(t,i),i}},String.prototype.removeSpace=function(){return this.split(" ").join("")},String.prototype.toCamelCase=function(){let t=this.toLowerCase(),e=Object.cache;if(e.toCamel||(e.toCamel={}),e=e.toCamel,e[t])return e[t];{let n=t.split("-");if(1==n.length)return t;let i="",r=-1,s=n.length;for(;++r<s;){let t=n[r];i+=0===r?t:t.substring(0,1).toUpperCase()+t.substring(1)}return e[t]=i,i}},HTMLElement.prototype.querySelectorIncluded=function(t,e,n){let i=this.querySelector(t);return i||(()=>{switch(!0){case!e&&!n:{let e=this.closest(t);e==this&&(i=e)}break;case!!e&&!!n:i=this.getAttribute(e)==n?this:null;break;case!!e&&!n:i=this.getAttribute(e)?this:null}return i})()},HTMLElement.prototype.querySelectorAllIncluded=function(t,e,n){let i;try{i=this.querySelectorAll(t),i&&(i=i.toArray())}catch(r){i=[]}if(t?i=this.querySelectorAll(t).toArray():e&&n?(i=this.querySelectorAll(`[${e}=${n}]`).toArray(),this.dataset[e]==n&&i.push(this)):e&&!n&&(i=this.querySelectorAll(`[${e}]`).toArray(),this.dataset[e]&&i.push(this)),1==(!e&&!n)){let e=this.closest(t);e==this&&i.push(e)}return i},HTMLDocument.prototype.querySelectorIncluded=function(t){return this.querySelector(t)},HTMLDocument.prototype.querySelectorAllIncluded=function(t){return this.querySelectorAll(t)},Array.prototype.toggler=function(t,e){for(let n=0;n<this.length;n++){let i=this[n];(i.dataset.name==t||i.classList.contains(e))&&i.classList.toggle(e)}},HTMLElement.prototype.Ref=function(){let t="_cakes_storage";!this[t]&&(this._cakes_storage={});let e=this[t];return{set(t,n){e[t]=n},get:t=>e[t],getAll:t=>e,remove(t){delete e[t]}}},HTMLElement.prototype.replaceDataSrc=function(){let t=this.querySelectorAllIncluded(null,"data-src",null);for(let e=0;e<t.length;e++){let n=t[e];n.setAttribute("src",n.dataset.src),n.removeAttribute("data-src")}},HTMLElement.prototype.unRequired=function(){let t=this.querySelectorAll(".cake-template [required]");for(let e=0;e<t.length;e++){let n=t[e];n&&n.removeAttribute("required")}},Object.keep=function(t,e){let n=t.split("."),i=n.slice(1),r="Array"==e.constructor.name,s=r?[]:{};const o=function(t,e,n){return t[e]||(t[e]=n==undefined?{}:n),t[e]};n[0]&&o(Object.cache,n[0],i.length?{}:e);let a=Object.cache[n[0]];for(let l=0;l<i.length;l++){let t=i[l];i.length-1==l?(a=o(a,t,s),a=r?a.concat(e):Object.assign(a,e)):a=o(a,t,{})}return Object.cache[n[0]]};var r=i("1WNVd");const s=window||{};i("1WNVd"),customElements.define("sub-template",class extends HTMLElement{connectedCallback(){this.replace(this)}replace(t){let e=t.dataset.template,n=document.getElementsByName(e);if(n.length>1)console.error(`template with name ${e} has more than one reference.`);else{if(!n)throw t.remove(),new Error(`${e} is not found!`);if(n[0]){let i=n[0];if("HTMLTemplateElement"!=i.constructor.name)throw new Error(`${e} is not referred to a Template Element!`);{if(i=i.content.cloneNode(!0).firstElementChild,!i)return;let e=t.attributes;for(let t=0;t<e.length;t++){let n=e[t];"data-template"!=n.name&&i.setAttribute(n.name,n.value)}t.replaceWith(i)}}}}constructor(){super()}}),HTMLTemplateElement.prototype.replaceSubTemplate=function(t){let e=t.getElementsByTagName("sub-template");if(e){e=e.toArray();for(let t=0;t<e.length;t++){let n=e[t];customElements.get("sub-template").prototype.replace(n)}}},HTMLTemplateElement.prototype.collectContent=function(){let t=null,e=this.cloneNode(!0),n=document.createDocumentFragment(),i=e.content.querySelector("style");i&&n.appendChild(i);let r=[];for(let s=0;s<e.content.children.length;s++){let t=e.content.children[0];this.replaceSubTemplate(t),r.push(t)}return t={style:n.children[0],others:r},t},HTMLTemplateElement.prototype.parseStyle=function(t){if(!t)return!1;var e=t.textContent.trim();if(!e.length)return;let n={},i=e.split("}");for(let r=0;r<i.length;r++){let t=i[r].split("{"),e=t[0],s=t[1];e&&(n[e.trim()]=(()=>{let t=!1,e="",n=s.split("");for(let i=0;i<n.length;i++){let r=n[i];"\n"==r?t=!0:" "==r?t||(e+=r):(t=!1,e+=r)}return e})())}return n},HTMLTemplateElement.prototype.parseHTML=function(t){if(t){var e=document.createElement("HTML");for(let n=0;n<t.length;n++){let i=t[n];e.append(i)}}return e||!1},HTMLTemplateElement.prototype.getContent=function(t){let e=this.collectContent(),n=e.style,i=e.others,r=this.parseStyle(n),s=this.parseHTML(i);for(let o in r)if(r.hasOwnProperty(o)){let t=s.querySelectorAll(o),e=r[o];for(let n=0;n<t.length;n++)t[n].setAttribute("style",e)}return s=t?s.children.toArray():s.innerHTML,1==s.length?s[0]:s};var a={};r=i("1WNVd");Object.caching("plugins").set("plugin",{}),a=function(t,e){if(r.isObject(t)&&!e){const e=Object.caching("plugins").get("plugin");Object.caching("plugins").set("plugin",Object.assign(e,t))}else if(r.isString(t)&&e!=undefined){const n=Object.caching("plugins").get("plugin");n[t]=e,Object.caching("plugins").set("plugin",n)}else if(r.isString(t)&&e==undefined)return Object.caching("plugins").get("plugin")[t]||{}};var c,h={},u={};r=i("1WNVd");function f(t){this.options=t,this.tag=(this.options&&this.options.tag||"{{ }}").split(" "),this.lefttag=r.escapeRegExp(this.tag[0]),this.righttag=r.escapeRegExp(this.tag[1])}f.prototype._getTag=function(t){try{return t.match(new RegExp("(?<=<)|([^/s]+)(?=>)","g"))[2]}catch(e){throw new Error(`template of ${t} is empty.`)}},f.prototype._bindReplace=function(t,e){for(let n in t)if(t.hasOwnProperty(n)){let i=new RegExp(`${this.lefttag}${n}${this.righttag}`,"g");i&&(e=e.replace(i,`${t[n]}`))}return e},f.prototype.replaceString=function(t,e){return this._bindReplace(t,e)},f.prototype._toElement=function(t,e){let n=document.createElement("template");return n.innerHTML=t,n.content.children[0]},f.prototype.createElement=function(t,e,n){if(!t){let t="string"==typeof e?this._getTag(e):e.tagName;return this._toElement(e,t)}if(t instanceof Array){let i="string"==typeof e,r=i?this._getTag(e):e.tagName;e=i?e:e.outerHTML;let s=[];for(let o=0;o<t.length;o++){let i=t[o],a=this._bindReplace(i,e),l=this._toElement(a,r);n&&(l=l.outerHTML),s.push(l)}return s}if(t instanceof Object){let i="string"==typeof e,r=i?this._getTag(e):e.tagName;e=i?e:e.outerHTML;let s=this._bindReplace(t,e),o=this._toElement(s,r);return n&&(o=o.outerHTML),o}},u=f;var p,d,m,g;r=i("1WNVd");const y=d=function(t,e,n,i,r){return null==n||n==i&&"bind"!=type?[]:(()=>{let n=[],i=t;if(i&&i.length)for(let t=0;t<i.length;t++){let s=i[t];s.bind==e&&n.push({...s,component:r})}return n})()},b=(m=function(t,e,n,i,r,s,o,a){if(null!=i&&(i!=r||"bind"==e))return t=(()=>{let i=t[s]&&t[s][e];if(i&&i.length){let t=[];for(let e=0;e<i.length;e++){let t=i[e];t.bind==n&&(!a||t.sel==a)&&Object.assign(t,o)}return t}return[]})()},g=function(t){const e=[];for(let n=0;n<t.length;n++){const i={},r=t[n];for(let t in r)i[t]=r[t];e.push(i)}return e.reduce(((t,e)=>{let n=e.incrementedSels;return n&&n.length?n.forEach((n=>{let i={...e};i.incrementedSel=n,t.push(i)})):t.push(e),t}),[])});p=async function(t,e,n,i,s){s=s||document;let o=this.storage.get(i,"attr"),a=y(o,t,e,n,i);if(a.length)return a=b(a),Promise.all(a.map((n=>{let i,o=n.hasNegate,a=n.bind,l=n.testVal,c=n.attr,h=n.ops,u=n.sel,f=n.attrkey,p=n.attrvalue,d=n.incrementedSel;n.incrementId;if(a=r.removeWhiteSpace(a),c=r.removeWhiteSpace(c),d=e.incrementedSel||d,i=e.incrementedSel?e[a]:e,t==a){let t=s.querySelectorAll(`[data-attr=${d||u}]:not(.cake-template)`);return Promise.all([...t].map((t=>{let e=!1;h?(e=r.logTest(i,h,l),o&&(e=!e)):e=o?!i:!!i,e?p?t.setAttribute(f,p):t.setAttribute(f):t.removeAttribute(f)})))}e=null})))};var v;r=i("1WNVd");const w=d,S=g;v=async function(t,e,n,i,s){s=s||document;let o=this.storage.get(i,"bind"),a=w(o,t,e,n,i);if(a.length){a=S(a);for(let i=0;i<a.length;i++){let o,l=a[i],c=l.attr,h=l.bind,u=l.sel,f=l.incrementedSel;l.incrementId,l.incrementedSels;f=e.incrementedSel||f,o=e.incrementedSel?e[h]:e;let p=c.toHyphen();if(t==h){let t=s.querySelectorAll(`[data-bind=${f||u}]`);for(let e=0;e<t.length;e++){let i=t[e];"class"==c||"className"==c?i.classList.length?(r.splitBySpace(n,(function(t){i.classList.remove(t)})),r.splitBySpace(o,(function(t){i.classList.add(t)}))):r.splitBySpace(o,(function(t){i.classList.add(t)})):o==undefined&&null==o||(i.setAttribute(p,o),i[c]=o)}}}e=null}};var E;r=i("1WNVd");const O=d,_=g;E=async function(t,e,n,i,s){let o=this.storage.get(i,"class");s=s||document;let a=O(o,t,e,n,i);if(!a.length)return;let l={};a=_(a);for(let c=0;c<a.length;c++){let n,i=a[c],o=i.hasNegate,h=i.bind,u=i.testVal,f=i.className,p=i.ops,d=i.sel,m=i.incrementedSel;i.incrementId;if(h=r.removeWhiteSpace(h),m=e.incrementedSel||m,n=e.incrementedSel?e[h]:e,t==h){l[m||d]||(l[m||d]=s.querySelectorAll(`[data-class=${m||d}]:not(.cake-template)`));let t=l[m||d];for(let e=0;e<t.length;e++){let i=t[e],s=!1;p?(s=r.logTest(n,p,u),o&&(s=!s)):s=o?n==u:!!n,s?r.splitBySpace(f,(function(t){r.toArray(i.classList).includes(t)||setTimeout((()=>{i.classList.add(t)}))})):r.splitBySpace(f,(function(t){r.toArray(i.classList).includes(t)&&setTimeout((()=>{i.classList.remove(t)}))}))}}}e=null};var $;i("1WNVd");var T={};function P(t){this.el=P.toArray(t)}P.toArray=function(t){let e=[];switch(!0){case t instanceof Array:e=t;break;case t.length&&t.tagName&&"FORM"!=t.tagName&&!(t instanceof Array):for(let n=0;n<t.length;n++)e.push(t[n]);break;case!(t instanceof Array):e=[t]}return e},P.prototype.loop=function(t){try{let e=-1,n=this.el.length;for(;++e<n;){t(e,this.el[e])}return!0}catch(e){return console.error(e),!1}},P.prototype.getElements=function(){return this.el},P.prototype.getElement=function(t=0){return this.el[t]},P.prototype.remove=function(){let t=-1,e=this.el.length,n=document.createDocumentFragment();for(;++t<e;){let e=this.el[t];e&&n.appendChild(e)}return n=null,!0},P.prototype.unRequired=function(){return this.loop((function(t,e){e.unRequired()}))},P.prototype.replaceDataSrc=function(){return this.loop((function(t,e){e.replaceDataSrc()}))},P.cloneNode=function(t){t=t instanceof Array?t:this.toArray(t);let e=[];for(let n=0;n<t.length;n++)e.push(t[n].cloneNode(!0));return new P(e)},P.prototype.dataset=function(t,e){let n=this.el.length,i=-1;for(;++i<n;)if(this.el[i].dataset[t]){if("break"==e(this.el[i]))break}return!0},P.prototype.getContainers=function(){return this.getElementsByDataset("container").container},P.prototype.cloneNode=function(t){return t=this.el,P.cloneNode(t)},P.prototype.getAllElements=function(){let t=this.el.length,e=[];switch(!0){case 1==t:e=this.el[0].getElementsByTagName("*").toArray();break;case t>1:{let n=-1;for(;++n<t;){let t=this.el[n].getElementsByTagName("*");if(t)for(let n=0;n<t.length;n++)e.push(t[n])}}}return e},P.prototype.appendTo=function(t,e){1==t.nodeType&&(t=[t]);for(let n=0;n<t.length;n++){let i=t[n];if(!i&&!i.attributes)throw new TypeError(`the ${i} is not an instance of Element`);e&&(i.innerHTML="");for(let t=0;t<this.el.length;t++){let e=this.el[t];i.appendChild(e)}}},P.prototype.getElementsByTagName=function(t){let e=this.el.length,n=[];switch(!0){case 1==e:n=this.el[0].getElementsByTagName(id).toArray();break;case e>1:{let t=-1;for(;++t<e;){let e=this.el[t].getElementsByTagName(selector);if(e)for(let t=0;t<e.length;t++)n.push(e[t])}}}return n},P.prototype.getElementById=function(t){let e=this.el.length,n=[];switch(!0){case 1==e:n=this.el[0].getElementById(id);break;case e>1:{let t=-1;for(;++t<e;){let e=this.el[t].querySelector(selector);e&&n.push(e)}}}return n},P.prototype.querySelectorAll=function(t){let e=this.el.length,n=[];switch(!0){case 1==e:n=this.el[0].querySelectorAll(t);break;case e>1:{let i=-1;for(;++i<e;){let e=this.el[i].querySelectorAll(t);e&&(n=n.concat(e.toArra()))}}break;default:n=[]}return n},P.prototype.querySelector=function(t){let e=this.el.length,n=[];switch(!0){case 1==e:n=this.el[0].querySelector(t);break;case e>1:{let i=-1;for(;++i<e;){let e=this.el[i].querySelector(t);e&&n.push(e)}}}return n},P.prototype.querySelectorIncluded=function(t,e,n){let i=this.el.length,r=[];switch(!0){case 1==i:r=this.el[0].querySelectorIncluded(t,e,n);break;case i>1:{let s=-1;for(;++s<i;){let i=this.el[s].querySelectorIncluded(t,e,n);i&&r.push(i)}}}return r},P.prototype.querySelectorAllIncluded=function(t,e,n){let i=this.el.length,r=[];switch(!0){case 1==i:r=this.el[0].querySelectorAllIncluded(t,e,n);break;case i>1:{let s=-1;for(;++s<i;){let i=this.el[s].querySelectorAllIncluded(t,e,n);i&&(r=r.concat(i.toArra()))}}}return r},P.prototype.contains=function(t){let e=this.el.length,n=!1;switch(1==e){case!0:n=this.el[0].contains(t);break;case!1:{let i=-1;for(;++i<e;){if(this.el[i].contains(t)){n=!0;break}}}}return n},P.prototype.getElementsByDataset=function(){let t,e,n,i,r;for(t=arguments,o={},length=t.length,n=-1,i=-1;++n<this.el.length;)for(r=this.el[n];++i<length;){e=t[i],r.getAttribute(`data-${e}`)?o[e]=[r]:o[e]=[];let n=r.querySelectorAll(`[data-${e}]`);if(n.length)for(let t=0;t<n.length;t++){let i=n[t];i.closest(".cake-template")||o[e].push(i)}}return o},T=P;const A=d,k=m;$=async function(t,e,n,i,r){r=r||document;let s=this.storage.get(i,"forUpdate"),o=A(s,t,e,n,i);if(!o.length)return;let c=new u(a("templating"));const h=[];for(let a=0;a<o.length;a++){o[a].bind,o[a].sel,o[a].iter,o[a].ins,o[a].targets;for(let t in e)if(e.hasOwnProperty(t)){let n=document.querySelectorAll(`[data-for-update-bind=${t}]`);for(let r=0;r<n.length;r++){let s=n[r],o=s.dataset.forUpdateBind;if(s.dataset.forTemplate){let n=s.cloneNode(!0);n.style.removeProperty("display"),n.classList.remove("cake-template");let r=e[o],a=-1;for(l=r.length;++a<l;){let e=r[a],l=a;for(let r=0;r<this.logicalType.length;r++){let a=this.logicalType[r];const c=new T(s).querySelectorAllIncluded(`[data-${a}]`);for(let r=0;r<c.length;r++){const s=c[r];if(s.dataset[a]){let r=s.dataset[a],c=`${r}-${t}-${l}`;n.dataset[a]=c;let u=this.getWatchItemsBySel(i,a,r).bind;if(u.includes(".")){o=u.split(".")[0];for(let t in e){let n=e[t];e[`${o}.${t}`]=n}}r&&h.push({_type:a,...e,incrementedSel:c,sel:r,bind:u,incrementId:l,component:i})}}}let u=c.createElement(e,n,!1);u.classList.remove("cake-template"),u.removeAttribute("data-for-template"),s.insertAdjacentElement("beforebegin",u),"SELECT"==s.parentElement.tagName&&(s.parentElement.selectedIndex=0)}}else s.remove()}}}return e=null,Promise.all(h.map((t=>{const e=t.bind,n=t._type,i=t.component,r=t.incrementedSel,s=t.sel,o=`notify${n.toProper()}`;return k(n,e,t,null,i,{incrementedSel:r},s),this[o](e,t,null,i)}))).then((()=>{}))};var j;i("1WNVd");var L={};const N={};function C(){let t=N[name];if(t&&cb instanceof Function){let e=cb.name;ctx&&(cb=cb.bind(ctx)),cb.binded="external",cb.original=e,cb.listenTo=t.name,t.Subscribe(cb)}}window.ComponentStorage=N,L={subscribe:(t,e)=>new Promise(((t,e)=>{let n=setInterval((()=>{N[name]&&(C(),clearInterval(n),t())}))})),set:(t,e)=>(N[t]=e,!0),get:t=>N[t]};const R=d;j=async function(t,e,n,i,r){let s=this.storage.get(i),o=new u(a("templating"));return new Promise(((a,c)=>{try{let c=R(this.storage.get(i,"for"),t,e,n,i),h=R(this.storage.get(i,"switch"),t,e,n,i);if(!c.length)return;let u=e.reduce(((t,e)=>(t.push(e),t)),[]);e=null;for(let t=0;t<c.length;t++){c[t].bind;let e=c[t].sel,n=c[t].iter,i=(c[t].ins,c[t].component),f=c[t].cleaned,p=(r=L.get(i).html).querySelectorIncluded(`[data-for-template=${e}]`),d=p.cloneNode(!0);u=u.map((t=>{for(let e in t)t.hasOwnProperty(e)&&(t[`${n}.${e}`]=t[e]);return t}));let m=[];(()=>{let t=0;Object.keys(s).forEach((e=>{if(!["for","evt","animate","switch"].includes(e)){let n=s[e],i=n[0],r=i&&i.bind||undefined;r&&r.match(new RegExp(o.lefttag),"g")&&(u.forEach(((e,s)=>{let a={};a.bind=o.replaceString(e,r),a.sel=`${i.sel}-${t}`,a.rawsel=i.sel,t+=1,u[s].__sel=a.sel;for(let t in i)i.hasOwnProperty(t)&&(a[t]||(a[t]=i[t]));n.push(a)})),m.push(e))}}))})(),(()=>{if(f){p.parentElement.children.toArray().forEach((t=>{t.dataset["for"]&&!t.classList.contains("cake-template")&&t.remove()}))}l=u.length,u.forEach(((t,e)=>{let n=p.cloneNode(!0);(()=>{if(h&&!h.length)return;h[0].bind;let e=h[0].map,i=h[0].sel,r=h[0].cases;const s=t[e],o=n.querySelector(`[data-switch=${i}]`);let a=r.find((t=>{t._id;let e=t.bind;return e.includes("|")?e.split("|").map((t=>t.trim())).some((t=>t==s)):e==s}));const l=d.querySelector(`[data-case=${i}-${a._id}]`);l.classList.remove("cake-template"),o.innerHTML=l.outerHTML})();let i=o.createElement(t,n,!1);Object.keys(s).forEach((e=>{if(m.includes(e)){let n=s[e].find((e=>e.sel==t.__sel));if(n){let t=n.rawsel;t&&(i.querySelector(`[data-${e}=${t}]`).dataset[e]=n.sel)}}})),i.style.removeProperty("display"),i.classList.remove("cake-template"),i.removeAttribute("data-for-template"),p.insertAdjacentElement("beforebegin",i),(()=>{const e=c[0]&&c[0].children;e&&e.forEach((e=>{const n=i.querySelector(`[data-for=${e}]`);if(n){n.dataset.forAutoBindKey,n.dataset.forAutoBindValue;const e=n.dataset.forIter,i=t[e];if(i)for(let t=0;t<i.length;t++){let e=i[t],r=n.cloneNode(!0),s=o.createElement(e,r,!1);s.style.removeProperty("display"),s.classList.remove("cake-template"),s.removeAttribute("data-for-template"),n.insertAdjacentElement("beforebegin",s)}const r=n.closest("SELECT");r&&(r.selectedIndex=0)}}))})(),i.replaceDataSrc()})),a()})()}r.unRequired(),u=null}catch(h){c(h)}}))};var I;r=i("1WNVd");const q=d,M=g;I=async function(t,e,n,i,s){s=s||document;let o=this.storage.get(i,"if"),a=q(o,t,e,n,i);if(!a.length)return;a=M(a);let l={};for(let c=0;c<a.length;c++){let n=a[c],i=n.attr,o=n.bind,h=n.sel,u=n.testval,f=n._true,p=n._false,d=n.ops,m=n.hasNegate,g=n.incrementedSel,y=(n.incrementId,i.toHyphen(),"null"!=f),b="null"!=p;if(t==o){l[h]||(l[h]=s.querySelectorAll(`[data-if=${g||h}]:not(.cake-template)`));let t=l[h];for(let n=0;n<t.length;n++){let s,o=t[n],a=e;if(s=u?r.logTest(u,d,a):m?!a:!!a,s){if(y)if("class"==i){let t=f.split(" ");if(b){p.split(" ").forEach((t=>{o.classList.remove(t)})),t.forEach((t=>{o.classList.add(t)}))}else t.forEach((t=>{o.classList.contains(t)||o.classList.add(t)}))}else a[f]&&o.setAttribute(i,a[f])}else if(b)if("class"==i){let t=p.split(" ");if(y){f.split(" ").forEach((t=>{o.classList.remove(t)})),t.forEach((t=>{o.classList.add(t)}))}else trueClasses.forEach((t=>{o.classList.contains(t)||o.classList.add(t)}))}else o.setAttribute(i,p)}}}e=null};var x;i("1WNVd");const H=d;x=async function(t,e,n,i,r){r=r||document;let s=this.storage.get(i,"model"),o=H(s,t,e,n,i);if(o.length){for(let i=0;i<o.length;i++){let s=o[i],a=s.attr,l=s.bind,c=s.sel,h=a.toHyphen();if(t==l){let t=r.querySelectorAll(`[data-model=${c}]`);for(let i=0;i<t.length;i++){let r=t[i];"className"==a?n?e?r.classList.replace(n,e):r.classList.remove(n):r.classList.add(e):(r.setAttribute(h,e),r[a]=e)}}}e=null}};var U;i("1WNVd");const B=d,D=g;U=async function(t,e,n,i,r){r=r||document;let s=this.storage.get(i,"toggle"),o=B(s,t,e,n);if(o){o=D(o),r=r||document;for(let t=0;t<o.length;t++){let i=o[t];if(!i)continue;let s=i.sel,a=(i.bind,i.value),l=(i.ops,r.querySelector(`[data-toggle=${s}]`));a==n&&l&&l.classList.remove("is-active"),a==e&&l&&(l.classList.contains("is-active")&&l.classList.remove("is-active"),l&&l.classList.add("is-active"))}e=null}};var W={};function V(){this.store={}}V.prototype.set=function(t,e,n){let i=this.store;switch(!0){case!i[t]:i[t]={};case!i[t][e]:i[t][e]=[];default:i[t][e].push(n)}return!0},V.prototype.get=function(t,e){let n=this.store;return t&&e?n[t]&&n[t][e]||[]:t&&!e?n[t]||{}:void 0},W=V;r=i("1WNVd");function F(){this.uiid=0,this.notify={},this.sts={},this.storage=new W,this.logicalType=["if","bind","switch","toggle","class","attr"]}F.prototype.notifyFor=j,F.prototype.notifyForUpdate=$,F.prototype.notifyClass=E,F.prototype.notifyBind=v,F.prototype.notifyAttr=p,F.prototype.notifyIf=I,F.prototype.notifyModel=x,F.prototype.notifyToggle=U,F.prototype.notifier=function(t,e,n,i){if(e==undefined)return Promise.resolve();let r=JSON.parse(JSON.stringify(e));const s={"for":"For",forUpdate:"ForUpdate",bind:"Bind","if":"If","class":"Class",attr:"Attr"};let o=Object.caching("AttribProp").get(t)||(()=>{let e={};const n=Object.keys(s),r=this.storage.get(i);if(!r)return[];for(let i=0;i<n.length;i++){const s=n[i],o=r[s];if(o)for(let n=0;n<o.length;n++){o[n].bind==t&&(e[s]=!0)}}return e=Object.keys(e),Object.caching("AttribProp").set(t,e),e})();return new Promise(((e,a)=>{try{let a=o.length,l=0;const c=()=>{if(a>l){let e=o[l];l+=1,this[`notify${s[e]}`](t,r,n,i).then((()=>{c()}))}else e()};c()}catch(l){a(l.message)}}))},F.prototype.registerNotifier=function(t,e){this.notify[t]||(this.notify[t]=[]),this.notify[t].push(e)},F.prototype.getEventTarget=function(t){let e=`${t}`,n=Object.caching("getEventTarget").get(e);if(!n){let i=this.storage.get(t);n=i&&i.evt?i.evt:[],Object.caching("getEventTarget").set(e,n)}return n},F.prototype.getRouterTarget=function(t){let e=`${t}`,n=Object.caching("getRouterTarget").get(e);if(!n){let i=this.storage.get(t);n=i&&i.router?i.router:[],Object.caching("getRouterTarget").set(e,n)}return n},F.prototype.getWatchItems=function(t){let e=`${t}`,n=Object.caching("getWatchItems").get(e);if(!n){let i=this.storage.get(t),s=r.reduce(i,{wt:[],forWt:[]},(function(t,e,n){let i=t.key,s=t.value;return r.each(s,(function(t,n){let r=t.bind;r&&("for"==i?e.forWt.push(r):e.wt.push(r))})),e})),o=r.unique(s.wt);n=r.unique(s.forWt).concat(o),Object.caching("getWatchItems").set(e,n)}return n},F.prototype.getWatchItemsByType=function(t,e){let n=`${t}-${e}`,i=Object.caching("getWatchItemsByType").get(n);if(!i){let r=this.storage.get(t)[e]||[],s=new Set;"animate"!=e&&"toggle"!=e||(s=[]);for(let t=0;t<r.length;t++){let n=r[t],i=n.bind;"animate"==e||"toggle"==e?s.push(n):i&&s.add(i)}i=[...s],Object.caching("getWatchItemsByType").set(n,i)}return i},F.prototype.getWatchItemsBySel=function(t,e,n){let i=`${t}-${e}-${n}`,r=Object.caching("watchItemsBySel").get(i);if(!r){let s=this.storage.get(t,e).find((t=>t.sel==n));r=s||!1,Object.caching("watchItemsBySel").set(i,r)}return r},F.prototype.getConfig=function(t){return this.storage.get(t)},F.prototype._activateReactive=t=>{},F.prototype._register=function(t,e,n){return this.storage.set(t,e,n)},F.prototype._static=function(t){return function(e,n){let i=[];for(let r=0;r<e.length;r++){let s=e[r];switch(n){case!1:i.push(s);break;case!0:{let e=s.closest("[data-component]");if(e=e&&e.dataset.component,e==t==!0)i.push(s)}break;default:continue}}return i}},F.prototype._loopElements=function(t,e,n,i,r){if(!e.length)return!1;if(!(e=this._static(n)(e,i)).length)return!1;for(let s=0;s<e.length;s++){let n,i,o=e[s],a=`ckm${this.uiid}`;if(t.includes(",")){let e=t.split(",");n={},i={};for(let t=0;t<e.length;t++){let r=e[t];n[r]=o.dataset[r],i[r]=n.split(",")}}else n=o.dataset[t],i=n.split(",");r(o,a,n,i,s)}return!0},F.prototype._compileEvents=function(t,e,n){return new Promise((i=>{this._loopElements("event",t,e,n,function(t,n,i,r,s){let o=r;for(let a=0;a<o.length;a++){let i=o[a].split(":"),r=i[0],s=i[1];r=r.trim(),s=s?s.trim():s,this._register(e,"evt",{event:r,sel:n,cb:s}),t.dataset.event=n,this.uiid++}}.bind(this)),i()}))},F.prototype._compileToggle=function(t,e,n){return new Promise((i=>{let r={};this._loopElements("toggle",t,e,n,function(t,n,i,s,o){let a=i;r[a]&&(n=r[a]),this._register(e,"toggle",{sel:n,name:"ns-"+a}),t.dataset.toggle=n,this.uiid++,r[a]=n}.bind(this)),r={},i()}))},F.prototype._compileFor=function(t,e,n,i){return new Promise((r=>{let s=i;if(!t.length)return void r();let o=this._static(e)(t,n);if(!o.length)return void r();let a={};for(let t=0;t<o.length;t++){let e=`ckf${this.uiid}`;a[e]={};let n=o[t],i=n.dataset["for"],r=n.dataset.forAutoBind,l=n.dataset.forCleaned==undefined||"true"==n.dataset.forCleaned,c=i.split(" "),h=c[0],u=c[1],f=c[2];if(r){let t=n.dataset.forIter,i=r.split(":"),s=i[0]&&i[0].trim(),o=i[1]&&i[1].trim();a[e]={iteration:t},n.dataset.forAutoBindKey=s,n.dataset.forAutoBindValue=o,n.removeAttribute("data-for-auto-bind")}if(n.style.display="none",n.classList.add("cake-template"),n.dataset["for"]=e,n.dataset.forTemplate=e,a[e]=Object.assign(a[e],{bind:f,sel:e,iter:h,ins:u,cleaned:l}),++this.uiid,0!=t){let t=n.parentElement&&n.parentElement.closest("[data-for]");if(!t)continue;let i=!!t.dataset["for"];if(s.contains(t)&&i){let n=a[t.dataset["for"]];n&&!n.children?n.children=[e]:n&&n.children.push(e)}}}for(let t in a)a.hasOwnProperty(t)&&this._register(e,"for",a[t]);r()}))},F.prototype._compileForUpdate=function(t,e,n){return new Promise((i=>{this._loopElements("forUpdate",t,e,n,function(t,n,i,r,s){t.style.display="none",t.classList.add("cake-template"),t.dataset.forUpdate=n,t.dataset["for"]||(t.dataset.forTemplate=n);let o=i.split(" "),a=o[0],l=o[1],c=o[2];this._register(e,"forUpdate",{bind:c,sel:n,iter:a,ins:l}),this.uiid++}.bind(this)),i()}))},F.prototype._compileSwitch=function(t,e,n){return new Promise((i=>{this._loopElements("switch",t,e,n,function(t,n,i,r,s){let o=t.dataset["switch"],a="def";if(o.includes(".")){const e=t.dataset["switch"].split(".");o=e[0],a=e[1]}t.dataset["switch"]=n;let l=t.querySelectorAll("[data-case]"),c=[];for(let e=0;e<l.length;e++){let t=l[e],i=t.closest(`[data-switch=${n}]`);if(t.classList.add("cake-template"),i){let e=t.dataset["case"],i=`cksc${this.uiid}`;t.dataset["case"]=`${n}-${i}`,c.push({_id:i,bind:e}),this.uiid++}}this._register(e,"switch",{bind:o,sel:n,map:a,cases:c}),this.uiid++}.bind(this)),i()}))},F.prototype._compileBind=function(t,e,n){return new Promise((i=>{this._loopElements("bind",t,e,n,function(t,n,i,r,s){for(let l=0;l<r.length;l++){let i=r[l].split(" ").join("");if(i.includes(":")){const t=i.split(":");var o=t[0],a=t[1]}else a=i,o=t.value==undefined?"textContent":"value";this._register(e,"bind",{attr:o,bind:a,sel:n})}this.uiid++,t.dataset.bind=n}.bind(this)),i()}))},F.prototype._compileAnimate=function(t,e,n){return new Promise((i=>{this._loopElements("animate",t,e,n,function(t,n,i,r,s){let o={};for(let e=0;e<r.length;e++){let t=r[e].split(":"),n=t[0],i=t[1];if("ns"==n){o.ns=i;break}o[n]={keyframes:i.split("-")}}o.selector={attr:"data-animate",val:n},this._register(e,"animate",o),this.uiid++,t.dataset.animate=n}.bind(this)),i()}))},F.prototype._compileIf=function(t,e,n){return new Promise((i=>{const r=new RegExp("<|>|===|==|!==|!=");this._loopElements("if,ifBind",t,e,n,function(t,n,i,s,o){i["if"];let a=i.ifBind,l=s["if"];for(let c=0;c<l.length;c++){let t=s[c],i=t.substring(0,t.indexOf("=")),o=t.substring(t.indexOf("=")+1,t.length);o=o.split(new RegExp("[()]")).join("");let l,h,u,f=o.split("?"),p=f[0],d=f[1],m="!"==p[0];if(hasRegularLog=p.match(r),hasRegularLog){let t=p.split(r);l=t[0].trim(),h=t[1].trim(),u=hasRegularLog[0]}else l=p;m&&(l=l.slice(1));let g=d.split(":"),y=g[0],b=g[1];this._register(e,"if",{hasNegate:m,attr:i,ops:u,bind:l,testval:h||null,_true:y,_false:b,sel:n,ifBind:a})}this.uiid++,t.dataset["if"]=n}.bind(this)),i()}))},F.prototype._compileClass=function(t,e,n){return new Promise((i=>{let r=new RegExp("<|>|===|==|!==|!=");this._loopElements("class",t,e,n,function(t,n,i,s,o){let a,l,c,h,u,f,p=s;for(let d=0;d<p.length;d++){let t=p[d].split("&&"),i=t[0],s=t[1];if(i=i.trim(),s=s.trim(),a=i.match(r),i.substring(0,2).includes("!")?(l=!0,f="!!"==i.substring(0,2)?2:"!"==i.substring(0,1)?1:0):(l=!1,f=0),a){let t=i.split(r);c=t[0].trim(),u=t[1].trim(),h=a[0].trim()}else!l&&(c=i),l&&(c=i.substring(f),u=2==f);this._register(e,"class",{hasNegate:l,bind:c,testVal:u,className:s,ops:h,sel:n})}this.uiid++,t.dataset["class"]=n}.bind(this)),i()}))},F.prototype._compileAttr=function(t,e,n){return new Promise((i=>{let r=new RegExp("<|>|===|==|!==|!=");this._loopElements("attr",t,e,n,function(t,n,i,s,o){let a,l,c,h,u=i.split("&&"),f=u[0],p=u[1];p=p.trim();let d=p.split("="),m=d[0],g=d[1];if(f=f.trim(),a=f.match(r),l="!"==f[0],a){let t=f.split(r);bind=t[0],h=t[1],c=a[0]}else bind=f;l&&l&&(bind=bind.slice(1)),this._register(e,"attr",{hasNegate:l,bind,testVal:h,attrkey:m,attrvalue:g,ops:c,sel:n}),this.uiid++,t.dataset.attr=n}.bind(this)),i()}))},F.prototype._compileModel=function(t,e,n){return new Promise((i=>{this._loopElements("model",t,e,n,function(t,n,i,r,s){let o=t.tagName;for(let h=0;h<r.length;h++){let t=r[h].split(" ").join("");if(t.includes(":"))var a=t.split(":"),l=a[0],c=a[1];else c=t,l="value";this._register(e,"model",{attr:l,bind:c,sel:n,nodeType:o})}this.uiid++,t.dataset.model=n}.bind(this)),i()}))},F.prototype.inject=function(t,e,n=!1){return new Promise((e=>{e(t.getElementsByDataset("bind","for","for-update","switch","toggle","event","animate","if","class","attr"))})).then((i=>{let r=[],s={bind:this._compileBind,"switch":this._compileSwitch,toggle:this._compileToggle,"if":this._compileIf,"class":this._compileClass,attr:this._compileAttr,"for":this._compileFor,"for-update":this._compileForUpdate,event:this._compileEvents,animate:this._compileAnimate};for(let o in i)i.hasOwnProperty(o)&&i[o].length&&r.push(s[o].apply(this,[i[o],e,n,t]));return Promise.all(r.length?r:[r])})).then((()=>Promise.resolve()))},h=F;const J=i("iuSND")();var Q,z={};Q=class{animate(t){this.config=this.parse(this.cf);let e=this.config[0].element,n=this.config[0][t];return n?new Promise(((t,i)=>{e.velocity(n.velocity,{complete:function(){t()}})})):Promise.resolve()}parse(t){let e=[],n=t.length,i=-1;for(;++i<n;){let n,r=t[i],s=r.selector;switch(!0){case!(!s.val||!s.attr):n=this.html.querySelectorIncluded(`[${s.attr}=${s.val}]`,s.attr,s.val);break;case!(!s.val||s.attr):{let t=s.val.match(new RegExp("^[.]"))?"class":s.val.match(new RegExp("^[#]"))?"id":null,e=t?s.val.slice(1):null;n=this.html.querySelectorIncluded(s.val,t,e)}}r.element=n,e.push(r)}return e}dic(t){return{slideOutUp:[{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1",easing:"ease-out"},{transform:"translate3d(0,100%,0)",visibility:"hidden",opacity:"0",easing:"ease-out"}],slideOutRight:[{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"},{transform:"translate3d(100%,0,0)",visibility:"hidden",opacity:"0"}],slideOutLeft:[{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"},{transform:"translate3d(-100%,0,0)",visibility:"hidden",opacity:"0"}],slideOutDown:[{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1",easing:"ease-out"},{transform:"translate3d(0,-100%,0)",visibility:"hidden",opacity:"0",easing:"ease-out"}],slideInUp:[{transform:"translate3d(0,100%,0)",visibility:"hidden",opacity:"0",easing:"ease-out"},{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1",easing:"ease"}],slideInRight:[{transform:"translate3d(100%,0,0)",visibility:"hidden",opacity:"0"},{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"}],slideInLeft:[{transform:"translate3d(-100%,0,0)",visibility:"hidden",opacity:"0",easing:"ease-out"},{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1"}],slideInDown:[{transform:"translate3d(0,-100%,0)",visibility:"hidden",opacity:"0",easing:"ease-out"},{transform:"translate3d(0,0,0)",visibility:"visible",opacity:"1",easing:"ease-out"}],disappear:[{opacity:"1"},{opacity:"0"}],appear:[{opacity:"0"},{opacity:"1"}],flipInX:[,{offset:0,backfaceVisibility:"visible"},{transform:"perspective(400px) rotate3d(1,0,0,90deg)",opacity:"0",offset:0},{transform:"perspective(400px) rotate3d(1,0,0,-20deg)",offset:.4,easing:"ease-in"},{offset:.6,opacity:"1",transform:"perspective(400px) rotate3d(1,0,0,10deg)"},{transform:"perspective(400px) rotate3d(1,0,0,-5deg)",offset:.8},{offset:1,backfaceVisibility:"visible",transform:"perspective(400px) rotate3d(1,0,0,0)"}]}[t.trim()]||[]}constructor(t=[],e){this.html=e||document,this.cf=t,this.duration=300}};r=i("1WNVd");function K(t,e,n){this.name=t,this.template=e,this.options=n,this.handlers=n.handlers,this.subscribe=n.subscribe,this.renderqueue=n.renderqueue,this.data={},this.root=n.root?`${n.root}:not(.cake-template)`:n.root,this.items=!1,this.type=n.type||"view",this.toggle=n.toggle,this.targets={},this.animateOptions=n.animate,this.role=n.role,this.isReady=!1,this.scope=n.scope,this.animatecss=this.options.animatecss,this.formSelector=n.form,this.await={},this.state=n.state,this.originalState=[],this.utils=r,this.renderQueing=[],this.handlers||console.error(`${this.name} has no handlers`),this.subscribe||console.error(`${this.name} has no subscribe`),("app"==t||"app"==n.role)&&(()=>{this.staticComponent=n["static"]||[]})(),this.container={},this.compile=new Promise((t=>{this._bindHandlers(),t()})).then((()=>this._bindSubscribe())).then((()=>this.cloneState())).then((()=>{if(!0==("view"==this.type&&!!this.template))return this.createElementAsync();this.isStatic=!1}))}K.prototype.isStatic=!1,K.prototype.hasEvent=!1,K.prototype.isConnected=!1,K.prototype.destroyed=!1,K.prototype.isCreated=!1,K.prototype.cloneState=function(){if(this.state){for(let t in this.state)this.state.hasOwnProperty(t)&&(this.originalState[t]=this.state[t]);this.$state=(()=>this.state)()}},K.prototype.clearState=function(){this.state&&(this.state=JSON.parse(JSON.stringify(this.originalState)),this.$state=(()=>this.state)())},K.prototype.Subscribe=function(t){this.$observer.registerSubscribe({[t.listenTo]:{[t.original]:[t]}})},K.prototype.Node=function(t){return new T(t)},K.prototype._bindHandlers=function(){for(let t in this.handlers)if(this.handlers.hasOwnProperty(t)){let e=this.handlers[t],n=e.name;e=e.bind(this),e.original=n,e.binded=this.name,this.handlers[n]=e,this.initAwaitHandlers(t)}this.await.destroy||(this.await.destroy=Promise.resolve()),this.await.animateRemove||(this.await.animateRemove=Promise.resolve())},K.prototype.initAwaitHandlers=function(t){this.await[t]=Promise.resolve()},K.prototype._bindSubscribe=function(){let t={};for(let n in this.subscribe)if(this.subscribe.hasOwnProperty(n)){if(subscribe=this.subscribe[n],subscribe.components&&!subscribe.handler)throw new Error(`there is no handler in format many of subscribe in event ${n}`);if(!subscribe.components&&subscribe.handler)throw new Error(`there is no components in format many of subscribe in event ${n}`);if(!!subscribe.components&&!!subscribe.handler){let e=n,i=subscribe.components,r=subscribe.handler;r=r.bind(this),r.binded=this.name,r.original=e;for(let n=0;n<i.length;n++){let s=i[n];t[s]||(t[s]={}),t[s][e]||(t[s][e]={}),r.listenTo=s,t[s][e]=r}}else{t[n]||(t[n]={});let i=subscribe;for(let r in i)if(i.hasOwnProperty(r)){let s=i[r],o=s.name;try{s=s.bind(this)}catch(e){}s.original=o,s.binded=this.name,s.listenTo=n,t[n][o]||(t[n][o]={}),t[n][o]=s}}}this.subscribe=t},K.prototype.getHTML=function(){return this.html},K.prototype.doFor=function(t,e){if(null!=e)return this.$attrib.notifyFor(t,e,null,this.name,this.getHTML())},K.prototype.doToggle=function(t,e){this.$attrib.notifyToggle(t,e,null,this.name,this.html)},K.prototype.doSwitch=function(t,e){this.$attrib.notifySwitch(t,e,null,this.name,this.html)},K.prototype.doIf=function(t,e){this.$attrib.notifyIf(t,e,null,this.name,this.html)},K.prototype.$animate=function(t){let e=this.$attrib.getWatchItemsByType(this.name,"animate"),n=this.animateOptions,i=[];return(()=>{if((e.length||e instanceof Array)&&n)for(let t=0;t<e.length;t++){let r=e[t],s=r.ns;r.selector;if(r.ns){if(n[s]){n[s];Object.assign(r,n[s]),delete n[s]}}else i.push(e)}})(),!!e.length&&((()=>{let t={},i={};for(let r in n)n.hasOwnProperty(r)&&(i.val=r,t.selector=i,Object.assign(t,n[r]),e.push(t),t={},i={})})(),new Q(e,this.html).animate(t))},K.prototype.$templating=function(t,e,n){let i=e||this.template;return new u(a("templating")).createElement(t,i,n)},K.prototype.createElement=function(){if(!("#"==this.template.substring(0,1)))return;let t=this.template.substr(1),e=document.getElementById(t),n=this.isTemplate=e&&e.toString().includes("Template");if(!e)throw new Error(`the template for ${this.name} is not found with.`);return new Promise((t=>{switch(n){case!0:{let n=e.getContent(!0);if(!n)throw new Error(`it might be theres no template in component - ${this.name}`);n.cake_component=this.name,this.html=this.Node(n),this._parseHTML(this.isStatic).then((()=>{t()}))}break;case null:t();break;default:{let n=e;if(!n)throw new Error(`it might be theres no template in component - ${this.name}`);n.cake_component=this.name,this.html=this.Node(n),this.isStatic=!0,this._parseHTML(this.isStatic).then((()=>{t()}))}}}))},K.prototype.createElementAsync=function(){return new Promise((t=>{this.createElement().then((()=>{t()}))})).then((()=>{this.isReady=!0}))},K.prototype._isParsed=!1,K.prototype._parseHTML=function(t=!1){return this.$attrib.inject(this.html,this.name,t).then((()=>{this.original=this.html.cloneNode(),this._isParsed=!0}))},K.prototype.renderQue=function(t={}){if(t.id==undefined&&null!=t.id)throw new Error("renderQue method requires an id.");let e=t.id;return e&&(t.hasqued=!0,this.renderQueing.push({date:(new Date).toString(),id:e,options:t})),this.render(t)},K.prototype.render=function(t={}){if(t.hasqued||this.isConnected&&console.error(`${this.name} is already rendered and connected to the DOM`),t.revokeque&&(this.await.destroy=Promise.resolve()),this.isConnected)return Promise.resolve();let e=t.root,n=t.cleaned,i=t.emit||{},r=t.data||{};if("string"==typeof e){let t=`${e}:not(.cake-template)`;e=[document.querySelector(t)]}let s=this.options.multiple,o=(this.state,{emit:i});return this.isConnected=!0,new Promise(((t,n)=>{e&&(this.root=e),this.isReady?t():this.createElement().then((()=>!this.template&&this.fire.isConnected&&this.fire.isConnected(o,!0))).then((()=>{this.isReady=!0,t()}))})).then((()=>this.await.destroy.then((()=>this.await.animateRemove)).then((()=>new Promise(((t,e)=>{let n=this.$attrib.getWatchItems(this.name);Promise.all(n.map((t=>{if(r[t])return this.$attrib.notifier(t,r[t],null,this.name)}))).then((()=>{t(this.html)}))})).then((t=>(o={element:t,emit:i},new Promise(((e,n)=>{try{this.fire.beforeConnected&&this.fire.beforeConnected(o,!0),e(t)}catch(i){n(i)}}))))).then((t=>{if(!this.isStatic){return(r?(()=>new Promise((e=>{let n=t.getElement();n=this.$templating(r,n),this.html=t=this.Node(n),this.html.replaceDataSrc(),r=null,e()})))():Promise.resolve()).then((()=>this._animatecss("render"))).then((()=>(t.appendTo(this.root,n),!0)))}})).then((()=>{})).then((()=>this.findContainer())).then((()=>{try{return this.fire.isConnected&&this.fire.isConnected(o,!0)}catch(t){console.log(440,t)}})).then((()=>this.findTarget())).then((()=>this.addEvent())).then((()=>this.$animate("render"))).then((()=>(s&&this._smoothReset(),new Promise(((t,e)=>{setTimeout((()=>{this._watchReactive(),t()}),100)})))))))))},K.prototype._animatecss=function(t){try{if(!this.animatecss)return Promise.resolve();let e=this.animatecss[t];return e?Promise.all(Object.keys(e).map((t=>{let n="animate__animated,";n+=e[t];let i=this.html.querySelectorAllIncluded(null,"data-animatecss",t);return i?Promise.all(i.map((t=>{let e=t.classList;for(let n=0;n<e;n++){let i=e[n];i.includes("animate_")&&t.classList.remove(i)}return n.split(",").forEach((e=>{t.classList.add(e.trim())})),t.style.setProperty("--animate-duration","0.3s"),new Promise(((t,e)=>{setTimeout((()=>{t()}),500)}))}))):Promise.resolve()}))):Promise.resolve()}catch(e){return console.error(e),Promise.resolve()}},K.prototype.renderAsync=function(t){this.render(t).then((()=>{this.$persist.append(this.name)}))},K.prototype._smoothReset=function(){this.html=this.original.cloneNode()},K.prototype._hardReset=function(t){return this.$persist.remove(t),this.html=this.original.cloneNode(),!0},K.prototype.reset=function(t={}){if(t.id==undefined&&null!=t.id)throw new Error("renderQue method requires an id.");let e,n=t.id;n&&(e=this.renderQueing.filter((t=>t.id==n)),this.renderQueing=JSON.parse(JSON.stringify(this.renderQueing)).filter((t=>t.id!=n)));let i=this.$animate("remove");return i instanceof Promise?this.await.animateRemove=new Promise((t=>{i.then((()=>this.html.remove())).then((()=>{this.container={}})).then((()=>this.clearState())).then((()=>this._hardReset(this.name))).then((()=>{t()})).then((()=>{if(this.isConnected=!1,this.renderQueing&&this.renderQueing.length&&e){let t=e.options;return t||(t={}),t.revokeque=!0,this.render(t)}}))})):new Promise((t=>{this.html.remove(this.name),this.clearState(),this.container={},this._hardReset(this.name),this.isConnected=!1,t()})).then((()=>{if(this.renderQueing&&this.renderQueing.length&&e){let t=e.options;return t||(t={}),t.revokeque=!0,this.render(t)}}))},K.prototype.addEvent=function(t,e){let n=this.name;function i(t,e,n,i){return function(r){n||r.preventDefault(),i&&r.stopPropagation(),Cake.Observer.notify(e,t,r)}}if(this.targets)for(let r in this.targets)if(this.targets.hasOwnProperty(r)){let t=this.targets[r];for(let e of t){e.sel;let t=e.el,s=e.cb,o=r,a=r.substring(0,2),l=a.includes("~"),c=a.includes("^");l||c?(o=r.slice(1),s=s||o):s||(s=r),t.Ref().get("__cake__events")||t.Ref().set("__cake__events",{});let h=t.Ref().get("__cake__events");h[s]||(t.addEventListener(o,i(s,n,l,c),!0),h[s]=!0,t.Ref().set("__cake__events",h))}}},K.prototype.findTarget=function(){let t=this.$attrib.getEventTarget(this.name);return new Promise((e=>{for(let n of t){let t=this.html.querySelectorAllIncluded(`[data-event=${n.sel}]`);for(let e=0;e<t.length;e++)this.targets[n.event]||(this.targets[n.event]=[]),this.targets[n.event].push({el:t[e],...n})}e()}))},K.prototype.toggler=function(t){let e=this.$attrib.getWatchItemsByType(this.name,"toggle"),n=class{check(t){let n=this.toggle[t];if(n){if(e.length){let t=n.ns,i=e.find((e=>e.name==`ns-${t}`));i&&(n.sel=`[data-toggle=${i.sel}]`)}return n}console.error(`${t} is not found in toggle! choose from ${JSON.stringify(Object.keys(this.toggle))}`)}_toggle(){let t=this.check(this.bind);if(!t)return;let e,n,i=t.basis||"data-name",r=t.cls||"is-active",s=t.mode||"radio",o=t.sel,a=t.persist==undefined||t.persist,l=this.html.querySelectorAll(o);if(l.length){if(1==l.length){let t="boolean"==typeof this.bases,e=!!this.bases,n=l[0];if(a){const i=function(t,e,n){n?t.classList.contains(e)&&t.classList.remove(e):t.classList.contains(e)||t.classList.add(e)};t?(e?(this.cache.createOrUpdate(this.bind,!0),i(n,r,!0)):(this.cache.createOrUpdate(this.bind,!1),i(n,r,!1)),n.classList.toggle(r)):(this.cache.createOrUpdate(this.bind,!n.classList.contains(r)),n.classList.toggle(r))}}else for(let t=0;t<l.length;t++){let o=l[t],c=o.classList.contains(r),h=o.getAttribute(i);h==this.bases?("switch"==s?o.classList.toggle(r):c||o.classList.add(r),a&&this.cache.createOrUpdate(this.bind,h),n=h):c&&(o.classList.remove(r),e=o.getAttribute(i))}return{prev:e,next:n}}}_recall(){let t=this.check(this.bind);if(!t)return;let e=t.basis||"data-name",n=t.cls||"is-active",i=t.sel;return this.cache.get(this.bind).then((t=>{if(!t)return t;let r=t,s=this.html.querySelectorAll(i);if(s.length){if(1==s.length){let t=s[0];r&&t.classList.add(n)}else for(let t=0;t<s.length;t++){let i=s[t],o=i.classList.contains(n);i.getAttribute(e)==r&&(o||i.classList.add(n))}return r}}))}_get(){if(this.check(this.bind))return this.cache.get(this.bind).then((t=>t||t))}constructor(t,e,n,i){this.toggle=i.toggle,this.bind=t,this.bases=e,this.cache=i.$cache,this.html=n}},i=(t,e)=>new n(t,e,this.html,this)._toggle();return i.recall=t=>new n(t,!1,this.html,this)._recall(),i.get=t=>new n(t,!1,this.html,this)._get(),i},K.prototype.findContainer=function(){return new Promise((t=>{try{let e=this.html.getContainers();for(let t=0;t<e.length;t++){let n=e[t],i=n.dataset.container;i&&(this.container[i]=n)}t()}catch(e){console.log(895,e)}}))},K.prototype._validator=function(t,e){if(this.options.validate){this.validate=this.options.validate;this.validate[t]}},K.prototype._watchReactive=function(){if("form"==this.role&&!0===this.options.watch){const t=this.options.validate,e=this.$form();if(e&&e._reactive)return;this.state&&!this.state.formData&&(this.state.formData={});const n=this,i=e=>{const i=e.target,r=i.name||i.id,s=i.value;let o=t[r];if(o){if(o=o.bind(n),o){o(e)&&(this.state&&(this.state.formData[r]=s),this.$scope.set(r,s))}}else this.state&&(this.state.formData[r]=s),this.$scope.set(r,s)};e.addEventListener("change",(t=>{"INPUT"!=t.target.tagName&&"TEXTAREA"!=t.target.tagName&&i(t)})),e.addEventListener("input",(t=>{"INPUT"!=t.target.tagName&&"TEXTAREA"!=t.target.tagName||i(t)})),e._reactive=!0}},K.prototype.observer=function(t){this.observer=new Observer(this,t,function(t){return this.handler[t]}.bind(this))},K.prototype.variable=function(t){Object.keys(t);let e={},n=[];function i(t,n,i){n||(e[t]=`value is not '${i}'`)}for(let r in t)if(t.hasOwnProperty(r)){let e,s=t[r],o=s.type,a=s.value;e=["string","number"].includes(o)?typeof a==o:a instanceof Array?"array"==o:"object"==o,n.push(a),i(r,e,o)}if(Object.keys(e).length)throw new Error(JSON.stringify(e));return n},z=K;var X;r=i("1WNVd");const G=new(i("jU2nf")())({child:"object",storage:"local",name:"_cake_router_cf"});X=function(t,e){const n=[];return class{getComponent(t,e){if(this.componentConf&&this.componentConf[t]){let n=this.componentConf[t].rerender;n&&(t=n.includes(e)?t:null)}return t?this.components.get(t):null}verifyAuth(e){return t.$loaded(this.verifyComponent).then((t=>t.fire[this.verifyComponentHandler](e).then((t=>(this.isauth=t&&1==t.status,t)))))}async authenticate(t){const e=this.unauthRoute==t;if(this.unauthRoute)try{const t=G.get("role",!0)||{},n=t.token;if(0==(await this.verifyAuth(n)).status&&this.logout(),t){if(e){const e=t.role,n=(t.data,this.authRedirectRoute[e]);if(n){const t=n.name;this.goTo(t)}}}else e||this.logout()}catch(n){alert(JSON.stringify(n.message)),e||this.logout()}}login(t,e){let n=t.role,i=t.token,r=t.data,s=(G.createOrUpdate("role",{role:n,token:i,data:r}),e&&e.path),o=e&&e.config;if(!n)throw new Error("role is not provided in router.login");if(!i)throw new Error("token is not provided in router.login");if(!r)throw new Error("data is not provided in router.login");if(s);else{if(!this.authValidRoute||!this.authValidRoute[n])throw new Error("provide route when login is successful");s=this.authValidRoute[n]}this.goTo(s,o)}auth(){const t=G.get("role",!0);return t||{}}logout(){try{G.remove("role")}catch(t){}this.goTo(this.unauthRoute,{replace:!0})}goTo(t,e={}){try{let i=this.route,s=e.params||{},o=e.replace,a=null;const l=Object.entries(i);if(!t){const e=G.get("role",!0).role,n=this.authRedirectRoute[e];n&&(t=n.name)}if(!t)throw new Error("provide routename");for(let e=0;e<l.length;e++){const n=l[e][0],i=l[e][1];if(i.name==t){a=n;break}}if(!a)throw new Error(`${t} is not found in routes`);if("/"==a)return void(o?location.replace(`${location.origin}${location.pathname}`):window.location=`${location.origin}${location.pathname}`);let c;if(a=a.slice(1),s.toString().includes("Object")){let t="";for(let e in s)t+=`${e}=${s[e]}&`;s=t,c=`!/${a}?${s}`}else c=`!/${a}`;if("/"==a&&(c=""),o){let t=`${location.origin}${location.pathname}#${c}`;console.log(276,r.isChrome()&&!r.isFirefox(),t),r.isChrome()&&!r.isFirefox()&&history.replaceState(undefined,undefined,t),location.replace(t)}else{var n=document.createElement("a");n.href=`#${c}`,r.isChrome()&&!r.isFirefox()&&history.pushState(undefined,undefined,n.href),n.click()}}catch(i){console.log(i)}}goBack(){return new Promise(((t,e)=>{window.history.back(),t()}))}persist(){if(!document.hasRouterPersist){let t="DOMContentLoaded";"deviceready"in document&&(t="deviceready"),document.addEventListener(t,(t=>{this.parse(),this.notify().then((()=>this.navigate(!0)))})),document.hasRouterPersist=!0}}watch(){window.hasRouterPop?this.parse():(window.addEventListener("popstate",(t=>{this.parse(),this.notify().then((()=>(console.log("notified"),this.clear().then((()=>(console.log("cleared"),this.navigate().then((()=>{console.log("navigated")}))))))))})),window.hasRouterPop=!0)}compile(t){let e={};for(let n in t){let i=t[n];n=String(n);const s=n.length;let o=n;if(["404"].includes(n)){const e=t[n];i={callback:e,name:n}}else o=o.slice(1);o=o.split("/"),o=o.map(((t,i)=>{let r=t.includes(":"),o="";if(o+=0==i?"^/":"/",o+=r?"(([^/#?]+?))":t,o+=i==s-1?"/?$":"",r){const r=t.replace(":","");e[n]||(e[n]={}),e[n].params={[r]:i}}return o})),e[n]&&e[n].params?e[n]={params:e[n].params,regex:new RegExp(o.join("")),...i}:e[n]={regex:new RegExp(o.join("")),...i},this.authValidRoute&&r.each(this.authValidRoute,function(t,e){t.key;let n=t.value;n==i.name&&(this.authRedirectRoute[n]?(this.authRedirectRoute[n]=i,console.error(`auth ${n} is found in other route`)):this.authRedirectRoute[n]=i)}.bind(this))}return e.length=Object.keys(t).length,e.keys=Object.keys(t),e}parse(){let t,e,n=window.location.hash;if(n?(t=n.includes("#!/")?2:n.includes("#/")?1:null,n=n.slice(t)):(n="/",t=!0),!t)return;const i=new URL(`http://localhost${n}`);let r=i.search,s=i.pathname;const o=this.route.keys,a={};r&&new URLSearchParams(r).forEach(((t,e)=>{a[e]=t}));let l=!1;for(let c=0;c<o.length;c++){const t=this.route[o[c]],n=t.regex,i=t.components,r=t.params,h=t.name,u=t.auth,f=t.overlay,p=t.display,d=t.onrender,m=t.controller;if(r){let t=String(s);t=t.slice(1),t=t.split("/"),Object.entries(r).forEach((e=>{const n=e[0],i=e[1];t[i]&&(a[n]=t[i])}))}if(n.test(s)){e=h,1==u&&this.authenticate(e),this.prev={components:i,state:a,path:s,name:h,prev:this.prev,overlay:f,display:p,onrender:d,controller:m},l=!0;break}}if(!l&&this.route[404]){let t=this.route[404].callback(),e=location.origin,n=location.pathname;this.route[t]?(t="/"==t?`${e}${n}`:"/"==n.slice(-1)?`${e}${n}#!${t}`:`${e}${n}/#!${t}`,location.replace(t)):t&&!this.route[t]&&("/"==e.slice(-1)&&"/"==t[0]&&(t=t.slice(1)),t=`${e}${t}`,location.replace(t))}}navigate(t){if(this.prev){const t=this.prev.components,n=(this.prev.state,this.prev.path),i=(this.prev.name,this.prev.overlay,this.prev.onrender||{});try{if(t.length)return new Promise(((e,r)=>{const s=t.length;let o=0;if(s){const r=()=>{let s=t[o];if(t.length>o){o+=1;let t=s,e=this.getComponent(s,n);s=this.components.get(s),s&&(s.isConnected&&!e?s.fire.softReload?(s.fire.softReload(),s.await.softReload&&s.await.softReload.then((()=>{r()}))):r():s.render({emit:{route:this.prev},...i[t]||{}}).then((()=>{s.await.isConnected?s.await.isConnected&&s.await.isConnected.then((()=>{r()})):r()}))["catch"]((t=>{throw t})))}else e()};r()}else e()}))}catch(e){throw console.log(e),new Error(`some of the component in ${JSON.stringify(t)} in path ${n} of router is not found, make sure the it is created`)}}}static pushState(t,e,n){console.log(n),window.history.pushState(t,e,n);let i=Promise.resolve();if(this.prev){this.prev.components,this.prev.state;const t=this.prev.path;this.prev.name;i=new Promise(((e,n)=>{const i=components.length;let r=0;if(i){const n=async()=>{let i=components[r];components.length>r?(i=this.getComponent(i,t),i?(i.fire.destroy(),i.await.destroy.then((()=>n()))):await n()):e(),r+=1};n()}else e()}))}return i.then((()=>this.navigate()))}clear(){let t=Promise.resolve();if(this.prev&&this.prev.overlay||undefined)return t;const e=async function(t,n,i,r){let s=n[t],o=s,a=e;try{if(n.length>t)if(t+=1,s=this.getComponent(s,this.prev.path),s){if(!s.fire.destroy)throw new Error(`${o} has no destroy handler!`);s.fire.destroy(),s.await.destroy.then((()=>a(t,n,i,r)))}else await a(t,n,i,r);else r()}catch(l){throw l}}.bind(this);if(this.prev&&this.prev.prev){let n=this.prev.prev.components,i=(this.prev.prev.state,this.prev.prev.path,this.prev.prev.name,this.prev.prev.overlay),r=Promise.resolve();return i&&(r=new Promise(((t,i)=>{n.length?e(0,n,this.components,t):t()}))),t=new Promise(((t,i)=>{n.length?e(0,n,this.components,t):t()})),r.then((()=>t))}return t}pushState(t,e,n){window.history.pushState(t,e,n);let i=Promise.resolve();return this.clear(),i.then((()=>this.navigate()))}static subscribe(t){t&&"Function"==t.constructor.name&&n.push(t)}notify(){return Promise.all(n.map((t=>t())))}constructor(t,n){this.options=n,this.unauthRoute=null,this.componentConf=null,this.authValidRoute=null,this.authConfig=function(){if(!this.options)return;const t=this.options.auth,e=this.options.components;if(e&&(this.componentConf=e),t&&t.verify){const e=t.verify;this.verifyComponent=e[0],this.verifyComponentHandler=e[1],this.unauthRoute=t[401]}return t&&t.valid&&(this.authValidRoute=t.valid),null}.bind(this)(),this.authRedirectRoute={},this.route=this.compile(t),this.prev=null,this.components=L,this.watch(),this.persist(),Object.defineProperty(e.prototype,"$router",{configurable:!0,get:()=>({goTo:this.goTo.bind(this),goBack:this.goBack.bind(this),auth:this.auth.bind(this),logout:this.logout.bind(this),login:this.login.bind(this),verify:this.verifyAuth.bind(this),...this.prev}),set(t){}})}}};var Y;const Z=i("jU2nf")();Y=class{listen(t){t=L;let e="DOMContentLoaded";"deviceready"in document&&(e="deviceready"),window.addEventListener(e,(e=>{setTimeout((()=>{this.storage.getAll().then((e=>{if(e&&!e.length)for(let n=0;n<e.length;n++){let i=e[n],r=t.get(i);r.isConnected=!1,r?!r.isConnected&&r.render.bind(r)():console.error(`component ${r} is not found!`)}}))}))}))}append(t){this.storage.create(t)}remove(t){this.storage.remove(t)}constructor(){this.storage=new Z({child:"array",storage:"session",name:"_cake_persistent"})}};const tt=i("jU2nf")();var et,nt,it={};const rt={handlers:{},subscribe:{}};function st(t,e,n){return t[e]==undefined&&(t[e]={}),t[e][n]==undefined?t[e][n]=0:t[e][n]+=1,!0}window.Stat=rt,nt={handlers:{set:function(t,e){return st(rt.handlers,t,e)},get:function(t){rt.handlers[t]!=undefined?console.table(rt.handlers[t]):console.log(null)}},subscribe:{set:function(t,e){return st(rt.subscribe,t,e)},get:function(t){rt.subscribe[t]!=undefined?console.table(rt.subscribe[t]):console.log(null)}}};const ot={};window.Subscribe=ot,et={set:function(t){return new Promise(((e,n)=>{for(component in t)if(t.hasOwnProperty(component)){let e=t[component];for(let t in e)if(e.hasOwnProperty(t)){let n=e[t];ot[component]||(ot[component]={}),ot[component][t]||(ot[component][t]=[]),ot[component][t].push(n),nt.subscribe.set(component,n.original)}}e()}))},get:function(t,e){return ot[t]&&ot[t][e]}};var at;const lt={};function ct(t){this.logger=t||!1,this.results={}}window.Handler=lt,at={set:function(t,e){return new Promise((n=>{for(let i in t)if(t.hasOwnProperty(i)){let n=t[i];lt[e]||(lt[e]={}),lt[e][n.original]=n,nt.handlers.set(e,n.original)}n()}))},get:function(t,e){return lt[t]&&lt[t][e]}},ct.prototype.notify=function(t,e,n){let i=t,r=e,s=n,o=at.get(i,r);if(!o)return void console.error(`no setup handler for the event ${r} in ${i} component`);i=o.binded;let a=new Promise(((t,e)=>{t(o(s))}));return nt.handlers.set(i,o.original),a.then((t=>{let e=[];this.results[i]||(this.results[i]={});let n=et.get(i,r);if(n)for(let s=0;s<n.length;s++){let o=n[s];nt.subscribe.set(i,o.original),e.push(new Promise(((e,n)=>{try{let s=o(t);s&&"Promise"==s.ObjectType?s.then((t=>{this.results[i]||(this.results[i]={}),this.results[i][r]=t,e(t)}))["catch"]((t=>{n(t)})):(this.results[i][r]=s,e(s))}catch(s){console.log(s),n(s)}})))}else this.logger&&console.info(`no subscriber for (${r}) event of (${i}) component`),this.results[i][r]=t;return Promise.all(e).then((()=>(t=null,e=[],!0)))}))},it=ct;var ht;function ut(t){this.componentName=t,this.components={}}ht=function(t){class e{store(t,e){this.storage[t]=e}get options(){if("select"==this.type||"virtual"==this.type){let t={};for(let e in this.storage){let n=this.storage[e];t[e]=n.options}return t}return!1}get value(){if("input"==this.type){let t="";for(let e in this.storage){t=this.storage[e].options[0]}return t}return!1}get query(){let t={};for(let e in this.storage){t=this.storage[e].query[0]||null}return t}get has(){let t="";for(let e in this.storage){t=this.storage[e].query[0]||null}return t}constructor(t){this.type=t,this.storage={}}}const n={options:n=>{let i=n.options,r=n.params;i||(i=[]);let s=i.length>1;return Promise.all(i.map((n=>{n.control;let i=n.field,o=n.tbl,a=n.src,l=n.schema,c=n.type;return t.fire(a,{tbl:o,field:i,params:r}).then((t=>{if(t=t||[],n.query=t,t=t.map((t=>l(t))),"input"!=c){let e=l({});for(let t in e)e.hasOwnProperty(t)&&(e[t]="");t.unshift(e)}return n.options=t,n})).then((t=>{let n=t.type,i=t.control;n||(n="others");const r=new e(n);if(s){let e={};return e[i]||(e[i]=r,e[i].store(i,t)),e}return r.store(i,t),r}))}))).then((t=>s?t.reduce(((t,e)=>(Object.assign(t,e),t)),{}):t[0]))["catch"]((t=>{console.error(t)}))},plot:t=>{let e=t.data,n=t.container;if(!e&&!n)return;const i=(t,n,i)=>{if(!t)return void console.info("root is not provided!");const r=t.querySelectorAll(`${n}`),s=r.length;if(s)for(let o=0;o<s;o++){let t=r[o],n=t.name,s=i(t,e[n],o);if("break"==s)break}else i(null,e)};return i(n,"INPUT.input",(function(t,e){e!=undefined&&("date"==t.type?(e="Invalid Date"==new Date(e)?"":new Date(e).toJSON().split("T")[0],t.value=e):t.value=e)})),setTimeout((()=>{i(n,"SELECT.input:not(.cake-template)",(function(t,e){i(t,"OPTION:not(.cake-template)",(function(n,i,r){if(n){if(n.value==e)return t.selectedIndex=r,"break"}else console.log(n,i,"provide schema")}))}))}),500),Promise.resolve()}};return n},i("1WNVd"),ut.app=function(t){this.name=t.name||""},ut.Components=function(t){return{subscribe:(e,n)=>new Promise(((i,r)=>{let s=setInterval((()=>{ut.Components[t]&&(!function(){let i=ut.Components[t];if(i&&e instanceof Function){let t=e.name;n&&(e=e.bind(n)),e.binded="external",e.original=t,e.listenTo=i.name,i.Subscribe(e)}}(),clearInterval(s),i())}))}))}},ut.Models={},ut.plugin=a,ut.Attributes=new h,ut.Models.$loaded=function(t){return new Promise(((e,n)=>{let i=setInterval((()=>{ut.Models[t]&&(clearInterval(i),e(ut.Models[t]))}));setTimeout((()=>{ut.Models[t]||(clearInterval(i),n(t))}),1e4)}))},ut.MainMessageChannel=function(){let t=new MessageChannel;return{send(e){t.port2.postMessage(e)},receive(e){t.port1.onmessage=function(t){let n=t.data,i=t.isTrusted!=undefined&&t.isTrusted;e(i?{status:1,data:n}:{status:0,err:"not trusted!"})}}}}(),ut.Utils={scopeTrap:t=>!1,scopeNotifier:t=>t},ut.create=function(t,e,n){new ut(t,e,n).create(t,e,n)},ut.init=function(t){return new z(t)},ut.Router=X(ut.Models,z),ut.Persistent=new Y,ut.Persistent.listen(ut.Components),ut.Cache=new tt({name:"cache",storage:"session",child:"object"}),ut.getSubscriber=function(t,e){let n=et,i={};for(let r in n)if(n.hasOwnProperty(r)){let s=n[r];for(let n in s)if(s.hasOwnProperty(n)){let r=s[n];for(let n of r){let r=n,s=r.original,o=r.binded;if(r.listenTo==t)if(s==e)if(i[o]){let t=i[o]instanceof Array?i[o]:[i[o]];i[o]=t.concat(e)}else i[o]=e;else if(!e)if(i[o]){let t=i[o]instanceof Array?i[o]:[i[o]];i[o]=t.concat(s)}else i[o]=s}}}return i},ut.Observer=new it,ut.prototype._defineProperty=function(t,e,n,i){Object.defineProperty(t,e,{configurable:!0,get:()=>n(),set(t){i&&i(t)}})},ut.prototype._defineProperty(z.prototype,"$observer",(function(){return ut.Observer})),ut._globalScope=new J("globalScope"),ut.prototype._defineProperty(z.prototype,"$globalScope",(function(){return ut._globalScope})),ut._universalScope=new J("universalScope"),ut.$universalScope=function(){return ut._universalScope},ut.prototype._defineProperty(z.prototype,"$attrib",(function(){return ut.Attributes})),ut.prototype._defineProperty(z.prototype,"$persist",(function(){return ut.Persistent})),ut.prototype._defineProperty(z.prototype,"$cache",(function(){return ut.Cache})),ut.prototype._defineProperty(z.prototype,"$hash",(function(){return ut.Hasher})),ut.prototype.create=function(t,e,n){let i=new z(t,e,n);const r=new J(t);i.scope&&(()=>{for(let t in i.scope)if(i.scope.hasOwnProperty(t)){const e=i.scope[t];for(let n in e)if(e.hasOwnProperty(n)){let s=e[n];const o=s.name;s=s.bind(i),r.hook(t,o,s)}}})(),r.registerNotifier((function(t,e,n,i){return ut.Attributes.notifier(t,e,n,i)})),ut.Attributes.registerNotifier(t,(function(t,e){return r.notifier(t,e)})),i.compile.then((()=>{let t=i.subscribe,e=i.root,n=(i.html,i.handlers);i.role,i.state;return et.set(t).then((()=>({root:e,handlers:n})))})).then((t=>{const e=t.handlers,n=t.root;at.set(e,i.name),this._defineProperty(i,"root",(function(){if(i._root)return i._root;{let t=n||"#app",e=document.querySelectorAll(t);if(e)return e}throw new Error(`the selector '${n}' as container of component '${i.name}' is not found!`)}),(function(t){Object.assign(i,{_root:t})})),this._defineProperty(i,"$scope",(function(){return r})),"form"==i.role&&(()=>{const t=ht(i),e=()=>{if(i.root.length){let t=i.root[0],e=`${i.formSelector||"FORM"}:not(.cake-template)`;return t.querySelector(e)}return null};for(let n in t)t.hasOwnProperty(n)&&Object.defineProperty(e,n,{get:()=>t[n]});this._defineProperty(i,"$form",(function(){return e}))})()})).then((()=>{i.fire=function(){function t(t,e){if(e=e?"function"==typeof e?e.bind(i)():function(){return e}.bind(i)():null,fn={[t]:()=>e}[t].bind(i),"function"==typeof fn){fn.name=t,fn.original=t,fn.binded=i.name,at.set({[t]:fn},i.name);let r=e;function n(t){let e={};if(!t)return e;let n=t.attributes;if(n)for(let i=0;i<n.length;i++){let t=n[i],r=t.name,s=t.value;e[r]=s}return e}if(e&&(e.element||e.root||e.container)){r={status:0,attributes:{element:n(e.element),root:n(e.root),container:n(e.container)}}}const s=ut.Observer.notify(i.name,t,{}).then((()=>ut.Observer.results[i.name][t]));return i.await[t]=s,i.await[t]}console.error("the param in fire is not an instance of function")}return function(t,e){for(let n in e)if(e.hasOwnProperty(n)){let r=e[n],s=r.original,o={[s]:function(t,e){return undefined,e==undefined&&"destroy"==s&&(e=!0),e==undefined&&(e=!1),e?(i.await[s]=new Promise((e=>{setTimeout((()=>{let n=t||{};ut.Observer.notify(i.name,s,n).then((()=>ut.Observer.results[i.name][s])).then((t=>{e(t)}))["catch"]((t=>{console.log(448,i.name,s,n),console.trace(),console.error(t)}))}))})),i.await[s]):r(t)}};o[s]=o[s].bind(i),o[s].originalName=s,o[s].binded=i.name,t[s]=o[s],t.component=i.name}}(t,i.handlers),t}()})).then((()=>{"view"==i.type&&(i.toggler=i.toggler(i),L.set(t,i))})).then((()=>{i.options.router&&ut.Router.subscribe(i.options.router.bind(i)),i.options.data&&i.options.data.bind(i.data)(i),i.options.init&&i.options.init.bind(i)(),i.options.utils&&i.options.utils.bind(i.utils)(i)})).then((()=>{"model"==i.type&&(ut.Models[t]=i),i.isStatic&&"view"==i.type&&i.render()}))},c=ut,window.Cake=c}();
//# sourceMappingURL=legacy.js.map
